{
  "startTime": 1753397520639,
  "testSuites": [
    {
      "name": "unit",
      "startTime": 1753397520642,
      "tests": [],
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "error": "npx jest --json --outputFile /home/jenner/code/mcps/test-results/unit-results.json --testTimeout 60000 --testPathPattern tests/unit/**/*.test.js --testPathPattern mcp-local-setup/tests/unit/**/*.test.js --testPathPattern **/__tests__/**/*.test.js failed with code 1\njest-haste-map: Haste module naming collision: mcp-vscode\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/ide/vscode/package.json\n    * <rootDir>/dist/ide/vscode/package.json\n\njest-haste-map: Haste module naming collision: mcp-platform-cli\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/mcp-local-setup/cli/package.json\n    * <rootDir>/dist/mcp-local-setup/cli/package.json\n\njest-haste-map: Haste module naming collision: mcp-cli-plugin-git\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/mcp-local-setup/cli/plugins/examples/git-plugin/package.json\n    * <rootDir>/dist/mcp-local-setup/cli/plugins/examples/git-plugin/package.json\n\njest-haste-map: Haste module naming collision: mcp-cli-plugins-installed\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/mcp-local-setup/cli/plugins/installed/package.json\n    * <rootDir>/dist/packages/debian-package/usr/local/mcp-platform/mcp-local-setup/cli/plugins/installed/package.json\n\njest-haste-map: Haste module naming collision: mcp-cli-plugin-docker\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/mcp-local-setup/cli/plugins/examples/docker-plugin/package.json\n    * <rootDir>/dist/packages/debian-package/usr/local/mcp-platform/mcp-local-setup/cli/plugins/examples/docker-plugin/package.json\n\nFAIL mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js\n  ● Phase 5 End-to-End Integration › Complete developer workflow from IDE to production\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Collaborative development with multiple tools\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Progressive rollout with monitoring\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Multi-cloud deployment with unified management\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Debugging production issues with integrated tools\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\nFAIL tests/unit/config/settings.test.js\n  ● Console\n\n    console.error\n      Configuration validation failed: Invalid configuration: port = 70000\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:123:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:124:10)\n\n    console.error\n      Configuration validation failed: Invalid configuration: logLevel = debug\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:131:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:132:10)\n\n    console.error\n      Configuration validation failed: Invalid configuration: nodeEnv = development\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:139:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:140:10)\n\n    console.error\n      Configuration validation failed: Invalid configuration: apiVersion = version1\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:147:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:148:10)\n\n    console.error\n      Configuration validation failed: Invalid configuration: maxRequestSize = 10megabytes\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:155:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:156:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid port\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 123 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 126 |\u001b[39m\n     \u001b[90m 127 |\u001b[39m     it(\u001b[32m'should fail validation with invalid log level'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:124:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid log level\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 131 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m     it(\u001b[32m'should fail validation with invalid node environment'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:132:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid node environment\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 138 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 139 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 140 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 141 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 142 |\u001b[39m\n     \u001b[90m 143 |\u001b[39m     it(\u001b[32m'should fail validation with invalid API version format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:140:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid API version format\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 147 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should fail validation with invalid max request size format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:148:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid max request size format\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 154 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 155 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 156 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:156:10)\n\n  ● Production Settings Configuration › Path Configuration › should have correct absolute paths\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"config/production/../..\"\n    Received string:    \"/home/jenner/code/mcps\"\n\n    \u001b[0m \u001b[90m 164 |\u001b[39m       expect(path\u001b[33m.\u001b[39misAbsolute(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39mroot))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m       expect(path\u001b[33m.\u001b[39misAbsolute(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39m\u001b[36mpublic\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 166 |\u001b[39m       expect(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39mroot)\u001b[33m.\u001b[39mtoContain(\u001b[32m'config/production/../..'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 167 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 168 |\u001b[39m\n     \u001b[90m 169 |\u001b[39m     it(\u001b[32m'should allow overriding paths via environment variables'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toContain (tests/unit/config/settings.test.js:166:35)\n\nFAIL tests/unit/config/features.test.js\n  ● Production Feature Flags Configuration › Rollout Percentage Logic › should roughly match rollout percentage across many users\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 10\n    Received:   2.8000000000000003\n\n    \u001b[0m \u001b[90m 350 |\u001b[39m       \n     \u001b[90m 351 |\u001b[39m       \u001b[90m// Allow 15% variance due to simple hash function and sequential IDs\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 352 |\u001b[39m       expect(actualPercentage)\u001b[33m.\u001b[39mtoBeGreaterThan(rolloutPercentage \u001b[33m-\u001b[39m \u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 353 |\u001b[39m       expect(actualPercentage)\u001b[33m.\u001b[39mtoBeLessThan(rolloutPercentage \u001b[33m+\u001b[39m \u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThan (tests/unit/config/features.test.js:352:32)\n\n(node:3738482) [DEP0147] DeprecationWarning: In future versions of Node.js, fs.rmdir(path, { recursive: true }) will be removed. Use fs.rm(path, { recursive: true }) instead\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL mcp-local-setup/tests/unit/backup/data-manager.unit.test.js\n  ● DataManager Unit Tests › exportServiceData › should export service data volumes\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m             expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m             expect(result\u001b[33m.\u001b[39mvolumes[\u001b[32m'test-service'\u001b[39m])\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m             expect(mockFs\u001b[33m.\u001b[39mmkdir)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m         it(\u001b[32m'should handle export failures'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:132:34)\n\n  ● DataManager Unit Tests › exportServiceData › should handle export failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    \u001b[0m \u001b[90m 143 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m dataManager\u001b[33m.\u001b[39mexportServiceData(services\u001b[33m,\u001b[39m exportPath)\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 145 |\u001b[39m             expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 146 |\u001b[39m             expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m             expect(result\u001b[33m.\u001b[39merrors[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mservice)\u001b[33m.\u001b[39mtoBe(\u001b[32m'failing-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 148 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:145:36)\n\n  ● DataManager Unit Tests › helper methods › should walk directory recursively\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"/test/dir/subdir/file2.txt\"\n    Received array: [\"/test/dir/file1.txt\"]\n\n    \u001b[0m \u001b[90m 447 |\u001b[39m\n     \u001b[90m 448 |\u001b[39m             expect(files)\u001b[33m.\u001b[39mtoContain(\u001b[32m'/test/dir/file1.txt'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 449 |\u001b[39m             expect(files)\u001b[33m.\u001b[39mtoContain(\u001b[32m'/test/dir/subdir/file2.txt'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 450 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 451 |\u001b[39m\n     \u001b[90m 452 |\u001b[39m         it(\u001b[32m'should match file patterns'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toContain (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:449:27)\n\nFAIL tests/integration/security/rate-limiting.test.js\n  ● Console\n\n    console.error\n      Redis consume token error: Error: Redis connection lost\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/integration/security/rate-limiting.test.js:157:50)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 246 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 247 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 248 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis consume token error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[90m// Fail open on Redis errors\u001b[39m\n     \u001b[90m 250 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 251 |\u001b[39m         success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)\n      at Object.<anonymous> (tests/integration/security/rate-limiting.test.js:160:22)\n\n  ● Rate Limiting Integration Tests › IP-based Security Features › should detect and handle suspicious IPs\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 229 |\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[90m// Should be marked as suspicious\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 231 |\u001b[39m       expect(ipLimiter\u001b[33m.\u001b[39misSuspicious(suspiciousIP))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 232 |\u001b[39m\n     \u001b[90m 233 |\u001b[39m       \u001b[90m// Should get reduced limits\u001b[39m\n     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m limit \u001b[33m=\u001b[39m ipLimiter\u001b[33m.\u001b[39mgetRateLimitForIP(suspiciousIP\u001b[33m,\u001b[39m \u001b[32m'/api/data'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/integration/security/rate-limiting.test.js:231:52)\n\n  ● Rate Limiting Integration Tests › Rate Limit Headers and Responses › should set appropriate rate limit headers\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 100\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 99\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.063Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 281 |\u001b[39m\n     \u001b[90m 282 |\u001b[39m       \u001b[90m// Check user rate limit headers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 283 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 284 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Remaining'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m99\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'free'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:283:29)\n\n  ● Rate Limiting Integration Tests › Advanced Rate Limiting Scenarios › should handle different endpoints with different limits\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 5\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 4\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.079Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 464 |\u001b[39m       \u001b[36mawait\u001b[39m middleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 465 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo\u001b[33m.\u001b[39mresource)\u001b[33m.\u001b[39mtoBe(\u001b[32m'uploads'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 466 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Free tier upload limit\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 467 |\u001b[39m\n     \u001b[90m 468 |\u001b[39m       \u001b[90m// Test export endpoint\u001b[39m\n     \u001b[90m 469 |\u001b[39m       req\u001b[33m.\u001b[39mpath \u001b[33m=\u001b[39m \u001b[32m'/api/export'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:466:29)\n\n(node:3738387) [DEP0147] DeprecationWarning: In future versions of Node.js, fs.rmdir(path, { recursive: true }) will be removed. Use fs.rm(path, { recursive: true }) instead\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL tests/unit/security/ip-limiter.test.js\n  ● Console\n\n    console.warn\n      Could not determine client IP\n\n    \u001b[0m \u001b[90m 344 |\u001b[39m         \u001b[36mconst\u001b[39m ip \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetClientIP(req)\u001b[33m;\u001b[39m\n     \u001b[90m 345 |\u001b[39m         \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mip) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 346 |\u001b[39m           console\u001b[33m.\u001b[39mwarn(\u001b[32m'Could not determine client IP'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 347 |\u001b[39m           \u001b[36mreturn\u001b[39m next()\u001b[33m;\u001b[39m\n     \u001b[90m 348 |\u001b[39m         }\n     \u001b[90m 349 |\u001b[39m\u001b[0m\n\n      at warn (security/rate-limiting/ip-limiter.js:346:19)\n      at Object.middleware (tests/unit/security/ip-limiter.test.js:536:13)\n\n    console.error\n      IP rate limit middleware error: Error: Redis storage not implemented in this module\n          at IPRateLimiter.consumeToken (/home/jenner/code/mcps/security/rate-limiting/ip-limiter.js:332:11)\n          at consumeToken (/home/jenner/code/mcps/security/rate-limiting/ip-limiter.js:361:35)\n          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/ip-limiter.test.js:547:13)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'IP rate limit middleware error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m         next()\u001b[33m;\u001b[39m \u001b[90m// Fail open\u001b[39m\n     \u001b[90m 392 |\u001b[39m       }\n     \u001b[90m 393 |\u001b[39m     }\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/rate-limiting/ip-limiter.js:390:17)\n      at Object.<anonymous> (tests/unit/security/ip-limiter.test.js:547:7)\n\n  ● IPRateLimiter › constructor › should accept custom options\n\n    TypeError: customLimiter.options.ipWhitelist.has is not a function\n\n    \u001b[0m \u001b[90m 34 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mtrustProxy)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 35 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mproxyDepth)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 36 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mipWhitelist\u001b[33m.\u001b[39mhas(\u001b[32m'192.168.1.1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 37 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mipBlacklist\u001b[33m.\u001b[39mhas(\u001b[32m'10.0.0.1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 38 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39mlimits\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m.\u001b[39mlimit)\u001b[33m.\u001b[39mtoBe(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 39 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.has (tests/unit/security/ip-limiter.test.js:36:48)\n\nFAIL tests/unit/config/env-validation.test.js\n  ● Console\n\n    console.error\n      Configuration validation failed: Invalid configuration: nodeEnv = development\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at Object.require (tests/unit/config/env-validation.test.js:342:7)\n\n  ● Environment Configuration Validation › Environment Variable Types › should handle numeric environment variables correctly\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 234 |\u001b[39m         \n     \u001b[90m 235 |\u001b[39m         \u001b[36mconst\u001b[39m invalidValue \u001b[33m=\u001b[39m config\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39msplit(\u001b[32m'.'\u001b[39m)\u001b[33m.\u001b[39mreduce((obj\u001b[33m,\u001b[39m key) \u001b[33m=>\u001b[39m obj[key]\u001b[33m,\u001b[39m module)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 236 |\u001b[39m         expect(\u001b[33mNumber\u001b[39m\u001b[33m.\u001b[39misNaN(invalidValue))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// parseInt returns NaN for invalid input\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 237 |\u001b[39m         \n     \u001b[90m 238 |\u001b[39m         \u001b[36mdelete\u001b[39m process\u001b[33m.\u001b[39menv[envVar]\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m       }\u001b[0m\n\n      at Object.toBe (tests/unit/config/env-validation.test.js:236:44)\n\n  ● Environment Configuration Validation › Cross-Module Consistency › should have consistent timeout values across modules\n\n    Invalid time format: 45000\n\n    \u001b[0m \u001b[90m  8 |\u001b[39m   \u001b[36mconst\u001b[39m match \u001b[33m=\u001b[39m timeStr\u001b[33m.\u001b[39mmatch(\u001b[35m/^(\\d+)([smhd])$/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mmatch) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 10 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Invalid time format: ${timeStr}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 11 |\u001b[39m   }\n     \u001b[90m 12 |\u001b[39m   \n     \u001b[90m 13 |\u001b[39m   \u001b[36mconst\u001b[39m value \u001b[33m=\u001b[39m parseInt(match[\u001b[35m1\u001b[39m]\u001b[33m,\u001b[39m \u001b[35m10\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at parseTimeToMs (config/production/limits.js:10:11)\n      at Object.parseTimeToMs (config/production/limits.js:248:16)\n      at Object.require (tests/unit/config/env-validation.test.js:381:22)\n\nFAIL mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js\n  ● BackupManager Unit Tests › createBackup › should create a full backup\n\n    Backup creation failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 200 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Backup creation failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m         }\n     \u001b[90m 203 |\u001b[39m     }\n     \u001b[90m 204 |\u001b[39m\u001b[0m\n\n      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:112:30)\n\n  ● BackupManager Unit Tests › createBackup › should create incremental backup\n\n    Backup creation failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 200 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Backup creation failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m         }\n     \u001b[90m 203 |\u001b[39m     }\n     \u001b[90m 204 |\u001b[39m\u001b[0m\n\n      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:138:30)\n\n  ● BackupManager Unit Tests › restoreBackup › should restore a backup\n\n    Restore failed: Backup integrity check failed\n\n    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 323 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 324 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Restore failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 325 |\u001b[39m         }\n     \u001b[90m 326 |\u001b[39m     }\n     \u001b[90m 327 |\u001b[39m\u001b[0m\n\n      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:239:28)\n\n  ● BackupManager Unit Tests › restoreBackup › should handle dry run mode\n\n    Restore failed: Backup integrity check failed\n\n    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 323 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 324 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Restore failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 325 |\u001b[39m         }\n     \u001b[90m 326 |\u001b[39m     }\n     \u001b[90m 327 |\u001b[39m\u001b[0m\n\n      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:257:28)\n\n  ● BackupManager Unit Tests › cleanupBackups › should cleanup backups older than maxAge\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 5\n\n    \u001b[0m \u001b[90m 430 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 431 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 432 |\u001b[39m             expect(result\u001b[33m.\u001b[39mdeletedCount)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 433 |\u001b[39m             expect(backupManager\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mhas(\u001b[32m'backup-1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 434 |\u001b[39m             expect(backupManager\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mhas(\u001b[32m'backup-2'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:432:41)\n\n  ● BackupManager Unit Tests › importBackup/exportBackup › should import backup from local filesystem\n\n    Import failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 510 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 511 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 512 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Import failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 513 |\u001b[39m         }\n     \u001b[90m 514 |\u001b[39m     }\n     \u001b[90m 515 |\u001b[39m\u001b[0m\n\n      at BackupManager.importBackup (mcp-local-setup/scripts/backup-manager.js:512:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:461:30)\n\nFAIL mcp-local-setup/tests/unit/config/configuration-manager.test.js\n  ● ConfigurationManager › loadConfig › should load configuration for an environment\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m     describe(\u001b[32m'loadConfig'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 43 |\u001b[39m         it(\u001b[32m'should load configuration for an environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             \n     \u001b[90m 47 |\u001b[39m             \u001b[36mconst\u001b[39m config \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mloadConfig(\u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:44:23)\n\n  ● ConfigurationManager › loadConfig › should throw error for non-existent environment\n\n    TypeError: fs.access.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 54 |\u001b[39m         \n     \u001b[90m 55 |\u001b[39m         it(\u001b[32m'should throw error for non-existent environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 56 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 57 |\u001b[39m             \n     \u001b[90m 58 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mloadConfig(\u001b[32m'nonexistent'\u001b[39m))\n     \u001b[90m 59 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Configuration for environment 'nonexistent' not found\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:56:23)\n\n  ● ConfigurationManager › loadConfig › should include secrets when requested\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m         \n     \u001b[90m 62 |\u001b[39m         it(\u001b[32m'should include secrets when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'DB_PASSWORD.enc'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 66 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:63:23)\n\n  ● ConfigurationManager › loadConfig › should apply runtime overrides\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m         \n     \u001b[90m 77 |\u001b[39m         it(\u001b[32m'should apply runtime overrides'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 80 |\u001b[39m             \n     \u001b[90m 81 |\u001b[39m             \u001b[36mconst\u001b[39m overrides \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:78:23)\n\n  ● ConfigurationManager › loadConfig › should validate configuration when requested\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 92 |\u001b[39m         \n     \u001b[90m 93 |\u001b[39m         it(\u001b[32m'should validate configuration when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 94 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 95 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 96 |\u001b[39m             \n     \u001b[90m 97 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:94:23)\n\n  ● ConfigurationManager › saveConfig › should save configuration to file\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 177 |\u001b[39m     describe(\u001b[32m'saveConfig'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 178 |\u001b[39m         it(\u001b[32m'should save configuration to file'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 179 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 180 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m             \n     \u001b[90m 182 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39msaveConfig(mockConfig\u001b[33m,\u001b[39m \u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:179:22)\n\n  ● ConfigurationManager › saveConfig › should create backup when requested\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 195 |\u001b[39m         \n     \u001b[90m 196 |\u001b[39m         it(\u001b[32m'should create backup when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 198 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:197:22)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should encrypt and save secrets\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m     describe(\u001b[32m'getSecrets and setSecrets'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 219 |\u001b[39m         it(\u001b[32m'should encrypt and save secrets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m \u001b[90m// No existing metadata\u001b[39m\n     \u001b[90m 222 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:220:22)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should decrypt and retrieve secrets\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 239 |\u001b[39m         it(\u001b[32m'should decrypt and retrieve secrets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 240 |\u001b[39m             \u001b[36mconst\u001b[39m encryptedData \u001b[33m=\u001b[39m configManager\u001b[33m.\u001b[39m_encrypt(\u001b[32m'secret-value'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 241 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(encryptedData)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 242 |\u001b[39m             \n     \u001b[90m 243 |\u001b[39m             \u001b[36mconst\u001b[39m secrets \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mgetSecrets([\u001b[32m'API_KEY'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:241:25)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should throw error for non-existent secret\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 247 |\u001b[39m         \n     \u001b[90m 248 |\u001b[39m         it(\u001b[32m'should throw error for non-existent secret'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 250 |\u001b[39m             \n     \u001b[90m 251 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mgetSecrets([\u001b[32m'NONEXISTENT'\u001b[39m]))\n     \u001b[90m 252 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Secret 'NONEXISTENT' not found\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:249:25)\n\n  ● ConfigurationManager › environment management › should list available environments\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 284 |\u001b[39m     describe(\u001b[32m'environment management'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 285 |\u001b[39m         it(\u001b[32m'should list available environments'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 286 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'dev.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'prod.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'README.md'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 287 |\u001b[39m             \n     \u001b[90m 288 |\u001b[39m             \u001b[36mconst\u001b[39m environments \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mlistEnvironments()\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:286:24)\n\n  ● ConfigurationManager › environment management › should create new environment\n\n    TypeError: fs.access.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 292 |\u001b[39m         \n     \u001b[90m 293 |\u001b[39m         it(\u001b[32m'should create new environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 294 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m \u001b[90m// Doesn't exist\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 295 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m             \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:294:23)\n\n  ● ConfigurationManager › environment management › should throw error if environment already exists\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 311 |\u001b[39m         \n     \u001b[90m 312 |\u001b[39m         it(\u001b[32m'should throw error if environment already exists'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 313 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m \u001b[90m// Exists\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 314 |\u001b[39m             \n     \u001b[90m 315 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mcreateEnvironment(\u001b[32m'existing'\u001b[39m))\n     \u001b[90m 316 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Environment 'existing' already exists\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:313:23)\n\n  ● ConfigurationManager › environment management › should delete environment\n\n    TypeError: fs.unlink.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m         \n     \u001b[90m 319 |\u001b[39m         it(\u001b[32m'should delete environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m             fs\u001b[33m.\u001b[39munlink\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m             fs\u001b[33m.\u001b[39mrmdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 322 |\u001b[39m             \n     \u001b[90m 323 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mdeleteEnvironment(\u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:320:23)\n\n  ● ConfigurationManager › import/export › should import JSON configuration\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 348 |\u001b[39m         \n     \u001b[90m 349 |\u001b[39m         it(\u001b[32m'should import JSON configuration'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 350 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 351 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 352 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 353 |\u001b[39m                 valid\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:350:22)\n\n  ● ConfigurationManager › import/export › should merge imported configuration when requested\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 373 |\u001b[39m             \n     \u001b[90m 374 |\u001b[39m             configManager\u001b[33m.\u001b[39mloadConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(existingConfig)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 375 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 376 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 377 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 378 |\u001b[39m                 valid\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:375:22)\n\nFAIL tests/integration/security/middleware-chain.test.js\n  ● Security Middleware Chain Integration › Complete Security Middleware Stack › should process request through full security stack\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m     it(\u001b[32m'should process request through full security stack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 95 |\u001b[39m       \u001b[90m// Setup middleware chain\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n     \u001b[90m 98 |\u001b[39m       app\u001b[33m.\u001b[39muse(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m 99 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:96:32)\n\n  ● Security Middleware Chain Integration › Complete Security Middleware Stack › should handle authentication failure in middleware chain\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m       \u001b[90m// Setup middleware chain with required auth\u001b[39m\n     \u001b[90m 119 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m       app\u001b[33m.\u001b[39muse(userLimiter\u001b[33m.\u001b[39mcreateMiddleware(\u001b[32m'api-calls'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m\n     \u001b[90m 123 |\u001b[39m       \u001b[90m// No authentication provided\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:120:23)\n\n  ● Security Middleware Chain Integration › Authentication Middleware Combinations › should support multiple authentication methods\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 156 |\u001b[39m       \u001b[36mconst\u001b[39m authMiddleware \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 157 |\u001b[39m         \u001b[90m// Try JWT first\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 158 |\u001b[39m         \u001b[36mconst\u001b[39m jwtMiddleware \u001b[33m=\u001b[39m jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 159 |\u001b[39m         \u001b[36mawait\u001b[39m jwtMiddleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {})\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\n     \u001b[90m 161 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:158:39)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:178:17)\n\n  ● Security Middleware Chain Integration › Authentication Middleware Combinations › should enforce permission requirements across auth methods\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       app\u001b[33m.\u001b[39muse(\u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 208 |\u001b[39m         \u001b[90m// Try both auth methods\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m         \u001b[36mawait\u001b[39m jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {})\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m         \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mreq\u001b[33m.\u001b[39muser) {\n     \u001b[90m 211 |\u001b[39m           \u001b[36mawait\u001b[39m apiKeyManager\u001b[33m.\u001b[39mmiddleware()(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 212 |\u001b[39m         } \u001b[36melse\u001b[39m {\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:209:23)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:221:17)\n\n  ● Security Middleware Chain Integration › CORS and Security Headers › should handle preflight requests with security headers\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 235 |\u001b[39m     it(\u001b[32m'should handle preflight requests with security headers'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 236 |\u001b[39m       \u001b[90m// Setup middleware\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 237 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 238 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m\n     \u001b[90m 240 |\u001b[39m       \u001b[90m// Preflight request\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:237:32)\n\n  ● Security Middleware Chain Integration › CORS and Security Headers › should apply CSP headers dynamically\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 266 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 267 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 269 |\u001b[39m       app\u001b[33m.\u001b[39muse(dynamicCSP)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n     \u001b[90m 271 |\u001b[39m       \u001b[90m// Test admin route\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:268:32)\n\n  ● Security Middleware Chain Integration › Rate Limiting with Authentication › should apply different rate limits for authenticated vs anonymous users\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m     it(\u001b[32m'should apply different rate limits for authenticated vs anonymous users'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 286 |\u001b[39m       \u001b[90m// Setup middleware chain\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m       app\u001b[33m.\u001b[39muse(\u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 289 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\n     \u001b[90m 290 |\u001b[39m           \u001b[90m// Authenticated users get user-based limits\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:287:23)\n\n  ● Security Middleware Chain Integration › Rate Limiting with Authentication › should combine IP and user rate limiting for defense in depth\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m       \u001b[90m// Setup both limiters\u001b[39m\n     \u001b[90m 319 |\u001b[39m       app\u001b[33m.\u001b[39muse(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m       app\u001b[33m.\u001b[39muse((req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 322 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\n     \u001b[90m 323 |\u001b[39m           \u001b[36mconst\u001b[39m userMiddleware \u001b[33m=\u001b[39m userLimiter\u001b[33m.\u001b[39mcreateMiddleware(\u001b[32m'api-calls'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:320:23)\n\n  ● Security Middleware Chain Integration › Advanced Middleware Patterns › should support conditional middleware application\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 432 |\u001b[39m         } \u001b[36melse\u001b[39m \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mstartsWith(\u001b[32m'/api'\u001b[39m)) {\n     \u001b[90m 433 |\u001b[39m           \u001b[90m// API routes - full security\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 434 |\u001b[39m           \u001b[36mreturn\u001b[39m helmetMiddleware\u001b[33m.\u001b[39mmiddleware()(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mstartsWith(\u001b[32m'/admin'\u001b[39m)) {\n     \u001b[90m 436 |\u001b[39m           \u001b[90m// Admin routes - strict security\u001b[39m\n     \u001b[90m 437 |\u001b[39m           res\u001b[33m.\u001b[39msetHeader(\u001b[32m'X-Admin-Route'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'true'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:434:35)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:467:17)\n\n  ● Security Middleware Chain Integration › Advanced Middleware Patterns › should support middleware composition\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 487 |\u001b[39m         }\n     \u001b[90m 488 |\u001b[39m         \u001b[36mif\u001b[39m (options\u001b[33m.\u001b[39mhelmet) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 489 |\u001b[39m           middlewares\u001b[33m.\u001b[39mpush(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 490 |\u001b[39m         }\n     \u001b[90m 491 |\u001b[39m         \u001b[36mif\u001b[39m (options\u001b[33m.\u001b[39mrateLimit) {\n     \u001b[90m 492 |\u001b[39m           middlewares\u001b[33m.\u001b[39mpush(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:489:45)\n      at Object.securityMiddleware (tests/integration/security/middleware-chain.test.js:512:15)\n\nFAIL mcp-local-setup/tests/unit/config/secret-manager.test.js\n  ● SecretManager › backupSecrets › should create backup of secrets directory\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 211 |\u001b[39m         it(\u001b[32m'should create backup of secrets directory'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 212 |\u001b[39m             \u001b[36mconst\u001b[39m mockFiles \u001b[33m=\u001b[39m [\u001b[32m'secret1.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'secret2.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'_metadata.json'\u001b[39m]\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 213 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue(mockFiles)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 214 |\u001b[39m             fs\u001b[33m.\u001b[39mstat\u001b[33m.\u001b[39mmockResolvedValue({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 215 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 216 |\u001b[39m             fs\u001b[33m.\u001b[39mcopyFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:213:24)\n\n  ● SecretManager › backupSecrets › should skip directories when backing up\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 226 |\u001b[39m         \n     \u001b[90m 227 |\u001b[39m         it(\u001b[32m'should skip directories when backing up'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 228 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'file.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'subdir'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 229 |\u001b[39m             fs\u001b[33m.\u001b[39mstat\n     \u001b[90m 230 |\u001b[39m                 \u001b[33m.\u001b[39mmockResolvedValueOnce({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m })\n     \u001b[90m 231 |\u001b[39m                 \u001b[33m.\u001b[39mmockResolvedValueOnce({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:228:24)\n\nFAIL tests/unit/security/user-limiter.test.js\n  ● Console\n\n    console.error\n      User rate limit middleware error: Error: Test error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:586:62)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 381 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'User rate limit middleware error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m         \n     \u001b[90m 384 |\u001b[39m         \u001b[36mif\u001b[39m (skipOnError) {\n     \u001b[90m 385 |\u001b[39m           next()\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/rate-limiting/user-limiter.js:382:17)\n      at Object.<anonymous> (tests/unit/security/user-limiter.test.js:590:7)\n\n    console.error\n      User rate limit middleware error: Error: Test error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:586:62)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 381 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'User rate limit middleware error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m         \n     \u001b[90m 384 |\u001b[39m         \u001b[36mif\u001b[39m (skipOnError) {\n     \u001b[90m 385 |\u001b[39m           next()\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/rate-limiting/user-limiter.js:382:17)\n      at Object.<anonymous> (tests/unit/security/user-limiter.test.js:597:7)\n\n    console.error\n      Tiered rate limit error: Error: Test error\n          at UserRateLimiter.<anonymous> (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:655:15)\n          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:397:39\n          at UserRateLimiter.<anonymous> (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:404:13)\n          at UserRateLimiter.mockConstructor [as createMiddleware] (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:148:19)\n          at createMiddleware (/home/jenner/code/mcps/security/rate-limiting/user-limiter.js:415:33)\n          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:660:13)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 416 |\u001b[39m         \u001b[36mreturn\u001b[39m middleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 417 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 418 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'Tiered rate limit error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 419 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m       }\n     \u001b[90m 421 |\u001b[39m     }\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/rate-limiting/user-limiter.js:418:17)\n      at Object.middleware (tests/unit/security/user-limiter.test.js:660:13)\n\n  ● UserRateLimiter › createMiddleware › should create middleware that allows requests\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 100\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 99\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.073Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 484 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 485 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo\u001b[33m.\u001b[39mresource)\u001b[33m.\u001b[39mtoBe(\u001b[32m'api-calls'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 486 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 487 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Remaining'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m99\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 488 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'free'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 489 |\u001b[39m       expect(next)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/user-limiter.test.js:486:29)\n\n  ● UserRateLimiter › cleanup › should handle unlimited tier in cleanup\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 752 |\u001b[39m       \n     \u001b[90m 753 |\u001b[39m       \u001b[90m// Should still exist as enterprise has unlimited (-1) limit\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 754 |\u001b[39m       expect(userLimiter\u001b[33m.\u001b[39mmemoryStore\u001b[33m.\u001b[39mhas(\u001b[32m'user-ratelimit:enterprise-user:api-calls'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 755 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 756 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 757 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/unit/security/user-limiter.test.js:754:87)\n\n/home/jenner/code/mcps/node_modules/expect/build/index.js:314\n      throw error;\n      ^\n\nJestAssertionError: expect(received).toBe(expected) // Object.is equality\n\nExpected: 2\nReceived: 1\n    at Timeout.toBe [as _onTimeout] (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:317:34)\n    at listOnTimeout (node:internal/timers:588:17)\n    at processTimers (node:internal/timers:523:7) {\n  matcherResult: {\n    actual: 1,\n    expected: 2,\n    message: 'expect(received).toBe(expected) // Object.is equality\\n' +\n      '\\n' +\n      'Expected: 2\\n' +\n      'Received: 1',\n    name: 'toBe',\n    pass: false\n  }\n}\n\nNode.js v22.17.0\nFAIL mcp-local-setup/tests/integration/configuration.integration.test.js\n  ● Configuration Management Integration Tests › Environment Configuration › should create new environment\n\n    Schema version '1.0.0' not found\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m             }\n     \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:160:13)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should load environment configuration\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:167:34)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should apply runtime overrides\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:191:34)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should list all environments\n\n    Schema version '1.0.0' not found\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m             }\n     \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:203:13)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should get configuration metadata\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.getConfigMetadata (mcp-local-setup/config/advanced/configuration-manager.js:367:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:215:30)\n\n  ● Configuration Management Integration Tests › Configuration Validation › should detect validation errors\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 256 |\u001b[39m             \n     \u001b[90m 257 |\u001b[39m             \u001b[36mconst\u001b[39m nameError \u001b[33m=\u001b[39m result\u001b[33m.\u001b[39merrors\u001b[33m.\u001b[39mfind(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mincludes(\u001b[32m'name'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 258 |\u001b[39m             expect(nameError)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 259 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n     \u001b[90m 261 |\u001b[39m         it(\u001b[32m'should provide validation warnings'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeDefined (mcp-local-setup/tests/integration/configuration.integration.test.js:258:31)\n\n  ● Configuration Management Integration Tests › Secret Management › should list secret metadata without values\n\n    expect(received).toBeInstanceOf(expected)\n\n    Expected constructor: Date\n\n    Received value has no prototype\n    Received value: \"2025-07-24T22:52:02.012Z\"\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m             expect(testSecret)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 319 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mdescription)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mcreatedAt)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mDate\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mvalue)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m \u001b[90m// Should not expose value\u001b[39m\n     \u001b[90m 322 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 323 |\u001b[39m\u001b[0m\n\n      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/configuration.integration.test.js:320:42)\n\n  ● Configuration Management Integration Tests › Secret Management › should load config with secrets\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:344:39)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should export configuration as JSON\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:395:30)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should throw error for unsupported YAML format\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"YAML export not yet implemented\"\n    Received message:   \"Configuration for environment 'test-integration' not found\"\n\n        \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 70 |\u001b[39m             }\n         \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n         \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:407:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:410:25)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should export configuration as env file\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:414:30)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should merge imported configuration\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:449:36)\n\n  ● Configuration Management Integration Tests › Configuration Persistence › should save configuration changes\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:470:36)\n\n  ● Configuration Management Integration Tests › Configuration Persistence › should rollback on save failure\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:502:31)\n\n  ● Configuration Management Integration Tests › Error Handling › should prevent duplicate environment creation\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Environment already exists\"\n    Received message:   \"Schema version '1.0.0' not found\"\n\n        \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 279 |\u001b[39m             }\n         \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n         \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:538:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:539:26)\n\nFAIL tests/unit/security/redis-limiter.test.js\n  ● Console\n\n    console.error\n      Redis rate limit check error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:168:57)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis rate limit check error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m       \u001b[90m// Fail open - allow request on Redis errors\u001b[39m\n     \u001b[90m 122 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 123 |\u001b[39m         allowed\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as checkLimit] (security/rate-limiting/redis-limiter.js:120:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:170:22)\n\n    console.error\n      Redis rate limit check error: Error: Redis pipeline error\n          at RedisRateLimiter.checkLimit (/home/jenner/code/mcps/security/rate-limiting/redis-limiter.js:80:15)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:184:22)\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis rate limit check error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m       \u001b[90m// Fail open - allow request on Redis errors\u001b[39m\n     \u001b[90m 122 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 123 |\u001b[39m         allowed\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as checkLimit] (security/rate-limiting/redis-limiter.js:120:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:184:22)\n\n    console.error\n      Redis consume token error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:257:46)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 246 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 247 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 248 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis consume token error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[90m// Fail open on Redis errors\u001b[39m\n     \u001b[90m 250 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 251 |\u001b[39m         success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:259:22)\n\n    console.error\n      Redis reset limit error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:284:45)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 272 |\u001b[39m       \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 274 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis reset limit error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage }\u001b[33m;\u001b[39m\n     \u001b[90m 276 |\u001b[39m     }\n     \u001b[90m 277 |\u001b[39m   }\u001b[0m\n\n      at RedisRateLimiter.error [as resetLimit] (security/rate-limiting/redis-limiter.js:274:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:286:22)\n\n    console.error\n      Redis get usage error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:325:58)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 312 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 313 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 314 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis get usage error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 315 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 316 |\u001b[39m         used\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 317 |\u001b[39m         limit\u001b[33m:\u001b[39m ruleConfig\u001b[33m.\u001b[39mlimit\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as getUsage] (security/rate-limiting/redis-limiter.js:314:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:327:22)\n\n    console.error\n      Redis consume token error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:472:46)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 246 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 247 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 248 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis consume token error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[90m// Fail open on Redis errors\u001b[39m\n     \u001b[90m 250 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 251 |\u001b[39m         success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)\n      at security/rate-limiting/redis-limiter.js:372:24\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:477:7)\n\n    console.error\n      Redis get stats error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:551:46)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 453 |\u001b[39m       \u001b[36mreturn\u001b[39m stats\u001b[33m;\u001b[39m\n     \u001b[90m 454 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 455 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis get stats error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 456 |\u001b[39m       \u001b[36mreturn\u001b[39m { \u001b[33m...\u001b[39mstats\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage }\u001b[33m;\u001b[39m\n     \u001b[90m 457 |\u001b[39m     }\n     \u001b[90m 458 |\u001b[39m   }\u001b[0m\n\n      at RedisRateLimiter.error [as getStats] (security/rate-limiting/redis-limiter.js:455:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:553:21)\n\n    console.error\n      Redis cleanup error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:620:46)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 496 |\u001b[39m       \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m cleaned }\u001b[33m;\u001b[39m\n     \u001b[90m 497 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 498 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis cleanup error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 499 |\u001b[39m       \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage }\u001b[33m;\u001b[39m\n     \u001b[90m 500 |\u001b[39m     }\n     \u001b[90m 501 |\u001b[39m   }\u001b[0m\n\n      at RedisRateLimiter.error [as cleanup] (security/rate-limiting/redis-limiter.js:498:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:622:22)\n\n  ● RedisRateLimiter › checkLimit › should calculate correct reset time from oldest entry\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1753399322093\n    Received: NaN\n\n    \u001b[0m \u001b[90m 162 |\u001b[39m       \n     \u001b[90m 163 |\u001b[39m       \u001b[36mconst\u001b[39m expectedReset \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(oldestTime \u001b[33m+\u001b[39m \u001b[35m3600000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(result\u001b[33m.\u001b[39mresetAt\u001b[33m.\u001b[39mgetTime())\u001b[33m.\u001b[39mtoBe(expectedReset\u001b[33m.\u001b[39mgetTime())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 165 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m\n     \u001b[90m 167 |\u001b[39m     it(\u001b[32m'should fail open on Redis errors'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (tests/unit/security/redis-limiter.test.js:164:40)\n\n  ● RedisRateLimiter › createMiddleware › should block requests exceeding limit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n      Object {\n    -   \"blocked\": false,\n    +   \"blocked\": undefined,\n        \"error\": \"Too many requests\",\n    -   \"retryAfter\": Any<Date>,\n    +   \"retryAfter\": 2025-07-24T23:52:02.158Z,\n      },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 435 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Retry-After'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 436 |\u001b[39m       expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m429\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 437 |\u001b[39m       expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 438 |\u001b[39m         error\u001b[33m:\u001b[39m \u001b[32m'Too many requests'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 439 |\u001b[39m         retryAfter\u001b[33m:\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mDate\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 440 |\u001b[39m         blocked\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/redis-limiter.test.js:437:24)\n\nFAIL mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js\n  ● Service Mesh and Orchestration Integration › Services deployed to K8s are automatically registered in mesh\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Traffic management policies apply to orchestrated services\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Service mesh mTLS works with orchestrator networking\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › SDK can query services through mesh-enabled endpoints\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Circuit breaker policies protect orchestrated services\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Service mesh observability integrates with orchestrator metrics\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Canary deployments use both orchestration and mesh\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Fault injection tests orchestrated service resilience\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\nFAIL tests/integration/phase6/security-health-integration.test.js\n  ● Security and Health Monitoring Integration › API authentication integrates with health status\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"authentication\"\n    Received path: []\n\n    Expected value: \"enabled\"\n    Received value: {\"lastCheck\": null, \"message\": \"Not checked yet\", \"status\": \"pending\"}\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m     \u001b[90m// Then health should include auth status\u001b[39m\n     \u001b[90m 71 |\u001b[39m     expect(health\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m     expect(health\u001b[33m.\u001b[39mdetails)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'authentication'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'enabled'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 74 |\u001b[39m\n     \u001b[90m 75 |\u001b[39m   test(\u001b[32m'Service dependencies include security components'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveProperty (tests/integration/phase6/security-health-integration.test.js:72:28)\n\nFAIL tests/integration/monitoring/logging-pipeline.test.js\n  ● Logging Pipeline Integration › End-to-End Logging › should log messages through the complete pipeline\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › End-to-End Logging › should apply formatters correctly\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › End-to-End Logging › should handle high-volume logging\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should rotate logs based on size\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should compress rotated files\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should clean up old logs\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Error Handling › should handle logging errors gracefully\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Error Handling › should continue logging after transport failure\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Context and Correlation › should maintain correlation IDs across log entries\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Context and Correlation › should preserve context through async operations\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Performance Monitoring › should log performance metrics\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Multi-transport Scenarios › should route logs to appropriate transports based on level\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\nFAIL tests/unit/security/helmet-middleware.test.js\n  ● Console\n\n    console.warn\n      CSP Violation: {\n        documentUri: 'https://example.com/page',\n        violatedDirective: 'script-src',\n        blockedUri: 'https://evil.com/script.js'\n      }\n\n    \u001b[0m \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m         \u001b[90m// Log for monitoring\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 276 |\u001b[39m         console\u001b[33m.\u001b[39mwarn(\u001b[32m'CSP Violation:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 277 |\u001b[39m           documentUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mdocumentUri\u001b[33m,\u001b[39m\n     \u001b[90m 278 |\u001b[39m           violatedDirective\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mviolatedDirective\u001b[33m,\u001b[39m\n     \u001b[90m 279 |\u001b[39m           blockedUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mblockedUri\u001b[0m\n\n      at warn (security/middleware/helmet.js:276:17)\n      at Object.handler (tests/unit/security/helmet-middleware.test.js:112:7)\n\n    console.warn\n      CSP Violation: {\n        documentUri: 'https://example.com/page',\n        violatedDirective: 'script-src',\n        blockedUri: 'https://evil0.com'\n      }\n\n    \u001b[0m \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m         \u001b[90m// Log for monitoring\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 276 |\u001b[39m         console\u001b[33m.\u001b[39mwarn(\u001b[32m'CSP Violation:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 277 |\u001b[39m           documentUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mdocumentUri\u001b[33m,\u001b[39m\n     \u001b[90m 278 |\u001b[39m           violatedDirective\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mviolatedDirective\u001b[33m,\u001b[39m\n     \u001b[90m 279 |\u001b[39m           blockedUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mblockedUri\u001b[0m\n\n      at warn (security/middleware/helmet.js:276:17)\n      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)\n\n    console.warn\n      CSP Violation: {\n        documentUri: 'https://example.com/page',\n        violatedDirective: 'script-src',\n        blockedUri: 'https://evil1.com'\n      }\n\n    \u001b[0m \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m         \u001b[90m// Log for monitoring\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 276 |\u001b[39m         console\u001b[33m.\u001b[39mwarn(\u001b[32m'CSP Violation:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 277 |\u001b[39m           documentUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mdocumentUri\u001b[33m,\u001b[39m\n     \u001b[90m 278 |\u001b[39m           violatedDirective\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mviolatedDirective\u001b[33m,\u001b[39m\n     \u001b[90m 279 |\u001b[39m           blockedUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mblockedUri\u001b[0m\n\n      at warn (security/middleware/helmet.js:276:17)\n      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)\n\n    console.warn\n      CSP Violation: {\n        documentUri: 'https://example.com/page',\n        violatedDirective: 'script-src',\n        blockedUri: 'https://evil2.com'\n      }\n\n    \u001b[0m \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m         \u001b[90m// Log for monitoring\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 276 |\u001b[39m         console\u001b[33m.\u001b[39mwarn(\u001b[32m'CSP Violation:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 277 |\u001b[39m           documentUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mdocumentUri\u001b[33m,\u001b[39m\n     \u001b[90m 278 |\u001b[39m           violatedDirective\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mviolatedDirective\u001b[33m,\u001b[39m\n     \u001b[90m 279 |\u001b[39m           blockedUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mblockedUri\u001b[0m\n\n      at warn (security/middleware/helmet.js:276:17)\n      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)\n\n  ● HelmetMiddleware › CSP Report Handler › should handle errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 500\n    Received: 400\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 153 |\u001b[39m       handler(req\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 155 |\u001b[39m       expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 156 |\u001b[39m       expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({ error\u001b[33m:\u001b[39m \u001b[32m'Failed to process CSP report'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:155:26)\n\n  ● HelmetMiddleware › createNonceMiddleware › should modify CSP header to include nonce\n\n    expect(received).toHaveBeenCalledWith(...expected)\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function anonymous]\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m       res\u001b[33m.\u001b[39msetHeader(\u001b[32m'Content-Security-Policy'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m\"script-src 'self'\"\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m         \u001b[32m'Content-Security-Policy'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 334 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m`'nonce-${res.locals.nonce}'`\u001b[39m)\n     \u001b[90m 335 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:332:29)\n\nFAIL tests/unit/security/cors.test.js\n  ● CORSMiddleware › handlePreflight › should handle wildcard origin without credentials in preflight\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Access-Control-Allow-Origin\", \"*\"\n    Received\n           1: \"Access-Control-Allow-Origin\", \"https://example.com\"\n           2: \"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-API-Key\"\n           3: \"Access-Control-Max-Age\", \"86400\"\n\n    Number of calls: 3\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m       corsMiddleware\u001b[33m.\u001b[39mhandlePreflight(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 277 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Origin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'*'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Credentials'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'true'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 280 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:278:29)\n\n  ● CORSMiddleware › Edge cases › should handle malformed request headers gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-API-Key\"\n    Received\n           1: \"Access-Control-Allow-Origin\", \"https://example.com\"\n           2: \"Access-Control-Allow-Credentials\", \"true\"\n           3: \"Access-Control-Max-Age\", \"86400\"\n\n    Number of calls: 3\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m       corsMiddleware\u001b[33m.\u001b[39mhandlePreflight(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Headers'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Content-Type, Authorization, X-API-Key'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m\n     \u001b[90m 330 |\u001b[39m     it(\u001b[32m'should handle mixed origin configurations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:327:29)\n\nPASS mcp-local-setup/enterprise/tests/compliance.test.js\nFAIL tests/security/auth-bypass.test.js\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent JWT signature stripping\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent JWT algorithm confusion attacks\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent weak secret key attacks\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent token replay attacks with expired tokens\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent privilege escalation via token manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent brute force API key guessing\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent API key format manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent permission escalation via API keys\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent API key reuse after revocation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent refresh token reuse after rotation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent cross-user token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent infinite token refresh chains\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth state parameter bypass\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth token injection\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth redirect URI manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Session Fixation Prevention › should regenerate session ID on authentication\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Race Conditions › should handle concurrent authentication attempts safely\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Race Conditions › should prevent race condition in API key validation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Downgrade Attacks › should prevent downgrade from strong to weak authentication\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Context Validation › should validate authentication context consistency\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\nFAIL tests/integration/monitoring/metrics-collection.test.js\n  ● Metrics Collection Integration › HTTP Metrics Collection › should collect HTTP request metrics\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m       \n     \u001b[90m 80 |\u001b[39m       \u001b[90m// Make multiple requests\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/test'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/test'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 83 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39mpost(\u001b[32m'/api/users'\u001b[39m)\u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Test'\u001b[39m })\u001b[33m.\u001b[39mexpect(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/error'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.expect (tests/integration/monitoring/metrics-collection.test.js:81:39)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Metrics Collection Integration › HTTP Metrics Collection › should track request sizes\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Business Metrics Collection › should collect business events\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Business Metrics Collection › should track API usage metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Database Metrics Collection › should collect database operation metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Database Metrics Collection › should track connection pool metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Cache Metrics Collection › should collect cache operation metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Custom Metrics › should allow custom metric definitions\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › System Metrics › should collect system resource metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metric Aggregation › should aggregate metrics across multiple sources\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metrics Export Formats › should export metrics in Prometheus format\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metrics Export Formats › should export metrics as JSON\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Real-time Monitoring › should provide real-time metric updates\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Real-time Monitoring › should handle metric resets\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\nFAIL mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js\n  ● IDE Extension and SDK Integration › IDE extension initializes with SDK instance\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Code completion suggests available MCP services\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Hover info shows service documentation from SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Diagnostics validate service configurations against SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Service panel shows real-time health from SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Debugging integration uses SDK service endpoints\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Code actions can install missing services via SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\nFAIL mcp-local-setup/tests/unit/community/features.test.js\n  ● CommunityFeatures › rateService › should track analytics event\n\n    TypeError: Cannot read properties of undefined (reading 'events')\n\n    \u001b[0m \u001b[90m 170 |\u001b[39m       expect(analyticsCall)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m analyticsData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(analyticsCall[\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 172 |\u001b[39m       expect(analyticsData[\u001b[32m'service-1'\u001b[39m]\u001b[33m.\u001b[39mevents)\u001b[33m.\u001b[39mtoContainEqual(\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 173 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 174 |\u001b[39m           type\u001b[33m:\u001b[39m \u001b[32m'rating'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 175 |\u001b[39m           userId\u001b[33m:\u001b[39m \u001b[32m'user-5'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.events (mcp-local-setup/tests/unit/community/features.test.js:172:41)\n\n  ● CommunityFeatures › private methods › should calculate week number correctly\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 50\n    Received:   1\n\n    \u001b[0m \u001b[90m 360 |\u001b[39m       \n     \u001b[90m 361 |\u001b[39m       expect(week1)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 362 |\u001b[39m       expect(week2)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 363 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 364 |\u001b[39m\n     \u001b[90m 365 |\u001b[39m     it(\u001b[32m'should calculate engagement score'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeGreaterThan (mcp-local-setup/tests/unit/community/features.test.js:362:21)\n\n  ● CommunityFeatures › private methods › should calculate growth rate\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 25\n    Received: 0\n\n    \u001b[0m \u001b[90m 386 |\u001b[39m\n     \u001b[90m 387 |\u001b[39m       \u001b[36mconst\u001b[39m growthRate \u001b[33m=\u001b[39m community\u001b[33m.\u001b[39m_calculateGrowthRate(analytics)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 388 |\u001b[39m       expect(growthRate)\u001b[33m.\u001b[39mtoBe(\u001b[35m25\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 25% growth\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 389 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 390 |\u001b[39m\n     \u001b[90m 391 |\u001b[39m     it(\u001b[32m'should handle zero previous downloads in growth rate'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/community/features.test.js:388:26)\n\nFAIL mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js\n  ● Marketplace + Enterprise Integration › Tenant-based Service Access › should restrict marketplace access based on tenant permissions\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 35 |\u001b[39m     test(\u001b[32m'should restrict marketplace access based on tenant permissions'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 36 |\u001b[39m       \u001b[90m// Create test tenants\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 37 |\u001b[39m       \u001b[36mconst\u001b[39m enterpriseTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m    |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 38 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Enterprise Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 39 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 40 |\u001b[39m         features\u001b[33m:\u001b[39m [\u001b[32m'unlimited-services'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'private-marketplace'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:37:52)\n\n  ● Marketplace + Enterprise Integration › Tenant-based Service Access › should enforce tenant quotas on service installation\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m\n     \u001b[90m 71 |\u001b[39m     test(\u001b[32m'should enforce tenant quotas on service installation'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Limited Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 74 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'basic'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 75 |\u001b[39m         quotas\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:72:42)\n\n  ● Marketplace + Enterprise Integration › Marketplace Publishing with Multi-tenancy › should allow tenants to publish private services\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m   describe(\u001b[32m'Marketplace Publishing with Multi-tenancy'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 101 |\u001b[39m     test(\u001b[32m'should allow tenants to publish private services'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Service Provider Inc'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 104 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 105 |\u001b[39m         features\u001b[33m:\u001b[39m [\u001b[32m'marketplace-publisher'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:102:42)\n\n  ● Marketplace + Enterprise Integration › Marketplace Publishing with Multi-tenancy › should track marketplace revenue per tenant\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m     test(\u001b[32m'should track marketplace revenue per tenant'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m publisherTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'SaaS Provider'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 141 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\n     \u001b[90m 142 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:139:51)\n\n  ● Marketplace + Enterprise Integration › SSO + Marketplace Integration › should use SSO for marketplace authentication\n\n    Invalid authentication request\n\n    \u001b[0m \u001b[90m 213 |\u001b[39m   \u001b[36masync\u001b[39m authenticate(credentials\u001b[33m,\u001b[39m provider) {\n     \u001b[90m 214 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mcredentials \u001b[33m||\u001b[39m \u001b[33m!\u001b[39mprovider) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 215 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Invalid authentication request'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 216 |\u001b[39m     }\n     \u001b[90m 217 |\u001b[39m\n     \u001b[90m 218 |\u001b[39m     \u001b[36mconst\u001b[39m providerConfig \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39m_getProvider(provider)\u001b[33m;\u001b[39m\u001b[0m\n\n      at SSOAuthentication.authenticate (mcp-local-setup/enterprise/sso/authentication.js:215:13)\n      at Object.authenticate (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:184:40)\n\n  ● Marketplace + Enterprise Integration › SSO + Marketplace Integration › should map SSO roles to marketplace permissions\n\n    TypeError: ssoAuth.configureRoleMapping is not a function\n\n    \u001b[0m \u001b[90m 205 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 206 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 207 |\u001b[39m       \u001b[36mawait\u001b[39m ssoAuth\u001b[33m.\u001b[39mconfigureRoleMapping(roleMapping)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 208 |\u001b[39m\n     \u001b[90m 209 |\u001b[39m       \u001b[90m// Test different role access\u001b[39m\n     \u001b[90m 210 |\u001b[39m       \u001b[36mconst\u001b[39m adminUser \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m ssoAuth\u001b[33m.\u001b[39mauthenticate({\u001b[0m\n\n      at Object.configureRoleMapping (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:207:21)\n\n  ● Marketplace + Enterprise Integration › Compliance in Marketplace Operations › should audit all marketplace transactions\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 230 |\u001b[39m   describe(\u001b[32m'Compliance in Marketplace Operations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 231 |\u001b[39m     test(\u001b[32m'should audit all marketplace transactions'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 233 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Regulated Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 234 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 235 |\u001b[39m         compliance\u001b[33m:\u001b[39m [\u001b[32m'SOC2'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'HIPAA'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:232:42)\n\n  ● Marketplace + Enterprise Integration › Compliance in Marketplace Operations › should enforce data residency for marketplace data\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m\n     \u001b[90m 297 |\u001b[39m     test(\u001b[32m'should enforce data residency for marketplace data'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       \u001b[36mconst\u001b[39m euTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'EU Company'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 300 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 301 |\u001b[39m         dataResidency\u001b[33m:\u001b[39m \u001b[32m'eu-west-1'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:298:44)\n\n  ● Marketplace + Enterprise Integration › Community Features with Enterprise Controls › should moderate reviews based on tenant policies\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 333 |\u001b[39m   describe(\u001b[32m'Community Features with Enterprise Controls'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 334 |\u001b[39m     test(\u001b[32m'should moderate reviews based on tenant policies'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 335 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 336 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Strict Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 337 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 338 |\u001b[39m         policies\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:335:42)\n\n  ● Marketplace + Enterprise Integration › Community Features with Enterprise Controls › should aggregate analytics per tenant\n\n    TypeError: communityFeatures.trackUsage is not a function\n\n    \u001b[0m \u001b[90m 374 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m tenantId \u001b[36mof\u001b[39m tenants) {\n     \u001b[90m 375 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mlet\u001b[39m i \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m i \u001b[33m<\u001b[39m \u001b[35m10\u001b[39m\u001b[33m;\u001b[39m i\u001b[33m++\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 376 |\u001b[39m           \u001b[36mawait\u001b[39m communityFeatures\u001b[33m.\u001b[39mtrackUsage({\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 377 |\u001b[39m             tenantId\u001b[33m,\u001b[39m\n     \u001b[90m 378 |\u001b[39m             serviceId\u001b[33m:\u001b[39m \u001b[32m'popular-service'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 379 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'api_call'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.trackUsage (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:376:35)\n\n  ● Marketplace + Enterprise Integration › Billing Integration › should handle marketplace billing through tenant billing system\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 405 |\u001b[39m   describe(\u001b[32m'Billing Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 406 |\u001b[39m     test(\u001b[32m'should handle marketplace billing through tenant billing system'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 407 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 408 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Paying Customer'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 409 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 410 |\u001b[39m         billing\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:407:42)\n\nFAIL tests/integration/security/auth-flow.test.js\n  ● Security Authentication Flow Integration › Complete JWT Authentication Flow › should handle full JWT login and refresh flow\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Complete JWT Authentication Flow › should handle token expiration and renewal\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › OAuth Integration Flow › should handle complete OAuth flow with Google\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › OAuth Integration Flow › should handle OAuth errors gracefully\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › API Key Authentication Flow › should handle API key generation and validation flow\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Multi-Auth Strategy Flow › should handle multiple authentication methods in sequence\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Security Token Rotation › should handle secure token rotation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Permission-based Access Control › should enforce permission-based access with API keys\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Permission-based Access Control › should handle JWT permissions\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Session Management Integration › should handle session lifecycle with token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Error Handling and Recovery › should handle authentication failures gracefully\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Error Handling and Recovery › should handle Redis failures in token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\nFAIL mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js\n  ● RegistryManager › loadCatalog › should load and parse catalog successfully\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 52 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockCatalog))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       \n     \u001b[90m 55 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 56 |\u001b[39m       \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:53:19)\n\n  ● RegistryManager › loadCatalog › should handle catalog file not found\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 60 |\u001b[39m\n     \u001b[90m 61 |\u001b[39m     it(\u001b[32m'should handle catalog file not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 62 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'ENOENT: no such file'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 63 |\u001b[39m       \n     \u001b[90m 64 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m       \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:62:19)\n\n  ● RegistryManager › loadCatalog › should handle invalid JSON in catalog\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 72 |\u001b[39m\n     \u001b[90m 73 |\u001b[39m     it(\u001b[32m'should handle invalid JSON in catalog'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 74 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'invalid json{'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 75 |\u001b[39m       \n     \u001b[90m 76 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m       \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:74:19)\n\n  ● RegistryManager › loadProfile › should load default profile\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'mocked yaml content'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m       yaml\u001b[33m.\u001b[39mload\u001b[33m.\u001b[39mmockReturnValue(mockProfile)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m       \n     \u001b[90m 96 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:93:19)\n\n  ● RegistryManager › loadProfile › should load specified profile\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 109 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 110 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 111 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'mocked yaml content'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 112 |\u001b[39m       yaml\u001b[33m.\u001b[39mload\u001b[33m.\u001b[39mmockReturnValue(mockProfile)\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m       \n     \u001b[90m 114 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile(\u001b[32m'development'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:111:19)\n\n  ● RegistryManager › loadProfile › should handle profile not found\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m\n     \u001b[90m 123 |\u001b[39m     it(\u001b[32m'should handle profile not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'ENOENT'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m       \n     \u001b[90m 126 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile(\u001b[32m'missing'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:124:19)\n\n  ● RegistryManager › generateDockerCompose › should generate docker-compose configuration\n\n    TypeError: Cannot read properties of undefined (reading 'find')\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m serviceId \u001b[36mof\u001b[39m enabledServices) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             \u001b[36mconst\u001b[39m server \u001b[33m=\u001b[39m catalog\u001b[33m.\u001b[39mservers\u001b[33m.\u001b[39mfind(s \u001b[33m=>\u001b[39m s\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m serviceId)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mserver) {\n     \u001b[90m 86 |\u001b[39m                 console\u001b[33m.\u001b[39mwarn(\u001b[32m`Service ${serviceId} not found in catalog`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m                 \u001b[36mcontinue\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:174:7)\n\n  ● RegistryManager › generateDockerCompose › should filter services based on profile\n\n    TypeError: Cannot read properties of undefined (reading 'find')\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m serviceId \u001b[36mof\u001b[39m enabledServices) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             \u001b[36mconst\u001b[39m server \u001b[33m=\u001b[39m catalog\u001b[33m.\u001b[39mservers\u001b[33m.\u001b[39mfind(s \u001b[33m=>\u001b[39m s\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m serviceId)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mserver) {\n     \u001b[90m 86 |\u001b[39m                 console\u001b[33m.\u001b[39mwarn(\u001b[32m`Service ${serviceId} not found in catalog`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m                 \u001b[36mcontinue\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:225:7)\n\n  ● RegistryManager › updateService › should update service in catalog\n\n    TypeError: registryManager.updateService is not a function\n\n    \u001b[0m \u001b[90m 251 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 253 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mupdateService(updatedService)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 254 |\u001b[39m\n     \u001b[90m 255 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mwriteFile)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m 256 |\u001b[39m         registryManager\u001b[33m.\u001b[39mcatalogPath\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:253:29)\n\n  ● RegistryManager › updateService › should add new service to catalog\n\n    TypeError: registryManager.updateService is not a function\n\n    \u001b[0m \u001b[90m 272 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 274 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mupdateService(newService)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 275 |\u001b[39m\n     \u001b[90m 276 |\u001b[39m       \u001b[36mconst\u001b[39m writtenData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 277 |\u001b[39m       expect(writtenData\u001b[33m.\u001b[39mservices[\u001b[32m'new-service'\u001b[39m])\u001b[33m.\u001b[39mtoEqual(newService)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:274:29)\n\n  ● RegistryManager › removeService › should remove service from catalog\n\n    TypeError: registryManager.removeService is not a function\n\n    \u001b[0m \u001b[90m 291 |\u001b[39m       fs\u001b[33m.\u001b[39mwriteFile \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 292 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 293 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mremoveService(\u001b[32m'service1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 294 |\u001b[39m\n     \u001b[90m 295 |\u001b[39m       \u001b[36mconst\u001b[39m writtenData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m       expect(writtenData\u001b[33m.\u001b[39mservices\u001b[33m.\u001b[39mservice1)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:293:29)\n\n  ● RegistryManager › removeService › should handle removing non-existent service\n\n    TypeError: registryManager.removeService is not a function\n\n    \u001b[0m \u001b[90m 306 |\u001b[39m       fs\u001b[33m.\u001b[39mwriteFile \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 307 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 308 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mremoveService(\u001b[32m'non-existent'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 309 |\u001b[39m\n     \u001b[90m 310 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mwriteFile)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 311 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:308:29)\n\n  ● RegistryManager › validateCatalog › should validate catalog structure\n\n    TypeError: registryManager.validateCatalog is not a function\n\n    \u001b[0m \u001b[90m 327 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 328 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 329 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m registryManager\u001b[33m.\u001b[39mvalidateCatalog(validCatalog)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 330 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 331 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:329:38)\n\n  ● RegistryManager › validateCatalog › should detect missing required fields\n\n    TypeError: registryManager.validateCatalog is not a function\n\n    \u001b[0m \u001b[90m 342 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 344 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m registryManager\u001b[33m.\u001b[39mvalidateCatalog(invalidCatalog)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 345 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 346 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Service service1 missing required field: name'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 347 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Service service1 missing required field: version'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:344:38)\n\nFAIL tests/unit/monitoring/logging/formatters.test.js\n  ● LogFormatters › jsonFormat › should format logs as JSON\n\n    TypeError: LogFormatters.jsonFormat is not a function\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m   describe(\u001b[32m'jsonFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 80 |\u001b[39m     it(\u001b[32m'should format logs as JSON'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mjsonFormat()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:81:39)\n\n  ● LogFormatters › jsonFormat › should handle errors in JSON format\n\n    TypeError: LogFormatters.jsonFormat is not a function\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m\n     \u001b[90m  98 |\u001b[39m     it(\u001b[32m'should handle errors in JSON format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mjsonFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       \u001b[36mconst\u001b[39m error \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Test error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m       \n     \u001b[90m 102 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:99:39)\n\n  ● LogFormatters › prettyFormat › should format logs in human-readable format\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m   describe(\u001b[32m'prettyFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 118 |\u001b[39m     it(\u001b[32m'should format logs in human-readable format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 121 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 122 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:119:39)\n\n  ● LogFormatters › prettyFormat › should colorize output when enabled\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 133 |\u001b[39m\n     \u001b[90m 134 |\u001b[39m     it(\u001b[32m'should colorize output when enabled'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 135 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat({ colorize\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 136 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 137 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 138 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Error message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:135:39)\n\n  ● LogFormatters › prettyFormat › should include metadata when present\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should include metadata when present'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 154 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 155 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:152:39)\n\n  ● LogFormatters › compactFormat › should format logs in compact single-line format\n\n    TypeError: LogFormatters.compactFormat is not a function\n\n    \u001b[0m \u001b[90m 169 |\u001b[39m   describe(\u001b[32m'compactFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 170 |\u001b[39m     it(\u001b[32m'should format logs in compact single-line format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcompactFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 173 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 174 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:171:39)\n\n  ● LogFormatters › compactFormat › should truncate long messages\n\n    TypeError: LogFormatters.compactFormat is not a function\n\n    \u001b[0m \u001b[90m 187 |\u001b[39m\n     \u001b[90m 188 |\u001b[39m     it(\u001b[32m'should truncate long messages'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 189 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcompactFormat({ maxLength\u001b[33m:\u001b[39m \u001b[35m50\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 190 |\u001b[39m       \u001b[36mconst\u001b[39m longMessage \u001b[33m=\u001b[39m \u001b[32m'A'\u001b[39m\u001b[33m.\u001b[39mrepeat(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 191 |\u001b[39m       \n     \u001b[90m 192 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:189:39)\n\n  ● LogFormatters › logstashFormat › should format logs for Logstash ingestion\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"info\"\n    Received: undefined\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m       expect(parsed[\u001b[32m'@version'\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Test message'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mseverity)\u001b[33m.\u001b[39mtoBe(\u001b[32m'info'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mhost)\u001b[33m.\u001b[39mtoBe(\u001b[32m'test-host'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mservice)\u001b[33m.\u001b[39mtoBe(\u001b[32m'test-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/unit/monitoring/logging/formatters.test.js:223:31)\n\n  ● LogFormatters › logstashFormat › should add fields from metadata\n\n    TypeError: Cannot read properties of undefined (reading 'userId')\n\n    \u001b[0m \u001b[90m 240 |\u001b[39m       \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(formatted[\u001b[33mSymbol\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfor\u001b[39m(\u001b[32m'message'\u001b[39m)])\u001b[33m;\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 242 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mfields\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(\u001b[35m123\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 243 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mfields\u001b[33m.\u001b[39mrequestId)\u001b[33m.\u001b[39mtoBe(\u001b[32m'req-456'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mtags)\u001b[33m.\u001b[39mtoEqual([\u001b[32m'api'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'v2'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.userId (tests/unit/monitoring/logging/formatters.test.js:242:28)\n\n  ● LogFormatters › customFormat › should allow custom formatting function\n\n    TypeError: LogFormatters.customFormat is not a function\n\n    \u001b[0m \u001b[90m 252 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 254 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcustomFormat(customFormatter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 255 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 256 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 257 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[0m\n\n      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:254:39)\n\n  ● LogFormatters › customFormat › should support template strings\n\n    TypeError: LogFormatters.customFormat is not a function\n\n    \u001b[0m \u001b[90m 266 |\u001b[39m     it(\u001b[32m'should support template strings'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 267 |\u001b[39m       \u001b[36mconst\u001b[39m template \u001b[33m=\u001b[39m \u001b[32m'{{timestamp}} [{{level}}] {{service}}: {{message}}'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcustomFormat(template)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 269 |\u001b[39m       \n     \u001b[90m 270 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 271 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:268:39)\n\n  ● LogFormatters › multiFormat › should combine multiple formatters\n\n    TypeError: LogFormatters.multiFormat is not a function\n\n    \u001b[0m \u001b[90m 284 |\u001b[39m   describe(\u001b[32m'multiFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 285 |\u001b[39m     it(\u001b[32m'should combine multiple formatters'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 286 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmultiFormat([\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 287 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39mtimestamp()\u001b[33m,\u001b[39m\n     \u001b[90m 288 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39merrors({ stack\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m,\u001b[39m\n     \u001b[90m 289 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39mjson()\u001b[0m\n\n      at Object.multiFormat (tests/unit/monitoring/logging/formatters.test.js:286:39)\n\n  ● LogFormatters › filterFormat › should filter logs based on criteria\n\n    TypeError: LogFormatters.filterFormat is not a function\n\n    \u001b[0m \u001b[90m 304 |\u001b[39m   describe(\u001b[32m'filterFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 305 |\u001b[39m     it(\u001b[32m'should filter logs based on criteria'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 306 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mfilterFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 307 |\u001b[39m         levels\u001b[33m:\u001b[39m [\u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'warn'\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 308 |\u001b[39m         excludeMessages\u001b[33m:\u001b[39m [\u001b[35m/debug/i\u001b[39m]\n     \u001b[90m 309 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:306:39)\n\n  ● LogFormatters › filterFormat › should filter based on metadata fields\n\n    TypeError: LogFormatters.filterFormat is not a function\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     it(\u001b[32m'should filter based on metadata fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mfilterFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m         metadata\u001b[33m:\u001b[39m {\n     \u001b[90m 334 |\u001b[39m           environment\u001b[33m:\u001b[39m \u001b[32m'production'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 335 |\u001b[39m           userId\u001b[33m:\u001b[39m (value) \u001b[33m=>\u001b[39m value \u001b[33m>\u001b[39m \u001b[35m100\u001b[39m\u001b[0m\n\n      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:332:39)\n\n  ● LogFormatters › maskFormat › should mask sensitive fields\n\n    TypeError: LogFormatters.maskFormat is not a function\n\n    \u001b[0m \u001b[90m 366 |\u001b[39m   describe(\u001b[32m'maskFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 367 |\u001b[39m     it(\u001b[32m'should mask sensitive fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 368 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmaskFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 369 |\u001b[39m         fields\u001b[33m:\u001b[39m [\u001b[32m'password'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'token'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'ssn'\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 370 |\u001b[39m         patterns\u001b[33m:\u001b[39m [\u001b[35m/\\b\\d{3}-\\d{2}-\\d{4}\\b/g\u001b[39m] \u001b[90m// SSN pattern\u001b[39m\n     \u001b[90m 371 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:368:39)\n\n  ● LogFormatters › maskFormat › should handle nested fields\n\n    TypeError: LogFormatters.maskFormat is not a function\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m\n     \u001b[90m 389 |\u001b[39m     it(\u001b[32m'should handle nested fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmaskFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m         fields\u001b[33m:\u001b[39m [\u001b[32m'user.password'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'auth.token'\u001b[39m]\n     \u001b[90m 392 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 393 |\u001b[39m\u001b[0m\n\n      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:390:39)\n\nFAIL mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js\n  ● Monitoring + Cloud Integration › AWS Monitoring Integration › should collect metrics from AWS-deployed services\n\n    Environment must have name and region\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mregion) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and region'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m     }\n     \u001b[90m 334 |\u001b[39m\n     \u001b[90m 335 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:34:46)\n\n  ● Monitoring + Cloud Integration › AWS Monitoring Integration › should trigger alerts for AWS service anomalies\n\n    TypeError: alertingSystem.addChannel is not a function\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 56 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39maddChannel(\u001b[32m'test-channel'\u001b[39m\u001b[33m,\u001b[39m alertChannel)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m       \n     \u001b[90m 59 |\u001b[39m       \u001b[90m// Create alert rule for high CPU\u001b[39m\n     \u001b[90m 60 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39mcreateRule({\u001b[0m\n\n      at Object.addChannel (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:57:28)\n\n  ● Monitoring + Cloud Integration › GCP Monitoring Integration › should collect metrics from GCP Cloud Run services\n\n    Environment must have name and projectId\n\n    \u001b[0m \u001b[90m 533 |\u001b[39m\n     \u001b[90m 534 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mprojectId) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 535 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and projectId'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 536 |\u001b[39m     }\n     \u001b[90m 537 |\u001b[39m\n     \u001b[90m 538 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at GCPDeployment.deploy (mcp-local-setup/deploy/gcp/deployment.js:535:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:89:46)\n\n  ● Monitoring + Cloud Integration › GCP Monitoring Integration › should integrate with GCP monitoring APIs\n\n    TypeError: gcpDeployment.getMetrics is not a function\n\n    \u001b[0m \u001b[90m 105 |\u001b[39m\n     \u001b[90m 106 |\u001b[39m     test(\u001b[32m'should integrate with GCP monitoring APIs'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m gcpMetrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m gcpDeployment\u001b[33m.\u001b[39mgetMetrics(\u001b[32m'test-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 108 |\u001b[39m       \n     \u001b[90m 109 |\u001b[39m       \u001b[90m// Export to Prometheus format\u001b[39m\n     \u001b[90m 110 |\u001b[39m       \u001b[36mconst\u001b[39m prometheusMetrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mexportMetrics(gcpMetrics)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.getMetrics (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:107:46)\n\n  ● Monitoring + Cloud Integration › Azure Monitoring Integration › should collect metrics from Azure Container Instances\n\n    Environment must have name, subscriptionId, and resourceGroup\n\n    \u001b[0m \u001b[90m 483 |\u001b[39m\n     \u001b[90m 484 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39msubscriptionId \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mresourceGroup) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 485 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name, subscriptionId, and resourceGroup'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 486 |\u001b[39m     }\n     \u001b[90m 487 |\u001b[39m\n     \u001b[90m 488 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AzureDeployment.deploy (mcp-local-setup/deploy/azure/deployment.js:485:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:120:48)\n\n  ● Monitoring + Cloud Integration › Cross-Cloud Monitoring › should aggregate metrics across multiple cloud providers\n\n    Environment must have name and region\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mregion) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and region'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m     }\n     \u001b[90m 334 |\u001b[39m\n     \u001b[90m 335 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:141:46)\n\n  ● Monitoring + Cloud Integration › Cross-Cloud Monitoring › should create unified dashboards for multi-cloud deployments\n\n    TypeError: metricsCollector.createDashboard is not a function\n\n    \u001b[0m \u001b[90m 179 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 180 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 181 |\u001b[39m       \u001b[36mconst\u001b[39m dashboard \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mcreateDashboard(dashboardConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 182 |\u001b[39m       \n     \u001b[90m 183 |\u001b[39m       expect(dashboard)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'url'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m       expect(dashboard\u001b[33m.\u001b[39mpanels)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createDashboard (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:181:48)\n\n  ● Monitoring + Cloud Integration › Alert Integration Across Clouds › should correlate alerts from different cloud providers\n\n    TypeError: alertingSystem.on is not a function\n\n    \u001b[0m \u001b[90m 192 |\u001b[39m       \n     \u001b[90m 193 |\u001b[39m       \u001b[90m// Setup alert collection\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 194 |\u001b[39m       alertingSystem\u001b[33m.\u001b[39mon(\u001b[32m'alert'\u001b[39m\u001b[33m,\u001b[39m (alert) \u001b[33m=>\u001b[39m alerts\u001b[33m.\u001b[39mpush(alert))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 195 |\u001b[39m\n     \u001b[90m 196 |\u001b[39m       \u001b[90m// Simulate alerts from different clouds\u001b[39m\n     \u001b[90m 197 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39mprocessCloudAlert({\u001b[0m\n\n      at Object.on (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:194:22)\n\n  ● Monitoring + Cloud Integration › Performance Monitoring › should track deployment performance metrics\n\n    TypeError: metricsCollector.trackDeployment is not a function\n\n    \u001b[0m \u001b[90m 229 |\u001b[39m       \u001b[90m// Track deployment performance\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m [cloud\u001b[33m,\u001b[39m metrics] \u001b[36mof\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mentries(deploymentMetrics)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 231 |\u001b[39m         \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mtrackDeployment(cloud\u001b[33m,\u001b[39m metrics)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 232 |\u001b[39m       }\n     \u001b[90m 233 |\u001b[39m\n     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m performanceReport \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mgetPerformanceReport()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.trackDeployment (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:231:32)\n\nFAIL tests/performance/monitoring/metrics-load.test.js\n  ● Metrics Performance Under Load › High-Frequency Metric Updates › should handle 10k metrics/second\n\n    Added label \"status\" is not included in initial labelset: [ 'method', 'route', 'status_code', 'status_class' ]\n\n    \u001b[0m \u001b[90m 40 |\u001b[39m       \u001b[90m// Generate metrics at high frequency\u001b[39m\n     \u001b[90m 41 |\u001b[39m       \u001b[36mwhile\u001b[39m (\u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow() \u001b[33m-\u001b[39m startTime \u001b[33m<\u001b[39m duration \u001b[33m&&\u001b[39m operations \u001b[33m<\u001b[39m targetOps) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 42 |\u001b[39m         httpExporter\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mhttpRequestsTotal\u001b[33m.\u001b[39minc({\n     \u001b[90m    |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 43 |\u001b[39m           method\u001b[33m:\u001b[39m [\u001b[32m'GET'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'POST'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'PUT'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'DELETE'\u001b[39m][operations \u001b[33m%\u001b[39m \u001b[35m4\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 44 |\u001b[39m           status\u001b[33m:\u001b[39m [\u001b[32m'200'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'201'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'400'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'500'\u001b[39m][operations \u001b[33m%\u001b[39m \u001b[35m4\u001b[39m]\n     \u001b[90m 45 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)\n      at Counter.incWithoutExemplar (node_modules/prom-client/lib/counter.js:44:4)\n      at Object.inc (tests/performance/monitoring/metrics-load.test.js:42:48)\n\n  ● Metrics Performance Under Load › High-Frequency Metric Updates › should handle concurrent metric updates\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Memory Efficiency › should maintain stable memory usage with high cardinality\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Memory Efficiency › should handle metric lifecycle efficiently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Metric Collection Performance › should efficiently serialize large numbers of metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Metric Collection Performance › should handle metric endpoint under load\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Histogram Performance › should efficiently calculate percentiles\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Histogram Performance › should handle multiple histogram updates concurrently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Label Cardinality Performance › should handle high label cardinality efficiently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Real-world Load Simulation › should handle realistic mixed workload\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Stress Testing › should remain stable under extreme load\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\nPASS mcp-local-setup/deploy/tests/azure.test.js\nPASS mcp-local-setup/tests/e2e/client-configuration.e2e.test.js\nFAIL mcp-local-setup/tests/integration/profile-switching.integration.test.js\n  ● Profile Switching Integration Tests › Profile Creation › should handle profile name conflicts\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: \"/home/jenner/.mcp-platform/profiles/duplicate-profile.yml\"\n\n    \u001b[0m \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m       \u001b[90m// Try to create duplicate\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 86 |\u001b[39m       \u001b[36mawait\u001b[39m expect(createTestProfile([\u001b[32m'service2'\u001b[39m]\u001b[33m,\u001b[39m { name\u001b[33m:\u001b[39m profileName }))\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 87 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/integration/profile-switching.integration.test.js:86:13)\n\n  ● Profile Switching Integration Tests › Profile Creation › should validate profile yaml structure\n\n    YAMLException: bad indentation of a mapping entry (1:14)\n\n     1 | invalid: yaml: structure:\n    ------------------^\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[90m// Try to load the profile\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m       \u001b[36mawait\u001b[39m expect(yaml\u001b[33m.\u001b[39mload(\u001b[36mawait\u001b[39m fs\u001b[33m.\u001b[39mreadFile(profilePath\u001b[33m,\u001b[39m \u001b[32m'utf8'\u001b[39m)))\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at generateError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:183:10)\n      at throwError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:187:9)\n      at readBlockMapping (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1182:7)\n      at composeNode (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1441:12)\n      at readDocument (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1625:3)\n      at loadDocuments (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1688:5)\n      at Object.load (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1714:19)\n      at Object.load (mcp-local-setup/tests/integration/profile-switching.integration.test.js:99:25)\n\n  ● Profile Switching Integration Tests › Profile Switching › should update docker-compose when switching profiles\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 159 |\u001b[39m\n     \u001b[90m 160 |\u001b[39m       \u001b[36mconst\u001b[39m generated \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m generateCompose()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 161 |\u001b[39m       expect(generated)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[90m// Docker compose should now contain services from profile1\u001b[39m\n     \u001b[90m 164 |\u001b[39m       \u001b[36mconst\u001b[39m composePath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(\u001b[33mMCP_HOME\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'docker-compose.yml'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/profile-switching.integration.test.js:161:25)\n\nPASS tests/unit/config/limits.test.js\nPASS tests/integration/phase6/observability-integration.test.js\n  ● Console\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request started {\"metadata\":{\"method\":\"GET\",\"path\":\"/api/users\",\"requestId\":\"req-123\"},\"timestamp\":\"2025-07-24T22:52:02.219Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request completed {\"metadata\":{\"requestId\":\"req-123\",\"status\":200},\"timestamp\":\"2025-07-24T22:52:02.339Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Database error occurred {\"metadata\":{\"error\":{\"message\":\"Database connection failed\",\"name\":\"Error\",\"stack\":\"Error: Database connection failed\\n    at Object.<anonymous> (/home/jenner/code/mcps/tests/integration/phase6/observability-integration.test.js:60:19)\\n    at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\\n    at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\\n    at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\\n    at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\\n    at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\\n    at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\\n    at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\\n    at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\\n    at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\"},\"query\":\"SELECT * FROM users\",\"requestId\":\"req-456\",\"service\":\"api\"},\"timestamp\":\"2025-07-24T22:52:02.364Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[33mwarn\u001b[39m: Slow response detected {\"endpoint\":\"/api/heavy\",\"responseTime\":5500,\"threshold\":5000,\"timestamp\":\"2025-07-24T22:52:02.374Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request received {\"metadata\":{\"headers\":{\"x-request-id\":\"req-789\"},\"ip\":\"unknown\",\"method\":\"POST\",\"path\":\"/api/users\",\"requestId\":\"req-789\"},\"timestamp\":\"2025-07-24T22:52:02.379Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Processing request {\"metadata\":{\"requestId\":\"trace-123\",\"traceId\":\"e3f03f789c9c577cabcafdb9edbe9eb8\"},\"timestamp\":\"2025-07-24T22:52:02.386Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\nPASS mcp-local-setup/deploy/tests/aws.test.js\nPASS mcp-local-setup/enterprise/tests/tenancy.test.js\n  ● Console\n\n    console.log\n      Disabling services for tenant lifecycle-tenant\n\n      at MultiTenancy.log [as _disableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:348:13)\n\n    console.log\n      Disabling services for tenant lifecycle-tenant\n\n      at MultiTenancy.log [as _disableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:348:13)\n\n    console.log\n      Enabling services for tenant lifecycle-tenant\n\n      at MultiTenancy.log [as _enableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:354:13)\n\n    console.log\n      Backing up tenant lifecycle-tenant to /home/jenner/code/mcps/data/tenants/backups/lifecycle-tenant\n\n      at MultiTenancy.log [as _backupTenantData] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:366:15)\n\nFAIL mcp-local-setup/tests/integration/backup.integration.test.js\n  ● Console\n\n    console.log\n      Stopping services: filesystem, git, browser, postgres, everest\n\n      at BackupManager.log [as stopServices] (mcp-local-setup/scripts/backup-manager.js:863:17)\n\n    console.log\n      Restoring configuration for: filesystem, git, browser, postgres, everest\n\n      at BackupManager.log [as restoreConfiguration] (mcp-local-setup/scripts/backup-manager.js:883:17)\n\n    console.log\n      Restoring data for: filesystem, git, browser, postgres, everest\n\n      at BackupManager.log [as restoreServiceData] (mcp-local-setup/scripts/backup-manager.js:893:17)\n\n    console.log\n      Starting services: filesystem, git, browser, postgres, everest\n\n      at BackupManager.log [as startServices] (mcp-local-setup/scripts/backup-manager.js:872:17)\n\n    console.log\n      Stopping services: filesystem\n\n      at BackupManager.log [as stopServices] (mcp-local-setup/scripts/backup-manager.js:863:17)\n\n    console.log\n      Restoring configuration for: filesystem\n\n      at BackupManager.log [as restoreConfiguration] (mcp-local-setup/scripts/backup-manager.js:883:17)\n\n    console.log\n      Restoring data for: filesystem\n\n      at BackupManager.log [as restoreServiceData] (mcp-local-setup/scripts/backup-manager.js:893:17)\n\n    console.log\n      Starting services: filesystem\n\n      at BackupManager.log [as startServices] (mcp-local-setup/scripts/backup-manager.js:872:17)\n\n    console.log\n      Dry run mode - no changes will be made\n\n      at BackupManager.log [as restoreBackup] (mcp-local-setup/scripts/backup-manager.js:287:25)\n\n    console.log\n      Would restore services: non-existent-service\n\n      at BackupManager.log [as restoreBackup] (mcp-local-setup/scripts/backup-manager.js:288:25)\n\n  ● Backup & Restore Integration Tests › Selective Service Backup › should handle incremental backups\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 993\n    Received:   993\n\n    \u001b[0m \u001b[90m 155 |\u001b[39m             \u001b[36mconst\u001b[39m metadata \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m backup\u001b[33m.\u001b[39mgetBackupMetadata(incrementalId)\u001b[33m;\u001b[39m\n     \u001b[90m 156 |\u001b[39m             expect(metadata\u001b[33m.\u001b[39mtype)\u001b[33m.\u001b[39mtoBe(\u001b[32m'incremental'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 157 |\u001b[39m             expect(metadata\u001b[33m.\u001b[39msize)\u001b[33m.\u001b[39mtoBeLessThan(metadata\u001b[33m.\u001b[39msize)\u001b[33m;\u001b[39m \u001b[90m// Should be smaller than full\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 158 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\u001b[0m\n\n      at Object.toBeLessThan (mcp-local-setup/tests/integration/backup.integration.test.js:157:35)\n\n  ● Backup & Restore Integration Tests › Scheduled Backups › should list backup schedules\n\n    expect(received).toBeInstanceOf(expected)\n\n    Expected constructor: Date\n\n    Received value has no prototype\n    Received value: null\n\n    \u001b[0m \u001b[90m 182 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39mcronExpression)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0 2 * * *'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 183 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39menabled)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 184 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39mnextRun)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mDate\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 185 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m\n     \u001b[90m 187 |\u001b[39m         it(\u001b[32m'should update backup schedule'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/backup.integration.test.js:184:42)\n\n  ● Backup & Restore Integration Tests › Backup Storage Management › should delete specific backup\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m         it(\u001b[32m'should delete specific backup'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 297 |\u001b[39m             \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m backup\u001b[33m.\u001b[39mdeleteBackup(testBackupId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m             expect(deleted)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m\n     \u001b[90m 300 |\u001b[39m             \u001b[36mawait\u001b[39m expect(backup\u001b[33m.\u001b[39mgetBackupMetadata(testBackupId))\n     \u001b[90m 301 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Backup not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/backup.integration.test.js:298:29)\n\n  ● Backup & Restore Integration Tests › Error Handling › should validate backup options\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: \"backup-2025-07-24T22-52-02-438Z-7bfbf9bc\"\n\n    \u001b[0m \u001b[90m 321 |\u001b[39m             }\u001b[33m;\u001b[39m\n     \u001b[90m 322 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 323 |\u001b[39m             \u001b[36mawait\u001b[39m expect(backup\u001b[33m.\u001b[39mcreateBackup(invalidOptions))\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 324 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 325 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/integration/backup.integration.test.js:323:19)\n\nPASS tests/integration/docker/security-scan.test.js\nPASS mcp-local-setup/monitoring/tests/alerting-system.test.js\n  ● Console\n\n    console.error\n      Failed to configure notification channel test: Error: Unsupported channel type: unsupported\n          at AlertingSystem.configureNotificationChannel (/home/jenner/code/mcps/mcp-local-setup/monitoring/alerts/alerting.js:90:17)\n          at configureNotificationChannel (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:170:35)\n          at Object.<anonymous> (/home/jenner/code/mcps/node_modules/expect/build/toThrowMatchers.js:74:11)\n          at Object.throwingMatcher [as toThrow] (/home/jenner/code/mcps/node_modules/expect/build/index.js:320:21)\n          at Object.toThrow (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:171:10)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m`Failed to configure notification channel ${channel.name}:`\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Channel configuration failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 104 |\u001b[39m     }\n     \u001b[90m 105 |\u001b[39m   }\u001b[0m\n\n      at AlertingSystem.error [as configureNotificationChannel] (mcp-local-setup/monitoring/alerts/alerting.js:102:15)\n      at configureNotificationChannel (mcp-local-setup/monitoring/tests/alerting-system.test.js:170:35)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (mcp-local-setup/monitoring/tests/alerting-system.test.js:171:10)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.446Z\n      ========================================\n      Title: Test Alert\n      Message: This is a test alert\n      Rule: test-rule\n      ID: alert-1753397522446-1idpim4hm\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.error\n      Failed to send alert: Error: Alert rule not found: non-existent\n          at AlertingSystem.sendAlert (/home/jenner/code/mcps/mcp-local-setup/monitoring/alerts/alerting.js:151:15)\n          at Object.sendAlert (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:257:35)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 189 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 191 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to send alert:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 192 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Alert sending failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 193 |\u001b[39m     }\n     \u001b[90m 194 |\u001b[39m   }\u001b[0m\n\n      at AlertingSystem.error [as sendAlert] (mcp-local-setup/monitoring/alerts/alerting.js:191:15)\n      at Object.sendAlert (mcp-local-setup/monitoring/tests/alerting-system.test.js:257:35)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.453Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522453-ln2ylgwyd\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.454Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522454-gnhc8jd3u\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.456Z\n      ========================================\n      Title: escalation-rule\n      Message: Test escalation\n      Rule: escalation-rule\n      ID: alert-1753397522456-eohzjoq2y\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.error\n      Failed to send notification to test-email: Error: Email failed\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:371:55)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 448 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 449 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 450 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m`Failed to send notification to ${channelName}:`\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 451 |\u001b[39m         results\u001b[33m.\u001b[39mpush({\n     \u001b[90m 452 |\u001b[39m           channel\u001b[33m:\u001b[39m channelName\u001b[33m,\u001b[39m\n     \u001b[90m 453 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at AlertingSystem.error [as sendNotifications] (mcp-local-setup/monitoring/alerts/alerting.js:450:17)\n      at Object.<anonymous> (mcp-local-setup/monitoring/tests/alerting-system.test.js:379:23)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.464Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522464-o2lvvxgxd\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.465Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522465-okkywl6hp\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.466Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522466-y9fej1gjy\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.467Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522467-lvufyz0t4\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.468Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522468-2jq5dhal3\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.469Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522469-66fegexag\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\nPASS mcp-local-setup/tests/integration/phase5/orchestration-only.test.js\nPASS mcp-local-setup/monitoring/tests/metrics-collector-simple.test.js\nPASS mcp-local-setup/tests/integration/phase5/sdk-cli-integration.test.js\nPASS tests/unit/monitoring/error-tracker.test.js\nPASS tests/unit/monitoring/prometheus-exporter.test.js\nPASS tests/unit/monitoring/winston-config.test.js\n  ● Console\n\n    console.log\n      2025-07-24 18:52:02.490 [test-service] \u001b[32minfo\u001b[39m: \u001b[32m\tIncoming request\u001b[39m {\"correlationId\":\"1753397522490-pngkgahh0\",\"hostname\":\"TorrenceBioAI1\",\"pid\":3738385,\"method\":\"GET\",\"url\":\"/test\",\"headers\":{\"user-agent\":\"test\"},\"ip\":\"127.0.0.1\"} {\"environment\":\"test\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\nPASS tests/unit/docker/health/readiness.test.js\nPASS mcp-local-setup/enterprise/tests/authentication.test.js\n  ● Console\n\n    console.log\n      Testing LDAP connection to ldaps://ldap.example.com:636\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Testing LDAP connection to ldaps://ldap.example.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Testing LDAP connection to ldaps://ldap.example.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Processing SAML assertion\n\n      at SSOAuthentication.log [as _authenticateSAML] (mcp-local-setup/enterprise/sso/authentication.js:357:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Exchanging OAuth2 code for tokens\n\n      at SSOAuthentication.log [as _authenticateOAuth2] (mcp-local-setup/enterprise/sso/authentication.js:374:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Authenticating via LDAP\n\n      at SSOAuthentication.log [as _authenticateLDAP] (mcp-local-setup/enterprise/sso/authentication.js:392:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Authenticating via LDAP\n\n      at SSOAuthentication.log [as _authenticateLDAP] (mcp-local-setup/enterprise/sso/authentication.js:392:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Processing SAML assertion\n\n      at SSOAuthentication.log [as _authenticateSAML] (mcp-local-setup/enterprise/sso/authentication.js:357:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Exchanging OAuth2 code for tokens\n\n      at SSOAuthentication.log [as _authenticateOAuth2] (mcp-local-setup/enterprise/sso/authentication.js:374:13)\n\nFAIL tests/integration/phase6/production-deployment.test.js\n  ● Console\n\n    console.warn\n      Redis storage requested but no Redis client provided, falling back to memory storage\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m     \u001b[90m// If Redis storage is requested but no Redis client provided, fall back to memory\u001b[39m\n     \u001b[90m  7 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m===\u001b[39m \u001b[32m'redis'\u001b[39m \u001b[33m&&\u001b[39m \u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mredis) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m'Redis storage requested but no Redis client provided, falling back to memory storage'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m=\u001b[39m \u001b[32m'memory'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m     \u001b[0m\n\n      at new warn (security/rate-limiting/rate-limiter.js:8:15)\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:22:19)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Production system started {\"environment\":\"production\",\"timestamp\":\"2025-07-24T22:52:02.260Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.warn\n      Redis storage requested but no Redis client provided, falling back to memory storage\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m     \u001b[90m// If Redis storage is requested but no Redis client provided, fall back to memory\u001b[39m\n     \u001b[90m  7 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m===\u001b[39m \u001b[32m'redis'\u001b[39m \u001b[33m&&\u001b[39m \u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mredis) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m'Redis storage requested but no Redis client provided, falling back to memory storage'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m=\u001b[39m \u001b[32m'memory'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m     \u001b[0m\n\n      at new warn (security/rate-limiting/rate-limiter.js:8:15)\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:22:19)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request started {\"metadata\":{\"ip\":\"203.0.113.1\",\"method\":\"GET\",\"path\":\"/api/profile\",\"requestId\":\"prod-req-001\",\"userId\":\"user-123\"},\"timestamp\":\"2025-07-24T22:52:02.275Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Request failed {\"metadata\":{\"error\":{\"message\":\"Added label \\\"status\\\" is not included in initial labelset: []\",\"name\":\"Error\",\"stack\":\"Error: Added label \\\"status\\\" is not included in initial labelset: []\\n    at validateLabel (/home/jenner/code/mcps/node_modules/prom-client/lib/validation.js:20:10)\\n    at /home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:235:3\\n    at Histogram.observeWithoutExemplar (/home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:74:54)\\n    at /home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:185:9\\n    at Object.requestTimer (/home/jenner/code/mcps/tests/integration/phase6/production-deployment.test.js:134:7)\"},\"requestId\":\"prod-req-001\",\"userId\":\"user-123\"},\"timestamp\":\"2025-07-24T22:52:02.392Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.warn\n      Redis storage requested but no Redis client provided, falling back to memory storage\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m     \u001b[90m// If Redis storage is requested but no Redis client provided, fall back to memory\u001b[39m\n     \u001b[90m  7 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m===\u001b[39m \u001b[32m'redis'\u001b[39m \u001b[33m&&\u001b[39m \u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mredis) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m'Redis storage requested but no Redis client provided, falling back to memory storage'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m=\u001b[39m \u001b[32m'memory'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m     \u001b[0m\n\n      at new warn (security/rate-limiting/rate-limiter.js:8:15)\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:22:19)\n\n    console.warn\n      Redis storage requested but no Redis client provided, falling back to memory storage\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m     \u001b[90m// If Redis storage is requested but no Redis client provided, fall back to memory\u001b[39m\n     \u001b[90m  7 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m===\u001b[39m \u001b[32m'redis'\u001b[39m \u001b[33m&&\u001b[39m \u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mredis) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m'Redis storage requested but no Redis client provided, falling back to memory storage'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m=\u001b[39m \u001b[32m'memory'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m     \u001b[0m\n\n      at new warn (security/rate-limiting/rate-limiter.js:8:15)\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:22:19)\n\n    console.log\n      \u001b[33mwarn\u001b[39m: Graceful shutdown initiated {\"timestamp\":\"2025-07-24T22:52:02.400Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Graceful shutdown complete {\"timestamp\":\"2025-07-24T22:52:02.503Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n  ● Production Deployment Integration › Production request flow with all components\n\n    Added label \"status\" is not included in initial labelset: []\n\n    \u001b[0m \u001b[90m 149 |\u001b[39m\n     \u001b[90m 150 |\u001b[39m       requestLogger\u001b[33m.\u001b[39merror(\u001b[32m'Request failed'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 151 |\u001b[39m       requestTimer({ status\u001b[33m:\u001b[39m \u001b[35m500\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 152 |\u001b[39m     } \u001b[36mfinally\u001b[39m {\n     \u001b[90m 153 |\u001b[39m       transaction\u001b[33m.\u001b[39mfinish()\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m     }\u001b[0m\n\n      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)\n      at node_modules/prom-client/lib/histogram.js:235:3\n      at Histogram.observeWithoutExemplar (node_modules/prom-client/lib/histogram.js:74:54)\n      at node_modules/prom-client/lib/histogram.js:185:9\n      at Object.requestTimer (tests/integration/phase6/production-deployment.test.js:151:7)\n\n  ● Production Deployment Integration › Production monitoring and alerting\n\n    ReferenceError: Cannot access 'health' before initialization\n\n    \u001b[0m \u001b[90m 181 |\u001b[39m\n     \u001b[90m 182 |\u001b[39m     \u001b[90m// Check health degradation\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 183 |\u001b[39m     \u001b[36mconst\u001b[39m health \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m health\u001b[33m.\u001b[39mcheckHealth()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 184 |\u001b[39m     expect(health\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'degraded'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m\n     \u001b[90m 186 |\u001b[39m     \u001b[90m// Verify metrics\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:183:20)\n\nPASS tests/docker-production.test.js\nPASS mcp-local-setup/deploy/tests/gcp.test.js\nPASS mcp-local-setup/tests/unit/config/config-validator.test.js\nPASS mcp-local-setup/tests/integration/phase5/orchestration-cicd-only.test.js\nPASS tests/unit/security/jwt-auth.test.js\nPASS tests/unit/monitoring/custom-metrics.test.js\nPASS tests/unit/security/rate-limiter.test.js\nPASS mcp-local-setup/deploy/tests/index.test.js\nPASS mcp-local-setup/tests/unit/marketplace/discovery.test.js\nPASS tests/unit/security/api-key.test.js\nFAIL mcp-local-setup/tests/unit/cli-mcp-cli.unit.test.js\n  ● MCP CLI Command Parsing › CLI Initialization › should set up correct environment variables\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › CLI Initialization › should define all required command paths\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › fileExists should check file accessibility\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › runCommand should spawn process with correct arguments\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › runCommand should handle process errors\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Command Structure › should parse version command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Command Structure › should parse help command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service start command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service stop command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service restart command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should handle profile list command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should handle profile switch command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should validate profile creation\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle missing docker-compose file\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle invalid profile names\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle service command failures gracefully\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\nPASS tests/unit/docker/health/liveness.test.js\nPASS tests/unit/monitoring/logger.test.js\n  ● Console\n\n    console.log\n      \u001b[34mdebug\u001b[39m: Debug message {\"timestamp\":\"2025-07-24T22:52:02.091Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Info message {\"timestamp\":\"2025-07-24T22:52:02.112Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[33mwarn\u001b[39m: Warning message {\"timestamp\":\"2025-07-24T22:52:02.113Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Error message {\"timestamp\":\"2025-07-24T22:52:02.115Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Test message {\"action\":\"login\",\"timestamp\":\"2025-07-24T22:52:02.129Z\",\"userId\":123}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Error occurred {\"context\":\"test\",\"error\":{\"message\":\"Test error\",\"name\":\"Error\",\"stack\":\"Error: Test error\\n    at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/monitoring/logger.test.js:37:21)\\n    at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\\n    at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\\n    at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\\n    at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\\n    at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\\n    at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\\n    at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\\n    at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\\n    at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\"},\"timestamp\":\"2025-07-24T22:52:02.145Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Timer test-operation completed {\"duration\":101,\"durationMs\":101,\"timer\":\"test-operation\",\"timestamp\":\"2025-07-24T22:52:02.267Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Timer db-query completed {\"duration\":54,\"durationMs\":54,\"query\":\"SELECT * FROM users\",\"timer\":\"db-query\",\"timestamp\":\"2025-07-24T22:52:02.327Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request received {\"metadata\":{\"headers\":{\"content-type\":\"application/json\"},\"ip\":\"127.0.0.1\",\"method\":\"POST\",\"path\":\"/api/users\",\"requestId\":\"req-1753397522339-xmcqowxoh\"},\"timestamp\":\"2025-07-24T22:52:02.340Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Test message 1 {\"timestamp\":\"2025-07-24T22:52:02.360Z\",\"type\":\"test\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Test message 2 {\"timestamp\":\"2025-07-24T22:52:02.363Z\",\"type\":\"other\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Error message {\"timestamp\":\"2025-07-24T22:52:02.470Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Info message {\"timestamp\":\"2025-07-24T22:52:02.473Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\nPASS tests/unit/docker/health/startup.test.js\nPASS tests/unit/monitoring/metrics.test.js\nPASS tests/unit/docker/graceful-shutdown.test.js\nFAIL tests/unit/security/xss-protection.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'isomorphic-dompurify' from 'tests/unit/security/xss-protection.test.js'\n\n    \u001b[0m \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[90m// Mock isomorphic-dompurify\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 4 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'isomorphic-dompurify'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 5 |\u001b[39m   \u001b[36mreturn\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m 6 |\u001b[39m     sanitize\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn((dirty\u001b[33m,\u001b[39m config) \u001b[33m=>\u001b[39m {\n     \u001b[90m 7 |\u001b[39m       \u001b[90m// Simple mock sanitization\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.mock (tests/unit/security/xss-protection.test.js:4:6)\n\nFAIL mcp-local-setup/tests/unit/update/update-manager.unit.test.js\n  ● Test suite failed to run\n\n    TypeError: Cannot destructure property 'O_CREAT' of 'fs.constants' as it is undefined.\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mconst\u001b[39m { pipeline } \u001b[33m=\u001b[39m require(\u001b[32m'stream/promises'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mconst\u001b[39m { createWriteStream\u001b[33m,\u001b[39m createReadStream } \u001b[33m=\u001b[39m require(\u001b[32m'fs'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mconst\u001b[39m tar \u001b[33m=\u001b[39m require(\u001b[32m'tar'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m \u001b[36mconst\u001b[39m semver \u001b[33m=\u001b[39m require(\u001b[32m'semver'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m cron \u001b[33m=\u001b[39m require(\u001b[32m'node-cron'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/get-write-flag.js:14:9)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/unpack.js:48:17)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/extract.js:5:16)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/index.js:8:31)\n      at Object.require (mcp-local-setup/scripts/update-manager.js:13:13)\n      at Object.require (mcp-local-setup/tests/unit/update/update-manager.unit.test.js:5:23)\n\nFAIL mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../monitoring/logging/service' from 'mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mComplianceTools\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../enterprise/compliance/tools'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mTenantManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../enterprise/multi-tenant/tenancy'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLoggingService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertingSystem\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/alerts/alerting'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m describe(\u001b[32m'SSO + Compliance Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js:9:24)\n\nFAIL tests/unit/security/input-validator.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'validator' from 'security/validation/input-validator.js'\n\n    Require stack:\n      security/validation/input-validator.js\n      tests/unit/security/input-validator.test.js\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m validator \u001b[33m=\u001b[39m require(\u001b[32m'validator'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m createDOMPurify \u001b[33m=\u001b[39m require(\u001b[32m'isomorphic-dompurify'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mInputValidator\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (security/validation/input-validator.js:8:19)\n      at Object.<anonymous> (tests/unit/security/input-validator.test.js:1:79)\n\nFAIL tests/security/injection-prevention.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'validator' from 'security/validation/input-validator.js'\n\n    Require stack:\n      security/validation/input-validator.js\n      tests/security/injection-prevention.test.js\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m validator \u001b[33m=\u001b[39m require(\u001b[32m'validator'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m createDOMPurify \u001b[33m=\u001b[39m require(\u001b[32m'isomorphic-dompurify'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mInputValidator\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (security/validation/input-validator.js:8:19)\n      at Object.<anonymous> (tests/security/injection-prevention.test.js:1:76)\n\nFAIL tests/unit/security/oauth.test.js\n  ● OAuth2Provider › getUserInfo › should return user info\n\n    User info URL not configured\n\n    \u001b[0m \u001b[90m 211 |\u001b[39m   \u001b[36masync\u001b[39m getUserInfo(accessToken) {\n     \u001b[90m 212 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconfig\u001b[33m.\u001b[39muserInfoURL) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 213 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'User info URL not configured'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 214 |\u001b[39m     }\n     \u001b[90m 215 |\u001b[39m\n     \u001b[90m 216 |\u001b[39m     \u001b[36mtry\u001b[39m {\u001b[0m\n\n      at OAuth2Provider.getUserInfo (security/api-auth/oauth.js:213:13)\n      at Object.getUserInfo (tests/unit/security/oauth.test.js:161:39)\n\nFAIL mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../monitoring/logging/service' from 'mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAzureDeployment\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../deploy/azure/deployment'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMetricsCollector\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/metrics/collector'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLoggingService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertingSystem\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/alerts/alerting'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 19 |\u001b[39m\n     \u001b[90m 20 |\u001b[39m describe(\u001b[32m'Phase 4 Full Workflow Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js:17:24)\n\nFAIL mcp-local-setup/monitoring/tests/logging-service.test.js\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockWinston' before initialization\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'winston'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m mockWinston)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m\n     \u001b[90m 33 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'winston-daily-rotate-file'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 34 |\u001b[39m   \u001b[36mreturn\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m ({}))\u001b[33m;\u001b[39m\u001b[0m\n\n      at mockWinston (mcp-local-setup/monitoring/tests/logging-service.test.js:31:28)\n      at Object.require (mcp-local-setup/monitoring/logging/logger.js:6:17)\n      at Object.require (mcp-local-setup/monitoring/tests/logging-service.test.js:5:24)\n\nFAIL tests/sdk-core.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../../mcp-local-setup/enterprise/sso/authentication' from 'sdk/core/index.js'\n\n    Require stack:\n      sdk/core/index.js\n      tests/sdk-core.test.js\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mEventEmitter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'events'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m crypto \u001b[33m=\u001b[39m require(\u001b[32m'crypto'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mSSOAuthentication\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../mcp-local-setup/enterprise/sso/authentication'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMarketplaceDiscovery\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../mcp-local-setup/api/marketplace/discovery'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m \u001b[36mextends\u001b[39m \u001b[33mEventEmitter\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (sdk/core/index.js:7:27)\n      at Object.require (tests/sdk-core.test.js:6:17)\n\n  ●  process.exit called with \"1\"\n\n    \u001b[0m \u001b[90m 66 |\u001b[39m     spinner\u001b[33m.\u001b[39mfail(\u001b[32m'Failed to check system health'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m     console\u001b[33m.\u001b[39merror(chalk\u001b[33m.\u001b[39mred(\u001b[32m'Error:'\u001b[39m)\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 68 |\u001b[39m     process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 69 |\u001b[39m   }\n     \u001b[90m 70 |\u001b[39m }\n     \u001b[90m 71 |\u001b[39m\u001b[0m\n\n      at exit (mcp-local-setup/cli/commands/health.js:68:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)\nFAIL tests/unit/monitoring/logging/rotation.test.js\n  ● Test suite failed to run\n\n    TypeError: Cannot assign to read only property 'createGzip' of object '#<Object>'\n\n      at node_modules/jest-mock/build/index.js:784:33\n          at Set.forEach (<anonymous>)\n\nFAIL mcp-local-setup/tests/unit/security/network-manager.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word 'public'. (240:14)\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m         \u001b[90m// Group services by isolation requirements\u001b[39m\n     \u001b[90m 239 |\u001b[39m         \u001b[36mconst\u001b[39m isolated \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m         \u001b[36mconst\u001b[39m \u001b[36mpublic\u001b[39m \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n     \u001b[90m 242 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m rule \u001b[36mof\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrules\u001b[33m.\u001b[39mvalues()) {\n     \u001b[90m 243 |\u001b[39m             \u001b[36mif\u001b[39m (rule\u001b[33m.\u001b[39mallowed) {\u001b[0m\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mRateLimiter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./rate-limiter'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mCORSManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./cors-manager'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mServiceIsolation\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./service-isolation'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mNetworkManager\u001b[39m {\n     \u001b[90m 11 |\u001b[39m     constructor() {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)\n      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)\n      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)\n      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)\n      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)\n      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)\n      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)\n      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)\n      at Object.require (mcp-local-setup/tests/unit/security/network-manager.test.js:5:24)\n\nFAIL tests/unit/monitoring/errors/error-boundaries.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax 'jsx' isn't currently enabled (96:11):\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33mFallbackComponent\u001b[39m) {\n     \u001b[90m 95 |\u001b[39m         \u001b[36mreturn\u001b[39m (\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33mFallbackComponent\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m             error\u001b[33m=\u001b[39m{error}\n     \u001b[90m 98 |\u001b[39m             errorInfo\u001b[33m=\u001b[39m{errorInfo}\n     \u001b[90m 99 |\u001b[39m             resetErrorBoundary\u001b[33m=\u001b[39m{\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mresetErrorBoundary}\u001b[0m\n\n    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the 'presets' section of your Babel config to enable transformation.\n    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the 'plugins' section to enable parsing.\n\n    If you already added the plugin for this syntax to your config, it's possible that your config isn't being loaded.\n    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:\n    \tnpx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js <your build command>\n    See https://babeljs.io/docs/configuration#print-effective-configs for more info.\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorBoundaries\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../monitoring/errors/error-boundaries'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mEventEmitter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'events'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m\n     \u001b[90m 4 |\u001b[39m describe(\u001b[32m'ErrorBoundaries'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)\n      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)\n      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)\n      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.<anonymous> (tests/unit/monitoring/errors/error-boundaries.test.js:1:82)\n\nPASS tests/unit/monitoring/sentry-integration.test.js\nFAIL mcp-local-setup/tests/e2e/installation-flow.e2e.test.js\n  ● Installation Flow E2E Tests › Initial Installation › should set correct file permissions\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 123 |\u001b[39m         \u001b[36mconst\u001b[39m stats \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m fs\u001b[33m.\u001b[39mstat(filePath)\u001b[33m;\u001b[39m\n     \u001b[90m 124 |\u001b[39m         \u001b[36mconst\u001b[39m isExecutable \u001b[33m=\u001b[39m (stats\u001b[33m.\u001b[39mmode \u001b[33m&\u001b[39m \u001b[35m0o111\u001b[39m) \u001b[33m!==\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 125 |\u001b[39m         expect(isExecutable)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 126 |\u001b[39m       }\n     \u001b[90m 127 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 128 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/e2e/installation-flow.e2e.test.js:125:30)\n\nPASS mcp-local-setup/tests/e2e/service-deployment.e2e.test.js\nFAIL mcp-local-setup/tests/integration/security.integration.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word 'public'. (240:14)\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m         \u001b[90m// Group services by isolation requirements\u001b[39m\n     \u001b[90m 239 |\u001b[39m         \u001b[36mconst\u001b[39m isolated \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m         \u001b[36mconst\u001b[39m \u001b[36mpublic\u001b[39m \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n     \u001b[90m 242 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m rule \u001b[36mof\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrules\u001b[33m.\u001b[39mvalues()) {\n     \u001b[90m 243 |\u001b[39m             \u001b[36mif\u001b[39m (rule\u001b[33m.\u001b[39mallowed) {\u001b[0m\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mRateLimiter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./rate-limiter'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mCORSManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./cors-manager'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mServiceIsolation\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./service-isolation'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mNetworkManager\u001b[39m {\n     \u001b[90m 11 |\u001b[39m     constructor() {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)\n      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)\n      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)\n      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)\n      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)\n      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)\n      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)\n      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)\n      at Object.require (mcp-local-setup/security/index.js:8:24)\n      at Object.require (mcp-local-setup/tests/integration/security.integration.test.js:6:32)\n\nFAIL tests/integration/monitoring/error-tracking.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax 'jsx' isn't currently enabled (96:11):\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33mFallbackComponent\u001b[39m) {\n     \u001b[90m 95 |\u001b[39m         \u001b[36mreturn\u001b[39m (\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33mFallbackComponent\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m             error\u001b[33m=\u001b[39m{error}\n     \u001b[90m 98 |\u001b[39m             errorInfo\u001b[33m=\u001b[39m{errorInfo}\n     \u001b[90m 99 |\u001b[39m             resetErrorBoundary\u001b[33m=\u001b[39m{\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mresetErrorBoundary}\u001b[0m\n\n    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the 'presets' section of your Babel config to enable transformation.\n    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the 'plugins' section to enable parsing.\n\n    If you already added the plugin for this syntax to your config, it's possible that your config isn't being loaded.\n    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:\n    \tnpx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js <your build command>\n    See https://babeljs.io/docs/configuration#print-effective-configs for more info.\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mSentryIntegration\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/sentry-integration'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorBoundaries\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/error-boundaries'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertRouter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/alert-router'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorTracker\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/error-tracker'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLogger\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/logger'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)\n      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)\n      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)\n      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (tests/integration/monitoring/error-tracking.test.js:2:25)\n\n  ●  process.exit called with \"1\"\n\n    \u001b[0m \u001b[90m 66 |\u001b[39m     spinner\u001b[33m.\u001b[39mfail(\u001b[32m'Failed to check system health'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m     console\u001b[33m.\u001b[39merror(chalk\u001b[33m.\u001b[39mred(\u001b[32m'Error:'\u001b[39m)\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 68 |\u001b[39m     process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 69 |\u001b[39m   }\n     \u001b[90m 70 |\u001b[39m }\n     \u001b[90m 71 |\u001b[39m\u001b[0m\n\n      at exit (mcp-local-setup/cli/commands/health.js:68:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)\nPASS tests/unit/security/token-refresh.test.js\n  ● Console\n\n    console.error\n      Auto-refresh middleware error: Error: Test error\n          at /home/jenner/code/mcps/tests/unit/security/token-refresh.test.js:308:15\n          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:397:39\n          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:404:13\n          at mockConstructor (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:148:19)\n          at getTokenId (/home/jenner/code/mcps/security/api-auth/token-refresh.js:309:25)\n          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/token-refresh.test.js:321:13)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 338 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 339 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 340 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'Auto-refresh middleware error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 341 |\u001b[39m         next()\u001b[33m;\u001b[39m \u001b[90m// Don't block on errors\u001b[39m\n     \u001b[90m 342 |\u001b[39m       }\n     \u001b[90m 343 |\u001b[39m     }\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/api-auth/token-refresh.js:340:17)\n      at Object.middleware (tests/unit/security/token-refresh.test.js:321:13)\n\n  ●  process.exit called with \"1\"\n\n    \u001b[0m \u001b[90m 66 |\u001b[39m     spinner\u001b[33m.\u001b[39mfail(\u001b[32m'Failed to check system health'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m     console\u001b[33m.\u001b[39merror(chalk\u001b[33m.\u001b[39mred(\u001b[32m'Error:'\u001b[39m)\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 68 |\u001b[39m     process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 69 |\u001b[39m   }\n     \u001b[90m 70 |\u001b[39m }\n     \u001b[90m 71 |\u001b[39m\u001b[0m\n\n      at exit (mcp-local-setup/cli/commands/health.js:68:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)\nFAIL mcp-local-setup/tests/integration/update.integration.test.js\n  ● Update Mechanism Integration Tests › Platform Self-Update › should check for platform updates\n\n    Failed to check for updates: Invalid version. Must be a string. Got type \"object\".\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m             \u001b[36mreturn\u001b[39m applicableUpdates\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check for updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m         }\n     \u001b[90m 105 |\u001b[39m     }\n     \u001b[90m 106 |\u001b[39m\u001b[0m\n\n      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:38:29)\n\n  ● Update Mechanism Integration Tests › Platform Self-Update › should check beta channel updates\n\n    Failed to check for updates: Invalid version. Must be a string. Got type \"object\".\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m             \u001b[36mreturn\u001b[39m applicableUpdates\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check for updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m         }\n     \u001b[90m 105 |\u001b[39m     }\n     \u001b[90m 106 |\u001b[39m\u001b[0m\n\n      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:57:29)\n\n  ● Update Mechanism Integration Tests › Service Updates › should check for service updates\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:137:36)\n\n  ● Update Mechanism Integration Tests › Service Updates › should handle dependency resolution\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:161:29)\n\n  ● Update Mechanism Integration Tests › Service Updates › should detect breaking changes\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:172:29)\n\n  ● Update Mechanism Integration Tests › Rollback Functionality › should fail rollback to incompatible version\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Incompatible version\"\n    Received message:   \"No backup found for version 0.1.0\"\n\n        \u001b[0m \u001b[90m 266 |\u001b[39m             \u001b[36mconst\u001b[39m backupPath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mupdateDir\u001b[33m,\u001b[39m \u001b[32m'backups'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`backup-${version}.tar.gz`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m 267 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mfileExists(backupPath)) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`No backup found for version ${version}`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 269 |\u001b[39m             }\n         \u001b[90m 270 |\u001b[39m\n         \u001b[90m 271 |\u001b[39m             \u001b[90m// Check compatibility unless forced\u001b[39m\u001b[0m\n\n      at UpdateManager.rollback (mcp-local-setup/scripts/update-manager.js:268:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:241:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:242:26)\n\n  ● Update Mechanism Integration Tests › Update Notifications › should get current update status\n\n    expect(received).toBeTruthy()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m             \n     \u001b[90m 250 |\u001b[39m             \u001b[36mif\u001b[39m (status) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mupdateId)\u001b[33m.\u001b[39mtoBeTruthy()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/downloading|ready|applying|complete|failed/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mprogress)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mprogress)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeTruthy (mcp-local-setup/tests/integration/update.integration.test.js:251:41)\n\n  ● Update Mechanism Integration Tests › Error Handling › should prevent downgrade without force flag\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Downgrade not allowed\"\n    Received message:   \"metadata is not defined\"\n\n        \u001b[0m \u001b[90m 244 |\u001b[39m                 installedAt\u001b[33m:\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m\n         \u001b[90m 245 |\u001b[39m                 installedBy\u001b[33m:\u001b[39m \u001b[32m'system'\u001b[39m\u001b[33m,\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 246 |\u001b[39m                 previousVersion\u001b[33m:\u001b[39m metadata\u001b[33m.\u001b[39mcurrentVersion\u001b[33m,\u001b[39m\n         \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 247 |\u001b[39m                 success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n         \u001b[90m 248 |\u001b[39m                 notes\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage\n         \u001b[90m 249 |\u001b[39m             })\u001b[33m;\u001b[39m\u001b[0m\n\n      at UpdateManager.metadata [as applyUpdate] (mcp-local-setup/scripts/update-manager.js:246:34)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:336:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:337:26)\n\n  ●  process.exit called with \"1\"\n\n    \u001b[0m \u001b[90m 66 |\u001b[39m     spinner\u001b[33m.\u001b[39mfail(\u001b[32m'Failed to check system health'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m     console\u001b[33m.\u001b[39merror(chalk\u001b[33m.\u001b[39mred(\u001b[32m'Error:'\u001b[39m)\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 68 |\u001b[39m     process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 69 |\u001b[39m   }\n     \u001b[90m 70 |\u001b[39m }\n     \u001b[90m 71 |\u001b[39m\u001b[0m\n\n      at exit (mcp-local-setup/cli/commands/health.js:68:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)\nFAIL mcp-local-setup/tests/unit/cli-commands-health.unit.test.js\n  ● Test suite failed to run\n\n    Jest worker encountered 4 child process exceptions, exceeding retry limit\n\n      at ChildProcessWorker.initialize (node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)\n\nFAIL mcp-local-setup/tests/unit/security/auth-manager.test.js\n  ● AuthManager › rotateToken › should rotate valid token\n\n    Bad \"options.expiresIn\" option the payload already has an \"exp\" property.\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m \u001b[90m     */\u001b[39m\n     \u001b[90m 219 |\u001b[39m     generateJWT(payload) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         \u001b[36mreturn\u001b[39m jwt\u001b[33m.\u001b[39msign(payload\u001b[33m,\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mjwtSecret\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             expiresIn\u001b[33m:\u001b[39m \u001b[32m'1h'\u001b[39m\n     \u001b[90m 222 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m     }\u001b[0m\n\n      at Object.<anonymous>.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)\n      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)\n      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/security/auth-manager.test.js:122:29)\n\n  ● AuthManager › rotateToken › should keep old token valid during grace period\n\n    Bad \"options.expiresIn\" option the payload already has an \"exp\" property.\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m \u001b[90m     */\u001b[39m\n     \u001b[90m 219 |\u001b[39m     generateJWT(payload) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         \u001b[36mreturn\u001b[39m jwt\u001b[33m.\u001b[39msign(payload\u001b[33m,\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mjwtSecret\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             expiresIn\u001b[33m:\u001b[39m \u001b[32m'1h'\u001b[39m\n     \u001b[90m 222 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m     }\u001b[0m\n\n      at Object.<anonymous>.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)\n      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)\n      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/security/auth-manager.test.js:131:29)\n\nPASS tests/health-monitor.test.js\nPASS mcp-local-setup/tests/integration/health-check.integration.test.js\nError response from daemon: No such image: test-node:latest\nError response from daemon: No such image: test-python:latest\nError response from daemon: No such image: test-go:latest\nFAIL tests/integration/docker/build-validation.test.js (5.181 s)\n  ● Console\n\n    console.log\n      Python Dockerfile validation errors: [\n        'Line 8: Clean apt cache after install',\n        'Line 47: Clean apt cache after install'\n      ]\n\n      at Object.log (tests/integration/docker/build-validation.test.js:97:17)\n\n  ● Docker Build Validation › Dockerfile Syntax Validation › should validate Python Dockerfile\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m  98 |\u001b[39m       }\n     \u001b[90m  99 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 100 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m     it(\u001b[32m'should validate Go Dockerfile'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (tests/integration/docker/build-validation.test.js:100:28)\n\n  ● Docker Build Validation › Build Configuration › should use build arguments for flexibility\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 206 |\u001b[39m         \u001b[36mconst\u001b[39m hasArgs \u001b[33m=\u001b[39m content\u001b[33m.\u001b[39mincludes(\u001b[32m'ARG'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 207 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 208 |\u001b[39m         expect(hasArgs)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 209 |\u001b[39m       }\n     \u001b[90m 210 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/integration/docker/build-validation.test.js:208:25)\n\n  ● Docker Build Validation › Build Configuration › should have proper labels\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m         \u001b[90m// Check for any LABEL instruction (more flexible)\u001b[39m\n     \u001b[90m 229 |\u001b[39m         \u001b[36mconst\u001b[39m hasLabels \u001b[33m=\u001b[39m content\u001b[33m.\u001b[39mmatch(\u001b[35m/LABEL\\s+\\w+=/\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m         expect(hasLabels)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m       }\n     \u001b[90m 232 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeNull (tests/integration/docker/build-validation.test.js:230:31)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Node.js image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/node.Dockerfile --label test=true -t test-node:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 253 |\u001b[39m       \n         \u001b[90m 254 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 255 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 256 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 257 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 258 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:255:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Python image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/python.Dockerfile --label test=true -t test-python:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 261 |\u001b[39m       \n         \u001b[90m 262 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 263 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 264 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 265 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 266 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:263:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Go image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/go.Dockerfile --label test=true -t test-go:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 269 |\u001b[39m       \n         \u001b[90m 270 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 272 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 273 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 274 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:271:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)\n\nPASS mcp-local-setup/tests/unit/security/tls-manager.test.js (8.35 s)\n  ● Console\n\n    console.warn\n      Let's Encrypt requires production environment. Generating self-signed certificate instead.\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m         \u001b[90m// Check if we're in production environment\u001b[39m\n     \u001b[90m 86 |\u001b[39m         \u001b[36mif\u001b[39m (process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m!==\u001b[39m \u001b[32m'production'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m             console\u001b[33m.\u001b[39mwarn(\u001b[32m'Let\\'s Encrypt requires production environment. Generating self-signed certificate instead.'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m             \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateSelfSigned(domain\u001b[33m,\u001b[39m options)\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m         }\n     \u001b[90m 90 |\u001b[39m\u001b[0m\n\n      at TLSManager.warn [as generateLetsEncrypt] (mcp-local-setup/security/tls/tls-manager.js:87:21)\n      at TLSManager.generateLetsEncrypt (mcp-local-setup/security/tls/tls-manager.js:46:25)\n      at Object.generateCertificate (mcp-local-setup/tests/unit/security/tls-manager.test.js:51:45)\n\nFAIL tests/unit/monitoring/alert-router.test.js (11.546 s)\n  ● Console\n\n    console.log\n      [ALERT] info: Test Alert {\n        id: 'alert-1753397522029-xji2bvge6',\n        timestamp: '2025-07-24T22:52:02.029Z',\n        severity: 'info',\n        title: 'Test Alert',\n        description: '',\n        source: 'unknown',\n        tags: {},\n        metadata: {},\n        dedupKey: '::Test Alert:'\n      }\n\n      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)\n\n    console.log\n      [ALERT] error: Duplicate Alert {\n        id: 'alert-1753397522060-jtwd2vvus',\n        timestamp: '2025-07-24T22:52:02.060Z',\n        severity: 'error',\n        title: 'Duplicate Alert',\n        description: '',\n        source: 'test',\n        tags: {},\n        metadata: {},\n        dedupKey: 'test:error:duplicate'\n      }\n\n      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)\n\n    console.log\n      [ALERT] warn: 1 alerts aggregated {\n        id: 'agg-1753397523069',\n        timestamp: '2025-07-24T22:52:03.069Z',\n        severity: 'warn',\n        title: '1 alerts aggregated',\n        description: '1 similar alerts in 1000ms window',\n        source: 'alert-aggregator',\n        tags: {},\n        metadata: {\n          firstSeen: '2025-07-24T22:52:02.068Z',\n          lastSeen: '2025-07-24T22:52:02.068Z',\n          count: 1\n        },\n        dedupKey: 'alert-aggregator:warn:1 alerts aggregated:',\n        alerts: [\n          {\n            id: 'alert-1753397522067-d326bh8if',\n            timestamp: '2025-07-24T22:52:02.067Z',\n            severity: 'warn',\n            title: 'Test Alert',\n            description: '',\n            source: 'test',\n            tags: {},\n            metadata: {},\n            dedupKey: 'test:warn:Test Alert:'\n          }\n        ]\n      }\n\n      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)\n\n  ● AlertRouter › alert actions › should handle action errors gracefully\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m     it(\u001b[32m'should handle action errors gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m       \u001b[36mconst\u001b[39m mockSend \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Send failed'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m       \n     \u001b[90m 295 |\u001b[39m       alertRouter\u001b[33m.\u001b[39maddChannel(\u001b[32m'failing'\u001b[39m\u001b[33m,\u001b[39m { send\u001b[33m:\u001b[39m mockSend })\u001b[33m;\u001b[39m\u001b[0m\n\n      at it (tests/unit/monitoring/alert-router.test.js:292:5)\n      at describe (tests/unit/monitoring/alert-router.test.js:224:3)\n      at Object.describe (tests/unit/monitoring/alert-router.test.js:3:1)\n\nFAIL mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js (15.451 s)\n  ● Console\n\n    console.log\n      Building Docker image for api-service\n\n      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)\n\n    console.log\n      Triggering GitHub Actions deployment for api-service to production\n\n      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)\n\n    console.log\n      Triggering GitHub Actions deployment for web to production\n\n      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)\n\n    console.log\n      Starting rollback for deployment dep-web-1753397525053, orchestrator: kubernetes, orchestratorDeploymentId: deploy-1753397525053-12tc8uvln\n\n      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:105:13)\n\n    console.log\n      No previous deployment found, created fake deployment for testing\n\n      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:125:17)\n\n    console.log\n      Rolling back web from v1 to v0\n\n      at GitHubAdapter.log [as rollback] (integrations/ci/platforms/GitHubAdapter.js:32:13)\n\n    console.log\n      Rolling back orchestration deployment deploy-1753397525053-12tc8uvln\n\n      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:138:19)\n\n    console.log\n      Running integration tests for api-service\n\n      at TestRunner.log (integrations/ci/utils/TestRunner.js:12:13)\n\n    console.log\n      Building Docker image for helm-app\n\n      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)\n\n    console.log\n      Building Docker image for swarm-service\n\n      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)\n\n    console.log\n      Triggering GitHub Actions deployment for swarm-service to production\n\n      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)\n\n  ● CI/CD and Orchestration Integration › Rollback works across CI/CD and orchestration\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"rolled-back\"\n    Received: \"Running\"\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m     \u001b[90m// Then orchestration should also rollback\u001b[39m\n     \u001b[90m  98 |\u001b[39m     \u001b[36mconst\u001b[39m k8sStatus \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m k8s\u001b[33m.\u001b[39mgetDeploymentStatus(deployment\u001b[33m.\u001b[39mdeploymentId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m     expect(k8sStatus\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'rolled-back'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m     expect(rollbackResult\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:99:30)\n\n  ● CI/CD and Orchestration Integration › CI/CD test results influence orchestration deployment\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"Tests must pass before deployment\"\n    Received string:    \"fail is not defined\"\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m         fail(\u001b[32m'Deployment should have been prevented'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         expect(error\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Tests must pass before deployment'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m       }\n     \u001b[90m 119 |\u001b[39m     }\n     \u001b[90m 120 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:117:31)\n\n  ● CI/CD and Orchestration Integration › Orchestration scaling triggers CI/CD metrics update\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 3\n\n    \u001b[0m \u001b[90m 132 |\u001b[39m     \u001b[90m// Then CI/CD should reflect the scaling\u001b[39m\n     \u001b[90m 133 |\u001b[39m     \u001b[36mconst\u001b[39m metrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m cicd\u001b[33m.\u001b[39mgetDeploymentStatus(deployment\u001b[33m.\u001b[39mdeploymentId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 134 |\u001b[39m     expect(metrics\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mreplicas)\u001b[33m.\u001b[39mtoBe(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 135 |\u001b[39m     expect(metrics\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mscalingEvents)\u001b[33m.\u001b[39mtoContainEqual(\n     \u001b[90m 136 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 137 |\u001b[39m         type\u001b[33m:\u001b[39m \u001b[32m'manual-scale'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:134:38)\n\n\n<--- Last few GCs --->\n\n[3738405:0x1bc12000]    14302 ms: Mark-Compact 4043.8 (4130.3) -> 4041.0 (4143.8) MB, pooled: 0 MB, 1226.94 / 0.00 ms  (average mu = 0.304, current mu = 0.125) allocation failure; scavenge might not succeed\n[3738405:0x1bc12000]    16698 ms: Mark-Compact 4056.7 (4143.8) -> 4051.5 (4154.3) MB, pooled: 0 MB, 2393.00 / 0.00 ms  (average mu = 0.115, current mu = 0.001) allocation failure; scavenge might not succeed\n\n\n<--- JS stacktrace --->\n\nFATAL ERROR: Reached heap limit Allocation failed - JavaScript heap out of memory\n----- Native stack trace -----\n\n\n  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"[ALERT] error: Test Error {\n      id: 'alert-1753397523171-ffj5aqj9g',\n      timestamp: '2025-07-24T22:52:03.171Z',\n      severity: 'error',\n      title: 'Test Error',\n      description: '',\n      source: 'unknown',\n      tags: {},\n      metadata: {},\n      dedupKey: ':error:Test Error:'\n    }\".\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39maddChannel(\u001b[32m'console'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 50 |\u001b[39m       send\u001b[33m:\u001b[39m \u001b[36masync\u001b[39m (alert) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m         console\u001b[33m.\u001b[39mlog(\u001b[32m`[ALERT] ${alert.severity}: ${alert.title}`\u001b[39m\u001b[33m,\u001b[39m alert)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m         \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 53 |\u001b[39m       }\n     \u001b[90m 54 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)\n      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)\n      at AlertRouter.send [as _sendAlert] (monitoring/errors/alert-router.js:460:38)\n      at AlertRouter._sendAlert [as _executeAction] (monitoring/errors/alert-router.js:413:27)\n      at AlertRouter._executeAction [as _executeRule] (monitoring/errors/alert-router.js:393:35)\n      at AlertRouter.route (monitoring/errors/alert-router.js:219:24)\n      at Object.<anonymous> (tests/unit/monitoring/alert-router.test.js:308:22)\n\nFAIL mcp-local-setup/tests/unit/cli/publish.test.js\n  ● Test suite failed to run\n\n    A jest worker process (pid=3738405) was terminated by another process: signal=SIGTERM, exitCode=null. Operating system logs may contain more information on why this occurred.\n\n      at ChildProcessWorker._onExit (node_modules/jest-worker/build/workers/ChildProcessWorker.js:370:23)\n\nFAIL mcp-local-setup/tests/unit/update/service-updater.unit.test.js (30.539 s)\n  ● Console\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:167:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:167:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:178:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:178:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at ServiceUpdater.updateService (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:109:17)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error (mcp-local-setup/scripts/service-updater.js:136:25)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:247:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:247:13)\n\n    console.log\n      Rolling back filesystem to version 1.0.0\n\n      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)\n\n    console.log\n      Rolling back filesystem to version 1.0.0\n\n      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)\n\n    console.log\n      Rolling back filesystem to version 1.0.0\n\n      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)\n\n  ● ServiceUpdater › updateService › should update service successfully\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)\n\n  ● ServiceUpdater › updateService › should allow incompatible update with force flag\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)\n\n  ● ServiceUpdater › updateService › should update dependencies first\n\n    Service dependency1 is not installed\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m             \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39minstalled[service]) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} is not installed`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m             }\n     \u001b[90m 80 |\u001b[39m\n     \u001b[90m 81 |\u001b[39m             \u001b[90m// Get update info\u001b[39m\u001b[0m\n\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:78:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n  ● ServiceUpdater › updateService › should backup service before update\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)\n\n  ● ServiceUpdater › updateService › should run migrations after update\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)\n\n  ● ServiceUpdater › updateService › should rollback on failure\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"filesystem\", \"1.0.0\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m             )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Start failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m             expect(rollbackSpy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.0.0'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:251:33)\n\n  ● ServiceUpdater › verifyService › should verify Docker service is running\n\n    expect(received).resolves.not.toThrow()\n\n    Received promise rejected instead of resolved\n    Rejected to value: [TypeError: Cannot read properties of undefined (reading 'type')]\n\n    \u001b[0m \u001b[90m 344 |\u001b[39m             execSync\u001b[33m.\u001b[39mmockReturnValue(\u001b[32m'Up 5 seconds\\n'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 345 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 346 |\u001b[39m             \u001b[36mawait\u001b[39m expect(\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 347 |\u001b[39m                 serviceUpdater\u001b[33m.\u001b[39mverifyService(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.1.0'\u001b[39m)\n     \u001b[90m 348 |\u001b[39m             )\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 349 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:346:19)\n\n  ● ServiceUpdater › verifyService › should throw if Docker service not running\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Service filesystem failed to start\"\n    Received message:   \"Cannot read properties of undefined (reading 'type')\"\n\n        \u001b[0m \u001b[90m 565 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n         \u001b[90m 566 |\u001b[39m         \n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 567 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n         \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 568 |\u001b[39m             \u001b[90m// Check Docker container is running\u001b[39m\n         \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\u001b[0m\n\n      at ServiceUpdater.type [as verifyService] (mcp-local-setup/scripts/service-updater.js:567:32)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:354:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:356:23)\n\n  ● ServiceUpdater › rollbackService › should rollback to previous version\n\n    TypeError: Cannot read properties of undefined (reading 'type')\n\n    \u001b[0m \u001b[90m 431 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 433 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 434 |\u001b[39m             execSync(\u001b[32m`docker stop mcp-${service}`\u001b[39m\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m {\n     \u001b[90m 436 |\u001b[39m             \u001b[90m// Stop local service (would need process management)\u001b[39m\u001b[0m\n\n      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)\n      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:366:13)\n\n  ● ServiceUpdater › rollbackService › should use most recent backup\n\n    TypeError: Cannot read properties of undefined (reading 'type')\n\n    \u001b[0m \u001b[90m 431 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 433 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 434 |\u001b[39m             execSync(\u001b[32m`docker stop mcp-${service}`\u001b[39m\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m {\n     \u001b[90m 436 |\u001b[39m             \u001b[90m// Stop local service (would need process management)\u001b[39m\u001b[0m\n\n      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)\n      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:374:13)\n\n  ● ServiceUpdater › runMigrations › should run applicable migrations in order\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 435 |\u001b[39m             \u001b[36mawait\u001b[39m serviceUpdater\u001b[33m.\u001b[39mrunMigrations(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.0.0'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.2.0'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 436 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 437 |\u001b[39m             expect(migration1\u001b[33m.\u001b[39mup)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 438 |\u001b[39m             expect(migration2\u001b[33m.\u001b[39mup)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 439 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 440 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:437:35)\n\nFAIL mcp-local-setup/tests/integration/service-lifecycle.integration.test.js (67.222 s)\n  ● Service Lifecycle Integration Tests › Service Start › should start a service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m       \u001b[90m// Start the service\u001b[39m\n     \u001b[90m 45 |\u001b[39m       \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m\n     \u001b[90m 48 |\u001b[39m       \u001b[90m// Mark for cleanup\u001b[39m\n     \u001b[90m 49 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${testServiceName}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:46:23)\n\n  ● Service Lifecycle Integration Tests › Service Start › should handle starting already running service\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m       \u001b[90m// Try to start again\u001b[39m\n     \u001b[90m 62 |\u001b[39m       \u001b[36mconst\u001b[39m startedAgain \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m       expect(startedAgain)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Docker compose should handle this gracefully\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m\n     \u001b[90m 66 |\u001b[39m     it(\u001b[32m'should start multiple services in order'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:63:28)\n\n  ● Service Lifecycle Integration Tests › Service Start › should start multiple services in order\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 71 |\u001b[39m         \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(service\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 73 |\u001b[39m         expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 74 |\u001b[39m         \n     \u001b[90m 75 |\u001b[39m         startTimes\u001b[33m.\u001b[39mpush({ service\u001b[33m,\u001b[39m time\u001b[33m:\u001b[39m startTime })\u001b[33m;\u001b[39m\n     \u001b[90m 76 |\u001b[39m         testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${service}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:73:25)\n\n  ● Service Lifecycle Integration Tests › Service Start › should respect environment variables when starting\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${testServiceName}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m       \n     \u001b[90m 96 |\u001b[39m       \u001b[36mdelete\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mTEST_SERVICE_PORT\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:93:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should stop a running service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 106 |\u001b[39m       \u001b[90m// Stop the service\u001b[39m\n     \u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m stopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 108 |\u001b[39m       expect(stopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 109 |\u001b[39m\n     \u001b[90m 110 |\u001b[39m       \u001b[90m// Verify service is stopped\u001b[39m\n     \u001b[90m 111 |\u001b[39m       \u001b[36mawait\u001b[39m expect(waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m5000\u001b[39m))\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:108:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should handle stopping already stopped service\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m       \u001b[90m// Try to stop a service that's not running\u001b[39m\n     \u001b[90m 116 |\u001b[39m       \u001b[36mconst\u001b[39m stopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'non-existent-service'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m       expect(stopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Docker compose returns 0 even for non-existent services\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m\n     \u001b[90m 120 |\u001b[39m     it(\u001b[32m'should stop dependent services in correct order'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:117:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should stop dependent services in correct order\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 126 |\u001b[39m       \u001b[90m// Stop API first (which depends on database)\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[36mconst\u001b[39m apiStopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'api'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 128 |\u001b[39m       expect(apiStopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n     \u001b[90m 130 |\u001b[39m       \u001b[90m// Then stop database\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \u001b[36mconst\u001b[39m dbStopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'database'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:128:26)\n\n  ● Service Lifecycle Integration Tests › Service Restart › should restart a service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 141 |\u001b[39m       \n     \u001b[90m 142 |\u001b[39m       \u001b[36mconst\u001b[39m healthyBefore \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m10000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 143 |\u001b[39m       expect(healthyBefore)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n     \u001b[90m 145 |\u001b[39m       \u001b[90m// Restart service\u001b[39m\n     \u001b[90m 146 |\u001b[39m       \u001b[36mconst\u001b[39m restarted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mPromise\u001b[39m((resolve) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:143:29)\n\n  ● Service Lifecycle Integration Tests › Service Dependencies › should start dependencies automatically\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 195 |\u001b[39m       \u001b[90m// Start only the API service\u001b[39m\n     \u001b[90m 196 |\u001b[39m       \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(apiService\u001b[33m.\u001b[39mname\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 198 |\u001b[39m       \n     \u001b[90m 199 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m'service:api-with-deps'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'service:database'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'service:cache'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:197:23)\n\n  ● Service Lifecycle Integration Tests › Service Health Monitoring › should detect when service becomes unhealthy\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m       \n     \u001b[90m 229 |\u001b[39m       \u001b[36mconst\u001b[39m initialHealth \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m10000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m       expect(initialHealth)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m\n     \u001b[90m 232 |\u001b[39m       \u001b[90m// Simulate service becoming unhealthy\u001b[39m\n     \u001b[90m 233 |\u001b[39m       \u001b[90m// (In a real scenario, you might trigger an error condition)\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:230:29)\n\n  ● Service Lifecycle Integration Tests › Service Health Monitoring › should recover from temporary failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 265 |\u001b[39m       \u001b[90m// Service should recover and become healthy again\u001b[39m\n     \u001b[90m 266 |\u001b[39m       \u001b[36mconst\u001b[39m recovered \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m30000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 267 |\u001b[39m       expect(recovered)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 268 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 269 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:267:25)\n\n  ● Service Lifecycle Integration Tests › Resource Cleanup › should remove orphaned containers\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 297 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 298 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 299 |\u001b[39m       expect(cleaned)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 300 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 302 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:299:23)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nSummary of all failing tests\nFAIL mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js\n  ● Phase 5 End-to-End Integration › Complete developer workflow from IDE to production\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Collaborative development with multiple tools\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Progressive rollout with monitoring\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Multi-cloud deployment with unified management\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Debugging production issues with integrated tools\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\nFAIL tests/unit/config/settings.test.js\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid port\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 123 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 126 |\u001b[39m\n     \u001b[90m 127 |\u001b[39m     it(\u001b[32m'should fail validation with invalid log level'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:124:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid log level\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 131 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m     it(\u001b[32m'should fail validation with invalid node environment'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:132:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid node environment\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 138 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 139 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 140 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 141 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 142 |\u001b[39m\n     \u001b[90m 143 |\u001b[39m     it(\u001b[32m'should fail validation with invalid API version format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:140:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid API version format\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 147 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should fail validation with invalid max request size format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:148:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid max request size format\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 154 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 155 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 156 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:156:10)\n\n  ● Production Settings Configuration › Path Configuration › should have correct absolute paths\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"config/production/../..\"\n    Received string:    \"/home/jenner/code/mcps\"\n\n    \u001b[0m \u001b[90m 164 |\u001b[39m       expect(path\u001b[33m.\u001b[39misAbsolute(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39mroot))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m       expect(path\u001b[33m.\u001b[39misAbsolute(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39m\u001b[36mpublic\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 166 |\u001b[39m       expect(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39mroot)\u001b[33m.\u001b[39mtoContain(\u001b[32m'config/production/../..'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 167 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 168 |\u001b[39m\n     \u001b[90m 169 |\u001b[39m     it(\u001b[32m'should allow overriding paths via environment variables'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toContain (tests/unit/config/settings.test.js:166:35)\n\nFAIL tests/unit/config/features.test.js\n  ● Production Feature Flags Configuration › Rollout Percentage Logic › should roughly match rollout percentage across many users\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 10\n    Received:   2.8000000000000003\n\n    \u001b[0m \u001b[90m 350 |\u001b[39m       \n     \u001b[90m 351 |\u001b[39m       \u001b[90m// Allow 15% variance due to simple hash function and sequential IDs\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 352 |\u001b[39m       expect(actualPercentage)\u001b[33m.\u001b[39mtoBeGreaterThan(rolloutPercentage \u001b[33m-\u001b[39m \u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 353 |\u001b[39m       expect(actualPercentage)\u001b[33m.\u001b[39mtoBeLessThan(rolloutPercentage \u001b[33m+\u001b[39m \u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThan (tests/unit/config/features.test.js:352:32)\n\nFAIL mcp-local-setup/tests/unit/backup/data-manager.unit.test.js\n  ● DataManager Unit Tests › exportServiceData › should export service data volumes\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m             expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m             expect(result\u001b[33m.\u001b[39mvolumes[\u001b[32m'test-service'\u001b[39m])\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m             expect(mockFs\u001b[33m.\u001b[39mmkdir)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m         it(\u001b[32m'should handle export failures'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:132:34)\n\n  ● DataManager Unit Tests › exportServiceData › should handle export failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    \u001b[0m \u001b[90m 143 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m dataManager\u001b[33m.\u001b[39mexportServiceData(services\u001b[33m,\u001b[39m exportPath)\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 145 |\u001b[39m             expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 146 |\u001b[39m             expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m             expect(result\u001b[33m.\u001b[39merrors[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mservice)\u001b[33m.\u001b[39mtoBe(\u001b[32m'failing-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 148 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:145:36)\n\n  ● DataManager Unit Tests › helper methods › should walk directory recursively\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"/test/dir/subdir/file2.txt\"\n    Received array: [\"/test/dir/file1.txt\"]\n\n    \u001b[0m \u001b[90m 447 |\u001b[39m\n     \u001b[90m 448 |\u001b[39m             expect(files)\u001b[33m.\u001b[39mtoContain(\u001b[32m'/test/dir/file1.txt'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 449 |\u001b[39m             expect(files)\u001b[33m.\u001b[39mtoContain(\u001b[32m'/test/dir/subdir/file2.txt'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 450 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 451 |\u001b[39m\n     \u001b[90m 452 |\u001b[39m         it(\u001b[32m'should match file patterns'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toContain (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:449:27)\n\nFAIL tests/integration/security/rate-limiting.test.js\n  ● Rate Limiting Integration Tests › IP-based Security Features › should detect and handle suspicious IPs\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 229 |\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[90m// Should be marked as suspicious\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 231 |\u001b[39m       expect(ipLimiter\u001b[33m.\u001b[39misSuspicious(suspiciousIP))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 232 |\u001b[39m\n     \u001b[90m 233 |\u001b[39m       \u001b[90m// Should get reduced limits\u001b[39m\n     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m limit \u001b[33m=\u001b[39m ipLimiter\u001b[33m.\u001b[39mgetRateLimitForIP(suspiciousIP\u001b[33m,\u001b[39m \u001b[32m'/api/data'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/integration/security/rate-limiting.test.js:231:52)\n\n  ● Rate Limiting Integration Tests › Rate Limit Headers and Responses › should set appropriate rate limit headers\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 100\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 99\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.063Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 281 |\u001b[39m\n     \u001b[90m 282 |\u001b[39m       \u001b[90m// Check user rate limit headers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 283 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 284 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Remaining'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m99\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'free'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:283:29)\n\n  ● Rate Limiting Integration Tests › Advanced Rate Limiting Scenarios › should handle different endpoints with different limits\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 5\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 4\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.079Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 464 |\u001b[39m       \u001b[36mawait\u001b[39m middleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 465 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo\u001b[33m.\u001b[39mresource)\u001b[33m.\u001b[39mtoBe(\u001b[32m'uploads'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 466 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Free tier upload limit\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 467 |\u001b[39m\n     \u001b[90m 468 |\u001b[39m       \u001b[90m// Test export endpoint\u001b[39m\n     \u001b[90m 469 |\u001b[39m       req\u001b[33m.\u001b[39mpath \u001b[33m=\u001b[39m \u001b[32m'/api/export'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:466:29)\n\nFAIL tests/unit/security/ip-limiter.test.js\n  ● IPRateLimiter › constructor › should accept custom options\n\n    TypeError: customLimiter.options.ipWhitelist.has is not a function\n\n    \u001b[0m \u001b[90m 34 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mtrustProxy)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 35 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mproxyDepth)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 36 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mipWhitelist\u001b[33m.\u001b[39mhas(\u001b[32m'192.168.1.1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 37 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mipBlacklist\u001b[33m.\u001b[39mhas(\u001b[32m'10.0.0.1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 38 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39mlimits\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m.\u001b[39mlimit)\u001b[33m.\u001b[39mtoBe(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 39 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.has (tests/unit/security/ip-limiter.test.js:36:48)\n\nFAIL tests/unit/config/env-validation.test.js\n  ● Environment Configuration Validation › Environment Variable Types › should handle numeric environment variables correctly\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 234 |\u001b[39m         \n     \u001b[90m 235 |\u001b[39m         \u001b[36mconst\u001b[39m invalidValue \u001b[33m=\u001b[39m config\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39msplit(\u001b[32m'.'\u001b[39m)\u001b[33m.\u001b[39mreduce((obj\u001b[33m,\u001b[39m key) \u001b[33m=>\u001b[39m obj[key]\u001b[33m,\u001b[39m module)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 236 |\u001b[39m         expect(\u001b[33mNumber\u001b[39m\u001b[33m.\u001b[39misNaN(invalidValue))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// parseInt returns NaN for invalid input\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 237 |\u001b[39m         \n     \u001b[90m 238 |\u001b[39m         \u001b[36mdelete\u001b[39m process\u001b[33m.\u001b[39menv[envVar]\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m       }\u001b[0m\n\n      at Object.toBe (tests/unit/config/env-validation.test.js:236:44)\n\n  ● Environment Configuration Validation › Cross-Module Consistency › should have consistent timeout values across modules\n\n    Invalid time format: 45000\n\n    \u001b[0m \u001b[90m  8 |\u001b[39m   \u001b[36mconst\u001b[39m match \u001b[33m=\u001b[39m timeStr\u001b[33m.\u001b[39mmatch(\u001b[35m/^(\\d+)([smhd])$/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mmatch) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 10 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Invalid time format: ${timeStr}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 11 |\u001b[39m   }\n     \u001b[90m 12 |\u001b[39m   \n     \u001b[90m 13 |\u001b[39m   \u001b[36mconst\u001b[39m value \u001b[33m=\u001b[39m parseInt(match[\u001b[35m1\u001b[39m]\u001b[33m,\u001b[39m \u001b[35m10\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at parseTimeToMs (config/production/limits.js:10:11)\n      at Object.parseTimeToMs (config/production/limits.js:248:16)\n      at Object.require (tests/unit/config/env-validation.test.js:381:22)\n\nFAIL mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js\n  ● BackupManager Unit Tests › createBackup › should create a full backup\n\n    Backup creation failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 200 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Backup creation failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m         }\n     \u001b[90m 203 |\u001b[39m     }\n     \u001b[90m 204 |\u001b[39m\u001b[0m\n\n      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:112:30)\n\n  ● BackupManager Unit Tests › createBackup › should create incremental backup\n\n    Backup creation failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 200 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Backup creation failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m         }\n     \u001b[90m 203 |\u001b[39m     }\n     \u001b[90m 204 |\u001b[39m\u001b[0m\n\n      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:138:30)\n\n  ● BackupManager Unit Tests › restoreBackup › should restore a backup\n\n    Restore failed: Backup integrity check failed\n\n    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 323 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 324 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Restore failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 325 |\u001b[39m         }\n     \u001b[90m 326 |\u001b[39m     }\n     \u001b[90m 327 |\u001b[39m\u001b[0m\n\n      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:239:28)\n\n  ● BackupManager Unit Tests › restoreBackup › should handle dry run mode\n\n    Restore failed: Backup integrity check failed\n\n    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 323 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 324 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Restore failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 325 |\u001b[39m         }\n     \u001b[90m 326 |\u001b[39m     }\n     \u001b[90m 327 |\u001b[39m\u001b[0m\n\n      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:257:28)\n\n  ● BackupManager Unit Tests › cleanupBackups › should cleanup backups older than maxAge\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 5\n\n    \u001b[0m \u001b[90m 430 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 431 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 432 |\u001b[39m             expect(result\u001b[33m.\u001b[39mdeletedCount)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 433 |\u001b[39m             expect(backupManager\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mhas(\u001b[32m'backup-1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 434 |\u001b[39m             expect(backupManager\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mhas(\u001b[32m'backup-2'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:432:41)\n\n  ● BackupManager Unit Tests › importBackup/exportBackup › should import backup from local filesystem\n\n    Import failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 510 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 511 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 512 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Import failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 513 |\u001b[39m         }\n     \u001b[90m 514 |\u001b[39m     }\n     \u001b[90m 515 |\u001b[39m\u001b[0m\n\n      at BackupManager.importBackup (mcp-local-setup/scripts/backup-manager.js:512:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:461:30)\n\nFAIL mcp-local-setup/tests/unit/config/configuration-manager.test.js\n  ● ConfigurationManager › loadConfig › should load configuration for an environment\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m     describe(\u001b[32m'loadConfig'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 43 |\u001b[39m         it(\u001b[32m'should load configuration for an environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             \n     \u001b[90m 47 |\u001b[39m             \u001b[36mconst\u001b[39m config \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mloadConfig(\u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:44:23)\n\n  ● ConfigurationManager › loadConfig › should throw error for non-existent environment\n\n    TypeError: fs.access.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 54 |\u001b[39m         \n     \u001b[90m 55 |\u001b[39m         it(\u001b[32m'should throw error for non-existent environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 56 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 57 |\u001b[39m             \n     \u001b[90m 58 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mloadConfig(\u001b[32m'nonexistent'\u001b[39m))\n     \u001b[90m 59 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Configuration for environment 'nonexistent' not found\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:56:23)\n\n  ● ConfigurationManager › loadConfig › should include secrets when requested\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m         \n     \u001b[90m 62 |\u001b[39m         it(\u001b[32m'should include secrets when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'DB_PASSWORD.enc'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 66 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:63:23)\n\n  ● ConfigurationManager › loadConfig › should apply runtime overrides\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m         \n     \u001b[90m 77 |\u001b[39m         it(\u001b[32m'should apply runtime overrides'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 80 |\u001b[39m             \n     \u001b[90m 81 |\u001b[39m             \u001b[36mconst\u001b[39m overrides \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:78:23)\n\n  ● ConfigurationManager › loadConfig › should validate configuration when requested\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 92 |\u001b[39m         \n     \u001b[90m 93 |\u001b[39m         it(\u001b[32m'should validate configuration when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 94 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 95 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 96 |\u001b[39m             \n     \u001b[90m 97 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:94:23)\n\n  ● ConfigurationManager › saveConfig › should save configuration to file\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 177 |\u001b[39m     describe(\u001b[32m'saveConfig'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 178 |\u001b[39m         it(\u001b[32m'should save configuration to file'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 179 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 180 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m             \n     \u001b[90m 182 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39msaveConfig(mockConfig\u001b[33m,\u001b[39m \u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:179:22)\n\n  ● ConfigurationManager › saveConfig › should create backup when requested\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 195 |\u001b[39m         \n     \u001b[90m 196 |\u001b[39m         it(\u001b[32m'should create backup when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 198 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:197:22)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should encrypt and save secrets\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m     describe(\u001b[32m'getSecrets and setSecrets'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 219 |\u001b[39m         it(\u001b[32m'should encrypt and save secrets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m \u001b[90m// No existing metadata\u001b[39m\n     \u001b[90m 222 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:220:22)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should decrypt and retrieve secrets\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 239 |\u001b[39m         it(\u001b[32m'should decrypt and retrieve secrets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 240 |\u001b[39m             \u001b[36mconst\u001b[39m encryptedData \u001b[33m=\u001b[39m configManager\u001b[33m.\u001b[39m_encrypt(\u001b[32m'secret-value'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 241 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(encryptedData)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 242 |\u001b[39m             \n     \u001b[90m 243 |\u001b[39m             \u001b[36mconst\u001b[39m secrets \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mgetSecrets([\u001b[32m'API_KEY'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:241:25)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should throw error for non-existent secret\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 247 |\u001b[39m         \n     \u001b[90m 248 |\u001b[39m         it(\u001b[32m'should throw error for non-existent secret'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 250 |\u001b[39m             \n     \u001b[90m 251 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mgetSecrets([\u001b[32m'NONEXISTENT'\u001b[39m]))\n     \u001b[90m 252 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Secret 'NONEXISTENT' not found\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:249:25)\n\n  ● ConfigurationManager › environment management › should list available environments\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 284 |\u001b[39m     describe(\u001b[32m'environment management'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 285 |\u001b[39m         it(\u001b[32m'should list available environments'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 286 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'dev.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'prod.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'README.md'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 287 |\u001b[39m             \n     \u001b[90m 288 |\u001b[39m             \u001b[36mconst\u001b[39m environments \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mlistEnvironments()\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:286:24)\n\n  ● ConfigurationManager › environment management › should create new environment\n\n    TypeError: fs.access.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 292 |\u001b[39m         \n     \u001b[90m 293 |\u001b[39m         it(\u001b[32m'should create new environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 294 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m \u001b[90m// Doesn't exist\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 295 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m             \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:294:23)\n\n  ● ConfigurationManager › environment management › should throw error if environment already exists\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 311 |\u001b[39m         \n     \u001b[90m 312 |\u001b[39m         it(\u001b[32m'should throw error if environment already exists'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 313 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m \u001b[90m// Exists\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 314 |\u001b[39m             \n     \u001b[90m 315 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mcreateEnvironment(\u001b[32m'existing'\u001b[39m))\n     \u001b[90m 316 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Environment 'existing' already exists\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:313:23)\n\n  ● ConfigurationManager › environment management › should delete environment\n\n    TypeError: fs.unlink.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m         \n     \u001b[90m 319 |\u001b[39m         it(\u001b[32m'should delete environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m             fs\u001b[33m.\u001b[39munlink\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m             fs\u001b[33m.\u001b[39mrmdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 322 |\u001b[39m             \n     \u001b[90m 323 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mdeleteEnvironment(\u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:320:23)\n\n  ● ConfigurationManager › import/export › should import JSON configuration\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 348 |\u001b[39m         \n     \u001b[90m 349 |\u001b[39m         it(\u001b[32m'should import JSON configuration'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 350 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 351 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 352 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 353 |\u001b[39m                 valid\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:350:22)\n\n  ● ConfigurationManager › import/export › should merge imported configuration when requested\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 373 |\u001b[39m             \n     \u001b[90m 374 |\u001b[39m             configManager\u001b[33m.\u001b[39mloadConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(existingConfig)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 375 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 376 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 377 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 378 |\u001b[39m                 valid\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:375:22)\n\nFAIL tests/integration/security/middleware-chain.test.js\n  ● Security Middleware Chain Integration › Complete Security Middleware Stack › should process request through full security stack\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m     it(\u001b[32m'should process request through full security stack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 95 |\u001b[39m       \u001b[90m// Setup middleware chain\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n     \u001b[90m 98 |\u001b[39m       app\u001b[33m.\u001b[39muse(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m 99 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:96:32)\n\n  ● Security Middleware Chain Integration › Complete Security Middleware Stack › should handle authentication failure in middleware chain\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m       \u001b[90m// Setup middleware chain with required auth\u001b[39m\n     \u001b[90m 119 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m       app\u001b[33m.\u001b[39muse(userLimiter\u001b[33m.\u001b[39mcreateMiddleware(\u001b[32m'api-calls'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m\n     \u001b[90m 123 |\u001b[39m       \u001b[90m// No authentication provided\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:120:23)\n\n  ● Security Middleware Chain Integration › Authentication Middleware Combinations › should support multiple authentication methods\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 156 |\u001b[39m       \u001b[36mconst\u001b[39m authMiddleware \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 157 |\u001b[39m         \u001b[90m// Try JWT first\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 158 |\u001b[39m         \u001b[36mconst\u001b[39m jwtMiddleware \u001b[33m=\u001b[39m jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 159 |\u001b[39m         \u001b[36mawait\u001b[39m jwtMiddleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {})\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\n     \u001b[90m 161 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:158:39)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:178:17)\n\n  ● Security Middleware Chain Integration › Authentication Middleware Combinations › should enforce permission requirements across auth methods\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       app\u001b[33m.\u001b[39muse(\u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 208 |\u001b[39m         \u001b[90m// Try both auth methods\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m         \u001b[36mawait\u001b[39m jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {})\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m         \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mreq\u001b[33m.\u001b[39muser) {\n     \u001b[90m 211 |\u001b[39m           \u001b[36mawait\u001b[39m apiKeyManager\u001b[33m.\u001b[39mmiddleware()(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 212 |\u001b[39m         } \u001b[36melse\u001b[39m {\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:209:23)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:221:17)\n\n  ● Security Middleware Chain Integration › CORS and Security Headers › should handle preflight requests with security headers\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 235 |\u001b[39m     it(\u001b[32m'should handle preflight requests with security headers'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 236 |\u001b[39m       \u001b[90m// Setup middleware\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 237 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 238 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m\n     \u001b[90m 240 |\u001b[39m       \u001b[90m// Preflight request\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:237:32)\n\n  ● Security Middleware Chain Integration › CORS and Security Headers › should apply CSP headers dynamically\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 266 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 267 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 269 |\u001b[39m       app\u001b[33m.\u001b[39muse(dynamicCSP)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n     \u001b[90m 271 |\u001b[39m       \u001b[90m// Test admin route\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:268:32)\n\n  ● Security Middleware Chain Integration › Rate Limiting with Authentication › should apply different rate limits for authenticated vs anonymous users\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m     it(\u001b[32m'should apply different rate limits for authenticated vs anonymous users'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 286 |\u001b[39m       \u001b[90m// Setup middleware chain\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m       app\u001b[33m.\u001b[39muse(\u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 289 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\n     \u001b[90m 290 |\u001b[39m           \u001b[90m// Authenticated users get user-based limits\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:287:23)\n\n  ● Security Middleware Chain Integration › Rate Limiting with Authentication › should combine IP and user rate limiting for defense in depth\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m       \u001b[90m// Setup both limiters\u001b[39m\n     \u001b[90m 319 |\u001b[39m       app\u001b[33m.\u001b[39muse(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m       app\u001b[33m.\u001b[39muse((req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 322 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\n     \u001b[90m 323 |\u001b[39m           \u001b[36mconst\u001b[39m userMiddleware \u001b[33m=\u001b[39m userLimiter\u001b[33m.\u001b[39mcreateMiddleware(\u001b[32m'api-calls'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:320:23)\n\n  ● Security Middleware Chain Integration › Advanced Middleware Patterns › should support conditional middleware application\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 432 |\u001b[39m         } \u001b[36melse\u001b[39m \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mstartsWith(\u001b[32m'/api'\u001b[39m)) {\n     \u001b[90m 433 |\u001b[39m           \u001b[90m// API routes - full security\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 434 |\u001b[39m           \u001b[36mreturn\u001b[39m helmetMiddleware\u001b[33m.\u001b[39mmiddleware()(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mstartsWith(\u001b[32m'/admin'\u001b[39m)) {\n     \u001b[90m 436 |\u001b[39m           \u001b[90m// Admin routes - strict security\u001b[39m\n     \u001b[90m 437 |\u001b[39m           res\u001b[33m.\u001b[39msetHeader(\u001b[32m'X-Admin-Route'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'true'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:434:35)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:467:17)\n\n  ● Security Middleware Chain Integration › Advanced Middleware Patterns › should support middleware composition\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 487 |\u001b[39m         }\n     \u001b[90m 488 |\u001b[39m         \u001b[36mif\u001b[39m (options\u001b[33m.\u001b[39mhelmet) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 489 |\u001b[39m           middlewares\u001b[33m.\u001b[39mpush(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 490 |\u001b[39m         }\n     \u001b[90m 491 |\u001b[39m         \u001b[36mif\u001b[39m (options\u001b[33m.\u001b[39mrateLimit) {\n     \u001b[90m 492 |\u001b[39m           middlewares\u001b[33m.\u001b[39mpush(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:489:45)\n      at Object.securityMiddleware (tests/integration/security/middleware-chain.test.js:512:15)\n\nFAIL mcp-local-setup/tests/unit/config/secret-manager.test.js\n  ● SecretManager › backupSecrets › should create backup of secrets directory\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 211 |\u001b[39m         it(\u001b[32m'should create backup of secrets directory'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 212 |\u001b[39m             \u001b[36mconst\u001b[39m mockFiles \u001b[33m=\u001b[39m [\u001b[32m'secret1.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'secret2.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'_metadata.json'\u001b[39m]\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 213 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue(mockFiles)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 214 |\u001b[39m             fs\u001b[33m.\u001b[39mstat\u001b[33m.\u001b[39mmockResolvedValue({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 215 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 216 |\u001b[39m             fs\u001b[33m.\u001b[39mcopyFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:213:24)\n\n  ● SecretManager › backupSecrets › should skip directories when backing up\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 226 |\u001b[39m         \n     \u001b[90m 227 |\u001b[39m         it(\u001b[32m'should skip directories when backing up'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 228 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'file.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'subdir'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 229 |\u001b[39m             fs\u001b[33m.\u001b[39mstat\n     \u001b[90m 230 |\u001b[39m                 \u001b[33m.\u001b[39mmockResolvedValueOnce({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m })\n     \u001b[90m 231 |\u001b[39m                 \u001b[33m.\u001b[39mmockResolvedValueOnce({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:228:24)\n\nFAIL tests/unit/security/user-limiter.test.js\n  ● UserRateLimiter › createMiddleware › should create middleware that allows requests\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 100\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 99\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.073Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 484 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 485 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo\u001b[33m.\u001b[39mresource)\u001b[33m.\u001b[39mtoBe(\u001b[32m'api-calls'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 486 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 487 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Remaining'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m99\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 488 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'free'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 489 |\u001b[39m       expect(next)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/user-limiter.test.js:486:29)\n\n  ● UserRateLimiter › cleanup › should handle unlimited tier in cleanup\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 752 |\u001b[39m       \n     \u001b[90m 753 |\u001b[39m       \u001b[90m// Should still exist as enterprise has unlimited (-1) limit\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 754 |\u001b[39m       expect(userLimiter\u001b[33m.\u001b[39mmemoryStore\u001b[33m.\u001b[39mhas(\u001b[32m'user-ratelimit:enterprise-user:api-calls'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 755 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 756 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 757 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/unit/security/user-limiter.test.js:754:87)\n\nFAIL mcp-local-setup/tests/integration/configuration.integration.test.js\n  ● Configuration Management Integration Tests › Environment Configuration › should create new environment\n\n    Schema version '1.0.0' not found\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m             }\n     \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:160:13)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should load environment configuration\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:167:34)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should apply runtime overrides\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:191:34)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should list all environments\n\n    Schema version '1.0.0' not found\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m             }\n     \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:203:13)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should get configuration metadata\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.getConfigMetadata (mcp-local-setup/config/advanced/configuration-manager.js:367:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:215:30)\n\n  ● Configuration Management Integration Tests › Configuration Validation › should detect validation errors\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 256 |\u001b[39m             \n     \u001b[90m 257 |\u001b[39m             \u001b[36mconst\u001b[39m nameError \u001b[33m=\u001b[39m result\u001b[33m.\u001b[39merrors\u001b[33m.\u001b[39mfind(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mincludes(\u001b[32m'name'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 258 |\u001b[39m             expect(nameError)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 259 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n     \u001b[90m 261 |\u001b[39m         it(\u001b[32m'should provide validation warnings'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeDefined (mcp-local-setup/tests/integration/configuration.integration.test.js:258:31)\n\n  ● Configuration Management Integration Tests › Secret Management › should list secret metadata without values\n\n    expect(received).toBeInstanceOf(expected)\n\n    Expected constructor: Date\n\n    Received value has no prototype\n    Received value: \"2025-07-24T22:52:02.012Z\"\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m             expect(testSecret)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 319 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mdescription)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mcreatedAt)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mDate\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mvalue)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m \u001b[90m// Should not expose value\u001b[39m\n     \u001b[90m 322 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 323 |\u001b[39m\u001b[0m\n\n      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/configuration.integration.test.js:320:42)\n\n  ● Configuration Management Integration Tests › Secret Management › should load config with secrets\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:344:39)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should export configuration as JSON\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:395:30)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should throw error for unsupported YAML format\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"YAML export not yet implemented\"\n    Received message:   \"Configuration for environment 'test-integration' not found\"\n\n        \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 70 |\u001b[39m             }\n         \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n         \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:407:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:410:25)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should export configuration as env file\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:414:30)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should merge imported configuration\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:449:36)\n\n  ● Configuration Management Integration Tests › Configuration Persistence › should save configuration changes\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:470:36)\n\n  ● Configuration Management Integration Tests › Configuration Persistence › should rollback on save failure\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:502:31)\n\n  ● Configuration Management Integration Tests › Error Handling › should prevent duplicate environment creation\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Environment already exists\"\n    Received message:   \"Schema version '1.0.0' not found\"\n\n        \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 279 |\u001b[39m             }\n         \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n         \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:538:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:539:26)\n\nFAIL tests/unit/security/redis-limiter.test.js\n  ● RedisRateLimiter › checkLimit › should calculate correct reset time from oldest entry\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1753399322093\n    Received: NaN\n\n    \u001b[0m \u001b[90m 162 |\u001b[39m       \n     \u001b[90m 163 |\u001b[39m       \u001b[36mconst\u001b[39m expectedReset \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(oldestTime \u001b[33m+\u001b[39m \u001b[35m3600000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(result\u001b[33m.\u001b[39mresetAt\u001b[33m.\u001b[39mgetTime())\u001b[33m.\u001b[39mtoBe(expectedReset\u001b[33m.\u001b[39mgetTime())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 165 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m\n     \u001b[90m 167 |\u001b[39m     it(\u001b[32m'should fail open on Redis errors'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (tests/unit/security/redis-limiter.test.js:164:40)\n\n  ● RedisRateLimiter › createMiddleware › should block requests exceeding limit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n      Object {\n    -   \"blocked\": false,\n    +   \"blocked\": undefined,\n        \"error\": \"Too many requests\",\n    -   \"retryAfter\": Any<Date>,\n    +   \"retryAfter\": 2025-07-24T23:52:02.158Z,\n      },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 435 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Retry-After'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 436 |\u001b[39m       expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m429\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 437 |\u001b[39m       expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 438 |\u001b[39m         error\u001b[33m:\u001b[39m \u001b[32m'Too many requests'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 439 |\u001b[39m         retryAfter\u001b[33m:\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mDate\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 440 |\u001b[39m         blocked\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/redis-limiter.test.js:437:24)\n\nFAIL mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js\n  ● Service Mesh and Orchestration Integration › Services deployed to K8s are automatically registered in mesh\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Traffic management policies apply to orchestrated services\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Service mesh mTLS works with orchestrator networking\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › SDK can query services through mesh-enabled endpoints\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Circuit breaker policies protect orchestrated services\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Service mesh observability integrates with orchestrator metrics\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Canary deployments use both orchestration and mesh\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Fault injection tests orchestrated service resilience\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\nFAIL tests/integration/phase6/security-health-integration.test.js\n  ● Security and Health Monitoring Integration › API authentication integrates with health status\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"authentication\"\n    Received path: []\n\n    Expected value: \"enabled\"\n    Received value: {\"lastCheck\": null, \"message\": \"Not checked yet\", \"status\": \"pending\"}\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m     \u001b[90m// Then health should include auth status\u001b[39m\n     \u001b[90m 71 |\u001b[39m     expect(health\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m     expect(health\u001b[33m.\u001b[39mdetails)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'authentication'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'enabled'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 74 |\u001b[39m\n     \u001b[90m 75 |\u001b[39m   test(\u001b[32m'Service dependencies include security components'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveProperty (tests/integration/phase6/security-health-integration.test.js:72:28)\n\nFAIL tests/integration/monitoring/logging-pipeline.test.js\n  ● Logging Pipeline Integration › End-to-End Logging › should log messages through the complete pipeline\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › End-to-End Logging › should apply formatters correctly\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › End-to-End Logging › should handle high-volume logging\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should rotate logs based on size\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should compress rotated files\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should clean up old logs\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Error Handling › should handle logging errors gracefully\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Error Handling › should continue logging after transport failure\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Context and Correlation › should maintain correlation IDs across log entries\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Context and Correlation › should preserve context through async operations\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Performance Monitoring › should log performance metrics\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Multi-transport Scenarios › should route logs to appropriate transports based on level\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\nFAIL tests/unit/security/helmet-middleware.test.js\n  ● HelmetMiddleware › CSP Report Handler › should handle errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 500\n    Received: 400\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 153 |\u001b[39m       handler(req\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 155 |\u001b[39m       expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 156 |\u001b[39m       expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({ error\u001b[33m:\u001b[39m \u001b[32m'Failed to process CSP report'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:155:26)\n\n  ● HelmetMiddleware › createNonceMiddleware › should modify CSP header to include nonce\n\n    expect(received).toHaveBeenCalledWith(...expected)\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function anonymous]\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m       res\u001b[33m.\u001b[39msetHeader(\u001b[32m'Content-Security-Policy'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m\"script-src 'self'\"\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m         \u001b[32m'Content-Security-Policy'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 334 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m`'nonce-${res.locals.nonce}'`\u001b[39m)\n     \u001b[90m 335 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:332:29)\n\nFAIL tests/unit/security/cors.test.js\n  ● CORSMiddleware › handlePreflight › should handle wildcard origin without credentials in preflight\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Access-Control-Allow-Origin\", \"*\"\n    Received\n           1: \"Access-Control-Allow-Origin\", \"https://example.com\"\n           2: \"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-API-Key\"\n           3: \"Access-Control-Max-Age\", \"86400\"\n\n    Number of calls: 3\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m       corsMiddleware\u001b[33m.\u001b[39mhandlePreflight(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 277 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Origin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'*'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Credentials'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'true'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 280 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:278:29)\n\n  ● CORSMiddleware › Edge cases › should handle malformed request headers gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-API-Key\"\n    Received\n           1: \"Access-Control-Allow-Origin\", \"https://example.com\"\n           2: \"Access-Control-Allow-Credentials\", \"true\"\n           3: \"Access-Control-Max-Age\", \"86400\"\n\n    Number of calls: 3\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m       corsMiddleware\u001b[33m.\u001b[39mhandlePreflight(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Headers'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Content-Type, Authorization, X-API-Key'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m\n     \u001b[90m 330 |\u001b[39m     it(\u001b[32m'should handle mixed origin configurations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:327:29)\n\nFAIL tests/security/auth-bypass.test.js\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent JWT signature stripping\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent JWT algorithm confusion attacks\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent weak secret key attacks\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent token replay attacks with expired tokens\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent privilege escalation via token manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent brute force API key guessing\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent API key format manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent permission escalation via API keys\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent API key reuse after revocation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent refresh token reuse after rotation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent cross-user token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent infinite token refresh chains\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth state parameter bypass\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth token injection\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth redirect URI manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Session Fixation Prevention › should regenerate session ID on authentication\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Race Conditions › should handle concurrent authentication attempts safely\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Race Conditions › should prevent race condition in API key validation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Downgrade Attacks › should prevent downgrade from strong to weak authentication\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Context Validation › should validate authentication context consistency\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\nFAIL tests/integration/monitoring/metrics-collection.test.js\n  ● Metrics Collection Integration › HTTP Metrics Collection › should collect HTTP request metrics\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m       \n     \u001b[90m 80 |\u001b[39m       \u001b[90m// Make multiple requests\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/test'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/test'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 83 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39mpost(\u001b[32m'/api/users'\u001b[39m)\u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Test'\u001b[39m })\u001b[33m.\u001b[39mexpect(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/error'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.expect (tests/integration/monitoring/metrics-collection.test.js:81:39)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Metrics Collection Integration › HTTP Metrics Collection › should track request sizes\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Business Metrics Collection › should collect business events\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Business Metrics Collection › should track API usage metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Database Metrics Collection › should collect database operation metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Database Metrics Collection › should track connection pool metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Cache Metrics Collection › should collect cache operation metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Custom Metrics › should allow custom metric definitions\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › System Metrics › should collect system resource metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metric Aggregation › should aggregate metrics across multiple sources\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metrics Export Formats › should export metrics in Prometheus format\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metrics Export Formats › should export metrics as JSON\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Real-time Monitoring › should provide real-time metric updates\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Real-time Monitoring › should handle metric resets\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\nFAIL mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js\n  ● IDE Extension and SDK Integration › IDE extension initializes with SDK instance\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Code completion suggests available MCP services\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Hover info shows service documentation from SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Diagnostics validate service configurations against SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Service panel shows real-time health from SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Debugging integration uses SDK service endpoints\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Code actions can install missing services via SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\nFAIL mcp-local-setup/tests/unit/community/features.test.js\n  ● CommunityFeatures › rateService › should track analytics event\n\n    TypeError: Cannot read properties of undefined (reading 'events')\n\n    \u001b[0m \u001b[90m 170 |\u001b[39m       expect(analyticsCall)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m analyticsData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(analyticsCall[\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 172 |\u001b[39m       expect(analyticsData[\u001b[32m'service-1'\u001b[39m]\u001b[33m.\u001b[39mevents)\u001b[33m.\u001b[39mtoContainEqual(\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 173 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 174 |\u001b[39m           type\u001b[33m:\u001b[39m \u001b[32m'rating'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 175 |\u001b[39m           userId\u001b[33m:\u001b[39m \u001b[32m'user-5'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.events (mcp-local-setup/tests/unit/community/features.test.js:172:41)\n\n  ● CommunityFeatures › private methods › should calculate week number correctly\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 50\n    Received:   1\n\n    \u001b[0m \u001b[90m 360 |\u001b[39m       \n     \u001b[90m 361 |\u001b[39m       expect(week1)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 362 |\u001b[39m       expect(week2)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 363 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 364 |\u001b[39m\n     \u001b[90m 365 |\u001b[39m     it(\u001b[32m'should calculate engagement score'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeGreaterThan (mcp-local-setup/tests/unit/community/features.test.js:362:21)\n\n  ● CommunityFeatures › private methods › should calculate growth rate\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 25\n    Received: 0\n\n    \u001b[0m \u001b[90m 386 |\u001b[39m\n     \u001b[90m 387 |\u001b[39m       \u001b[36mconst\u001b[39m growthRate \u001b[33m=\u001b[39m community\u001b[33m.\u001b[39m_calculateGrowthRate(analytics)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 388 |\u001b[39m       expect(growthRate)\u001b[33m.\u001b[39mtoBe(\u001b[35m25\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 25% growth\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 389 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 390 |\u001b[39m\n     \u001b[90m 391 |\u001b[39m     it(\u001b[32m'should handle zero previous downloads in growth rate'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/community/features.test.js:388:26)\n\nFAIL mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js\n  ● Marketplace + Enterprise Integration › Tenant-based Service Access › should restrict marketplace access based on tenant permissions\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 35 |\u001b[39m     test(\u001b[32m'should restrict marketplace access based on tenant permissions'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 36 |\u001b[39m       \u001b[90m// Create test tenants\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 37 |\u001b[39m       \u001b[36mconst\u001b[39m enterpriseTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m    |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 38 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Enterprise Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 39 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 40 |\u001b[39m         features\u001b[33m:\u001b[39m [\u001b[32m'unlimited-services'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'private-marketplace'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:37:52)\n\n  ● Marketplace + Enterprise Integration › Tenant-based Service Access › should enforce tenant quotas on service installation\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m\n     \u001b[90m 71 |\u001b[39m     test(\u001b[32m'should enforce tenant quotas on service installation'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Limited Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 74 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'basic'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 75 |\u001b[39m         quotas\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:72:42)\n\n  ● Marketplace + Enterprise Integration › Marketplace Publishing with Multi-tenancy › should allow tenants to publish private services\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m   describe(\u001b[32m'Marketplace Publishing with Multi-tenancy'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 101 |\u001b[39m     test(\u001b[32m'should allow tenants to publish private services'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Service Provider Inc'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 104 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 105 |\u001b[39m         features\u001b[33m:\u001b[39m [\u001b[32m'marketplace-publisher'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:102:42)\n\n  ● Marketplace + Enterprise Integration › Marketplace Publishing with Multi-tenancy › should track marketplace revenue per tenant\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m     test(\u001b[32m'should track marketplace revenue per tenant'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m publisherTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'SaaS Provider'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 141 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\n     \u001b[90m 142 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:139:51)\n\n  ● Marketplace + Enterprise Integration › SSO + Marketplace Integration › should use SSO for marketplace authentication\n\n    Invalid authentication request\n\n    \u001b[0m \u001b[90m 213 |\u001b[39m   \u001b[36masync\u001b[39m authenticate(credentials\u001b[33m,\u001b[39m provider) {\n     \u001b[90m 214 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mcredentials \u001b[33m||\u001b[39m \u001b[33m!\u001b[39mprovider) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 215 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Invalid authentication request'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 216 |\u001b[39m     }\n     \u001b[90m 217 |\u001b[39m\n     \u001b[90m 218 |\u001b[39m     \u001b[36mconst\u001b[39m providerConfig \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39m_getProvider(provider)\u001b[33m;\u001b[39m\u001b[0m\n\n      at SSOAuthentication.authenticate (mcp-local-setup/enterprise/sso/authentication.js:215:13)\n      at Object.authenticate (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:184:40)\n\n  ● Marketplace + Enterprise Integration › SSO + Marketplace Integration › should map SSO roles to marketplace permissions\n\n    TypeError: ssoAuth.configureRoleMapping is not a function\n\n    \u001b[0m \u001b[90m 205 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 206 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 207 |\u001b[39m       \u001b[36mawait\u001b[39m ssoAuth\u001b[33m.\u001b[39mconfigureRoleMapping(roleMapping)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 208 |\u001b[39m\n     \u001b[90m 209 |\u001b[39m       \u001b[90m// Test different role access\u001b[39m\n     \u001b[90m 210 |\u001b[39m       \u001b[36mconst\u001b[39m adminUser \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m ssoAuth\u001b[33m.\u001b[39mauthenticate({\u001b[0m\n\n      at Object.configureRoleMapping (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:207:21)\n\n  ● Marketplace + Enterprise Integration › Compliance in Marketplace Operations › should audit all marketplace transactions\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 230 |\u001b[39m   describe(\u001b[32m'Compliance in Marketplace Operations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 231 |\u001b[39m     test(\u001b[32m'should audit all marketplace transactions'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 233 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Regulated Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 234 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 235 |\u001b[39m         compliance\u001b[33m:\u001b[39m [\u001b[32m'SOC2'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'HIPAA'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:232:42)\n\n  ● Marketplace + Enterprise Integration › Compliance in Marketplace Operations › should enforce data residency for marketplace data\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m\n     \u001b[90m 297 |\u001b[39m     test(\u001b[32m'should enforce data residency for marketplace data'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       \u001b[36mconst\u001b[39m euTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'EU Company'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 300 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 301 |\u001b[39m         dataResidency\u001b[33m:\u001b[39m \u001b[32m'eu-west-1'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:298:44)\n\n  ● Marketplace + Enterprise Integration › Community Features with Enterprise Controls › should moderate reviews based on tenant policies\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 333 |\u001b[39m   describe(\u001b[32m'Community Features with Enterprise Controls'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 334 |\u001b[39m     test(\u001b[32m'should moderate reviews based on tenant policies'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 335 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 336 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Strict Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 337 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 338 |\u001b[39m         policies\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:335:42)\n\n  ● Marketplace + Enterprise Integration › Community Features with Enterprise Controls › should aggregate analytics per tenant\n\n    TypeError: communityFeatures.trackUsage is not a function\n\n    \u001b[0m \u001b[90m 374 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m tenantId \u001b[36mof\u001b[39m tenants) {\n     \u001b[90m 375 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mlet\u001b[39m i \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m i \u001b[33m<\u001b[39m \u001b[35m10\u001b[39m\u001b[33m;\u001b[39m i\u001b[33m++\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 376 |\u001b[39m           \u001b[36mawait\u001b[39m communityFeatures\u001b[33m.\u001b[39mtrackUsage({\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 377 |\u001b[39m             tenantId\u001b[33m,\u001b[39m\n     \u001b[90m 378 |\u001b[39m             serviceId\u001b[33m:\u001b[39m \u001b[32m'popular-service'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 379 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'api_call'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.trackUsage (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:376:35)\n\n  ● Marketplace + Enterprise Integration › Billing Integration › should handle marketplace billing through tenant billing system\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 405 |\u001b[39m   describe(\u001b[32m'Billing Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 406 |\u001b[39m     test(\u001b[32m'should handle marketplace billing through tenant billing system'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 407 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 408 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Paying Customer'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 409 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 410 |\u001b[39m         billing\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:407:42)\n\nFAIL tests/integration/security/auth-flow.test.js\n  ● Security Authentication Flow Integration › Complete JWT Authentication Flow › should handle full JWT login and refresh flow\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Complete JWT Authentication Flow › should handle token expiration and renewal\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › OAuth Integration Flow › should handle complete OAuth flow with Google\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › OAuth Integration Flow › should handle OAuth errors gracefully\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › API Key Authentication Flow › should handle API key generation and validation flow\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Multi-Auth Strategy Flow › should handle multiple authentication methods in sequence\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Security Token Rotation › should handle secure token rotation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Permission-based Access Control › should enforce permission-based access with API keys\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Permission-based Access Control › should handle JWT permissions\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Session Management Integration › should handle session lifecycle with token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Error Handling and Recovery › should handle authentication failures gracefully\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Error Handling and Recovery › should handle Redis failures in token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\nFAIL mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js\n  ● RegistryManager › loadCatalog › should load and parse catalog successfully\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 52 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockCatalog))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       \n     \u001b[90m 55 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 56 |\u001b[39m       \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:53:19)\n\n  ● RegistryManager › loadCatalog › should handle catalog file not found\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 60 |\u001b[39m\n     \u001b[90m 61 |\u001b[39m     it(\u001b[32m'should handle catalog file not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 62 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'ENOENT: no such file'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 63 |\u001b[39m       \n     \u001b[90m 64 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m       \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:62:19)\n\n  ● RegistryManager › loadCatalog › should handle invalid JSON in catalog\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 72 |\u001b[39m\n     \u001b[90m 73 |\u001b[39m     it(\u001b[32m'should handle invalid JSON in catalog'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 74 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'invalid json{'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 75 |\u001b[39m       \n     \u001b[90m 76 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m       \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:74:19)\n\n  ● RegistryManager › loadProfile › should load default profile\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'mocked yaml content'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m       yaml\u001b[33m.\u001b[39mload\u001b[33m.\u001b[39mmockReturnValue(mockProfile)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m       \n     \u001b[90m 96 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:93:19)\n\n  ● RegistryManager › loadProfile › should load specified profile\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 109 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 110 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 111 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'mocked yaml content'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 112 |\u001b[39m       yaml\u001b[33m.\u001b[39mload\u001b[33m.\u001b[39mmockReturnValue(mockProfile)\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m       \n     \u001b[90m 114 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile(\u001b[32m'development'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:111:19)\n\n  ● RegistryManager › loadProfile › should handle profile not found\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m\n     \u001b[90m 123 |\u001b[39m     it(\u001b[32m'should handle profile not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'ENOENT'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m       \n     \u001b[90m 126 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile(\u001b[32m'missing'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:124:19)\n\n  ● RegistryManager › generateDockerCompose › should generate docker-compose configuration\n\n    TypeError: Cannot read properties of undefined (reading 'find')\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m serviceId \u001b[36mof\u001b[39m enabledServices) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             \u001b[36mconst\u001b[39m server \u001b[33m=\u001b[39m catalog\u001b[33m.\u001b[39mservers\u001b[33m.\u001b[39mfind(s \u001b[33m=>\u001b[39m s\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m serviceId)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mserver) {\n     \u001b[90m 86 |\u001b[39m                 console\u001b[33m.\u001b[39mwarn(\u001b[32m`Service ${serviceId} not found in catalog`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m                 \u001b[36mcontinue\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:174:7)\n\n  ● RegistryManager › generateDockerCompose › should filter services based on profile\n\n    TypeError: Cannot read properties of undefined (reading 'find')\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m serviceId \u001b[36mof\u001b[39m enabledServices) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             \u001b[36mconst\u001b[39m server \u001b[33m=\u001b[39m catalog\u001b[33m.\u001b[39mservers\u001b[33m.\u001b[39mfind(s \u001b[33m=>\u001b[39m s\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m serviceId)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mserver) {\n     \u001b[90m 86 |\u001b[39m                 console\u001b[33m.\u001b[39mwarn(\u001b[32m`Service ${serviceId} not found in catalog`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m                 \u001b[36mcontinue\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:225:7)\n\n  ● RegistryManager › updateService › should update service in catalog\n\n    TypeError: registryManager.updateService is not a function\n\n    \u001b[0m \u001b[90m 251 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 253 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mupdateService(updatedService)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 254 |\u001b[39m\n     \u001b[90m 255 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mwriteFile)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m 256 |\u001b[39m         registryManager\u001b[33m.\u001b[39mcatalogPath\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:253:29)\n\n  ● RegistryManager › updateService › should add new service to catalog\n\n    TypeError: registryManager.updateService is not a function\n\n    \u001b[0m \u001b[90m 272 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 274 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mupdateService(newService)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 275 |\u001b[39m\n     \u001b[90m 276 |\u001b[39m       \u001b[36mconst\u001b[39m writtenData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 277 |\u001b[39m       expect(writtenData\u001b[33m.\u001b[39mservices[\u001b[32m'new-service'\u001b[39m])\u001b[33m.\u001b[39mtoEqual(newService)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:274:29)\n\n  ● RegistryManager › removeService › should remove service from catalog\n\n    TypeError: registryManager.removeService is not a function\n\n    \u001b[0m \u001b[90m 291 |\u001b[39m       fs\u001b[33m.\u001b[39mwriteFile \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 292 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 293 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mremoveService(\u001b[32m'service1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 294 |\u001b[39m\n     \u001b[90m 295 |\u001b[39m       \u001b[36mconst\u001b[39m writtenData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m       expect(writtenData\u001b[33m.\u001b[39mservices\u001b[33m.\u001b[39mservice1)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:293:29)\n\n  ● RegistryManager › removeService › should handle removing non-existent service\n\n    TypeError: registryManager.removeService is not a function\n\n    \u001b[0m \u001b[90m 306 |\u001b[39m       fs\u001b[33m.\u001b[39mwriteFile \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 307 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 308 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mremoveService(\u001b[32m'non-existent'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 309 |\u001b[39m\n     \u001b[90m 310 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mwriteFile)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 311 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:308:29)\n\n  ● RegistryManager › validateCatalog › should validate catalog structure\n\n    TypeError: registryManager.validateCatalog is not a function\n\n    \u001b[0m \u001b[90m 327 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 328 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 329 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m registryManager\u001b[33m.\u001b[39mvalidateCatalog(validCatalog)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 330 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 331 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:329:38)\n\n  ● RegistryManager › validateCatalog › should detect missing required fields\n\n    TypeError: registryManager.validateCatalog is not a function\n\n    \u001b[0m \u001b[90m 342 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 344 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m registryManager\u001b[33m.\u001b[39mvalidateCatalog(invalidCatalog)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 345 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 346 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Service service1 missing required field: name'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 347 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Service service1 missing required field: version'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:344:38)\n\nFAIL tests/unit/monitoring/logging/formatters.test.js\n  ● LogFormatters › jsonFormat › should format logs as JSON\n\n    TypeError: LogFormatters.jsonFormat is not a function\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m   describe(\u001b[32m'jsonFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 80 |\u001b[39m     it(\u001b[32m'should format logs as JSON'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mjsonFormat()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:81:39)\n\n  ● LogFormatters › jsonFormat › should handle errors in JSON format\n\n    TypeError: LogFormatters.jsonFormat is not a function\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m\n     \u001b[90m  98 |\u001b[39m     it(\u001b[32m'should handle errors in JSON format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mjsonFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       \u001b[36mconst\u001b[39m error \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Test error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m       \n     \u001b[90m 102 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:99:39)\n\n  ● LogFormatters › prettyFormat › should format logs in human-readable format\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m   describe(\u001b[32m'prettyFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 118 |\u001b[39m     it(\u001b[32m'should format logs in human-readable format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 121 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 122 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:119:39)\n\n  ● LogFormatters › prettyFormat › should colorize output when enabled\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 133 |\u001b[39m\n     \u001b[90m 134 |\u001b[39m     it(\u001b[32m'should colorize output when enabled'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 135 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat({ colorize\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 136 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 137 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 138 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Error message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:135:39)\n\n  ● LogFormatters › prettyFormat › should include metadata when present\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should include metadata when present'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 154 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 155 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:152:39)\n\n  ● LogFormatters › compactFormat › should format logs in compact single-line format\n\n    TypeError: LogFormatters.compactFormat is not a function\n\n    \u001b[0m \u001b[90m 169 |\u001b[39m   describe(\u001b[32m'compactFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 170 |\u001b[39m     it(\u001b[32m'should format logs in compact single-line format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcompactFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 173 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 174 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:171:39)\n\n  ● LogFormatters › compactFormat › should truncate long messages\n\n    TypeError: LogFormatters.compactFormat is not a function\n\n    \u001b[0m \u001b[90m 187 |\u001b[39m\n     \u001b[90m 188 |\u001b[39m     it(\u001b[32m'should truncate long messages'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 189 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcompactFormat({ maxLength\u001b[33m:\u001b[39m \u001b[35m50\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 190 |\u001b[39m       \u001b[36mconst\u001b[39m longMessage \u001b[33m=\u001b[39m \u001b[32m'A'\u001b[39m\u001b[33m.\u001b[39mrepeat(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 191 |\u001b[39m       \n     \u001b[90m 192 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:189:39)\n\n  ● LogFormatters › logstashFormat › should format logs for Logstash ingestion\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"info\"\n    Received: undefined\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m       expect(parsed[\u001b[32m'@version'\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Test message'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mseverity)\u001b[33m.\u001b[39mtoBe(\u001b[32m'info'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mhost)\u001b[33m.\u001b[39mtoBe(\u001b[32m'test-host'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mservice)\u001b[33m.\u001b[39mtoBe(\u001b[32m'test-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/unit/monitoring/logging/formatters.test.js:223:31)\n\n  ● LogFormatters › logstashFormat › should add fields from metadata\n\n    TypeError: Cannot read properties of undefined (reading 'userId')\n\n    \u001b[0m \u001b[90m 240 |\u001b[39m       \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(formatted[\u001b[33mSymbol\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfor\u001b[39m(\u001b[32m'message'\u001b[39m)])\u001b[33m;\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 242 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mfields\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(\u001b[35m123\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 243 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mfields\u001b[33m.\u001b[39mrequestId)\u001b[33m.\u001b[39mtoBe(\u001b[32m'req-456'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mtags)\u001b[33m.\u001b[39mtoEqual([\u001b[32m'api'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'v2'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.userId (tests/unit/monitoring/logging/formatters.test.js:242:28)\n\n  ● LogFormatters › customFormat › should allow custom formatting function\n\n    TypeError: LogFormatters.customFormat is not a function\n\n    \u001b[0m \u001b[90m 252 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 254 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcustomFormat(customFormatter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 255 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 256 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 257 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[0m\n\n      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:254:39)\n\n  ● LogFormatters › customFormat › should support template strings\n\n    TypeError: LogFormatters.customFormat is not a function\n\n    \u001b[0m \u001b[90m 266 |\u001b[39m     it(\u001b[32m'should support template strings'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 267 |\u001b[39m       \u001b[36mconst\u001b[39m template \u001b[33m=\u001b[39m \u001b[32m'{{timestamp}} [{{level}}] {{service}}: {{message}}'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcustomFormat(template)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 269 |\u001b[39m       \n     \u001b[90m 270 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 271 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:268:39)\n\n  ● LogFormatters › multiFormat › should combine multiple formatters\n\n    TypeError: LogFormatters.multiFormat is not a function\n\n    \u001b[0m \u001b[90m 284 |\u001b[39m   describe(\u001b[32m'multiFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 285 |\u001b[39m     it(\u001b[32m'should combine multiple formatters'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 286 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmultiFormat([\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 287 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39mtimestamp()\u001b[33m,\u001b[39m\n     \u001b[90m 288 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39merrors({ stack\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m,\u001b[39m\n     \u001b[90m 289 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39mjson()\u001b[0m\n\n      at Object.multiFormat (tests/unit/monitoring/logging/formatters.test.js:286:39)\n\n  ● LogFormatters › filterFormat › should filter logs based on criteria\n\n    TypeError: LogFormatters.filterFormat is not a function\n\n    \u001b[0m \u001b[90m 304 |\u001b[39m   describe(\u001b[32m'filterFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 305 |\u001b[39m     it(\u001b[32m'should filter logs based on criteria'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 306 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mfilterFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 307 |\u001b[39m         levels\u001b[33m:\u001b[39m [\u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'warn'\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 308 |\u001b[39m         excludeMessages\u001b[33m:\u001b[39m [\u001b[35m/debug/i\u001b[39m]\n     \u001b[90m 309 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:306:39)\n\n  ● LogFormatters › filterFormat › should filter based on metadata fields\n\n    TypeError: LogFormatters.filterFormat is not a function\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     it(\u001b[32m'should filter based on metadata fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mfilterFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m         metadata\u001b[33m:\u001b[39m {\n     \u001b[90m 334 |\u001b[39m           environment\u001b[33m:\u001b[39m \u001b[32m'production'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 335 |\u001b[39m           userId\u001b[33m:\u001b[39m (value) \u001b[33m=>\u001b[39m value \u001b[33m>\u001b[39m \u001b[35m100\u001b[39m\u001b[0m\n\n      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:332:39)\n\n  ● LogFormatters › maskFormat › should mask sensitive fields\n\n    TypeError: LogFormatters.maskFormat is not a function\n\n    \u001b[0m \u001b[90m 366 |\u001b[39m   describe(\u001b[32m'maskFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 367 |\u001b[39m     it(\u001b[32m'should mask sensitive fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 368 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmaskFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 369 |\u001b[39m         fields\u001b[33m:\u001b[39m [\u001b[32m'password'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'token'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'ssn'\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 370 |\u001b[39m         patterns\u001b[33m:\u001b[39m [\u001b[35m/\\b\\d{3}-\\d{2}-\\d{4}\\b/g\u001b[39m] \u001b[90m// SSN pattern\u001b[39m\n     \u001b[90m 371 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:368:39)\n\n  ● LogFormatters › maskFormat › should handle nested fields\n\n    TypeError: LogFormatters.maskFormat is not a function\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m\n     \u001b[90m 389 |\u001b[39m     it(\u001b[32m'should handle nested fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmaskFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m         fields\u001b[33m:\u001b[39m [\u001b[32m'user.password'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'auth.token'\u001b[39m]\n     \u001b[90m 392 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 393 |\u001b[39m\u001b[0m\n\n      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:390:39)\n\nFAIL mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js\n  ● Monitoring + Cloud Integration › AWS Monitoring Integration › should collect metrics from AWS-deployed services\n\n    Environment must have name and region\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mregion) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and region'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m     }\n     \u001b[90m 334 |\u001b[39m\n     \u001b[90m 335 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:34:46)\n\n  ● Monitoring + Cloud Integration › AWS Monitoring Integration › should trigger alerts for AWS service anomalies\n\n    TypeError: alertingSystem.addChannel is not a function\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 56 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39maddChannel(\u001b[32m'test-channel'\u001b[39m\u001b[33m,\u001b[39m alertChannel)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m       \n     \u001b[90m 59 |\u001b[39m       \u001b[90m// Create alert rule for high CPU\u001b[39m\n     \u001b[90m 60 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39mcreateRule({\u001b[0m\n\n      at Object.addChannel (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:57:28)\n\n  ● Monitoring + Cloud Integration › GCP Monitoring Integration › should collect metrics from GCP Cloud Run services\n\n    Environment must have name and projectId\n\n    \u001b[0m \u001b[90m 533 |\u001b[39m\n     \u001b[90m 534 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mprojectId) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 535 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and projectId'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 536 |\u001b[39m     }\n     \u001b[90m 537 |\u001b[39m\n     \u001b[90m 538 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at GCPDeployment.deploy (mcp-local-setup/deploy/gcp/deployment.js:535:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:89:46)\n\n  ● Monitoring + Cloud Integration › GCP Monitoring Integration › should integrate with GCP monitoring APIs\n\n    TypeError: gcpDeployment.getMetrics is not a function\n\n    \u001b[0m \u001b[90m 105 |\u001b[39m\n     \u001b[90m 106 |\u001b[39m     test(\u001b[32m'should integrate with GCP monitoring APIs'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m gcpMetrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m gcpDeployment\u001b[33m.\u001b[39mgetMetrics(\u001b[32m'test-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 108 |\u001b[39m       \n     \u001b[90m 109 |\u001b[39m       \u001b[90m// Export to Prometheus format\u001b[39m\n     \u001b[90m 110 |\u001b[39m       \u001b[36mconst\u001b[39m prometheusMetrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mexportMetrics(gcpMetrics)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.getMetrics (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:107:46)\n\n  ● Monitoring + Cloud Integration › Azure Monitoring Integration › should collect metrics from Azure Container Instances\n\n    Environment must have name, subscriptionId, and resourceGroup\n\n    \u001b[0m \u001b[90m 483 |\u001b[39m\n     \u001b[90m 484 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39msubscriptionId \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mresourceGroup) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 485 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name, subscriptionId, and resourceGroup'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 486 |\u001b[39m     }\n     \u001b[90m 487 |\u001b[39m\n     \u001b[90m 488 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AzureDeployment.deploy (mcp-local-setup/deploy/azure/deployment.js:485:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:120:48)\n\n  ● Monitoring + Cloud Integration › Cross-Cloud Monitoring › should aggregate metrics across multiple cloud providers\n\n    Environment must have name and region\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mregion) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and region'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m     }\n     \u001b[90m 334 |\u001b[39m\n     \u001b[90m 335 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:141:46)\n\n  ● Monitoring + Cloud Integration › Cross-Cloud Monitoring › should create unified dashboards for multi-cloud deployments\n\n    TypeError: metricsCollector.createDashboard is not a function\n\n    \u001b[0m \u001b[90m 179 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 180 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 181 |\u001b[39m       \u001b[36mconst\u001b[39m dashboard \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mcreateDashboard(dashboardConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 182 |\u001b[39m       \n     \u001b[90m 183 |\u001b[39m       expect(dashboard)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'url'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m       expect(dashboard\u001b[33m.\u001b[39mpanels)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createDashboard (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:181:48)\n\n  ● Monitoring + Cloud Integration › Alert Integration Across Clouds › should correlate alerts from different cloud providers\n\n    TypeError: alertingSystem.on is not a function\n\n    \u001b[0m \u001b[90m 192 |\u001b[39m       \n     \u001b[90m 193 |\u001b[39m       \u001b[90m// Setup alert collection\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 194 |\u001b[39m       alertingSystem\u001b[33m.\u001b[39mon(\u001b[32m'alert'\u001b[39m\u001b[33m,\u001b[39m (alert) \u001b[33m=>\u001b[39m alerts\u001b[33m.\u001b[39mpush(alert))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 195 |\u001b[39m\n     \u001b[90m 196 |\u001b[39m       \u001b[90m// Simulate alerts from different clouds\u001b[39m\n     \u001b[90m 197 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39mprocessCloudAlert({\u001b[0m\n\n      at Object.on (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:194:22)\n\n  ● Monitoring + Cloud Integration › Performance Monitoring › should track deployment performance metrics\n\n    TypeError: metricsCollector.trackDeployment is not a function\n\n    \u001b[0m \u001b[90m 229 |\u001b[39m       \u001b[90m// Track deployment performance\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m [cloud\u001b[33m,\u001b[39m metrics] \u001b[36mof\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mentries(deploymentMetrics)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 231 |\u001b[39m         \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mtrackDeployment(cloud\u001b[33m,\u001b[39m metrics)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 232 |\u001b[39m       }\n     \u001b[90m 233 |\u001b[39m\n     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m performanceReport \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mgetPerformanceReport()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.trackDeployment (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:231:32)\n\nFAIL tests/performance/monitoring/metrics-load.test.js\n  ● Metrics Performance Under Load › High-Frequency Metric Updates › should handle 10k metrics/second\n\n    Added label \"status\" is not included in initial labelset: [ 'method', 'route', 'status_code', 'status_class' ]\n\n    \u001b[0m \u001b[90m 40 |\u001b[39m       \u001b[90m// Generate metrics at high frequency\u001b[39m\n     \u001b[90m 41 |\u001b[39m       \u001b[36mwhile\u001b[39m (\u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow() \u001b[33m-\u001b[39m startTime \u001b[33m<\u001b[39m duration \u001b[33m&&\u001b[39m operations \u001b[33m<\u001b[39m targetOps) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 42 |\u001b[39m         httpExporter\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mhttpRequestsTotal\u001b[33m.\u001b[39minc({\n     \u001b[90m    |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 43 |\u001b[39m           method\u001b[33m:\u001b[39m [\u001b[32m'GET'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'POST'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'PUT'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'DELETE'\u001b[39m][operations \u001b[33m%\u001b[39m \u001b[35m4\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 44 |\u001b[39m           status\u001b[33m:\u001b[39m [\u001b[32m'200'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'201'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'400'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'500'\u001b[39m][operations \u001b[33m%\u001b[39m \u001b[35m4\u001b[39m]\n     \u001b[90m 45 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)\n      at Counter.incWithoutExemplar (node_modules/prom-client/lib/counter.js:44:4)\n      at Object.inc (tests/performance/monitoring/metrics-load.test.js:42:48)\n\n  ● Metrics Performance Under Load › High-Frequency Metric Updates › should handle concurrent metric updates\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Memory Efficiency › should maintain stable memory usage with high cardinality\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Memory Efficiency › should handle metric lifecycle efficiently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Metric Collection Performance › should efficiently serialize large numbers of metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Metric Collection Performance › should handle metric endpoint under load\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Histogram Performance › should efficiently calculate percentiles\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Histogram Performance › should handle multiple histogram updates concurrently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Label Cardinality Performance › should handle high label cardinality efficiently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Real-world Load Simulation › should handle realistic mixed workload\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Stress Testing › should remain stable under extreme load\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\nFAIL mcp-local-setup/tests/integration/profile-switching.integration.test.js\n  ● Profile Switching Integration Tests › Profile Creation › should handle profile name conflicts\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: \"/home/jenner/.mcp-platform/profiles/duplicate-profile.yml\"\n\n    \u001b[0m \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m       \u001b[90m// Try to create duplicate\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 86 |\u001b[39m       \u001b[36mawait\u001b[39m expect(createTestProfile([\u001b[32m'service2'\u001b[39m]\u001b[33m,\u001b[39m { name\u001b[33m:\u001b[39m profileName }))\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 87 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/integration/profile-switching.integration.test.js:86:13)\n\n  ● Profile Switching Integration Tests › Profile Creation › should validate profile yaml structure\n\n    YAMLException: bad indentation of a mapping entry (1:14)\n\n     1 | invalid: yaml: structure:\n    ------------------^\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[90m// Try to load the profile\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m       \u001b[36mawait\u001b[39m expect(yaml\u001b[33m.\u001b[39mload(\u001b[36mawait\u001b[39m fs\u001b[33m.\u001b[39mreadFile(profilePath\u001b[33m,\u001b[39m \u001b[32m'utf8'\u001b[39m)))\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at generateError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:183:10)\n      at throwError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:187:9)\n      at readBlockMapping (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1182:7)\n      at composeNode (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1441:12)\n      at readDocument (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1625:3)\n      at loadDocuments (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1688:5)\n      at Object.load (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1714:19)\n      at Object.load (mcp-local-setup/tests/integration/profile-switching.integration.test.js:99:25)\n\n  ● Profile Switching Integration Tests › Profile Switching › should update docker-compose when switching profiles\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 159 |\u001b[39m\n     \u001b[90m 160 |\u001b[39m       \u001b[36mconst\u001b[39m generated \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m generateCompose()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 161 |\u001b[39m       expect(generated)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[90m// Docker compose should now contain services from profile1\u001b[39m\n     \u001b[90m 164 |\u001b[39m       \u001b[36mconst\u001b[39m composePath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(\u001b[33mMCP_HOME\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'docker-compose.yml'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/profile-switching.integration.test.js:161:25)\n\nFAIL mcp-local-setup/tests/integration/backup.integration.test.js\n  ● Backup & Restore Integration Tests › Selective Service Backup › should handle incremental backups\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 993\n    Received:   993\n\n    \u001b[0m \u001b[90m 155 |\u001b[39m             \u001b[36mconst\u001b[39m metadata \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m backup\u001b[33m.\u001b[39mgetBackupMetadata(incrementalId)\u001b[33m;\u001b[39m\n     \u001b[90m 156 |\u001b[39m             expect(metadata\u001b[33m.\u001b[39mtype)\u001b[33m.\u001b[39mtoBe(\u001b[32m'incremental'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 157 |\u001b[39m             expect(metadata\u001b[33m.\u001b[39msize)\u001b[33m.\u001b[39mtoBeLessThan(metadata\u001b[33m.\u001b[39msize)\u001b[33m;\u001b[39m \u001b[90m// Should be smaller than full\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 158 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\u001b[0m\n\n      at Object.toBeLessThan (mcp-local-setup/tests/integration/backup.integration.test.js:157:35)\n\n  ● Backup & Restore Integration Tests › Scheduled Backups › should list backup schedules\n\n    expect(received).toBeInstanceOf(expected)\n\n    Expected constructor: Date\n\n    Received value has no prototype\n    Received value: null\n\n    \u001b[0m \u001b[90m 182 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39mcronExpression)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0 2 * * *'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 183 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39menabled)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 184 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39mnextRun)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mDate\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 185 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m\n     \u001b[90m 187 |\u001b[39m         it(\u001b[32m'should update backup schedule'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/backup.integration.test.js:184:42)\n\n  ● Backup & Restore Integration Tests › Backup Storage Management › should delete specific backup\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m         it(\u001b[32m'should delete specific backup'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 297 |\u001b[39m             \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m backup\u001b[33m.\u001b[39mdeleteBackup(testBackupId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m             expect(deleted)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m\n     \u001b[90m 300 |\u001b[39m             \u001b[36mawait\u001b[39m expect(backup\u001b[33m.\u001b[39mgetBackupMetadata(testBackupId))\n     \u001b[90m 301 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Backup not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/backup.integration.test.js:298:29)\n\n  ● Backup & Restore Integration Tests › Error Handling › should validate backup options\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: \"backup-2025-07-24T22-52-02-438Z-7bfbf9bc\"\n\n    \u001b[0m \u001b[90m 321 |\u001b[39m             }\u001b[33m;\u001b[39m\n     \u001b[90m 322 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 323 |\u001b[39m             \u001b[36mawait\u001b[39m expect(backup\u001b[33m.\u001b[39mcreateBackup(invalidOptions))\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 324 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 325 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/integration/backup.integration.test.js:323:19)\n\nFAIL tests/integration/phase6/production-deployment.test.js\n  ● Production Deployment Integration › Production request flow with all components\n\n    Added label \"status\" is not included in initial labelset: []\n\n    \u001b[0m \u001b[90m 149 |\u001b[39m\n     \u001b[90m 150 |\u001b[39m       requestLogger\u001b[33m.\u001b[39merror(\u001b[32m'Request failed'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 151 |\u001b[39m       requestTimer({ status\u001b[33m:\u001b[39m \u001b[35m500\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 152 |\u001b[39m     } \u001b[36mfinally\u001b[39m {\n     \u001b[90m 153 |\u001b[39m       transaction\u001b[33m.\u001b[39mfinish()\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m     }\u001b[0m\n\n      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)\n      at node_modules/prom-client/lib/histogram.js:235:3\n      at Histogram.observeWithoutExemplar (node_modules/prom-client/lib/histogram.js:74:54)\n      at node_modules/prom-client/lib/histogram.js:185:9\n      at Object.requestTimer (tests/integration/phase6/production-deployment.test.js:151:7)\n\n  ● Production Deployment Integration › Production monitoring and alerting\n\n    ReferenceError: Cannot access 'health' before initialization\n\n    \u001b[0m \u001b[90m 181 |\u001b[39m\n     \u001b[90m 182 |\u001b[39m     \u001b[90m// Check health degradation\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 183 |\u001b[39m     \u001b[36mconst\u001b[39m health \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m health\u001b[33m.\u001b[39mcheckHealth()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 184 |\u001b[39m     expect(health\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'degraded'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m\n     \u001b[90m 186 |\u001b[39m     \u001b[90m// Verify metrics\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:183:20)\n\nFAIL mcp-local-setup/tests/unit/cli-mcp-cli.unit.test.js\n  ● MCP CLI Command Parsing › CLI Initialization › should set up correct environment variables\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › CLI Initialization › should define all required command paths\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › fileExists should check file accessibility\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › runCommand should spawn process with correct arguments\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › runCommand should handle process errors\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Command Structure › should parse version command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Command Structure › should parse help command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service start command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service stop command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service restart command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should handle profile list command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should handle profile switch command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should validate profile creation\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle missing docker-compose file\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle invalid profile names\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle service command failures gracefully\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\nFAIL tests/unit/security/xss-protection.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'isomorphic-dompurify' from 'tests/unit/security/xss-protection.test.js'\n\n    \u001b[0m \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[90m// Mock isomorphic-dompurify\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 4 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'isomorphic-dompurify'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 5 |\u001b[39m   \u001b[36mreturn\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m 6 |\u001b[39m     sanitize\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn((dirty\u001b[33m,\u001b[39m config) \u001b[33m=>\u001b[39m {\n     \u001b[90m 7 |\u001b[39m       \u001b[90m// Simple mock sanitization\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.mock (tests/unit/security/xss-protection.test.js:4:6)\n\nFAIL mcp-local-setup/tests/unit/update/update-manager.unit.test.js\n  ● Test suite failed to run\n\n    TypeError: Cannot destructure property 'O_CREAT' of 'fs.constants' as it is undefined.\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mconst\u001b[39m { pipeline } \u001b[33m=\u001b[39m require(\u001b[32m'stream/promises'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mconst\u001b[39m { createWriteStream\u001b[33m,\u001b[39m createReadStream } \u001b[33m=\u001b[39m require(\u001b[32m'fs'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mconst\u001b[39m tar \u001b[33m=\u001b[39m require(\u001b[32m'tar'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m \u001b[36mconst\u001b[39m semver \u001b[33m=\u001b[39m require(\u001b[32m'semver'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m cron \u001b[33m=\u001b[39m require(\u001b[32m'node-cron'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/get-write-flag.js:14:9)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/unpack.js:48:17)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/extract.js:5:16)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/index.js:8:31)\n      at Object.require (mcp-local-setup/scripts/update-manager.js:13:13)\n      at Object.require (mcp-local-setup/tests/unit/update/update-manager.unit.test.js:5:23)\n\nFAIL mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../monitoring/logging/service' from 'mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mComplianceTools\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../enterprise/compliance/tools'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mTenantManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../enterprise/multi-tenant/tenancy'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLoggingService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertingSystem\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/alerts/alerting'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m describe(\u001b[32m'SSO + Compliance Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js:9:24)\n\nFAIL tests/unit/security/input-validator.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'validator' from 'security/validation/input-validator.js'\n\n    Require stack:\n      security/validation/input-validator.js\n      tests/unit/security/input-validator.test.js\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m validator \u001b[33m=\u001b[39m require(\u001b[32m'validator'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m createDOMPurify \u001b[33m=\u001b[39m require(\u001b[32m'isomorphic-dompurify'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mInputValidator\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (security/validation/input-validator.js:8:19)\n      at Object.<anonymous> (tests/unit/security/input-validator.test.js:1:79)\n\nFAIL tests/security/injection-prevention.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'validator' from 'security/validation/input-validator.js'\n\n    Require stack:\n      security/validation/input-validator.js\n      tests/security/injection-prevention.test.js\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m validator \u001b[33m=\u001b[39m require(\u001b[32m'validator'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m createDOMPurify \u001b[33m=\u001b[39m require(\u001b[32m'isomorphic-dompurify'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mInputValidator\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (security/validation/input-validator.js:8:19)\n      at Object.<anonymous> (tests/security/injection-prevention.test.js:1:76)\n\nFAIL tests/unit/security/oauth.test.js\n  ● OAuth2Provider › getUserInfo › should return user info\n\n    User info URL not configured\n\n    \u001b[0m \u001b[90m 211 |\u001b[39m   \u001b[36masync\u001b[39m getUserInfo(accessToken) {\n     \u001b[90m 212 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconfig\u001b[33m.\u001b[39muserInfoURL) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 213 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'User info URL not configured'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 214 |\u001b[39m     }\n     \u001b[90m 215 |\u001b[39m\n     \u001b[90m 216 |\u001b[39m     \u001b[36mtry\u001b[39m {\u001b[0m\n\n      at OAuth2Provider.getUserInfo (security/api-auth/oauth.js:213:13)\n      at Object.getUserInfo (tests/unit/security/oauth.test.js:161:39)\n\nFAIL mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../monitoring/logging/service' from 'mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAzureDeployment\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../deploy/azure/deployment'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMetricsCollector\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/metrics/collector'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLoggingService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertingSystem\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/alerts/alerting'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 19 |\u001b[39m\n     \u001b[90m 20 |\u001b[39m describe(\u001b[32m'Phase 4 Full Workflow Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js:17:24)\n\nFAIL mcp-local-setup/monitoring/tests/logging-service.test.js\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockWinston' before initialization\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'winston'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m mockWinston)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m\n     \u001b[90m 33 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'winston-daily-rotate-file'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 34 |\u001b[39m   \u001b[36mreturn\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m ({}))\u001b[33m;\u001b[39m\u001b[0m\n\n      at mockWinston (mcp-local-setup/monitoring/tests/logging-service.test.js:31:28)\n      at Object.require (mcp-local-setup/monitoring/logging/logger.js:6:17)\n      at Object.require (mcp-local-setup/monitoring/tests/logging-service.test.js:5:24)\n\nFAIL tests/sdk-core.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../../mcp-local-setup/enterprise/sso/authentication' from 'sdk/core/index.js'\n\n    Require stack:\n      sdk/core/index.js\n      tests/sdk-core.test.js\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mEventEmitter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'events'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m crypto \u001b[33m=\u001b[39m require(\u001b[32m'crypto'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mSSOAuthentication\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../mcp-local-setup/enterprise/sso/authentication'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMarketplaceDiscovery\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../mcp-local-setup/api/marketplace/discovery'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m \u001b[36mextends\u001b[39m \u001b[33mEventEmitter\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (sdk/core/index.js:7:27)\n      at Object.require (tests/sdk-core.test.js:6:17)\n\nFAIL tests/unit/monitoring/logging/rotation.test.js\n  ● Test suite failed to run\n\n    TypeError: Cannot assign to read only property 'createGzip' of object '#<Object>'\n\n      at node_modules/jest-mock/build/index.js:784:33\n          at Set.forEach (<anonymous>)\n\nFAIL mcp-local-setup/tests/unit/security/network-manager.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word 'public'. (240:14)\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m         \u001b[90m// Group services by isolation requirements\u001b[39m\n     \u001b[90m 239 |\u001b[39m         \u001b[36mconst\u001b[39m isolated \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m         \u001b[36mconst\u001b[39m \u001b[36mpublic\u001b[39m \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n     \u001b[90m 242 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m rule \u001b[36mof\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrules\u001b[33m.\u001b[39mvalues()) {\n     \u001b[90m 243 |\u001b[39m             \u001b[36mif\u001b[39m (rule\u001b[33m.\u001b[39mallowed) {\u001b[0m\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mRateLimiter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./rate-limiter'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mCORSManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./cors-manager'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mServiceIsolation\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./service-isolation'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mNetworkManager\u001b[39m {\n     \u001b[90m 11 |\u001b[39m     constructor() {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)\n      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)\n      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)\n      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)\n      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)\n      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)\n      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)\n      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)\n      at Object.require (mcp-local-setup/tests/unit/security/network-manager.test.js:5:24)\n\nFAIL tests/unit/monitoring/errors/error-boundaries.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax 'jsx' isn't currently enabled (96:11):\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33mFallbackComponent\u001b[39m) {\n     \u001b[90m 95 |\u001b[39m         \u001b[36mreturn\u001b[39m (\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33mFallbackComponent\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m             error\u001b[33m=\u001b[39m{error}\n     \u001b[90m 98 |\u001b[39m             errorInfo\u001b[33m=\u001b[39m{errorInfo}\n     \u001b[90m 99 |\u001b[39m             resetErrorBoundary\u001b[33m=\u001b[39m{\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mresetErrorBoundary}\u001b[0m\n\n    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the 'presets' section of your Babel config to enable transformation.\n    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the 'plugins' section to enable parsing.\n\n    If you already added the plugin for this syntax to your config, it's possible that your config isn't being loaded.\n    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:\n    \tnpx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js <your build command>\n    See https://babeljs.io/docs/configuration#print-effective-configs for more info.\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorBoundaries\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../monitoring/errors/error-boundaries'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mEventEmitter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'events'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m\n     \u001b[90m 4 |\u001b[39m describe(\u001b[32m'ErrorBoundaries'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)\n      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)\n      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)\n      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.<anonymous> (tests/unit/monitoring/errors/error-boundaries.test.js:1:82)\n\nFAIL mcp-local-setup/tests/e2e/installation-flow.e2e.test.js\n  ● Installation Flow E2E Tests › Initial Installation › should set correct file permissions\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 123 |\u001b[39m         \u001b[36mconst\u001b[39m stats \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m fs\u001b[33m.\u001b[39mstat(filePath)\u001b[33m;\u001b[39m\n     \u001b[90m 124 |\u001b[39m         \u001b[36mconst\u001b[39m isExecutable \u001b[33m=\u001b[39m (stats\u001b[33m.\u001b[39mmode \u001b[33m&\u001b[39m \u001b[35m0o111\u001b[39m) \u001b[33m!==\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 125 |\u001b[39m         expect(isExecutable)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 126 |\u001b[39m       }\n     \u001b[90m 127 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 128 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/e2e/installation-flow.e2e.test.js:125:30)\n\nFAIL mcp-local-setup/tests/integration/security.integration.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word 'public'. (240:14)\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m         \u001b[90m// Group services by isolation requirements\u001b[39m\n     \u001b[90m 239 |\u001b[39m         \u001b[36mconst\u001b[39m isolated \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m         \u001b[36mconst\u001b[39m \u001b[36mpublic\u001b[39m \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n     \u001b[90m 242 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m rule \u001b[36mof\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrules\u001b[33m.\u001b[39mvalues()) {\n     \u001b[90m 243 |\u001b[39m             \u001b[36mif\u001b[39m (rule\u001b[33m.\u001b[39mallowed) {\u001b[0m\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mRateLimiter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./rate-limiter'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mCORSManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./cors-manager'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mServiceIsolation\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./service-isolation'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mNetworkManager\u001b[39m {\n     \u001b[90m 11 |\u001b[39m     constructor() {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)\n      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)\n      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)\n      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)\n      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)\n      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)\n      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)\n      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)\n      at Object.require (mcp-local-setup/security/index.js:8:24)\n      at Object.require (mcp-local-setup/tests/integration/security.integration.test.js:6:32)\n\nFAIL tests/integration/monitoring/error-tracking.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax 'jsx' isn't currently enabled (96:11):\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33mFallbackComponent\u001b[39m) {\n     \u001b[90m 95 |\u001b[39m         \u001b[36mreturn\u001b[39m (\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33mFallbackComponent\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m             error\u001b[33m=\u001b[39m{error}\n     \u001b[90m 98 |\u001b[39m             errorInfo\u001b[33m=\u001b[39m{errorInfo}\n     \u001b[90m 99 |\u001b[39m             resetErrorBoundary\u001b[33m=\u001b[39m{\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mresetErrorBoundary}\u001b[0m\n\n    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the 'presets' section of your Babel config to enable transformation.\n    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the 'plugins' section to enable parsing.\n\n    If you already added the plugin for this syntax to your config, it's possible that your config isn't being loaded.\n    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:\n    \tnpx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js <your build command>\n    See https://babeljs.io/docs/configuration#print-effective-configs for more info.\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mSentryIntegration\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/sentry-integration'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorBoundaries\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/error-boundaries'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertRouter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/alert-router'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorTracker\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/error-tracker'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLogger\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/logger'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)\n      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)\n      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)\n      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (tests/integration/monitoring/error-tracking.test.js:2:25)\n\nFAIL mcp-local-setup/tests/integration/update.integration.test.js\n  ● Update Mechanism Integration Tests › Platform Self-Update › should check for platform updates\n\n    Failed to check for updates: Invalid version. Must be a string. Got type \"object\".\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m             \u001b[36mreturn\u001b[39m applicableUpdates\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check for updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m         }\n     \u001b[90m 105 |\u001b[39m     }\n     \u001b[90m 106 |\u001b[39m\u001b[0m\n\n      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:38:29)\n\n  ● Update Mechanism Integration Tests › Platform Self-Update › should check beta channel updates\n\n    Failed to check for updates: Invalid version. Must be a string. Got type \"object\".\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m             \u001b[36mreturn\u001b[39m applicableUpdates\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check for updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m         }\n     \u001b[90m 105 |\u001b[39m     }\n     \u001b[90m 106 |\u001b[39m\u001b[0m\n\n      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:57:29)\n\n  ● Update Mechanism Integration Tests › Service Updates › should check for service updates\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:137:36)\n\n  ● Update Mechanism Integration Tests › Service Updates › should handle dependency resolution\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:161:29)\n\n  ● Update Mechanism Integration Tests › Service Updates › should detect breaking changes\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:172:29)\n\n  ● Update Mechanism Integration Tests › Rollback Functionality › should fail rollback to incompatible version\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Incompatible version\"\n    Received message:   \"No backup found for version 0.1.0\"\n\n        \u001b[0m \u001b[90m 266 |\u001b[39m             \u001b[36mconst\u001b[39m backupPath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mupdateDir\u001b[33m,\u001b[39m \u001b[32m'backups'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`backup-${version}.tar.gz`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m 267 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mfileExists(backupPath)) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`No backup found for version ${version}`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 269 |\u001b[39m             }\n         \u001b[90m 270 |\u001b[39m\n         \u001b[90m 271 |\u001b[39m             \u001b[90m// Check compatibility unless forced\u001b[39m\u001b[0m\n\n      at UpdateManager.rollback (mcp-local-setup/scripts/update-manager.js:268:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:241:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:242:26)\n\n  ● Update Mechanism Integration Tests › Update Notifications › should get current update status\n\n    expect(received).toBeTruthy()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m             \n     \u001b[90m 250 |\u001b[39m             \u001b[36mif\u001b[39m (status) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mupdateId)\u001b[33m.\u001b[39mtoBeTruthy()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/downloading|ready|applying|complete|failed/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mprogress)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mprogress)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeTruthy (mcp-local-setup/tests/integration/update.integration.test.js:251:41)\n\n  ● Update Mechanism Integration Tests › Error Handling › should prevent downgrade without force flag\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Downgrade not allowed\"\n    Received message:   \"metadata is not defined\"\n\n        \u001b[0m \u001b[90m 244 |\u001b[39m                 installedAt\u001b[33m:\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m\n         \u001b[90m 245 |\u001b[39m                 installedBy\u001b[33m:\u001b[39m \u001b[32m'system'\u001b[39m\u001b[33m,\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 246 |\u001b[39m                 previousVersion\u001b[33m:\u001b[39m metadata\u001b[33m.\u001b[39mcurrentVersion\u001b[33m,\u001b[39m\n         \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 247 |\u001b[39m                 success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n         \u001b[90m 248 |\u001b[39m                 notes\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage\n         \u001b[90m 249 |\u001b[39m             })\u001b[33m;\u001b[39m\u001b[0m\n\n      at UpdateManager.metadata [as applyUpdate] (mcp-local-setup/scripts/update-manager.js:246:34)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:336:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:337:26)\n\nFAIL mcp-local-setup/tests/unit/cli-commands-health.unit.test.js\n  ● Test suite failed to run\n\n    Jest worker encountered 4 child process exceptions, exceeding retry limit\n\n      at ChildProcessWorker.initialize (node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)\n\nFAIL mcp-local-setup/tests/unit/security/auth-manager.test.js\n  ● AuthManager › rotateToken › should rotate valid token\n\n    Bad \"options.expiresIn\" option the payload already has an \"exp\" property.\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m \u001b[90m     */\u001b[39m\n     \u001b[90m 219 |\u001b[39m     generateJWT(payload) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         \u001b[36mreturn\u001b[39m jwt\u001b[33m.\u001b[39msign(payload\u001b[33m,\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mjwtSecret\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             expiresIn\u001b[33m:\u001b[39m \u001b[32m'1h'\u001b[39m\n     \u001b[90m 222 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m     }\u001b[0m\n\n      at Object.<anonymous>.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)\n      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)\n      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/security/auth-manager.test.js:122:29)\n\n  ● AuthManager › rotateToken › should keep old token valid during grace period\n\n    Bad \"options.expiresIn\" option the payload already has an \"exp\" property.\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m \u001b[90m     */\u001b[39m\n     \u001b[90m 219 |\u001b[39m     generateJWT(payload) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         \u001b[36mreturn\u001b[39m jwt\u001b[33m.\u001b[39msign(payload\u001b[33m,\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mjwtSecret\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             expiresIn\u001b[33m:\u001b[39m \u001b[32m'1h'\u001b[39m\n     \u001b[90m 222 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m     }\u001b[0m\n\n      at Object.<anonymous>.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)\n      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)\n      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/security/auth-manager.test.js:131:29)\n\nFAIL tests/integration/docker/build-validation.test.js (5.181 s)\n  ● Docker Build Validation › Dockerfile Syntax Validation › should validate Python Dockerfile\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m  98 |\u001b[39m       }\n     \u001b[90m  99 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 100 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m     it(\u001b[32m'should validate Go Dockerfile'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (tests/integration/docker/build-validation.test.js:100:28)\n\n  ● Docker Build Validation › Build Configuration › should use build arguments for flexibility\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 206 |\u001b[39m         \u001b[36mconst\u001b[39m hasArgs \u001b[33m=\u001b[39m content\u001b[33m.\u001b[39mincludes(\u001b[32m'ARG'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 207 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 208 |\u001b[39m         expect(hasArgs)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 209 |\u001b[39m       }\n     \u001b[90m 210 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/integration/docker/build-validation.test.js:208:25)\n\n  ● Docker Build Validation › Build Configuration › should have proper labels\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m         \u001b[90m// Check for any LABEL instruction (more flexible)\u001b[39m\n     \u001b[90m 229 |\u001b[39m         \u001b[36mconst\u001b[39m hasLabels \u001b[33m=\u001b[39m content\u001b[33m.\u001b[39mmatch(\u001b[35m/LABEL\\s+\\w+=/\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m         expect(hasLabels)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m       }\n     \u001b[90m 232 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeNull (tests/integration/docker/build-validation.test.js:230:31)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Node.js image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/node.Dockerfile --label test=true -t test-node:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 253 |\u001b[39m       \n         \u001b[90m 254 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 255 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 256 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 257 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 258 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:255:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Python image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/python.Dockerfile --label test=true -t test-python:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 261 |\u001b[39m       \n         \u001b[90m 262 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 263 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 264 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 265 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 266 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:263:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Go image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/go.Dockerfile --label test=true -t test-go:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 269 |\u001b[39m       \n         \u001b[90m 270 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 272 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 273 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 274 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:271:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)\n\nFAIL tests/unit/monitoring/alert-router.test.js (11.546 s)\n  ● AlertRouter › alert actions › should handle action errors gracefully\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m     it(\u001b[32m'should handle action errors gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m       \u001b[36mconst\u001b[39m mockSend \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Send failed'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m       \n     \u001b[90m 295 |\u001b[39m       alertRouter\u001b[33m.\u001b[39maddChannel(\u001b[32m'failing'\u001b[39m\u001b[33m,\u001b[39m { send\u001b[33m:\u001b[39m mockSend })\u001b[33m;\u001b[39m\u001b[0m\n\n      at it (tests/unit/monitoring/alert-router.test.js:292:5)\n      at describe (tests/unit/monitoring/alert-router.test.js:224:3)\n      at Object.describe (tests/unit/monitoring/alert-router.test.js:3:1)\n\nFAIL mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js (15.451 s)\n  ● CI/CD and Orchestration Integration › Rollback works across CI/CD and orchestration\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"rolled-back\"\n    Received: \"Running\"\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m     \u001b[90m// Then orchestration should also rollback\u001b[39m\n     \u001b[90m  98 |\u001b[39m     \u001b[36mconst\u001b[39m k8sStatus \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m k8s\u001b[33m.\u001b[39mgetDeploymentStatus(deployment\u001b[33m.\u001b[39mdeploymentId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m     expect(k8sStatus\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'rolled-back'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m     expect(rollbackResult\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:99:30)\n\n  ● CI/CD and Orchestration Integration › CI/CD test results influence orchestration deployment\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"Tests must pass before deployment\"\n    Received string:    \"fail is not defined\"\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m         fail(\u001b[32m'Deployment should have been prevented'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         expect(error\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Tests must pass before deployment'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m       }\n     \u001b[90m 119 |\u001b[39m     }\n     \u001b[90m 120 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:117:31)\n\n  ● CI/CD and Orchestration Integration › Orchestration scaling triggers CI/CD metrics update\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 3\n\n    \u001b[0m \u001b[90m 132 |\u001b[39m     \u001b[90m// Then CI/CD should reflect the scaling\u001b[39m\n     \u001b[90m 133 |\u001b[39m     \u001b[36mconst\u001b[39m metrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m cicd\u001b[33m.\u001b[39mgetDeploymentStatus(deployment\u001b[33m.\u001b[39mdeploymentId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 134 |\u001b[39m     expect(metrics\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mreplicas)\u001b[33m.\u001b[39mtoBe(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 135 |\u001b[39m     expect(metrics\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mscalingEvents)\u001b[33m.\u001b[39mtoContainEqual(\n     \u001b[90m 136 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 137 |\u001b[39m         type\u001b[33m:\u001b[39m \u001b[32m'manual-scale'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:134:38)\n\nFAIL mcp-local-setup/tests/unit/cli/publish.test.js\n  ● Test suite failed to run\n\n    A jest worker process (pid=3738405) was terminated by another process: signal=SIGTERM, exitCode=null. Operating system logs may contain more information on why this occurred.\n\n      at ChildProcessWorker._onExit (node_modules/jest-worker/build/workers/ChildProcessWorker.js:370:23)\n\nFAIL mcp-local-setup/tests/unit/update/service-updater.unit.test.js (30.539 s)\n  ● ServiceUpdater › updateService › should update service successfully\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)\n\n  ● ServiceUpdater › updateService › should allow incompatible update with force flag\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)\n\n  ● ServiceUpdater › updateService › should update dependencies first\n\n    Service dependency1 is not installed\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m             \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39minstalled[service]) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} is not installed`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m             }\n     \u001b[90m 80 |\u001b[39m\n     \u001b[90m 81 |\u001b[39m             \u001b[90m// Get update info\u001b[39m\u001b[0m\n\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:78:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n  ● ServiceUpdater › updateService › should backup service before update\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)\n\n  ● ServiceUpdater › updateService › should run migrations after update\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)\n\n  ● ServiceUpdater › updateService › should rollback on failure\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"filesystem\", \"1.0.0\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m             )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Start failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m             expect(rollbackSpy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.0.0'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:251:33)\n\n  ● ServiceUpdater › verifyService › should verify Docker service is running\n\n    expect(received).resolves.not.toThrow()\n\n    Received promise rejected instead of resolved\n    Rejected to value: [TypeError: Cannot read properties of undefined (reading 'type')]\n\n    \u001b[0m \u001b[90m 344 |\u001b[39m             execSync\u001b[33m.\u001b[39mmockReturnValue(\u001b[32m'Up 5 seconds\\n'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 345 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 346 |\u001b[39m             \u001b[36mawait\u001b[39m expect(\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 347 |\u001b[39m                 serviceUpdater\u001b[33m.\u001b[39mverifyService(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.1.0'\u001b[39m)\n     \u001b[90m 348 |\u001b[39m             )\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 349 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:346:19)\n\n  ● ServiceUpdater › verifyService › should throw if Docker service not running\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Service filesystem failed to start\"\n    Received message:   \"Cannot read properties of undefined (reading 'type')\"\n\n        \u001b[0m \u001b[90m 565 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n         \u001b[90m 566 |\u001b[39m         \n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 567 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n         \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 568 |\u001b[39m             \u001b[90m// Check Docker container is running\u001b[39m\n         \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\u001b[0m\n\n      at ServiceUpdater.type [as verifyService] (mcp-local-setup/scripts/service-updater.js:567:32)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:354:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:356:23)\n\n  ● ServiceUpdater › rollbackService › should rollback to previous version\n\n    TypeError: Cannot read properties of undefined (reading 'type')\n\n    \u001b[0m \u001b[90m 431 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 433 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 434 |\u001b[39m             execSync(\u001b[32m`docker stop mcp-${service}`\u001b[39m\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m {\n     \u001b[90m 436 |\u001b[39m             \u001b[90m// Stop local service (would need process management)\u001b[39m\u001b[0m\n\n      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)\n      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:366:13)\n\n  ● ServiceUpdater › rollbackService › should use most recent backup\n\n    TypeError: Cannot read properties of undefined (reading 'type')\n\n    \u001b[0m \u001b[90m 431 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 433 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 434 |\u001b[39m             execSync(\u001b[32m`docker stop mcp-${service}`\u001b[39m\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m {\n     \u001b[90m 436 |\u001b[39m             \u001b[90m// Stop local service (would need process management)\u001b[39m\u001b[0m\n\n      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)\n      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:374:13)\n\n  ● ServiceUpdater › runMigrations › should run applicable migrations in order\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 435 |\u001b[39m             \u001b[36mawait\u001b[39m serviceUpdater\u001b[33m.\u001b[39mrunMigrations(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.0.0'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.2.0'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 436 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 437 |\u001b[39m             expect(migration1\u001b[33m.\u001b[39mup)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 438 |\u001b[39m             expect(migration2\u001b[33m.\u001b[39mup)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 439 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 440 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:437:35)\n\nFAIL mcp-local-setup/tests/integration/service-lifecycle.integration.test.js (67.222 s)\n  ● Service Lifecycle Integration Tests › Service Start › should start a service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m       \u001b[90m// Start the service\u001b[39m\n     \u001b[90m 45 |\u001b[39m       \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m\n     \u001b[90m 48 |\u001b[39m       \u001b[90m// Mark for cleanup\u001b[39m\n     \u001b[90m 49 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${testServiceName}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:46:23)\n\n  ● Service Lifecycle Integration Tests › Service Start › should handle starting already running service\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m       \u001b[90m// Try to start again\u001b[39m\n     \u001b[90m 62 |\u001b[39m       \u001b[36mconst\u001b[39m startedAgain \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m       expect(startedAgain)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Docker compose should handle this gracefully\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m\n     \u001b[90m 66 |\u001b[39m     it(\u001b[32m'should start multiple services in order'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:63:28)\n\n  ● Service Lifecycle Integration Tests › Service Start › should start multiple services in order\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 71 |\u001b[39m         \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(service\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 73 |\u001b[39m         expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 74 |\u001b[39m         \n     \u001b[90m 75 |\u001b[39m         startTimes\u001b[33m.\u001b[39mpush({ service\u001b[33m,\u001b[39m time\u001b[33m:\u001b[39m startTime })\u001b[33m;\u001b[39m\n     \u001b[90m 76 |\u001b[39m         testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${service}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:73:25)\n\n  ● Service Lifecycle Integration Tests › Service Start › should respect environment variables when starting\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${testServiceName}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m       \n     \u001b[90m 96 |\u001b[39m       \u001b[36mdelete\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mTEST_SERVICE_PORT\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:93:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should stop a running service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 106 |\u001b[39m       \u001b[90m// Stop the service\u001b[39m\n     \u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m stopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 108 |\u001b[39m       expect(stopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 109 |\u001b[39m\n     \u001b[90m 110 |\u001b[39m       \u001b[90m// Verify service is stopped\u001b[39m\n     \u001b[90m 111 |\u001b[39m       \u001b[36mawait\u001b[39m expect(waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m5000\u001b[39m))\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:108:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should handle stopping already stopped service\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m       \u001b[90m// Try to stop a service that's not running\u001b[39m\n     \u001b[90m 116 |\u001b[39m       \u001b[36mconst\u001b[39m stopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'non-existent-service'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m       expect(stopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Docker compose returns 0 even for non-existent services\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m\n     \u001b[90m 120 |\u001b[39m     it(\u001b[32m'should stop dependent services in correct order'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:117:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should stop dependent services in correct order\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 126 |\u001b[39m       \u001b[90m// Stop API first (which depends on database)\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[36mconst\u001b[39m apiStopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'api'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 128 |\u001b[39m       expect(apiStopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n     \u001b[90m 130 |\u001b[39m       \u001b[90m// Then stop database\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \u001b[36mconst\u001b[39m dbStopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'database'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:128:26)\n\n  ● Service Lifecycle Integration Tests › Service Restart › should restart a service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 141 |\u001b[39m       \n     \u001b[90m 142 |\u001b[39m       \u001b[36mconst\u001b[39m healthyBefore \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m10000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 143 |\u001b[39m       expect(healthyBefore)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n     \u001b[90m 145 |\u001b[39m       \u001b[90m// Restart service\u001b[39m\n     \u001b[90m 146 |\u001b[39m       \u001b[36mconst\u001b[39m restarted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mPromise\u001b[39m((resolve) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:143:29)\n\n  ● Service Lifecycle Integration Tests › Service Dependencies › should start dependencies automatically\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 195 |\u001b[39m       \u001b[90m// Start only the API service\u001b[39m\n     \u001b[90m 196 |\u001b[39m       \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(apiService\u001b[33m.\u001b[39mname\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 198 |\u001b[39m       \n     \u001b[90m 199 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m'service:api-with-deps'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'service:database'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'service:cache'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:197:23)\n\n  ● Service Lifecycle Integration Tests › Service Health Monitoring › should detect when service becomes unhealthy\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m       \n     \u001b[90m 229 |\u001b[39m       \u001b[36mconst\u001b[39m initialHealth \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m10000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m       expect(initialHealth)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m\n     \u001b[90m 232 |\u001b[39m       \u001b[90m// Simulate service becoming unhealthy\u001b[39m\n     \u001b[90m 233 |\u001b[39m       \u001b[90m// (In a real scenario, you might trigger an error condition)\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:230:29)\n\n  ● Service Lifecycle Integration Tests › Service Health Monitoring › should recover from temporary failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 265 |\u001b[39m       \u001b[90m// Service should recover and become healthy again\u001b[39m\n     \u001b[90m 266 |\u001b[39m       \u001b[36mconst\u001b[39m recovered \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m30000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 267 |\u001b[39m       expect(recovered)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 268 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 269 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:267:25)\n\n  ● Service Lifecycle Integration Tests › Resource Cleanup › should remove orphaned containers\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 297 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 298 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 299 |\u001b[39m       expect(cleaned)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 300 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 302 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:299:23)\n\n\nTest Suites: 57 failed, 38 passed, 95 total\nTests:       286 failed, 9 skipped, 1390 passed, 1685 total\nSnapshots:   0 total\nTime:        68.078 s, estimated 71 s\nRan all test suites.\nTest results written to: test-results/unit-results.json\n",
      "duration": 68918
    }
  ],
  "totals": {
    "suites": 0,
    "tests": 0,
    "passed": 0,
    "failed": 0,
    "skipped": 0,
    "errors": [
      "unit: npx jest --json --outputFile /home/jenner/code/mcps/test-results/unit-results.json --testTimeout 60000 --testPathPattern tests/unit/**/*.test.js --testPathPattern mcp-local-setup/tests/unit/**/*.test.js --testPathPattern **/__tests__/**/*.test.js failed with code 1\njest-haste-map: Haste module naming collision: mcp-vscode\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/ide/vscode/package.json\n    * <rootDir>/dist/ide/vscode/package.json\n\njest-haste-map: Haste module naming collision: mcp-platform-cli\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/mcp-local-setup/cli/package.json\n    * <rootDir>/dist/mcp-local-setup/cli/package.json\n\njest-haste-map: Haste module naming collision: mcp-cli-plugin-git\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/mcp-local-setup/cli/plugins/examples/git-plugin/package.json\n    * <rootDir>/dist/mcp-local-setup/cli/plugins/examples/git-plugin/package.json\n\njest-haste-map: Haste module naming collision: mcp-cli-plugins-installed\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/mcp-local-setup/cli/plugins/installed/package.json\n    * <rootDir>/dist/packages/debian-package/usr/local/mcp-platform/mcp-local-setup/cli/plugins/installed/package.json\n\njest-haste-map: Haste module naming collision: mcp-cli-plugin-docker\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/mcp-local-setup/cli/plugins/examples/docker-plugin/package.json\n    * <rootDir>/dist/packages/debian-package/usr/local/mcp-platform/mcp-local-setup/cli/plugins/examples/docker-plugin/package.json\n\nFAIL mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js\n  ● Phase 5 End-to-End Integration › Complete developer workflow from IDE to production\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Collaborative development with multiple tools\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Progressive rollout with monitoring\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Multi-cloud deployment with unified management\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Debugging production issues with integrated tools\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\nFAIL tests/unit/config/settings.test.js\n  ● Console\n\n    console.error\n      Configuration validation failed: Invalid configuration: port = 70000\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:123:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:124:10)\n\n    console.error\n      Configuration validation failed: Invalid configuration: logLevel = debug\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:131:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:132:10)\n\n    console.error\n      Configuration validation failed: Invalid configuration: nodeEnv = development\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:139:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:140:10)\n\n    console.error\n      Configuration validation failed: Invalid configuration: apiVersion = version1\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:147:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:148:10)\n\n    console.error\n      Configuration validation failed: Invalid configuration: maxRequestSize = 10megabytes\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at require (tests/unit/config/settings.test.js:155:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/config/settings.test.js:156:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid port\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 123 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 126 |\u001b[39m\n     \u001b[90m 127 |\u001b[39m     it(\u001b[32m'should fail validation with invalid log level'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:124:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid log level\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 131 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m     it(\u001b[32m'should fail validation with invalid node environment'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:132:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid node environment\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 138 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 139 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 140 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 141 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 142 |\u001b[39m\n     \u001b[90m 143 |\u001b[39m     it(\u001b[32m'should fail validation with invalid API version format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:140:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid API version format\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 147 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should fail validation with invalid max request size format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:148:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid max request size format\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 154 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 155 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 156 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:156:10)\n\n  ● Production Settings Configuration › Path Configuration › should have correct absolute paths\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"config/production/../..\"\n    Received string:    \"/home/jenner/code/mcps\"\n\n    \u001b[0m \u001b[90m 164 |\u001b[39m       expect(path\u001b[33m.\u001b[39misAbsolute(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39mroot))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m       expect(path\u001b[33m.\u001b[39misAbsolute(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39m\u001b[36mpublic\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 166 |\u001b[39m       expect(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39mroot)\u001b[33m.\u001b[39mtoContain(\u001b[32m'config/production/../..'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 167 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 168 |\u001b[39m\n     \u001b[90m 169 |\u001b[39m     it(\u001b[32m'should allow overriding paths via environment variables'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toContain (tests/unit/config/settings.test.js:166:35)\n\nFAIL tests/unit/config/features.test.js\n  ● Production Feature Flags Configuration › Rollout Percentage Logic › should roughly match rollout percentage across many users\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 10\n    Received:   2.8000000000000003\n\n    \u001b[0m \u001b[90m 350 |\u001b[39m       \n     \u001b[90m 351 |\u001b[39m       \u001b[90m// Allow 15% variance due to simple hash function and sequential IDs\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 352 |\u001b[39m       expect(actualPercentage)\u001b[33m.\u001b[39mtoBeGreaterThan(rolloutPercentage \u001b[33m-\u001b[39m \u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 353 |\u001b[39m       expect(actualPercentage)\u001b[33m.\u001b[39mtoBeLessThan(rolloutPercentage \u001b[33m+\u001b[39m \u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThan (tests/unit/config/features.test.js:352:32)\n\n(node:3738482) [DEP0147] DeprecationWarning: In future versions of Node.js, fs.rmdir(path, { recursive: true }) will be removed. Use fs.rm(path, { recursive: true }) instead\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL mcp-local-setup/tests/unit/backup/data-manager.unit.test.js\n  ● DataManager Unit Tests › exportServiceData › should export service data volumes\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m             expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m             expect(result\u001b[33m.\u001b[39mvolumes[\u001b[32m'test-service'\u001b[39m])\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m             expect(mockFs\u001b[33m.\u001b[39mmkdir)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m         it(\u001b[32m'should handle export failures'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:132:34)\n\n  ● DataManager Unit Tests › exportServiceData › should handle export failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    \u001b[0m \u001b[90m 143 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m dataManager\u001b[33m.\u001b[39mexportServiceData(services\u001b[33m,\u001b[39m exportPath)\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 145 |\u001b[39m             expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 146 |\u001b[39m             expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m             expect(result\u001b[33m.\u001b[39merrors[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mservice)\u001b[33m.\u001b[39mtoBe(\u001b[32m'failing-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 148 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:145:36)\n\n  ● DataManager Unit Tests › helper methods › should walk directory recursively\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"/test/dir/subdir/file2.txt\"\n    Received array: [\"/test/dir/file1.txt\"]\n\n    \u001b[0m \u001b[90m 447 |\u001b[39m\n     \u001b[90m 448 |\u001b[39m             expect(files)\u001b[33m.\u001b[39mtoContain(\u001b[32m'/test/dir/file1.txt'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 449 |\u001b[39m             expect(files)\u001b[33m.\u001b[39mtoContain(\u001b[32m'/test/dir/subdir/file2.txt'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 450 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 451 |\u001b[39m\n     \u001b[90m 452 |\u001b[39m         it(\u001b[32m'should match file patterns'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toContain (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:449:27)\n\nFAIL tests/integration/security/rate-limiting.test.js\n  ● Console\n\n    console.error\n      Redis consume token error: Error: Redis connection lost\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/integration/security/rate-limiting.test.js:157:50)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 246 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 247 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 248 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis consume token error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[90m// Fail open on Redis errors\u001b[39m\n     \u001b[90m 250 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 251 |\u001b[39m         success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)\n      at Object.<anonymous> (tests/integration/security/rate-limiting.test.js:160:22)\n\n  ● Rate Limiting Integration Tests › IP-based Security Features › should detect and handle suspicious IPs\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 229 |\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[90m// Should be marked as suspicious\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 231 |\u001b[39m       expect(ipLimiter\u001b[33m.\u001b[39misSuspicious(suspiciousIP))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 232 |\u001b[39m\n     \u001b[90m 233 |\u001b[39m       \u001b[90m// Should get reduced limits\u001b[39m\n     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m limit \u001b[33m=\u001b[39m ipLimiter\u001b[33m.\u001b[39mgetRateLimitForIP(suspiciousIP\u001b[33m,\u001b[39m \u001b[32m'/api/data'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/integration/security/rate-limiting.test.js:231:52)\n\n  ● Rate Limiting Integration Tests › Rate Limit Headers and Responses › should set appropriate rate limit headers\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 100\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 99\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.063Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 281 |\u001b[39m\n     \u001b[90m 282 |\u001b[39m       \u001b[90m// Check user rate limit headers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 283 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 284 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Remaining'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m99\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'free'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:283:29)\n\n  ● Rate Limiting Integration Tests › Advanced Rate Limiting Scenarios › should handle different endpoints with different limits\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 5\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 4\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.079Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 464 |\u001b[39m       \u001b[36mawait\u001b[39m middleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 465 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo\u001b[33m.\u001b[39mresource)\u001b[33m.\u001b[39mtoBe(\u001b[32m'uploads'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 466 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Free tier upload limit\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 467 |\u001b[39m\n     \u001b[90m 468 |\u001b[39m       \u001b[90m// Test export endpoint\u001b[39m\n     \u001b[90m 469 |\u001b[39m       req\u001b[33m.\u001b[39mpath \u001b[33m=\u001b[39m \u001b[32m'/api/export'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:466:29)\n\n(node:3738387) [DEP0147] DeprecationWarning: In future versions of Node.js, fs.rmdir(path, { recursive: true }) will be removed. Use fs.rm(path, { recursive: true }) instead\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL tests/unit/security/ip-limiter.test.js\n  ● Console\n\n    console.warn\n      Could not determine client IP\n\n    \u001b[0m \u001b[90m 344 |\u001b[39m         \u001b[36mconst\u001b[39m ip \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetClientIP(req)\u001b[33m;\u001b[39m\n     \u001b[90m 345 |\u001b[39m         \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mip) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 346 |\u001b[39m           console\u001b[33m.\u001b[39mwarn(\u001b[32m'Could not determine client IP'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 347 |\u001b[39m           \u001b[36mreturn\u001b[39m next()\u001b[33m;\u001b[39m\n     \u001b[90m 348 |\u001b[39m         }\n     \u001b[90m 349 |\u001b[39m\u001b[0m\n\n      at warn (security/rate-limiting/ip-limiter.js:346:19)\n      at Object.middleware (tests/unit/security/ip-limiter.test.js:536:13)\n\n    console.error\n      IP rate limit middleware error: Error: Redis storage not implemented in this module\n          at IPRateLimiter.consumeToken (/home/jenner/code/mcps/security/rate-limiting/ip-limiter.js:332:11)\n          at consumeToken (/home/jenner/code/mcps/security/rate-limiting/ip-limiter.js:361:35)\n          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/ip-limiter.test.js:547:13)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'IP rate limit middleware error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m         next()\u001b[33m;\u001b[39m \u001b[90m// Fail open\u001b[39m\n     \u001b[90m 392 |\u001b[39m       }\n     \u001b[90m 393 |\u001b[39m     }\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/rate-limiting/ip-limiter.js:390:17)\n      at Object.<anonymous> (tests/unit/security/ip-limiter.test.js:547:7)\n\n  ● IPRateLimiter › constructor › should accept custom options\n\n    TypeError: customLimiter.options.ipWhitelist.has is not a function\n\n    \u001b[0m \u001b[90m 34 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mtrustProxy)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 35 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mproxyDepth)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 36 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mipWhitelist\u001b[33m.\u001b[39mhas(\u001b[32m'192.168.1.1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 37 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mipBlacklist\u001b[33m.\u001b[39mhas(\u001b[32m'10.0.0.1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 38 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39mlimits\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m.\u001b[39mlimit)\u001b[33m.\u001b[39mtoBe(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 39 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.has (tests/unit/security/ip-limiter.test.js:36:48)\n\nFAIL tests/unit/config/env-validation.test.js\n  ● Console\n\n    console.error\n      Configuration validation failed: Invalid configuration: nodeEnv = development\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m   }\u001b[33m,\u001b[39m validationSchema)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Configuration validation failed:'\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m }\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.error (config/production/settings.js:152:11)\n      at Object.require (tests/unit/config/env-validation.test.js:342:7)\n\n  ● Environment Configuration Validation › Environment Variable Types › should handle numeric environment variables correctly\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 234 |\u001b[39m         \n     \u001b[90m 235 |\u001b[39m         \u001b[36mconst\u001b[39m invalidValue \u001b[33m=\u001b[39m config\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39msplit(\u001b[32m'.'\u001b[39m)\u001b[33m.\u001b[39mreduce((obj\u001b[33m,\u001b[39m key) \u001b[33m=>\u001b[39m obj[key]\u001b[33m,\u001b[39m module)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 236 |\u001b[39m         expect(\u001b[33mNumber\u001b[39m\u001b[33m.\u001b[39misNaN(invalidValue))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// parseInt returns NaN for invalid input\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 237 |\u001b[39m         \n     \u001b[90m 238 |\u001b[39m         \u001b[36mdelete\u001b[39m process\u001b[33m.\u001b[39menv[envVar]\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m       }\u001b[0m\n\n      at Object.toBe (tests/unit/config/env-validation.test.js:236:44)\n\n  ● Environment Configuration Validation › Cross-Module Consistency › should have consistent timeout values across modules\n\n    Invalid time format: 45000\n\n    \u001b[0m \u001b[90m  8 |\u001b[39m   \u001b[36mconst\u001b[39m match \u001b[33m=\u001b[39m timeStr\u001b[33m.\u001b[39mmatch(\u001b[35m/^(\\d+)([smhd])$/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mmatch) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 10 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Invalid time format: ${timeStr}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 11 |\u001b[39m   }\n     \u001b[90m 12 |\u001b[39m   \n     \u001b[90m 13 |\u001b[39m   \u001b[36mconst\u001b[39m value \u001b[33m=\u001b[39m parseInt(match[\u001b[35m1\u001b[39m]\u001b[33m,\u001b[39m \u001b[35m10\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at parseTimeToMs (config/production/limits.js:10:11)\n      at Object.parseTimeToMs (config/production/limits.js:248:16)\n      at Object.require (tests/unit/config/env-validation.test.js:381:22)\n\nFAIL mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js\n  ● BackupManager Unit Tests › createBackup › should create a full backup\n\n    Backup creation failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 200 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Backup creation failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m         }\n     \u001b[90m 203 |\u001b[39m     }\n     \u001b[90m 204 |\u001b[39m\u001b[0m\n\n      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:112:30)\n\n  ● BackupManager Unit Tests › createBackup › should create incremental backup\n\n    Backup creation failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 200 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Backup creation failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m         }\n     \u001b[90m 203 |\u001b[39m     }\n     \u001b[90m 204 |\u001b[39m\u001b[0m\n\n      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:138:30)\n\n  ● BackupManager Unit Tests › restoreBackup › should restore a backup\n\n    Restore failed: Backup integrity check failed\n\n    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 323 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 324 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Restore failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 325 |\u001b[39m         }\n     \u001b[90m 326 |\u001b[39m     }\n     \u001b[90m 327 |\u001b[39m\u001b[0m\n\n      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:239:28)\n\n  ● BackupManager Unit Tests › restoreBackup › should handle dry run mode\n\n    Restore failed: Backup integrity check failed\n\n    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 323 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 324 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Restore failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 325 |\u001b[39m         }\n     \u001b[90m 326 |\u001b[39m     }\n     \u001b[90m 327 |\u001b[39m\u001b[0m\n\n      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:257:28)\n\n  ● BackupManager Unit Tests › cleanupBackups › should cleanup backups older than maxAge\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 5\n\n    \u001b[0m \u001b[90m 430 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 431 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 432 |\u001b[39m             expect(result\u001b[33m.\u001b[39mdeletedCount)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 433 |\u001b[39m             expect(backupManager\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mhas(\u001b[32m'backup-1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 434 |\u001b[39m             expect(backupManager\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mhas(\u001b[32m'backup-2'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:432:41)\n\n  ● BackupManager Unit Tests › importBackup/exportBackup › should import backup from local filesystem\n\n    Import failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 510 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 511 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 512 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Import failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 513 |\u001b[39m         }\n     \u001b[90m 514 |\u001b[39m     }\n     \u001b[90m 515 |\u001b[39m\u001b[0m\n\n      at BackupManager.importBackup (mcp-local-setup/scripts/backup-manager.js:512:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:461:30)\n\nFAIL mcp-local-setup/tests/unit/config/configuration-manager.test.js\n  ● ConfigurationManager › loadConfig › should load configuration for an environment\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m     describe(\u001b[32m'loadConfig'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 43 |\u001b[39m         it(\u001b[32m'should load configuration for an environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             \n     \u001b[90m 47 |\u001b[39m             \u001b[36mconst\u001b[39m config \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mloadConfig(\u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:44:23)\n\n  ● ConfigurationManager › loadConfig › should throw error for non-existent environment\n\n    TypeError: fs.access.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 54 |\u001b[39m         \n     \u001b[90m 55 |\u001b[39m         it(\u001b[32m'should throw error for non-existent environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 56 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 57 |\u001b[39m             \n     \u001b[90m 58 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mloadConfig(\u001b[32m'nonexistent'\u001b[39m))\n     \u001b[90m 59 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Configuration for environment 'nonexistent' not found\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:56:23)\n\n  ● ConfigurationManager › loadConfig › should include secrets when requested\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m         \n     \u001b[90m 62 |\u001b[39m         it(\u001b[32m'should include secrets when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'DB_PASSWORD.enc'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 66 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:63:23)\n\n  ● ConfigurationManager › loadConfig › should apply runtime overrides\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m         \n     \u001b[90m 77 |\u001b[39m         it(\u001b[32m'should apply runtime overrides'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 80 |\u001b[39m             \n     \u001b[90m 81 |\u001b[39m             \u001b[36mconst\u001b[39m overrides \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:78:23)\n\n  ● ConfigurationManager › loadConfig › should validate configuration when requested\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 92 |\u001b[39m         \n     \u001b[90m 93 |\u001b[39m         it(\u001b[32m'should validate configuration when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 94 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 95 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 96 |\u001b[39m             \n     \u001b[90m 97 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:94:23)\n\n  ● ConfigurationManager › saveConfig › should save configuration to file\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 177 |\u001b[39m     describe(\u001b[32m'saveConfig'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 178 |\u001b[39m         it(\u001b[32m'should save configuration to file'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 179 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 180 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m             \n     \u001b[90m 182 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39msaveConfig(mockConfig\u001b[33m,\u001b[39m \u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:179:22)\n\n  ● ConfigurationManager › saveConfig › should create backup when requested\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 195 |\u001b[39m         \n     \u001b[90m 196 |\u001b[39m         it(\u001b[32m'should create backup when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 198 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:197:22)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should encrypt and save secrets\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m     describe(\u001b[32m'getSecrets and setSecrets'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 219 |\u001b[39m         it(\u001b[32m'should encrypt and save secrets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m \u001b[90m// No existing metadata\u001b[39m\n     \u001b[90m 222 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:220:22)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should decrypt and retrieve secrets\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 239 |\u001b[39m         it(\u001b[32m'should decrypt and retrieve secrets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 240 |\u001b[39m             \u001b[36mconst\u001b[39m encryptedData \u001b[33m=\u001b[39m configManager\u001b[33m.\u001b[39m_encrypt(\u001b[32m'secret-value'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 241 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(encryptedData)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 242 |\u001b[39m             \n     \u001b[90m 243 |\u001b[39m             \u001b[36mconst\u001b[39m secrets \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mgetSecrets([\u001b[32m'API_KEY'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:241:25)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should throw error for non-existent secret\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 247 |\u001b[39m         \n     \u001b[90m 248 |\u001b[39m         it(\u001b[32m'should throw error for non-existent secret'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 250 |\u001b[39m             \n     \u001b[90m 251 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mgetSecrets([\u001b[32m'NONEXISTENT'\u001b[39m]))\n     \u001b[90m 252 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Secret 'NONEXISTENT' not found\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:249:25)\n\n  ● ConfigurationManager › environment management › should list available environments\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 284 |\u001b[39m     describe(\u001b[32m'environment management'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 285 |\u001b[39m         it(\u001b[32m'should list available environments'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 286 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'dev.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'prod.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'README.md'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 287 |\u001b[39m             \n     \u001b[90m 288 |\u001b[39m             \u001b[36mconst\u001b[39m environments \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mlistEnvironments()\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:286:24)\n\n  ● ConfigurationManager › environment management › should create new environment\n\n    TypeError: fs.access.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 292 |\u001b[39m         \n     \u001b[90m 293 |\u001b[39m         it(\u001b[32m'should create new environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 294 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m \u001b[90m// Doesn't exist\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 295 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m             \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:294:23)\n\n  ● ConfigurationManager › environment management › should throw error if environment already exists\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 311 |\u001b[39m         \n     \u001b[90m 312 |\u001b[39m         it(\u001b[32m'should throw error if environment already exists'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 313 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m \u001b[90m// Exists\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 314 |\u001b[39m             \n     \u001b[90m 315 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mcreateEnvironment(\u001b[32m'existing'\u001b[39m))\n     \u001b[90m 316 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Environment 'existing' already exists\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:313:23)\n\n  ● ConfigurationManager › environment management › should delete environment\n\n    TypeError: fs.unlink.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m         \n     \u001b[90m 319 |\u001b[39m         it(\u001b[32m'should delete environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m             fs\u001b[33m.\u001b[39munlink\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m             fs\u001b[33m.\u001b[39mrmdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 322 |\u001b[39m             \n     \u001b[90m 323 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mdeleteEnvironment(\u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:320:23)\n\n  ● ConfigurationManager › import/export › should import JSON configuration\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 348 |\u001b[39m         \n     \u001b[90m 349 |\u001b[39m         it(\u001b[32m'should import JSON configuration'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 350 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 351 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 352 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 353 |\u001b[39m                 valid\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:350:22)\n\n  ● ConfigurationManager › import/export › should merge imported configuration when requested\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 373 |\u001b[39m             \n     \u001b[90m 374 |\u001b[39m             configManager\u001b[33m.\u001b[39mloadConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(existingConfig)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 375 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 376 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 377 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 378 |\u001b[39m                 valid\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:375:22)\n\nFAIL tests/integration/security/middleware-chain.test.js\n  ● Security Middleware Chain Integration › Complete Security Middleware Stack › should process request through full security stack\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m     it(\u001b[32m'should process request through full security stack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 95 |\u001b[39m       \u001b[90m// Setup middleware chain\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n     \u001b[90m 98 |\u001b[39m       app\u001b[33m.\u001b[39muse(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m 99 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:96:32)\n\n  ● Security Middleware Chain Integration › Complete Security Middleware Stack › should handle authentication failure in middleware chain\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m       \u001b[90m// Setup middleware chain with required auth\u001b[39m\n     \u001b[90m 119 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m       app\u001b[33m.\u001b[39muse(userLimiter\u001b[33m.\u001b[39mcreateMiddleware(\u001b[32m'api-calls'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m\n     \u001b[90m 123 |\u001b[39m       \u001b[90m// No authentication provided\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:120:23)\n\n  ● Security Middleware Chain Integration › Authentication Middleware Combinations › should support multiple authentication methods\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 156 |\u001b[39m       \u001b[36mconst\u001b[39m authMiddleware \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 157 |\u001b[39m         \u001b[90m// Try JWT first\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 158 |\u001b[39m         \u001b[36mconst\u001b[39m jwtMiddleware \u001b[33m=\u001b[39m jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 159 |\u001b[39m         \u001b[36mawait\u001b[39m jwtMiddleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {})\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\n     \u001b[90m 161 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:158:39)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:178:17)\n\n  ● Security Middleware Chain Integration › Authentication Middleware Combinations › should enforce permission requirements across auth methods\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       app\u001b[33m.\u001b[39muse(\u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 208 |\u001b[39m         \u001b[90m// Try both auth methods\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m         \u001b[36mawait\u001b[39m jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {})\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m         \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mreq\u001b[33m.\u001b[39muser) {\n     \u001b[90m 211 |\u001b[39m           \u001b[36mawait\u001b[39m apiKeyManager\u001b[33m.\u001b[39mmiddleware()(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 212 |\u001b[39m         } \u001b[36melse\u001b[39m {\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:209:23)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:221:17)\n\n  ● Security Middleware Chain Integration › CORS and Security Headers › should handle preflight requests with security headers\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 235 |\u001b[39m     it(\u001b[32m'should handle preflight requests with security headers'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 236 |\u001b[39m       \u001b[90m// Setup middleware\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 237 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 238 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m\n     \u001b[90m 240 |\u001b[39m       \u001b[90m// Preflight request\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:237:32)\n\n  ● Security Middleware Chain Integration › CORS and Security Headers › should apply CSP headers dynamically\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 266 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 267 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 269 |\u001b[39m       app\u001b[33m.\u001b[39muse(dynamicCSP)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n     \u001b[90m 271 |\u001b[39m       \u001b[90m// Test admin route\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:268:32)\n\n  ● Security Middleware Chain Integration › Rate Limiting with Authentication › should apply different rate limits for authenticated vs anonymous users\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m     it(\u001b[32m'should apply different rate limits for authenticated vs anonymous users'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 286 |\u001b[39m       \u001b[90m// Setup middleware chain\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m       app\u001b[33m.\u001b[39muse(\u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 289 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\n     \u001b[90m 290 |\u001b[39m           \u001b[90m// Authenticated users get user-based limits\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:287:23)\n\n  ● Security Middleware Chain Integration › Rate Limiting with Authentication › should combine IP and user rate limiting for defense in depth\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m       \u001b[90m// Setup both limiters\u001b[39m\n     \u001b[90m 319 |\u001b[39m       app\u001b[33m.\u001b[39muse(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m       app\u001b[33m.\u001b[39muse((req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 322 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\n     \u001b[90m 323 |\u001b[39m           \u001b[36mconst\u001b[39m userMiddleware \u001b[33m=\u001b[39m userLimiter\u001b[33m.\u001b[39mcreateMiddleware(\u001b[32m'api-calls'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:320:23)\n\n  ● Security Middleware Chain Integration › Advanced Middleware Patterns › should support conditional middleware application\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 432 |\u001b[39m         } \u001b[36melse\u001b[39m \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mstartsWith(\u001b[32m'/api'\u001b[39m)) {\n     \u001b[90m 433 |\u001b[39m           \u001b[90m// API routes - full security\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 434 |\u001b[39m           \u001b[36mreturn\u001b[39m helmetMiddleware\u001b[33m.\u001b[39mmiddleware()(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mstartsWith(\u001b[32m'/admin'\u001b[39m)) {\n     \u001b[90m 436 |\u001b[39m           \u001b[90m// Admin routes - strict security\u001b[39m\n     \u001b[90m 437 |\u001b[39m           res\u001b[33m.\u001b[39msetHeader(\u001b[32m'X-Admin-Route'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'true'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:434:35)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:467:17)\n\n  ● Security Middleware Chain Integration › Advanced Middleware Patterns › should support middleware composition\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 487 |\u001b[39m         }\n     \u001b[90m 488 |\u001b[39m         \u001b[36mif\u001b[39m (options\u001b[33m.\u001b[39mhelmet) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 489 |\u001b[39m           middlewares\u001b[33m.\u001b[39mpush(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 490 |\u001b[39m         }\n     \u001b[90m 491 |\u001b[39m         \u001b[36mif\u001b[39m (options\u001b[33m.\u001b[39mrateLimit) {\n     \u001b[90m 492 |\u001b[39m           middlewares\u001b[33m.\u001b[39mpush(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:489:45)\n      at Object.securityMiddleware (tests/integration/security/middleware-chain.test.js:512:15)\n\nFAIL mcp-local-setup/tests/unit/config/secret-manager.test.js\n  ● SecretManager › backupSecrets › should create backup of secrets directory\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 211 |\u001b[39m         it(\u001b[32m'should create backup of secrets directory'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 212 |\u001b[39m             \u001b[36mconst\u001b[39m mockFiles \u001b[33m=\u001b[39m [\u001b[32m'secret1.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'secret2.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'_metadata.json'\u001b[39m]\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 213 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue(mockFiles)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 214 |\u001b[39m             fs\u001b[33m.\u001b[39mstat\u001b[33m.\u001b[39mmockResolvedValue({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 215 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 216 |\u001b[39m             fs\u001b[33m.\u001b[39mcopyFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:213:24)\n\n  ● SecretManager › backupSecrets › should skip directories when backing up\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 226 |\u001b[39m         \n     \u001b[90m 227 |\u001b[39m         it(\u001b[32m'should skip directories when backing up'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 228 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'file.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'subdir'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 229 |\u001b[39m             fs\u001b[33m.\u001b[39mstat\n     \u001b[90m 230 |\u001b[39m                 \u001b[33m.\u001b[39mmockResolvedValueOnce({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m })\n     \u001b[90m 231 |\u001b[39m                 \u001b[33m.\u001b[39mmockResolvedValueOnce({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:228:24)\n\nFAIL tests/unit/security/user-limiter.test.js\n  ● Console\n\n    console.error\n      User rate limit middleware error: Error: Test error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:586:62)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 381 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'User rate limit middleware error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m         \n     \u001b[90m 384 |\u001b[39m         \u001b[36mif\u001b[39m (skipOnError) {\n     \u001b[90m 385 |\u001b[39m           next()\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/rate-limiting/user-limiter.js:382:17)\n      at Object.<anonymous> (tests/unit/security/user-limiter.test.js:590:7)\n\n    console.error\n      User rate limit middleware error: Error: Test error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:586:62)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 381 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'User rate limit middleware error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m         \n     \u001b[90m 384 |\u001b[39m         \u001b[36mif\u001b[39m (skipOnError) {\n     \u001b[90m 385 |\u001b[39m           next()\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/rate-limiting/user-limiter.js:382:17)\n      at Object.<anonymous> (tests/unit/security/user-limiter.test.js:597:7)\n\n    console.error\n      Tiered rate limit error: Error: Test error\n          at UserRateLimiter.<anonymous> (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:655:15)\n          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:397:39\n          at UserRateLimiter.<anonymous> (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:404:13)\n          at UserRateLimiter.mockConstructor [as createMiddleware] (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:148:19)\n          at createMiddleware (/home/jenner/code/mcps/security/rate-limiting/user-limiter.js:415:33)\n          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:660:13)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 416 |\u001b[39m         \u001b[36mreturn\u001b[39m middleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 417 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 418 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'Tiered rate limit error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 419 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m       }\n     \u001b[90m 421 |\u001b[39m     }\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/rate-limiting/user-limiter.js:418:17)\n      at Object.middleware (tests/unit/security/user-limiter.test.js:660:13)\n\n  ● UserRateLimiter › createMiddleware › should create middleware that allows requests\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 100\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 99\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.073Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 484 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 485 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo\u001b[33m.\u001b[39mresource)\u001b[33m.\u001b[39mtoBe(\u001b[32m'api-calls'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 486 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 487 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Remaining'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m99\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 488 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'free'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 489 |\u001b[39m       expect(next)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/user-limiter.test.js:486:29)\n\n  ● UserRateLimiter › cleanup › should handle unlimited tier in cleanup\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 752 |\u001b[39m       \n     \u001b[90m 753 |\u001b[39m       \u001b[90m// Should still exist as enterprise has unlimited (-1) limit\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 754 |\u001b[39m       expect(userLimiter\u001b[33m.\u001b[39mmemoryStore\u001b[33m.\u001b[39mhas(\u001b[32m'user-ratelimit:enterprise-user:api-calls'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 755 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 756 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 757 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/unit/security/user-limiter.test.js:754:87)\n\n/home/jenner/code/mcps/node_modules/expect/build/index.js:314\n      throw error;\n      ^\n\nJestAssertionError: expect(received).toBe(expected) // Object.is equality\n\nExpected: 2\nReceived: 1\n    at Timeout.toBe [as _onTimeout] (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:317:34)\n    at listOnTimeout (node:internal/timers:588:17)\n    at processTimers (node:internal/timers:523:7) {\n  matcherResult: {\n    actual: 1,\n    expected: 2,\n    message: 'expect(received).toBe(expected) // Object.is equality\\n' +\n      '\\n' +\n      'Expected: 2\\n' +\n      'Received: 1',\n    name: 'toBe',\n    pass: false\n  }\n}\n\nNode.js v22.17.0\nFAIL mcp-local-setup/tests/integration/configuration.integration.test.js\n  ● Configuration Management Integration Tests › Environment Configuration › should create new environment\n\n    Schema version '1.0.0' not found\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m             }\n     \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:160:13)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should load environment configuration\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:167:34)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should apply runtime overrides\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:191:34)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should list all environments\n\n    Schema version '1.0.0' not found\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m             }\n     \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:203:13)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should get configuration metadata\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.getConfigMetadata (mcp-local-setup/config/advanced/configuration-manager.js:367:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:215:30)\n\n  ● Configuration Management Integration Tests › Configuration Validation › should detect validation errors\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 256 |\u001b[39m             \n     \u001b[90m 257 |\u001b[39m             \u001b[36mconst\u001b[39m nameError \u001b[33m=\u001b[39m result\u001b[33m.\u001b[39merrors\u001b[33m.\u001b[39mfind(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mincludes(\u001b[32m'name'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 258 |\u001b[39m             expect(nameError)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 259 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n     \u001b[90m 261 |\u001b[39m         it(\u001b[32m'should provide validation warnings'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeDefined (mcp-local-setup/tests/integration/configuration.integration.test.js:258:31)\n\n  ● Configuration Management Integration Tests › Secret Management › should list secret metadata without values\n\n    expect(received).toBeInstanceOf(expected)\n\n    Expected constructor: Date\n\n    Received value has no prototype\n    Received value: \"2025-07-24T22:52:02.012Z\"\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m             expect(testSecret)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 319 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mdescription)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mcreatedAt)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mDate\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mvalue)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m \u001b[90m// Should not expose value\u001b[39m\n     \u001b[90m 322 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 323 |\u001b[39m\u001b[0m\n\n      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/configuration.integration.test.js:320:42)\n\n  ● Configuration Management Integration Tests › Secret Management › should load config with secrets\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:344:39)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should export configuration as JSON\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:395:30)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should throw error for unsupported YAML format\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"YAML export not yet implemented\"\n    Received message:   \"Configuration for environment 'test-integration' not found\"\n\n        \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 70 |\u001b[39m             }\n         \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n         \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:407:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:410:25)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should export configuration as env file\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:414:30)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should merge imported configuration\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:449:36)\n\n  ● Configuration Management Integration Tests › Configuration Persistence › should save configuration changes\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:470:36)\n\n  ● Configuration Management Integration Tests › Configuration Persistence › should rollback on save failure\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:502:31)\n\n  ● Configuration Management Integration Tests › Error Handling › should prevent duplicate environment creation\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Environment already exists\"\n    Received message:   \"Schema version '1.0.0' not found\"\n\n        \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 279 |\u001b[39m             }\n         \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n         \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:538:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:539:26)\n\nFAIL tests/unit/security/redis-limiter.test.js\n  ● Console\n\n    console.error\n      Redis rate limit check error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:168:57)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis rate limit check error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m       \u001b[90m// Fail open - allow request on Redis errors\u001b[39m\n     \u001b[90m 122 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 123 |\u001b[39m         allowed\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as checkLimit] (security/rate-limiting/redis-limiter.js:120:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:170:22)\n\n    console.error\n      Redis rate limit check error: Error: Redis pipeline error\n          at RedisRateLimiter.checkLimit (/home/jenner/code/mcps/security/rate-limiting/redis-limiter.js:80:15)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:184:22)\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis rate limit check error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m       \u001b[90m// Fail open - allow request on Redis errors\u001b[39m\n     \u001b[90m 122 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 123 |\u001b[39m         allowed\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as checkLimit] (security/rate-limiting/redis-limiter.js:120:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:184:22)\n\n    console.error\n      Redis consume token error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:257:46)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 246 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 247 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 248 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis consume token error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[90m// Fail open on Redis errors\u001b[39m\n     \u001b[90m 250 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 251 |\u001b[39m         success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:259:22)\n\n    console.error\n      Redis reset limit error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:284:45)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 272 |\u001b[39m       \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 274 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis reset limit error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage }\u001b[33m;\u001b[39m\n     \u001b[90m 276 |\u001b[39m     }\n     \u001b[90m 277 |\u001b[39m   }\u001b[0m\n\n      at RedisRateLimiter.error [as resetLimit] (security/rate-limiting/redis-limiter.js:274:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:286:22)\n\n    console.error\n      Redis get usage error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:325:58)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 312 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 313 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 314 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis get usage error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 315 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 316 |\u001b[39m         used\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 317 |\u001b[39m         limit\u001b[33m:\u001b[39m ruleConfig\u001b[33m.\u001b[39mlimit\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as getUsage] (security/rate-limiting/redis-limiter.js:314:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:327:22)\n\n    console.error\n      Redis consume token error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:472:46)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 246 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 247 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 248 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis consume token error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[90m// Fail open on Redis errors\u001b[39m\n     \u001b[90m 250 |\u001b[39m       \u001b[36mreturn\u001b[39m {\n     \u001b[90m 251 |\u001b[39m         success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)\n      at security/rate-limiting/redis-limiter.js:372:24\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:477:7)\n\n    console.error\n      Redis get stats error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:551:46)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 453 |\u001b[39m       \u001b[36mreturn\u001b[39m stats\u001b[33m;\u001b[39m\n     \u001b[90m 454 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 455 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis get stats error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 456 |\u001b[39m       \u001b[36mreturn\u001b[39m { \u001b[33m...\u001b[39mstats\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage }\u001b[33m;\u001b[39m\n     \u001b[90m 457 |\u001b[39m     }\n     \u001b[90m 458 |\u001b[39m   }\u001b[0m\n\n      at RedisRateLimiter.error [as getStats] (security/rate-limiting/redis-limiter.js:455:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:553:21)\n\n    console.error\n      Redis cleanup error: Error: Redis error\n          at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:620:46)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 496 |\u001b[39m       \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m cleaned }\u001b[33m;\u001b[39m\n     \u001b[90m 497 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 498 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Redis cleanup error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 499 |\u001b[39m       \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage }\u001b[33m;\u001b[39m\n     \u001b[90m 500 |\u001b[39m     }\n     \u001b[90m 501 |\u001b[39m   }\u001b[0m\n\n      at RedisRateLimiter.error [as cleanup] (security/rate-limiting/redis-limiter.js:498:15)\n      at Object.<anonymous> (tests/unit/security/redis-limiter.test.js:622:22)\n\n  ● RedisRateLimiter › checkLimit › should calculate correct reset time from oldest entry\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1753399322093\n    Received: NaN\n\n    \u001b[0m \u001b[90m 162 |\u001b[39m       \n     \u001b[90m 163 |\u001b[39m       \u001b[36mconst\u001b[39m expectedReset \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(oldestTime \u001b[33m+\u001b[39m \u001b[35m3600000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(result\u001b[33m.\u001b[39mresetAt\u001b[33m.\u001b[39mgetTime())\u001b[33m.\u001b[39mtoBe(expectedReset\u001b[33m.\u001b[39mgetTime())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 165 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m\n     \u001b[90m 167 |\u001b[39m     it(\u001b[32m'should fail open on Redis errors'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (tests/unit/security/redis-limiter.test.js:164:40)\n\n  ● RedisRateLimiter › createMiddleware › should block requests exceeding limit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n      Object {\n    -   \"blocked\": false,\n    +   \"blocked\": undefined,\n        \"error\": \"Too many requests\",\n    -   \"retryAfter\": Any<Date>,\n    +   \"retryAfter\": 2025-07-24T23:52:02.158Z,\n      },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 435 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Retry-After'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 436 |\u001b[39m       expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m429\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 437 |\u001b[39m       expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 438 |\u001b[39m         error\u001b[33m:\u001b[39m \u001b[32m'Too many requests'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 439 |\u001b[39m         retryAfter\u001b[33m:\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mDate\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 440 |\u001b[39m         blocked\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/redis-limiter.test.js:437:24)\n\nFAIL mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js\n  ● Service Mesh and Orchestration Integration › Services deployed to K8s are automatically registered in mesh\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Traffic management policies apply to orchestrated services\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Service mesh mTLS works with orchestrator networking\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › SDK can query services through mesh-enabled endpoints\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Circuit breaker policies protect orchestrated services\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Service mesh observability integrates with orchestrator metrics\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Canary deployments use both orchestration and mesh\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Fault injection tests orchestrated service resilience\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\nFAIL tests/integration/phase6/security-health-integration.test.js\n  ● Security and Health Monitoring Integration › API authentication integrates with health status\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"authentication\"\n    Received path: []\n\n    Expected value: \"enabled\"\n    Received value: {\"lastCheck\": null, \"message\": \"Not checked yet\", \"status\": \"pending\"}\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m     \u001b[90m// Then health should include auth status\u001b[39m\n     \u001b[90m 71 |\u001b[39m     expect(health\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m     expect(health\u001b[33m.\u001b[39mdetails)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'authentication'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'enabled'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 74 |\u001b[39m\n     \u001b[90m 75 |\u001b[39m   test(\u001b[32m'Service dependencies include security components'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveProperty (tests/integration/phase6/security-health-integration.test.js:72:28)\n\nFAIL tests/integration/monitoring/logging-pipeline.test.js\n  ● Logging Pipeline Integration › End-to-End Logging › should log messages through the complete pipeline\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › End-to-End Logging › should apply formatters correctly\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › End-to-End Logging › should handle high-volume logging\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should rotate logs based on size\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should compress rotated files\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should clean up old logs\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Error Handling › should handle logging errors gracefully\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Error Handling › should continue logging after transport failure\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Context and Correlation › should maintain correlation IDs across log entries\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Context and Correlation › should preserve context through async operations\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Performance Monitoring › should log performance metrics\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Multi-transport Scenarios › should route logs to appropriate transports based on level\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\nFAIL tests/unit/security/helmet-middleware.test.js\n  ● Console\n\n    console.warn\n      CSP Violation: {\n        documentUri: 'https://example.com/page',\n        violatedDirective: 'script-src',\n        blockedUri: 'https://evil.com/script.js'\n      }\n\n    \u001b[0m \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m         \u001b[90m// Log for monitoring\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 276 |\u001b[39m         console\u001b[33m.\u001b[39mwarn(\u001b[32m'CSP Violation:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 277 |\u001b[39m           documentUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mdocumentUri\u001b[33m,\u001b[39m\n     \u001b[90m 278 |\u001b[39m           violatedDirective\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mviolatedDirective\u001b[33m,\u001b[39m\n     \u001b[90m 279 |\u001b[39m           blockedUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mblockedUri\u001b[0m\n\n      at warn (security/middleware/helmet.js:276:17)\n      at Object.handler (tests/unit/security/helmet-middleware.test.js:112:7)\n\n    console.warn\n      CSP Violation: {\n        documentUri: 'https://example.com/page',\n        violatedDirective: 'script-src',\n        blockedUri: 'https://evil0.com'\n      }\n\n    \u001b[0m \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m         \u001b[90m// Log for monitoring\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 276 |\u001b[39m         console\u001b[33m.\u001b[39mwarn(\u001b[32m'CSP Violation:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 277 |\u001b[39m           documentUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mdocumentUri\u001b[33m,\u001b[39m\n     \u001b[90m 278 |\u001b[39m           violatedDirective\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mviolatedDirective\u001b[33m,\u001b[39m\n     \u001b[90m 279 |\u001b[39m           blockedUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mblockedUri\u001b[0m\n\n      at warn (security/middleware/helmet.js:276:17)\n      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)\n\n    console.warn\n      CSP Violation: {\n        documentUri: 'https://example.com/page',\n        violatedDirective: 'script-src',\n        blockedUri: 'https://evil1.com'\n      }\n\n    \u001b[0m \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m         \u001b[90m// Log for monitoring\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 276 |\u001b[39m         console\u001b[33m.\u001b[39mwarn(\u001b[32m'CSP Violation:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 277 |\u001b[39m           documentUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mdocumentUri\u001b[33m,\u001b[39m\n     \u001b[90m 278 |\u001b[39m           violatedDirective\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mviolatedDirective\u001b[33m,\u001b[39m\n     \u001b[90m 279 |\u001b[39m           blockedUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mblockedUri\u001b[0m\n\n      at warn (security/middleware/helmet.js:276:17)\n      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)\n\n    console.warn\n      CSP Violation: {\n        documentUri: 'https://example.com/page',\n        violatedDirective: 'script-src',\n        blockedUri: 'https://evil2.com'\n      }\n\n    \u001b[0m \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m         \u001b[90m// Log for monitoring\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 276 |\u001b[39m         console\u001b[33m.\u001b[39mwarn(\u001b[32m'CSP Violation:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 277 |\u001b[39m           documentUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mdocumentUri\u001b[33m,\u001b[39m\n     \u001b[90m 278 |\u001b[39m           violatedDirective\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mviolatedDirective\u001b[33m,\u001b[39m\n     \u001b[90m 279 |\u001b[39m           blockedUri\u001b[33m:\u001b[39m reportData\u001b[33m.\u001b[39mblockedUri\u001b[0m\n\n      at warn (security/middleware/helmet.js:276:17)\n      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)\n\n  ● HelmetMiddleware › CSP Report Handler › should handle errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 500\n    Received: 400\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 153 |\u001b[39m       handler(req\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 155 |\u001b[39m       expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 156 |\u001b[39m       expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({ error\u001b[33m:\u001b[39m \u001b[32m'Failed to process CSP report'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:155:26)\n\n  ● HelmetMiddleware › createNonceMiddleware › should modify CSP header to include nonce\n\n    expect(received).toHaveBeenCalledWith(...expected)\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function anonymous]\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m       res\u001b[33m.\u001b[39msetHeader(\u001b[32m'Content-Security-Policy'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m\"script-src 'self'\"\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m         \u001b[32m'Content-Security-Policy'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 334 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m`'nonce-${res.locals.nonce}'`\u001b[39m)\n     \u001b[90m 335 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:332:29)\n\nFAIL tests/unit/security/cors.test.js\n  ● CORSMiddleware › handlePreflight › should handle wildcard origin without credentials in preflight\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Access-Control-Allow-Origin\", \"*\"\n    Received\n           1: \"Access-Control-Allow-Origin\", \"https://example.com\"\n           2: \"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-API-Key\"\n           3: \"Access-Control-Max-Age\", \"86400\"\n\n    Number of calls: 3\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m       corsMiddleware\u001b[33m.\u001b[39mhandlePreflight(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 277 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Origin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'*'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Credentials'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'true'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 280 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:278:29)\n\n  ● CORSMiddleware › Edge cases › should handle malformed request headers gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-API-Key\"\n    Received\n           1: \"Access-Control-Allow-Origin\", \"https://example.com\"\n           2: \"Access-Control-Allow-Credentials\", \"true\"\n           3: \"Access-Control-Max-Age\", \"86400\"\n\n    Number of calls: 3\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m       corsMiddleware\u001b[33m.\u001b[39mhandlePreflight(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Headers'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Content-Type, Authorization, X-API-Key'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m\n     \u001b[90m 330 |\u001b[39m     it(\u001b[32m'should handle mixed origin configurations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:327:29)\n\nPASS mcp-local-setup/enterprise/tests/compliance.test.js\nFAIL tests/security/auth-bypass.test.js\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent JWT signature stripping\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent JWT algorithm confusion attacks\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent weak secret key attacks\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent token replay attacks with expired tokens\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent privilege escalation via token manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent brute force API key guessing\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent API key format manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent permission escalation via API keys\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent API key reuse after revocation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent refresh token reuse after rotation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent cross-user token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent infinite token refresh chains\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth state parameter bypass\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth token injection\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth redirect URI manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Session Fixation Prevention › should regenerate session ID on authentication\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Race Conditions › should handle concurrent authentication attempts safely\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Race Conditions › should prevent race condition in API key validation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Downgrade Attacks › should prevent downgrade from strong to weak authentication\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Context Validation › should validate authentication context consistency\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\nFAIL tests/integration/monitoring/metrics-collection.test.js\n  ● Metrics Collection Integration › HTTP Metrics Collection › should collect HTTP request metrics\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m       \n     \u001b[90m 80 |\u001b[39m       \u001b[90m// Make multiple requests\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/test'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/test'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 83 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39mpost(\u001b[32m'/api/users'\u001b[39m)\u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Test'\u001b[39m })\u001b[33m.\u001b[39mexpect(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/error'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.expect (tests/integration/monitoring/metrics-collection.test.js:81:39)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Metrics Collection Integration › HTTP Metrics Collection › should track request sizes\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Business Metrics Collection › should collect business events\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Business Metrics Collection › should track API usage metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Database Metrics Collection › should collect database operation metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Database Metrics Collection › should track connection pool metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Cache Metrics Collection › should collect cache operation metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Custom Metrics › should allow custom metric definitions\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › System Metrics › should collect system resource metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metric Aggregation › should aggregate metrics across multiple sources\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metrics Export Formats › should export metrics in Prometheus format\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metrics Export Formats › should export metrics as JSON\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Real-time Monitoring › should provide real-time metric updates\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Real-time Monitoring › should handle metric resets\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\nFAIL mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js\n  ● IDE Extension and SDK Integration › IDE extension initializes with SDK instance\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Code completion suggests available MCP services\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Hover info shows service documentation from SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Diagnostics validate service configurations against SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Service panel shows real-time health from SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Debugging integration uses SDK service endpoints\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Code actions can install missing services via SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\nFAIL mcp-local-setup/tests/unit/community/features.test.js\n  ● CommunityFeatures › rateService › should track analytics event\n\n    TypeError: Cannot read properties of undefined (reading 'events')\n\n    \u001b[0m \u001b[90m 170 |\u001b[39m       expect(analyticsCall)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m analyticsData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(analyticsCall[\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 172 |\u001b[39m       expect(analyticsData[\u001b[32m'service-1'\u001b[39m]\u001b[33m.\u001b[39mevents)\u001b[33m.\u001b[39mtoContainEqual(\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 173 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 174 |\u001b[39m           type\u001b[33m:\u001b[39m \u001b[32m'rating'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 175 |\u001b[39m           userId\u001b[33m:\u001b[39m \u001b[32m'user-5'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.events (mcp-local-setup/tests/unit/community/features.test.js:172:41)\n\n  ● CommunityFeatures › private methods › should calculate week number correctly\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 50\n    Received:   1\n\n    \u001b[0m \u001b[90m 360 |\u001b[39m       \n     \u001b[90m 361 |\u001b[39m       expect(week1)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 362 |\u001b[39m       expect(week2)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 363 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 364 |\u001b[39m\n     \u001b[90m 365 |\u001b[39m     it(\u001b[32m'should calculate engagement score'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeGreaterThan (mcp-local-setup/tests/unit/community/features.test.js:362:21)\n\n  ● CommunityFeatures › private methods › should calculate growth rate\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 25\n    Received: 0\n\n    \u001b[0m \u001b[90m 386 |\u001b[39m\n     \u001b[90m 387 |\u001b[39m       \u001b[36mconst\u001b[39m growthRate \u001b[33m=\u001b[39m community\u001b[33m.\u001b[39m_calculateGrowthRate(analytics)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 388 |\u001b[39m       expect(growthRate)\u001b[33m.\u001b[39mtoBe(\u001b[35m25\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 25% growth\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 389 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 390 |\u001b[39m\n     \u001b[90m 391 |\u001b[39m     it(\u001b[32m'should handle zero previous downloads in growth rate'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/community/features.test.js:388:26)\n\nFAIL mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js\n  ● Marketplace + Enterprise Integration › Tenant-based Service Access › should restrict marketplace access based on tenant permissions\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 35 |\u001b[39m     test(\u001b[32m'should restrict marketplace access based on tenant permissions'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 36 |\u001b[39m       \u001b[90m// Create test tenants\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 37 |\u001b[39m       \u001b[36mconst\u001b[39m enterpriseTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m    |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 38 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Enterprise Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 39 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 40 |\u001b[39m         features\u001b[33m:\u001b[39m [\u001b[32m'unlimited-services'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'private-marketplace'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:37:52)\n\n  ● Marketplace + Enterprise Integration › Tenant-based Service Access › should enforce tenant quotas on service installation\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m\n     \u001b[90m 71 |\u001b[39m     test(\u001b[32m'should enforce tenant quotas on service installation'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Limited Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 74 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'basic'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 75 |\u001b[39m         quotas\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:72:42)\n\n  ● Marketplace + Enterprise Integration › Marketplace Publishing with Multi-tenancy › should allow tenants to publish private services\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m   describe(\u001b[32m'Marketplace Publishing with Multi-tenancy'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 101 |\u001b[39m     test(\u001b[32m'should allow tenants to publish private services'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Service Provider Inc'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 104 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 105 |\u001b[39m         features\u001b[33m:\u001b[39m [\u001b[32m'marketplace-publisher'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:102:42)\n\n  ● Marketplace + Enterprise Integration › Marketplace Publishing with Multi-tenancy › should track marketplace revenue per tenant\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m     test(\u001b[32m'should track marketplace revenue per tenant'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m publisherTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'SaaS Provider'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 141 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\n     \u001b[90m 142 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:139:51)\n\n  ● Marketplace + Enterprise Integration › SSO + Marketplace Integration › should use SSO for marketplace authentication\n\n    Invalid authentication request\n\n    \u001b[0m \u001b[90m 213 |\u001b[39m   \u001b[36masync\u001b[39m authenticate(credentials\u001b[33m,\u001b[39m provider) {\n     \u001b[90m 214 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mcredentials \u001b[33m||\u001b[39m \u001b[33m!\u001b[39mprovider) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 215 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Invalid authentication request'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 216 |\u001b[39m     }\n     \u001b[90m 217 |\u001b[39m\n     \u001b[90m 218 |\u001b[39m     \u001b[36mconst\u001b[39m providerConfig \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39m_getProvider(provider)\u001b[33m;\u001b[39m\u001b[0m\n\n      at SSOAuthentication.authenticate (mcp-local-setup/enterprise/sso/authentication.js:215:13)\n      at Object.authenticate (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:184:40)\n\n  ● Marketplace + Enterprise Integration › SSO + Marketplace Integration › should map SSO roles to marketplace permissions\n\n    TypeError: ssoAuth.configureRoleMapping is not a function\n\n    \u001b[0m \u001b[90m 205 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 206 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 207 |\u001b[39m       \u001b[36mawait\u001b[39m ssoAuth\u001b[33m.\u001b[39mconfigureRoleMapping(roleMapping)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 208 |\u001b[39m\n     \u001b[90m 209 |\u001b[39m       \u001b[90m// Test different role access\u001b[39m\n     \u001b[90m 210 |\u001b[39m       \u001b[36mconst\u001b[39m adminUser \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m ssoAuth\u001b[33m.\u001b[39mauthenticate({\u001b[0m\n\n      at Object.configureRoleMapping (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:207:21)\n\n  ● Marketplace + Enterprise Integration › Compliance in Marketplace Operations › should audit all marketplace transactions\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 230 |\u001b[39m   describe(\u001b[32m'Compliance in Marketplace Operations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 231 |\u001b[39m     test(\u001b[32m'should audit all marketplace transactions'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 233 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Regulated Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 234 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 235 |\u001b[39m         compliance\u001b[33m:\u001b[39m [\u001b[32m'SOC2'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'HIPAA'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:232:42)\n\n  ● Marketplace + Enterprise Integration › Compliance in Marketplace Operations › should enforce data residency for marketplace data\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m\n     \u001b[90m 297 |\u001b[39m     test(\u001b[32m'should enforce data residency for marketplace data'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       \u001b[36mconst\u001b[39m euTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'EU Company'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 300 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 301 |\u001b[39m         dataResidency\u001b[33m:\u001b[39m \u001b[32m'eu-west-1'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:298:44)\n\n  ● Marketplace + Enterprise Integration › Community Features with Enterprise Controls › should moderate reviews based on tenant policies\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 333 |\u001b[39m   describe(\u001b[32m'Community Features with Enterprise Controls'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 334 |\u001b[39m     test(\u001b[32m'should moderate reviews based on tenant policies'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 335 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 336 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Strict Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 337 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 338 |\u001b[39m         policies\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:335:42)\n\n  ● Marketplace + Enterprise Integration › Community Features with Enterprise Controls › should aggregate analytics per tenant\n\n    TypeError: communityFeatures.trackUsage is not a function\n\n    \u001b[0m \u001b[90m 374 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m tenantId \u001b[36mof\u001b[39m tenants) {\n     \u001b[90m 375 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mlet\u001b[39m i \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m i \u001b[33m<\u001b[39m \u001b[35m10\u001b[39m\u001b[33m;\u001b[39m i\u001b[33m++\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 376 |\u001b[39m           \u001b[36mawait\u001b[39m communityFeatures\u001b[33m.\u001b[39mtrackUsage({\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 377 |\u001b[39m             tenantId\u001b[33m,\u001b[39m\n     \u001b[90m 378 |\u001b[39m             serviceId\u001b[33m:\u001b[39m \u001b[32m'popular-service'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 379 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'api_call'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.trackUsage (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:376:35)\n\n  ● Marketplace + Enterprise Integration › Billing Integration › should handle marketplace billing through tenant billing system\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 405 |\u001b[39m   describe(\u001b[32m'Billing Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 406 |\u001b[39m     test(\u001b[32m'should handle marketplace billing through tenant billing system'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 407 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 408 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Paying Customer'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 409 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 410 |\u001b[39m         billing\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:407:42)\n\nFAIL tests/integration/security/auth-flow.test.js\n  ● Security Authentication Flow Integration › Complete JWT Authentication Flow › should handle full JWT login and refresh flow\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Complete JWT Authentication Flow › should handle token expiration and renewal\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › OAuth Integration Flow › should handle complete OAuth flow with Google\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › OAuth Integration Flow › should handle OAuth errors gracefully\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › API Key Authentication Flow › should handle API key generation and validation flow\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Multi-Auth Strategy Flow › should handle multiple authentication methods in sequence\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Security Token Rotation › should handle secure token rotation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Permission-based Access Control › should enforce permission-based access with API keys\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Permission-based Access Control › should handle JWT permissions\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Session Management Integration › should handle session lifecycle with token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Error Handling and Recovery › should handle authentication failures gracefully\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Error Handling and Recovery › should handle Redis failures in token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\nFAIL mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js\n  ● RegistryManager › loadCatalog › should load and parse catalog successfully\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 52 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockCatalog))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       \n     \u001b[90m 55 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 56 |\u001b[39m       \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:53:19)\n\n  ● RegistryManager › loadCatalog › should handle catalog file not found\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 60 |\u001b[39m\n     \u001b[90m 61 |\u001b[39m     it(\u001b[32m'should handle catalog file not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 62 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'ENOENT: no such file'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 63 |\u001b[39m       \n     \u001b[90m 64 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m       \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:62:19)\n\n  ● RegistryManager › loadCatalog › should handle invalid JSON in catalog\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 72 |\u001b[39m\n     \u001b[90m 73 |\u001b[39m     it(\u001b[32m'should handle invalid JSON in catalog'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 74 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'invalid json{'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 75 |\u001b[39m       \n     \u001b[90m 76 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m       \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:74:19)\n\n  ● RegistryManager › loadProfile › should load default profile\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'mocked yaml content'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m       yaml\u001b[33m.\u001b[39mload\u001b[33m.\u001b[39mmockReturnValue(mockProfile)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m       \n     \u001b[90m 96 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:93:19)\n\n  ● RegistryManager › loadProfile › should load specified profile\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 109 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 110 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 111 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'mocked yaml content'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 112 |\u001b[39m       yaml\u001b[33m.\u001b[39mload\u001b[33m.\u001b[39mmockReturnValue(mockProfile)\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m       \n     \u001b[90m 114 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile(\u001b[32m'development'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:111:19)\n\n  ● RegistryManager › loadProfile › should handle profile not found\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m\n     \u001b[90m 123 |\u001b[39m     it(\u001b[32m'should handle profile not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'ENOENT'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m       \n     \u001b[90m 126 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile(\u001b[32m'missing'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:124:19)\n\n  ● RegistryManager › generateDockerCompose › should generate docker-compose configuration\n\n    TypeError: Cannot read properties of undefined (reading 'find')\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m serviceId \u001b[36mof\u001b[39m enabledServices) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             \u001b[36mconst\u001b[39m server \u001b[33m=\u001b[39m catalog\u001b[33m.\u001b[39mservers\u001b[33m.\u001b[39mfind(s \u001b[33m=>\u001b[39m s\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m serviceId)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mserver) {\n     \u001b[90m 86 |\u001b[39m                 console\u001b[33m.\u001b[39mwarn(\u001b[32m`Service ${serviceId} not found in catalog`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m                 \u001b[36mcontinue\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:174:7)\n\n  ● RegistryManager › generateDockerCompose › should filter services based on profile\n\n    TypeError: Cannot read properties of undefined (reading 'find')\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m serviceId \u001b[36mof\u001b[39m enabledServices) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             \u001b[36mconst\u001b[39m server \u001b[33m=\u001b[39m catalog\u001b[33m.\u001b[39mservers\u001b[33m.\u001b[39mfind(s \u001b[33m=>\u001b[39m s\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m serviceId)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mserver) {\n     \u001b[90m 86 |\u001b[39m                 console\u001b[33m.\u001b[39mwarn(\u001b[32m`Service ${serviceId} not found in catalog`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m                 \u001b[36mcontinue\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:225:7)\n\n  ● RegistryManager › updateService › should update service in catalog\n\n    TypeError: registryManager.updateService is not a function\n\n    \u001b[0m \u001b[90m 251 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 253 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mupdateService(updatedService)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 254 |\u001b[39m\n     \u001b[90m 255 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mwriteFile)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m 256 |\u001b[39m         registryManager\u001b[33m.\u001b[39mcatalogPath\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:253:29)\n\n  ● RegistryManager › updateService › should add new service to catalog\n\n    TypeError: registryManager.updateService is not a function\n\n    \u001b[0m \u001b[90m 272 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 274 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mupdateService(newService)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 275 |\u001b[39m\n     \u001b[90m 276 |\u001b[39m       \u001b[36mconst\u001b[39m writtenData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 277 |\u001b[39m       expect(writtenData\u001b[33m.\u001b[39mservices[\u001b[32m'new-service'\u001b[39m])\u001b[33m.\u001b[39mtoEqual(newService)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:274:29)\n\n  ● RegistryManager › removeService › should remove service from catalog\n\n    TypeError: registryManager.removeService is not a function\n\n    \u001b[0m \u001b[90m 291 |\u001b[39m       fs\u001b[33m.\u001b[39mwriteFile \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 292 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 293 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mremoveService(\u001b[32m'service1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 294 |\u001b[39m\n     \u001b[90m 295 |\u001b[39m       \u001b[36mconst\u001b[39m writtenData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m       expect(writtenData\u001b[33m.\u001b[39mservices\u001b[33m.\u001b[39mservice1)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:293:29)\n\n  ● RegistryManager › removeService › should handle removing non-existent service\n\n    TypeError: registryManager.removeService is not a function\n\n    \u001b[0m \u001b[90m 306 |\u001b[39m       fs\u001b[33m.\u001b[39mwriteFile \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 307 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 308 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mremoveService(\u001b[32m'non-existent'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 309 |\u001b[39m\n     \u001b[90m 310 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mwriteFile)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 311 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:308:29)\n\n  ● RegistryManager › validateCatalog › should validate catalog structure\n\n    TypeError: registryManager.validateCatalog is not a function\n\n    \u001b[0m \u001b[90m 327 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 328 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 329 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m registryManager\u001b[33m.\u001b[39mvalidateCatalog(validCatalog)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 330 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 331 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:329:38)\n\n  ● RegistryManager › validateCatalog › should detect missing required fields\n\n    TypeError: registryManager.validateCatalog is not a function\n\n    \u001b[0m \u001b[90m 342 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 344 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m registryManager\u001b[33m.\u001b[39mvalidateCatalog(invalidCatalog)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 345 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 346 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Service service1 missing required field: name'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 347 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Service service1 missing required field: version'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:344:38)\n\nFAIL tests/unit/monitoring/logging/formatters.test.js\n  ● LogFormatters › jsonFormat › should format logs as JSON\n\n    TypeError: LogFormatters.jsonFormat is not a function\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m   describe(\u001b[32m'jsonFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 80 |\u001b[39m     it(\u001b[32m'should format logs as JSON'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mjsonFormat()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:81:39)\n\n  ● LogFormatters › jsonFormat › should handle errors in JSON format\n\n    TypeError: LogFormatters.jsonFormat is not a function\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m\n     \u001b[90m  98 |\u001b[39m     it(\u001b[32m'should handle errors in JSON format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mjsonFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       \u001b[36mconst\u001b[39m error \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Test error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m       \n     \u001b[90m 102 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:99:39)\n\n  ● LogFormatters › prettyFormat › should format logs in human-readable format\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m   describe(\u001b[32m'prettyFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 118 |\u001b[39m     it(\u001b[32m'should format logs in human-readable format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 121 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 122 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:119:39)\n\n  ● LogFormatters › prettyFormat › should colorize output when enabled\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 133 |\u001b[39m\n     \u001b[90m 134 |\u001b[39m     it(\u001b[32m'should colorize output when enabled'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 135 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat({ colorize\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 136 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 137 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 138 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Error message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:135:39)\n\n  ● LogFormatters › prettyFormat › should include metadata when present\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should include metadata when present'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 154 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 155 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:152:39)\n\n  ● LogFormatters › compactFormat › should format logs in compact single-line format\n\n    TypeError: LogFormatters.compactFormat is not a function\n\n    \u001b[0m \u001b[90m 169 |\u001b[39m   describe(\u001b[32m'compactFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 170 |\u001b[39m     it(\u001b[32m'should format logs in compact single-line format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcompactFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 173 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 174 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:171:39)\n\n  ● LogFormatters › compactFormat › should truncate long messages\n\n    TypeError: LogFormatters.compactFormat is not a function\n\n    \u001b[0m \u001b[90m 187 |\u001b[39m\n     \u001b[90m 188 |\u001b[39m     it(\u001b[32m'should truncate long messages'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 189 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcompactFormat({ maxLength\u001b[33m:\u001b[39m \u001b[35m50\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 190 |\u001b[39m       \u001b[36mconst\u001b[39m longMessage \u001b[33m=\u001b[39m \u001b[32m'A'\u001b[39m\u001b[33m.\u001b[39mrepeat(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 191 |\u001b[39m       \n     \u001b[90m 192 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:189:39)\n\n  ● LogFormatters › logstashFormat › should format logs for Logstash ingestion\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"info\"\n    Received: undefined\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m       expect(parsed[\u001b[32m'@version'\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Test message'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mseverity)\u001b[33m.\u001b[39mtoBe(\u001b[32m'info'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mhost)\u001b[33m.\u001b[39mtoBe(\u001b[32m'test-host'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mservice)\u001b[33m.\u001b[39mtoBe(\u001b[32m'test-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/unit/monitoring/logging/formatters.test.js:223:31)\n\n  ● LogFormatters › logstashFormat › should add fields from metadata\n\n    TypeError: Cannot read properties of undefined (reading 'userId')\n\n    \u001b[0m \u001b[90m 240 |\u001b[39m       \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(formatted[\u001b[33mSymbol\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfor\u001b[39m(\u001b[32m'message'\u001b[39m)])\u001b[33m;\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 242 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mfields\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(\u001b[35m123\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 243 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mfields\u001b[33m.\u001b[39mrequestId)\u001b[33m.\u001b[39mtoBe(\u001b[32m'req-456'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mtags)\u001b[33m.\u001b[39mtoEqual([\u001b[32m'api'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'v2'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.userId (tests/unit/monitoring/logging/formatters.test.js:242:28)\n\n  ● LogFormatters › customFormat › should allow custom formatting function\n\n    TypeError: LogFormatters.customFormat is not a function\n\n    \u001b[0m \u001b[90m 252 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 254 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcustomFormat(customFormatter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 255 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 256 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 257 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[0m\n\n      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:254:39)\n\n  ● LogFormatters › customFormat › should support template strings\n\n    TypeError: LogFormatters.customFormat is not a function\n\n    \u001b[0m \u001b[90m 266 |\u001b[39m     it(\u001b[32m'should support template strings'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 267 |\u001b[39m       \u001b[36mconst\u001b[39m template \u001b[33m=\u001b[39m \u001b[32m'{{timestamp}} [{{level}}] {{service}}: {{message}}'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcustomFormat(template)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 269 |\u001b[39m       \n     \u001b[90m 270 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 271 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:268:39)\n\n  ● LogFormatters › multiFormat › should combine multiple formatters\n\n    TypeError: LogFormatters.multiFormat is not a function\n\n    \u001b[0m \u001b[90m 284 |\u001b[39m   describe(\u001b[32m'multiFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 285 |\u001b[39m     it(\u001b[32m'should combine multiple formatters'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 286 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmultiFormat([\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 287 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39mtimestamp()\u001b[33m,\u001b[39m\n     \u001b[90m 288 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39merrors({ stack\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m,\u001b[39m\n     \u001b[90m 289 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39mjson()\u001b[0m\n\n      at Object.multiFormat (tests/unit/monitoring/logging/formatters.test.js:286:39)\n\n  ● LogFormatters › filterFormat › should filter logs based on criteria\n\n    TypeError: LogFormatters.filterFormat is not a function\n\n    \u001b[0m \u001b[90m 304 |\u001b[39m   describe(\u001b[32m'filterFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 305 |\u001b[39m     it(\u001b[32m'should filter logs based on criteria'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 306 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mfilterFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 307 |\u001b[39m         levels\u001b[33m:\u001b[39m [\u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'warn'\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 308 |\u001b[39m         excludeMessages\u001b[33m:\u001b[39m [\u001b[35m/debug/i\u001b[39m]\n     \u001b[90m 309 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:306:39)\n\n  ● LogFormatters › filterFormat › should filter based on metadata fields\n\n    TypeError: LogFormatters.filterFormat is not a function\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     it(\u001b[32m'should filter based on metadata fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mfilterFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m         metadata\u001b[33m:\u001b[39m {\n     \u001b[90m 334 |\u001b[39m           environment\u001b[33m:\u001b[39m \u001b[32m'production'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 335 |\u001b[39m           userId\u001b[33m:\u001b[39m (value) \u001b[33m=>\u001b[39m value \u001b[33m>\u001b[39m \u001b[35m100\u001b[39m\u001b[0m\n\n      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:332:39)\n\n  ● LogFormatters › maskFormat › should mask sensitive fields\n\n    TypeError: LogFormatters.maskFormat is not a function\n\n    \u001b[0m \u001b[90m 366 |\u001b[39m   describe(\u001b[32m'maskFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 367 |\u001b[39m     it(\u001b[32m'should mask sensitive fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 368 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmaskFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 369 |\u001b[39m         fields\u001b[33m:\u001b[39m [\u001b[32m'password'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'token'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'ssn'\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 370 |\u001b[39m         patterns\u001b[33m:\u001b[39m [\u001b[35m/\\b\\d{3}-\\d{2}-\\d{4}\\b/g\u001b[39m] \u001b[90m// SSN pattern\u001b[39m\n     \u001b[90m 371 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:368:39)\n\n  ● LogFormatters › maskFormat › should handle nested fields\n\n    TypeError: LogFormatters.maskFormat is not a function\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m\n     \u001b[90m 389 |\u001b[39m     it(\u001b[32m'should handle nested fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmaskFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m         fields\u001b[33m:\u001b[39m [\u001b[32m'user.password'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'auth.token'\u001b[39m]\n     \u001b[90m 392 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 393 |\u001b[39m\u001b[0m\n\n      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:390:39)\n\nFAIL mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js\n  ● Monitoring + Cloud Integration › AWS Monitoring Integration › should collect metrics from AWS-deployed services\n\n    Environment must have name and region\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mregion) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and region'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m     }\n     \u001b[90m 334 |\u001b[39m\n     \u001b[90m 335 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:34:46)\n\n  ● Monitoring + Cloud Integration › AWS Monitoring Integration › should trigger alerts for AWS service anomalies\n\n    TypeError: alertingSystem.addChannel is not a function\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 56 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39maddChannel(\u001b[32m'test-channel'\u001b[39m\u001b[33m,\u001b[39m alertChannel)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m       \n     \u001b[90m 59 |\u001b[39m       \u001b[90m// Create alert rule for high CPU\u001b[39m\n     \u001b[90m 60 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39mcreateRule({\u001b[0m\n\n      at Object.addChannel (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:57:28)\n\n  ● Monitoring + Cloud Integration › GCP Monitoring Integration › should collect metrics from GCP Cloud Run services\n\n    Environment must have name and projectId\n\n    \u001b[0m \u001b[90m 533 |\u001b[39m\n     \u001b[90m 534 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mprojectId) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 535 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and projectId'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 536 |\u001b[39m     }\n     \u001b[90m 537 |\u001b[39m\n     \u001b[90m 538 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at GCPDeployment.deploy (mcp-local-setup/deploy/gcp/deployment.js:535:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:89:46)\n\n  ● Monitoring + Cloud Integration › GCP Monitoring Integration › should integrate with GCP monitoring APIs\n\n    TypeError: gcpDeployment.getMetrics is not a function\n\n    \u001b[0m \u001b[90m 105 |\u001b[39m\n     \u001b[90m 106 |\u001b[39m     test(\u001b[32m'should integrate with GCP monitoring APIs'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m gcpMetrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m gcpDeployment\u001b[33m.\u001b[39mgetMetrics(\u001b[32m'test-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 108 |\u001b[39m       \n     \u001b[90m 109 |\u001b[39m       \u001b[90m// Export to Prometheus format\u001b[39m\n     \u001b[90m 110 |\u001b[39m       \u001b[36mconst\u001b[39m prometheusMetrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mexportMetrics(gcpMetrics)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.getMetrics (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:107:46)\n\n  ● Monitoring + Cloud Integration › Azure Monitoring Integration › should collect metrics from Azure Container Instances\n\n    Environment must have name, subscriptionId, and resourceGroup\n\n    \u001b[0m \u001b[90m 483 |\u001b[39m\n     \u001b[90m 484 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39msubscriptionId \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mresourceGroup) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 485 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name, subscriptionId, and resourceGroup'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 486 |\u001b[39m     }\n     \u001b[90m 487 |\u001b[39m\n     \u001b[90m 488 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AzureDeployment.deploy (mcp-local-setup/deploy/azure/deployment.js:485:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:120:48)\n\n  ● Monitoring + Cloud Integration › Cross-Cloud Monitoring › should aggregate metrics across multiple cloud providers\n\n    Environment must have name and region\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mregion) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and region'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m     }\n     \u001b[90m 334 |\u001b[39m\n     \u001b[90m 335 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:141:46)\n\n  ● Monitoring + Cloud Integration › Cross-Cloud Monitoring › should create unified dashboards for multi-cloud deployments\n\n    TypeError: metricsCollector.createDashboard is not a function\n\n    \u001b[0m \u001b[90m 179 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 180 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 181 |\u001b[39m       \u001b[36mconst\u001b[39m dashboard \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mcreateDashboard(dashboardConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 182 |\u001b[39m       \n     \u001b[90m 183 |\u001b[39m       expect(dashboard)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'url'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m       expect(dashboard\u001b[33m.\u001b[39mpanels)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createDashboard (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:181:48)\n\n  ● Monitoring + Cloud Integration › Alert Integration Across Clouds › should correlate alerts from different cloud providers\n\n    TypeError: alertingSystem.on is not a function\n\n    \u001b[0m \u001b[90m 192 |\u001b[39m       \n     \u001b[90m 193 |\u001b[39m       \u001b[90m// Setup alert collection\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 194 |\u001b[39m       alertingSystem\u001b[33m.\u001b[39mon(\u001b[32m'alert'\u001b[39m\u001b[33m,\u001b[39m (alert) \u001b[33m=>\u001b[39m alerts\u001b[33m.\u001b[39mpush(alert))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 195 |\u001b[39m\n     \u001b[90m 196 |\u001b[39m       \u001b[90m// Simulate alerts from different clouds\u001b[39m\n     \u001b[90m 197 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39mprocessCloudAlert({\u001b[0m\n\n      at Object.on (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:194:22)\n\n  ● Monitoring + Cloud Integration › Performance Monitoring › should track deployment performance metrics\n\n    TypeError: metricsCollector.trackDeployment is not a function\n\n    \u001b[0m \u001b[90m 229 |\u001b[39m       \u001b[90m// Track deployment performance\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m [cloud\u001b[33m,\u001b[39m metrics] \u001b[36mof\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mentries(deploymentMetrics)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 231 |\u001b[39m         \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mtrackDeployment(cloud\u001b[33m,\u001b[39m metrics)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 232 |\u001b[39m       }\n     \u001b[90m 233 |\u001b[39m\n     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m performanceReport \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mgetPerformanceReport()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.trackDeployment (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:231:32)\n\nFAIL tests/performance/monitoring/metrics-load.test.js\n  ● Metrics Performance Under Load › High-Frequency Metric Updates › should handle 10k metrics/second\n\n    Added label \"status\" is not included in initial labelset: [ 'method', 'route', 'status_code', 'status_class' ]\n\n    \u001b[0m \u001b[90m 40 |\u001b[39m       \u001b[90m// Generate metrics at high frequency\u001b[39m\n     \u001b[90m 41 |\u001b[39m       \u001b[36mwhile\u001b[39m (\u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow() \u001b[33m-\u001b[39m startTime \u001b[33m<\u001b[39m duration \u001b[33m&&\u001b[39m operations \u001b[33m<\u001b[39m targetOps) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 42 |\u001b[39m         httpExporter\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mhttpRequestsTotal\u001b[33m.\u001b[39minc({\n     \u001b[90m    |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 43 |\u001b[39m           method\u001b[33m:\u001b[39m [\u001b[32m'GET'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'POST'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'PUT'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'DELETE'\u001b[39m][operations \u001b[33m%\u001b[39m \u001b[35m4\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 44 |\u001b[39m           status\u001b[33m:\u001b[39m [\u001b[32m'200'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'201'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'400'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'500'\u001b[39m][operations \u001b[33m%\u001b[39m \u001b[35m4\u001b[39m]\n     \u001b[90m 45 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)\n      at Counter.incWithoutExemplar (node_modules/prom-client/lib/counter.js:44:4)\n      at Object.inc (tests/performance/monitoring/metrics-load.test.js:42:48)\n\n  ● Metrics Performance Under Load › High-Frequency Metric Updates › should handle concurrent metric updates\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Memory Efficiency › should maintain stable memory usage with high cardinality\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Memory Efficiency › should handle metric lifecycle efficiently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Metric Collection Performance › should efficiently serialize large numbers of metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Metric Collection Performance › should handle metric endpoint under load\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Histogram Performance › should efficiently calculate percentiles\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Histogram Performance › should handle multiple histogram updates concurrently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Label Cardinality Performance › should handle high label cardinality efficiently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Real-world Load Simulation › should handle realistic mixed workload\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Stress Testing › should remain stable under extreme load\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\nPASS mcp-local-setup/deploy/tests/azure.test.js\nPASS mcp-local-setup/tests/e2e/client-configuration.e2e.test.js\nFAIL mcp-local-setup/tests/integration/profile-switching.integration.test.js\n  ● Profile Switching Integration Tests › Profile Creation › should handle profile name conflicts\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: \"/home/jenner/.mcp-platform/profiles/duplicate-profile.yml\"\n\n    \u001b[0m \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m       \u001b[90m// Try to create duplicate\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 86 |\u001b[39m       \u001b[36mawait\u001b[39m expect(createTestProfile([\u001b[32m'service2'\u001b[39m]\u001b[33m,\u001b[39m { name\u001b[33m:\u001b[39m profileName }))\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 87 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/integration/profile-switching.integration.test.js:86:13)\n\n  ● Profile Switching Integration Tests › Profile Creation › should validate profile yaml structure\n\n    YAMLException: bad indentation of a mapping entry (1:14)\n\n     1 | invalid: yaml: structure:\n    ------------------^\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[90m// Try to load the profile\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m       \u001b[36mawait\u001b[39m expect(yaml\u001b[33m.\u001b[39mload(\u001b[36mawait\u001b[39m fs\u001b[33m.\u001b[39mreadFile(profilePath\u001b[33m,\u001b[39m \u001b[32m'utf8'\u001b[39m)))\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at generateError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:183:10)\n      at throwError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:187:9)\n      at readBlockMapping (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1182:7)\n      at composeNode (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1441:12)\n      at readDocument (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1625:3)\n      at loadDocuments (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1688:5)\n      at Object.load (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1714:19)\n      at Object.load (mcp-local-setup/tests/integration/profile-switching.integration.test.js:99:25)\n\n  ● Profile Switching Integration Tests › Profile Switching › should update docker-compose when switching profiles\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 159 |\u001b[39m\n     \u001b[90m 160 |\u001b[39m       \u001b[36mconst\u001b[39m generated \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m generateCompose()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 161 |\u001b[39m       expect(generated)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[90m// Docker compose should now contain services from profile1\u001b[39m\n     \u001b[90m 164 |\u001b[39m       \u001b[36mconst\u001b[39m composePath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(\u001b[33mMCP_HOME\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'docker-compose.yml'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/profile-switching.integration.test.js:161:25)\n\nPASS tests/unit/config/limits.test.js\nPASS tests/integration/phase6/observability-integration.test.js\n  ● Console\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request started {\"metadata\":{\"method\":\"GET\",\"path\":\"/api/users\",\"requestId\":\"req-123\"},\"timestamp\":\"2025-07-24T22:52:02.219Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request completed {\"metadata\":{\"requestId\":\"req-123\",\"status\":200},\"timestamp\":\"2025-07-24T22:52:02.339Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Database error occurred {\"metadata\":{\"error\":{\"message\":\"Database connection failed\",\"name\":\"Error\",\"stack\":\"Error: Database connection failed\\n    at Object.<anonymous> (/home/jenner/code/mcps/tests/integration/phase6/observability-integration.test.js:60:19)\\n    at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\\n    at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\\n    at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\\n    at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\\n    at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\\n    at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\\n    at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\\n    at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\\n    at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\"},\"query\":\"SELECT * FROM users\",\"requestId\":\"req-456\",\"service\":\"api\"},\"timestamp\":\"2025-07-24T22:52:02.364Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[33mwarn\u001b[39m: Slow response detected {\"endpoint\":\"/api/heavy\",\"responseTime\":5500,\"threshold\":5000,\"timestamp\":\"2025-07-24T22:52:02.374Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request received {\"metadata\":{\"headers\":{\"x-request-id\":\"req-789\"},\"ip\":\"unknown\",\"method\":\"POST\",\"path\":\"/api/users\",\"requestId\":\"req-789\"},\"timestamp\":\"2025-07-24T22:52:02.379Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Processing request {\"metadata\":{\"requestId\":\"trace-123\",\"traceId\":\"e3f03f789c9c577cabcafdb9edbe9eb8\"},\"timestamp\":\"2025-07-24T22:52:02.386Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\nPASS mcp-local-setup/deploy/tests/aws.test.js\nPASS mcp-local-setup/enterprise/tests/tenancy.test.js\n  ● Console\n\n    console.log\n      Disabling services for tenant lifecycle-tenant\n\n      at MultiTenancy.log [as _disableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:348:13)\n\n    console.log\n      Disabling services for tenant lifecycle-tenant\n\n      at MultiTenancy.log [as _disableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:348:13)\n\n    console.log\n      Enabling services for tenant lifecycle-tenant\n\n      at MultiTenancy.log [as _enableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:354:13)\n\n    console.log\n      Backing up tenant lifecycle-tenant to /home/jenner/code/mcps/data/tenants/backups/lifecycle-tenant\n\n      at MultiTenancy.log [as _backupTenantData] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:366:15)\n\nFAIL mcp-local-setup/tests/integration/backup.integration.test.js\n  ● Console\n\n    console.log\n      Stopping services: filesystem, git, browser, postgres, everest\n\n      at BackupManager.log [as stopServices] (mcp-local-setup/scripts/backup-manager.js:863:17)\n\n    console.log\n      Restoring configuration for: filesystem, git, browser, postgres, everest\n\n      at BackupManager.log [as restoreConfiguration] (mcp-local-setup/scripts/backup-manager.js:883:17)\n\n    console.log\n      Restoring data for: filesystem, git, browser, postgres, everest\n\n      at BackupManager.log [as restoreServiceData] (mcp-local-setup/scripts/backup-manager.js:893:17)\n\n    console.log\n      Starting services: filesystem, git, browser, postgres, everest\n\n      at BackupManager.log [as startServices] (mcp-local-setup/scripts/backup-manager.js:872:17)\n\n    console.log\n      Stopping services: filesystem\n\n      at BackupManager.log [as stopServices] (mcp-local-setup/scripts/backup-manager.js:863:17)\n\n    console.log\n      Restoring configuration for: filesystem\n\n      at BackupManager.log [as restoreConfiguration] (mcp-local-setup/scripts/backup-manager.js:883:17)\n\n    console.log\n      Restoring data for: filesystem\n\n      at BackupManager.log [as restoreServiceData] (mcp-local-setup/scripts/backup-manager.js:893:17)\n\n    console.log\n      Starting services: filesystem\n\n      at BackupManager.log [as startServices] (mcp-local-setup/scripts/backup-manager.js:872:17)\n\n    console.log\n      Dry run mode - no changes will be made\n\n      at BackupManager.log [as restoreBackup] (mcp-local-setup/scripts/backup-manager.js:287:25)\n\n    console.log\n      Would restore services: non-existent-service\n\n      at BackupManager.log [as restoreBackup] (mcp-local-setup/scripts/backup-manager.js:288:25)\n\n  ● Backup & Restore Integration Tests › Selective Service Backup › should handle incremental backups\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 993\n    Received:   993\n\n    \u001b[0m \u001b[90m 155 |\u001b[39m             \u001b[36mconst\u001b[39m metadata \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m backup\u001b[33m.\u001b[39mgetBackupMetadata(incrementalId)\u001b[33m;\u001b[39m\n     \u001b[90m 156 |\u001b[39m             expect(metadata\u001b[33m.\u001b[39mtype)\u001b[33m.\u001b[39mtoBe(\u001b[32m'incremental'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 157 |\u001b[39m             expect(metadata\u001b[33m.\u001b[39msize)\u001b[33m.\u001b[39mtoBeLessThan(metadata\u001b[33m.\u001b[39msize)\u001b[33m;\u001b[39m \u001b[90m// Should be smaller than full\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 158 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\u001b[0m\n\n      at Object.toBeLessThan (mcp-local-setup/tests/integration/backup.integration.test.js:157:35)\n\n  ● Backup & Restore Integration Tests › Scheduled Backups › should list backup schedules\n\n    expect(received).toBeInstanceOf(expected)\n\n    Expected constructor: Date\n\n    Received value has no prototype\n    Received value: null\n\n    \u001b[0m \u001b[90m 182 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39mcronExpression)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0 2 * * *'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 183 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39menabled)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 184 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39mnextRun)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mDate\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 185 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m\n     \u001b[90m 187 |\u001b[39m         it(\u001b[32m'should update backup schedule'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/backup.integration.test.js:184:42)\n\n  ● Backup & Restore Integration Tests › Backup Storage Management › should delete specific backup\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m         it(\u001b[32m'should delete specific backup'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 297 |\u001b[39m             \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m backup\u001b[33m.\u001b[39mdeleteBackup(testBackupId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m             expect(deleted)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m\n     \u001b[90m 300 |\u001b[39m             \u001b[36mawait\u001b[39m expect(backup\u001b[33m.\u001b[39mgetBackupMetadata(testBackupId))\n     \u001b[90m 301 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Backup not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/backup.integration.test.js:298:29)\n\n  ● Backup & Restore Integration Tests › Error Handling › should validate backup options\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: \"backup-2025-07-24T22-52-02-438Z-7bfbf9bc\"\n\n    \u001b[0m \u001b[90m 321 |\u001b[39m             }\u001b[33m;\u001b[39m\n     \u001b[90m 322 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 323 |\u001b[39m             \u001b[36mawait\u001b[39m expect(backup\u001b[33m.\u001b[39mcreateBackup(invalidOptions))\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 324 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 325 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/integration/backup.integration.test.js:323:19)\n\nPASS tests/integration/docker/security-scan.test.js\nPASS mcp-local-setup/monitoring/tests/alerting-system.test.js\n  ● Console\n\n    console.error\n      Failed to configure notification channel test: Error: Unsupported channel type: unsupported\n          at AlertingSystem.configureNotificationChannel (/home/jenner/code/mcps/mcp-local-setup/monitoring/alerts/alerting.js:90:17)\n          at configureNotificationChannel (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:170:35)\n          at Object.<anonymous> (/home/jenner/code/mcps/node_modules/expect/build/toThrowMatchers.js:74:11)\n          at Object.throwingMatcher [as toThrow] (/home/jenner/code/mcps/node_modules/expect/build/index.js:320:21)\n          at Object.toThrow (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:171:10)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m`Failed to configure notification channel ${channel.name}:`\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Channel configuration failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 104 |\u001b[39m     }\n     \u001b[90m 105 |\u001b[39m   }\u001b[0m\n\n      at AlertingSystem.error [as configureNotificationChannel] (mcp-local-setup/monitoring/alerts/alerting.js:102:15)\n      at configureNotificationChannel (mcp-local-setup/monitoring/tests/alerting-system.test.js:170:35)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (mcp-local-setup/monitoring/tests/alerting-system.test.js:171:10)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.446Z\n      ========================================\n      Title: Test Alert\n      Message: This is a test alert\n      Rule: test-rule\n      ID: alert-1753397522446-1idpim4hm\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.error\n      Failed to send alert: Error: Alert rule not found: non-existent\n          at AlertingSystem.sendAlert (/home/jenner/code/mcps/mcp-local-setup/monitoring/alerts/alerting.js:151:15)\n          at Object.sendAlert (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:257:35)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 189 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 191 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to send alert:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 192 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Alert sending failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 193 |\u001b[39m     }\n     \u001b[90m 194 |\u001b[39m   }\u001b[0m\n\n      at AlertingSystem.error [as sendAlert] (mcp-local-setup/monitoring/alerts/alerting.js:191:15)\n      at Object.sendAlert (mcp-local-setup/monitoring/tests/alerting-system.test.js:257:35)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.453Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522453-ln2ylgwyd\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.454Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522454-gnhc8jd3u\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.456Z\n      ========================================\n      Title: escalation-rule\n      Message: Test escalation\n      Rule: escalation-rule\n      ID: alert-1753397522456-eohzjoq2y\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.error\n      Failed to send notification to test-email: Error: Email failed\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:371:55)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 448 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 449 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 450 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m`Failed to send notification to ${channelName}:`\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 451 |\u001b[39m         results\u001b[33m.\u001b[39mpush({\n     \u001b[90m 452 |\u001b[39m           channel\u001b[33m:\u001b[39m channelName\u001b[33m,\u001b[39m\n     \u001b[90m 453 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at AlertingSystem.error [as sendNotifications] (mcp-local-setup/monitoring/alerts/alerting.js:450:17)\n      at Object.<anonymous> (mcp-local-setup/monitoring/tests/alerting-system.test.js:379:23)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.464Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522464-o2lvvxgxd\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.465Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522465-okkywl6hp\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.466Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522466-y9fej1gjy\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.467Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522467-lvufyz0t4\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.468Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522468-2jq5dhal3\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\n    console.log\n      \n      ========================================\n      ALERT [WARNING] - 2025-07-24T22:52:02.469Z\n      ========================================\n      Title: test-rule\n      Message: Test alert\n      Rule: test-rule\n      ID: alert-1753397522469-66fegexag\n      ----------------------------------------\n      {}\n      ========================================\n\n      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)\n\nPASS mcp-local-setup/tests/integration/phase5/orchestration-only.test.js\nPASS mcp-local-setup/monitoring/tests/metrics-collector-simple.test.js\nPASS mcp-local-setup/tests/integration/phase5/sdk-cli-integration.test.js\nPASS tests/unit/monitoring/error-tracker.test.js\nPASS tests/unit/monitoring/prometheus-exporter.test.js\nPASS tests/unit/monitoring/winston-config.test.js\n  ● Console\n\n    console.log\n      2025-07-24 18:52:02.490 [test-service] \u001b[32minfo\u001b[39m: \u001b[32m\tIncoming request\u001b[39m {\"correlationId\":\"1753397522490-pngkgahh0\",\"hostname\":\"TorrenceBioAI1\",\"pid\":3738385,\"method\":\"GET\",\"url\":\"/test\",\"headers\":{\"user-agent\":\"test\"},\"ip\":\"127.0.0.1\"} {\"environment\":\"test\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\nPASS tests/unit/docker/health/readiness.test.js\nPASS mcp-local-setup/enterprise/tests/authentication.test.js\n  ● Console\n\n    console.log\n      Testing LDAP connection to ldaps://ldap.example.com:636\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Testing LDAP connection to ldaps://ldap.example.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Testing LDAP connection to ldaps://ldap.example.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Processing SAML assertion\n\n      at SSOAuthentication.log [as _authenticateSAML] (mcp-local-setup/enterprise/sso/authentication.js:357:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Exchanging OAuth2 code for tokens\n\n      at SSOAuthentication.log [as _authenticateOAuth2] (mcp-local-setup/enterprise/sso/authentication.js:374:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Authenticating via LDAP\n\n      at SSOAuthentication.log [as _authenticateLDAP] (mcp-local-setup/enterprise/sso/authentication.js:392:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Authenticating via LDAP\n\n      at SSOAuthentication.log [as _authenticateLDAP] (mcp-local-setup/enterprise/sso/authentication.js:392:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Processing SAML assertion\n\n      at SSOAuthentication.log [as _authenticateSAML] (mcp-local-setup/enterprise/sso/authentication.js:357:13)\n\n    console.log\n      Testing LDAP connection to ldap://test.com\n\n      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)\n\n    console.log\n      Exchanging OAuth2 code for tokens\n\n      at SSOAuthentication.log [as _authenticateOAuth2] (mcp-local-setup/enterprise/sso/authentication.js:374:13)\n\nFAIL tests/integration/phase6/production-deployment.test.js\n  ● Console\n\n    console.warn\n      Redis storage requested but no Redis client provided, falling back to memory storage\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m     \u001b[90m// If Redis storage is requested but no Redis client provided, fall back to memory\u001b[39m\n     \u001b[90m  7 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m===\u001b[39m \u001b[32m'redis'\u001b[39m \u001b[33m&&\u001b[39m \u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mredis) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m'Redis storage requested but no Redis client provided, falling back to memory storage'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m=\u001b[39m \u001b[32m'memory'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m     \u001b[0m\n\n      at new warn (security/rate-limiting/rate-limiter.js:8:15)\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:22:19)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Production system started {\"environment\":\"production\",\"timestamp\":\"2025-07-24T22:52:02.260Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.warn\n      Redis storage requested but no Redis client provided, falling back to memory storage\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m     \u001b[90m// If Redis storage is requested but no Redis client provided, fall back to memory\u001b[39m\n     \u001b[90m  7 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m===\u001b[39m \u001b[32m'redis'\u001b[39m \u001b[33m&&\u001b[39m \u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mredis) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m'Redis storage requested but no Redis client provided, falling back to memory storage'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m=\u001b[39m \u001b[32m'memory'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m     \u001b[0m\n\n      at new warn (security/rate-limiting/rate-limiter.js:8:15)\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:22:19)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request started {\"metadata\":{\"ip\":\"203.0.113.1\",\"method\":\"GET\",\"path\":\"/api/profile\",\"requestId\":\"prod-req-001\",\"userId\":\"user-123\"},\"timestamp\":\"2025-07-24T22:52:02.275Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Request failed {\"metadata\":{\"error\":{\"message\":\"Added label \\\"status\\\" is not included in initial labelset: []\",\"name\":\"Error\",\"stack\":\"Error: Added label \\\"status\\\" is not included in initial labelset: []\\n    at validateLabel (/home/jenner/code/mcps/node_modules/prom-client/lib/validation.js:20:10)\\n    at /home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:235:3\\n    at Histogram.observeWithoutExemplar (/home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:74:54)\\n    at /home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:185:9\\n    at Object.requestTimer (/home/jenner/code/mcps/tests/integration/phase6/production-deployment.test.js:134:7)\"},\"requestId\":\"prod-req-001\",\"userId\":\"user-123\"},\"timestamp\":\"2025-07-24T22:52:02.392Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.warn\n      Redis storage requested but no Redis client provided, falling back to memory storage\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m     \u001b[90m// If Redis storage is requested but no Redis client provided, fall back to memory\u001b[39m\n     \u001b[90m  7 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m===\u001b[39m \u001b[32m'redis'\u001b[39m \u001b[33m&&\u001b[39m \u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mredis) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m'Redis storage requested but no Redis client provided, falling back to memory storage'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m=\u001b[39m \u001b[32m'memory'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m     \u001b[0m\n\n      at new warn (security/rate-limiting/rate-limiter.js:8:15)\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:22:19)\n\n    console.warn\n      Redis storage requested but no Redis client provided, falling back to memory storage\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m     \u001b[90m// If Redis storage is requested but no Redis client provided, fall back to memory\u001b[39m\n     \u001b[90m  7 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m===\u001b[39m \u001b[32m'redis'\u001b[39m \u001b[33m&&\u001b[39m \u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mredis) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m'Redis storage requested but no Redis client provided, falling back to memory storage'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstorage \u001b[33m=\u001b[39m \u001b[32m'memory'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m     \u001b[0m\n\n      at new warn (security/rate-limiting/rate-limiter.js:8:15)\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:22:19)\n\n    console.log\n      \u001b[33mwarn\u001b[39m: Graceful shutdown initiated {\"timestamp\":\"2025-07-24T22:52:02.400Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Graceful shutdown complete {\"timestamp\":\"2025-07-24T22:52:02.503Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n  ● Production Deployment Integration › Production request flow with all components\n\n    Added label \"status\" is not included in initial labelset: []\n\n    \u001b[0m \u001b[90m 149 |\u001b[39m\n     \u001b[90m 150 |\u001b[39m       requestLogger\u001b[33m.\u001b[39merror(\u001b[32m'Request failed'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 151 |\u001b[39m       requestTimer({ status\u001b[33m:\u001b[39m \u001b[35m500\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 152 |\u001b[39m     } \u001b[36mfinally\u001b[39m {\n     \u001b[90m 153 |\u001b[39m       transaction\u001b[33m.\u001b[39mfinish()\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m     }\u001b[0m\n\n      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)\n      at node_modules/prom-client/lib/histogram.js:235:3\n      at Histogram.observeWithoutExemplar (node_modules/prom-client/lib/histogram.js:74:54)\n      at node_modules/prom-client/lib/histogram.js:185:9\n      at Object.requestTimer (tests/integration/phase6/production-deployment.test.js:151:7)\n\n  ● Production Deployment Integration › Production monitoring and alerting\n\n    ReferenceError: Cannot access 'health' before initialization\n\n    \u001b[0m \u001b[90m 181 |\u001b[39m\n     \u001b[90m 182 |\u001b[39m     \u001b[90m// Check health degradation\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 183 |\u001b[39m     \u001b[36mconst\u001b[39m health \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m health\u001b[33m.\u001b[39mcheckHealth()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 184 |\u001b[39m     expect(health\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'degraded'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m\n     \u001b[90m 186 |\u001b[39m     \u001b[90m// Verify metrics\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:183:20)\n\nPASS tests/docker-production.test.js\nPASS mcp-local-setup/deploy/tests/gcp.test.js\nPASS mcp-local-setup/tests/unit/config/config-validator.test.js\nPASS mcp-local-setup/tests/integration/phase5/orchestration-cicd-only.test.js\nPASS tests/unit/security/jwt-auth.test.js\nPASS tests/unit/monitoring/custom-metrics.test.js\nPASS tests/unit/security/rate-limiter.test.js\nPASS mcp-local-setup/deploy/tests/index.test.js\nPASS mcp-local-setup/tests/unit/marketplace/discovery.test.js\nPASS tests/unit/security/api-key.test.js\nFAIL mcp-local-setup/tests/unit/cli-mcp-cli.unit.test.js\n  ● MCP CLI Command Parsing › CLI Initialization › should set up correct environment variables\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › CLI Initialization › should define all required command paths\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › fileExists should check file accessibility\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › runCommand should spawn process with correct arguments\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › runCommand should handle process errors\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Command Structure › should parse version command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Command Structure › should parse help command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service start command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service stop command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service restart command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should handle profile list command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should handle profile switch command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should validate profile creation\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle missing docker-compose file\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle invalid profile names\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle service command failures gracefully\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\nPASS tests/unit/docker/health/liveness.test.js\nPASS tests/unit/monitoring/logger.test.js\n  ● Console\n\n    console.log\n      \u001b[34mdebug\u001b[39m: Debug message {\"timestamp\":\"2025-07-24T22:52:02.091Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Info message {\"timestamp\":\"2025-07-24T22:52:02.112Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[33mwarn\u001b[39m: Warning message {\"timestamp\":\"2025-07-24T22:52:02.113Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Error message {\"timestamp\":\"2025-07-24T22:52:02.115Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Test message {\"action\":\"login\",\"timestamp\":\"2025-07-24T22:52:02.129Z\",\"userId\":123}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Error occurred {\"context\":\"test\",\"error\":{\"message\":\"Test error\",\"name\":\"Error\",\"stack\":\"Error: Test error\\n    at Object.<anonymous> (/home/jenner/code/mcps/tests/unit/monitoring/logger.test.js:37:21)\\n    at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\\n    at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\\n    at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\\n    at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\\n    at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\\n    at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\\n    at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\\n    at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\\n    at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\"},\"timestamp\":\"2025-07-24T22:52:02.145Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Timer test-operation completed {\"duration\":101,\"durationMs\":101,\"timer\":\"test-operation\",\"timestamp\":\"2025-07-24T22:52:02.267Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Timer db-query completed {\"duration\":54,\"durationMs\":54,\"query\":\"SELECT * FROM users\",\"timer\":\"db-query\",\"timestamp\":\"2025-07-24T22:52:02.327Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Request received {\"metadata\":{\"headers\":{\"content-type\":\"application/json\"},\"ip\":\"127.0.0.1\",\"method\":\"POST\",\"path\":\"/api/users\",\"requestId\":\"req-1753397522339-xmcqowxoh\"},\"timestamp\":\"2025-07-24T22:52:02.340Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Test message 1 {\"timestamp\":\"2025-07-24T22:52:02.360Z\",\"type\":\"test\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Test message 2 {\"timestamp\":\"2025-07-24T22:52:02.363Z\",\"type\":\"other\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[31merror\u001b[39m: Error message {\"timestamp\":\"2025-07-24T22:52:02.470Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\n    console.log\n      \u001b[32minfo\u001b[39m: Info message {\"timestamp\":\"2025-07-24T22:52:02.473Z\"}\n\n      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)\n\nPASS tests/unit/docker/health/startup.test.js\nPASS tests/unit/monitoring/metrics.test.js\nPASS tests/unit/docker/graceful-shutdown.test.js\nFAIL tests/unit/security/xss-protection.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'isomorphic-dompurify' from 'tests/unit/security/xss-protection.test.js'\n\n    \u001b[0m \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[90m// Mock isomorphic-dompurify\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 4 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'isomorphic-dompurify'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 5 |\u001b[39m   \u001b[36mreturn\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m 6 |\u001b[39m     sanitize\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn((dirty\u001b[33m,\u001b[39m config) \u001b[33m=>\u001b[39m {\n     \u001b[90m 7 |\u001b[39m       \u001b[90m// Simple mock sanitization\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.mock (tests/unit/security/xss-protection.test.js:4:6)\n\nFAIL mcp-local-setup/tests/unit/update/update-manager.unit.test.js\n  ● Test suite failed to run\n\n    TypeError: Cannot destructure property 'O_CREAT' of 'fs.constants' as it is undefined.\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mconst\u001b[39m { pipeline } \u001b[33m=\u001b[39m require(\u001b[32m'stream/promises'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mconst\u001b[39m { createWriteStream\u001b[33m,\u001b[39m createReadStream } \u001b[33m=\u001b[39m require(\u001b[32m'fs'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mconst\u001b[39m tar \u001b[33m=\u001b[39m require(\u001b[32m'tar'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m \u001b[36mconst\u001b[39m semver \u001b[33m=\u001b[39m require(\u001b[32m'semver'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m cron \u001b[33m=\u001b[39m require(\u001b[32m'node-cron'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/get-write-flag.js:14:9)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/unpack.js:48:17)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/extract.js:5:16)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/index.js:8:31)\n      at Object.require (mcp-local-setup/scripts/update-manager.js:13:13)\n      at Object.require (mcp-local-setup/tests/unit/update/update-manager.unit.test.js:5:23)\n\nFAIL mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../monitoring/logging/service' from 'mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mComplianceTools\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../enterprise/compliance/tools'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mTenantManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../enterprise/multi-tenant/tenancy'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLoggingService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertingSystem\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/alerts/alerting'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m describe(\u001b[32m'SSO + Compliance Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js:9:24)\n\nFAIL tests/unit/security/input-validator.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'validator' from 'security/validation/input-validator.js'\n\n    Require stack:\n      security/validation/input-validator.js\n      tests/unit/security/input-validator.test.js\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m validator \u001b[33m=\u001b[39m require(\u001b[32m'validator'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m createDOMPurify \u001b[33m=\u001b[39m require(\u001b[32m'isomorphic-dompurify'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mInputValidator\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (security/validation/input-validator.js:8:19)\n      at Object.<anonymous> (tests/unit/security/input-validator.test.js:1:79)\n\nFAIL tests/security/injection-prevention.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'validator' from 'security/validation/input-validator.js'\n\n    Require stack:\n      security/validation/input-validator.js\n      tests/security/injection-prevention.test.js\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m validator \u001b[33m=\u001b[39m require(\u001b[32m'validator'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m createDOMPurify \u001b[33m=\u001b[39m require(\u001b[32m'isomorphic-dompurify'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mInputValidator\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (security/validation/input-validator.js:8:19)\n      at Object.<anonymous> (tests/security/injection-prevention.test.js:1:76)\n\nFAIL tests/unit/security/oauth.test.js\n  ● OAuth2Provider › getUserInfo › should return user info\n\n    User info URL not configured\n\n    \u001b[0m \u001b[90m 211 |\u001b[39m   \u001b[36masync\u001b[39m getUserInfo(accessToken) {\n     \u001b[90m 212 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconfig\u001b[33m.\u001b[39muserInfoURL) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 213 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'User info URL not configured'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 214 |\u001b[39m     }\n     \u001b[90m 215 |\u001b[39m\n     \u001b[90m 216 |\u001b[39m     \u001b[36mtry\u001b[39m {\u001b[0m\n\n      at OAuth2Provider.getUserInfo (security/api-auth/oauth.js:213:13)\n      at Object.getUserInfo (tests/unit/security/oauth.test.js:161:39)\n\nFAIL mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../monitoring/logging/service' from 'mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAzureDeployment\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../deploy/azure/deployment'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMetricsCollector\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/metrics/collector'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLoggingService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertingSystem\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/alerts/alerting'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 19 |\u001b[39m\n     \u001b[90m 20 |\u001b[39m describe(\u001b[32m'Phase 4 Full Workflow Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js:17:24)\n\nFAIL mcp-local-setup/monitoring/tests/logging-service.test.js\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockWinston' before initialization\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'winston'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m mockWinston)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m\n     \u001b[90m 33 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'winston-daily-rotate-file'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 34 |\u001b[39m   \u001b[36mreturn\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m ({}))\u001b[33m;\u001b[39m\u001b[0m\n\n      at mockWinston (mcp-local-setup/monitoring/tests/logging-service.test.js:31:28)\n      at Object.require (mcp-local-setup/monitoring/logging/logger.js:6:17)\n      at Object.require (mcp-local-setup/monitoring/tests/logging-service.test.js:5:24)\n\nFAIL tests/sdk-core.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../../mcp-local-setup/enterprise/sso/authentication' from 'sdk/core/index.js'\n\n    Require stack:\n      sdk/core/index.js\n      tests/sdk-core.test.js\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mEventEmitter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'events'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m crypto \u001b[33m=\u001b[39m require(\u001b[32m'crypto'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mSSOAuthentication\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../mcp-local-setup/enterprise/sso/authentication'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMarketplaceDiscovery\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../mcp-local-setup/api/marketplace/discovery'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m \u001b[36mextends\u001b[39m \u001b[33mEventEmitter\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (sdk/core/index.js:7:27)\n      at Object.require (tests/sdk-core.test.js:6:17)\n\n  ●  process.exit called with \"1\"\n\n    \u001b[0m \u001b[90m 66 |\u001b[39m     spinner\u001b[33m.\u001b[39mfail(\u001b[32m'Failed to check system health'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m     console\u001b[33m.\u001b[39merror(chalk\u001b[33m.\u001b[39mred(\u001b[32m'Error:'\u001b[39m)\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 68 |\u001b[39m     process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 69 |\u001b[39m   }\n     \u001b[90m 70 |\u001b[39m }\n     \u001b[90m 71 |\u001b[39m\u001b[0m\n\n      at exit (mcp-local-setup/cli/commands/health.js:68:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)\nFAIL tests/unit/monitoring/logging/rotation.test.js\n  ● Test suite failed to run\n\n    TypeError: Cannot assign to read only property 'createGzip' of object '#<Object>'\n\n      at node_modules/jest-mock/build/index.js:784:33\n          at Set.forEach (<anonymous>)\n\nFAIL mcp-local-setup/tests/unit/security/network-manager.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word 'public'. (240:14)\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m         \u001b[90m// Group services by isolation requirements\u001b[39m\n     \u001b[90m 239 |\u001b[39m         \u001b[36mconst\u001b[39m isolated \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m         \u001b[36mconst\u001b[39m \u001b[36mpublic\u001b[39m \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n     \u001b[90m 242 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m rule \u001b[36mof\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrules\u001b[33m.\u001b[39mvalues()) {\n     \u001b[90m 243 |\u001b[39m             \u001b[36mif\u001b[39m (rule\u001b[33m.\u001b[39mallowed) {\u001b[0m\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mRateLimiter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./rate-limiter'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mCORSManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./cors-manager'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mServiceIsolation\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./service-isolation'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mNetworkManager\u001b[39m {\n     \u001b[90m 11 |\u001b[39m     constructor() {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)\n      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)\n      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)\n      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)\n      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)\n      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)\n      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)\n      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)\n      at Object.require (mcp-local-setup/tests/unit/security/network-manager.test.js:5:24)\n\nFAIL tests/unit/monitoring/errors/error-boundaries.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax 'jsx' isn't currently enabled (96:11):\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33mFallbackComponent\u001b[39m) {\n     \u001b[90m 95 |\u001b[39m         \u001b[36mreturn\u001b[39m (\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33mFallbackComponent\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m             error\u001b[33m=\u001b[39m{error}\n     \u001b[90m 98 |\u001b[39m             errorInfo\u001b[33m=\u001b[39m{errorInfo}\n     \u001b[90m 99 |\u001b[39m             resetErrorBoundary\u001b[33m=\u001b[39m{\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mresetErrorBoundary}\u001b[0m\n\n    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the 'presets' section of your Babel config to enable transformation.\n    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the 'plugins' section to enable parsing.\n\n    If you already added the plugin for this syntax to your config, it's possible that your config isn't being loaded.\n    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:\n    \tnpx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js <your build command>\n    See https://babeljs.io/docs/configuration#print-effective-configs for more info.\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorBoundaries\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../monitoring/errors/error-boundaries'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mEventEmitter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'events'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m\n     \u001b[90m 4 |\u001b[39m describe(\u001b[32m'ErrorBoundaries'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)\n      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)\n      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)\n      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.<anonymous> (tests/unit/monitoring/errors/error-boundaries.test.js:1:82)\n\nPASS tests/unit/monitoring/sentry-integration.test.js\nFAIL mcp-local-setup/tests/e2e/installation-flow.e2e.test.js\n  ● Installation Flow E2E Tests › Initial Installation › should set correct file permissions\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 123 |\u001b[39m         \u001b[36mconst\u001b[39m stats \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m fs\u001b[33m.\u001b[39mstat(filePath)\u001b[33m;\u001b[39m\n     \u001b[90m 124 |\u001b[39m         \u001b[36mconst\u001b[39m isExecutable \u001b[33m=\u001b[39m (stats\u001b[33m.\u001b[39mmode \u001b[33m&\u001b[39m \u001b[35m0o111\u001b[39m) \u001b[33m!==\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 125 |\u001b[39m         expect(isExecutable)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 126 |\u001b[39m       }\n     \u001b[90m 127 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 128 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/e2e/installation-flow.e2e.test.js:125:30)\n\nPASS mcp-local-setup/tests/e2e/service-deployment.e2e.test.js\nFAIL mcp-local-setup/tests/integration/security.integration.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word 'public'. (240:14)\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m         \u001b[90m// Group services by isolation requirements\u001b[39m\n     \u001b[90m 239 |\u001b[39m         \u001b[36mconst\u001b[39m isolated \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m         \u001b[36mconst\u001b[39m \u001b[36mpublic\u001b[39m \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n     \u001b[90m 242 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m rule \u001b[36mof\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrules\u001b[33m.\u001b[39mvalues()) {\n     \u001b[90m 243 |\u001b[39m             \u001b[36mif\u001b[39m (rule\u001b[33m.\u001b[39mallowed) {\u001b[0m\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mRateLimiter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./rate-limiter'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mCORSManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./cors-manager'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mServiceIsolation\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./service-isolation'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mNetworkManager\u001b[39m {\n     \u001b[90m 11 |\u001b[39m     constructor() {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)\n      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)\n      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)\n      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)\n      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)\n      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)\n      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)\n      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)\n      at Object.require (mcp-local-setup/security/index.js:8:24)\n      at Object.require (mcp-local-setup/tests/integration/security.integration.test.js:6:32)\n\nFAIL tests/integration/monitoring/error-tracking.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax 'jsx' isn't currently enabled (96:11):\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33mFallbackComponent\u001b[39m) {\n     \u001b[90m 95 |\u001b[39m         \u001b[36mreturn\u001b[39m (\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33mFallbackComponent\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m             error\u001b[33m=\u001b[39m{error}\n     \u001b[90m 98 |\u001b[39m             errorInfo\u001b[33m=\u001b[39m{errorInfo}\n     \u001b[90m 99 |\u001b[39m             resetErrorBoundary\u001b[33m=\u001b[39m{\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mresetErrorBoundary}\u001b[0m\n\n    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the 'presets' section of your Babel config to enable transformation.\n    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the 'plugins' section to enable parsing.\n\n    If you already added the plugin for this syntax to your config, it's possible that your config isn't being loaded.\n    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:\n    \tnpx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js <your build command>\n    See https://babeljs.io/docs/configuration#print-effective-configs for more info.\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mSentryIntegration\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/sentry-integration'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorBoundaries\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/error-boundaries'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertRouter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/alert-router'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorTracker\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/error-tracker'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLogger\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/logger'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)\n      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)\n      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)\n      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (tests/integration/monitoring/error-tracking.test.js:2:25)\n\n  ●  process.exit called with \"1\"\n\n    \u001b[0m \u001b[90m 66 |\u001b[39m     spinner\u001b[33m.\u001b[39mfail(\u001b[32m'Failed to check system health'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m     console\u001b[33m.\u001b[39merror(chalk\u001b[33m.\u001b[39mred(\u001b[32m'Error:'\u001b[39m)\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 68 |\u001b[39m     process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 69 |\u001b[39m   }\n     \u001b[90m 70 |\u001b[39m }\n     \u001b[90m 71 |\u001b[39m\u001b[0m\n\n      at exit (mcp-local-setup/cli/commands/health.js:68:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)\nPASS tests/unit/security/token-refresh.test.js\n  ● Console\n\n    console.error\n      Auto-refresh middleware error: Error: Test error\n          at /home/jenner/code/mcps/tests/unit/security/token-refresh.test.js:308:15\n          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:397:39\n          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:404:13\n          at mockConstructor (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:148:19)\n          at getTokenId (/home/jenner/code/mcps/security/api-auth/token-refresh.js:309:25)\n          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/token-refresh.test.js:321:13)\n          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)\n\n    \u001b[0m \u001b[90m 338 |\u001b[39m         next()\u001b[33m;\u001b[39m\n     \u001b[90m 339 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 340 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m'Auto-refresh middleware error:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 341 |\u001b[39m         next()\u001b[33m;\u001b[39m \u001b[90m// Don't block on errors\u001b[39m\n     \u001b[90m 342 |\u001b[39m       }\n     \u001b[90m 343 |\u001b[39m     }\u001b[33m;\u001b[39m\u001b[0m\n\n      at error (security/api-auth/token-refresh.js:340:17)\n      at Object.middleware (tests/unit/security/token-refresh.test.js:321:13)\n\n  ●  process.exit called with \"1\"\n\n    \u001b[0m \u001b[90m 66 |\u001b[39m     spinner\u001b[33m.\u001b[39mfail(\u001b[32m'Failed to check system health'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m     console\u001b[33m.\u001b[39merror(chalk\u001b[33m.\u001b[39mred(\u001b[32m'Error:'\u001b[39m)\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 68 |\u001b[39m     process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 69 |\u001b[39m   }\n     \u001b[90m 70 |\u001b[39m }\n     \u001b[90m 71 |\u001b[39m\u001b[0m\n\n      at exit (mcp-local-setup/cli/commands/health.js:68:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)\nFAIL mcp-local-setup/tests/integration/update.integration.test.js\n  ● Update Mechanism Integration Tests › Platform Self-Update › should check for platform updates\n\n    Failed to check for updates: Invalid version. Must be a string. Got type \"object\".\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m             \u001b[36mreturn\u001b[39m applicableUpdates\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check for updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m         }\n     \u001b[90m 105 |\u001b[39m     }\n     \u001b[90m 106 |\u001b[39m\u001b[0m\n\n      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:38:29)\n\n  ● Update Mechanism Integration Tests › Platform Self-Update › should check beta channel updates\n\n    Failed to check for updates: Invalid version. Must be a string. Got type \"object\".\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m             \u001b[36mreturn\u001b[39m applicableUpdates\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check for updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m         }\n     \u001b[90m 105 |\u001b[39m     }\n     \u001b[90m 106 |\u001b[39m\u001b[0m\n\n      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:57:29)\n\n  ● Update Mechanism Integration Tests › Service Updates › should check for service updates\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:137:36)\n\n  ● Update Mechanism Integration Tests › Service Updates › should handle dependency resolution\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:161:29)\n\n  ● Update Mechanism Integration Tests › Service Updates › should detect breaking changes\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:172:29)\n\n  ● Update Mechanism Integration Tests › Rollback Functionality › should fail rollback to incompatible version\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Incompatible version\"\n    Received message:   \"No backup found for version 0.1.0\"\n\n        \u001b[0m \u001b[90m 266 |\u001b[39m             \u001b[36mconst\u001b[39m backupPath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mupdateDir\u001b[33m,\u001b[39m \u001b[32m'backups'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`backup-${version}.tar.gz`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m 267 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mfileExists(backupPath)) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`No backup found for version ${version}`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 269 |\u001b[39m             }\n         \u001b[90m 270 |\u001b[39m\n         \u001b[90m 271 |\u001b[39m             \u001b[90m// Check compatibility unless forced\u001b[39m\u001b[0m\n\n      at UpdateManager.rollback (mcp-local-setup/scripts/update-manager.js:268:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:241:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:242:26)\n\n  ● Update Mechanism Integration Tests › Update Notifications › should get current update status\n\n    expect(received).toBeTruthy()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m             \n     \u001b[90m 250 |\u001b[39m             \u001b[36mif\u001b[39m (status) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mupdateId)\u001b[33m.\u001b[39mtoBeTruthy()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/downloading|ready|applying|complete|failed/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mprogress)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mprogress)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeTruthy (mcp-local-setup/tests/integration/update.integration.test.js:251:41)\n\n  ● Update Mechanism Integration Tests › Error Handling › should prevent downgrade without force flag\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Downgrade not allowed\"\n    Received message:   \"metadata is not defined\"\n\n        \u001b[0m \u001b[90m 244 |\u001b[39m                 installedAt\u001b[33m:\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m\n         \u001b[90m 245 |\u001b[39m                 installedBy\u001b[33m:\u001b[39m \u001b[32m'system'\u001b[39m\u001b[33m,\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 246 |\u001b[39m                 previousVersion\u001b[33m:\u001b[39m metadata\u001b[33m.\u001b[39mcurrentVersion\u001b[33m,\u001b[39m\n         \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 247 |\u001b[39m                 success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n         \u001b[90m 248 |\u001b[39m                 notes\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage\n         \u001b[90m 249 |\u001b[39m             })\u001b[33m;\u001b[39m\u001b[0m\n\n      at UpdateManager.metadata [as applyUpdate] (mcp-local-setup/scripts/update-manager.js:246:34)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:336:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:337:26)\n\n  ●  process.exit called with \"1\"\n\n    \u001b[0m \u001b[90m 66 |\u001b[39m     spinner\u001b[33m.\u001b[39mfail(\u001b[32m'Failed to check system health'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m     console\u001b[33m.\u001b[39merror(chalk\u001b[33m.\u001b[39mred(\u001b[32m'Error:'\u001b[39m)\u001b[33m,\u001b[39m error\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 68 |\u001b[39m     process\u001b[33m.\u001b[39mexit(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 69 |\u001b[39m   }\n     \u001b[90m 70 |\u001b[39m }\n     \u001b[90m 71 |\u001b[39m\u001b[0m\n\n      at exit (mcp-local-setup/cli/commands/health.js:68:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)\nFAIL mcp-local-setup/tests/unit/cli-commands-health.unit.test.js\n  ● Test suite failed to run\n\n    Jest worker encountered 4 child process exceptions, exceeding retry limit\n\n      at ChildProcessWorker.initialize (node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)\n\nFAIL mcp-local-setup/tests/unit/security/auth-manager.test.js\n  ● AuthManager › rotateToken › should rotate valid token\n\n    Bad \"options.expiresIn\" option the payload already has an \"exp\" property.\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m \u001b[90m     */\u001b[39m\n     \u001b[90m 219 |\u001b[39m     generateJWT(payload) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         \u001b[36mreturn\u001b[39m jwt\u001b[33m.\u001b[39msign(payload\u001b[33m,\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mjwtSecret\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             expiresIn\u001b[33m:\u001b[39m \u001b[32m'1h'\u001b[39m\n     \u001b[90m 222 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m     }\u001b[0m\n\n      at Object.<anonymous>.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)\n      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)\n      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/security/auth-manager.test.js:122:29)\n\n  ● AuthManager › rotateToken › should keep old token valid during grace period\n\n    Bad \"options.expiresIn\" option the payload already has an \"exp\" property.\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m \u001b[90m     */\u001b[39m\n     \u001b[90m 219 |\u001b[39m     generateJWT(payload) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         \u001b[36mreturn\u001b[39m jwt\u001b[33m.\u001b[39msign(payload\u001b[33m,\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mjwtSecret\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             expiresIn\u001b[33m:\u001b[39m \u001b[32m'1h'\u001b[39m\n     \u001b[90m 222 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m     }\u001b[0m\n\n      at Object.<anonymous>.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)\n      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)\n      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/security/auth-manager.test.js:131:29)\n\nPASS tests/health-monitor.test.js\nPASS mcp-local-setup/tests/integration/health-check.integration.test.js\nError response from daemon: No such image: test-node:latest\nError response from daemon: No such image: test-python:latest\nError response from daemon: No such image: test-go:latest\nFAIL tests/integration/docker/build-validation.test.js (5.181 s)\n  ● Console\n\n    console.log\n      Python Dockerfile validation errors: [\n        'Line 8: Clean apt cache after install',\n        'Line 47: Clean apt cache after install'\n      ]\n\n      at Object.log (tests/integration/docker/build-validation.test.js:97:17)\n\n  ● Docker Build Validation › Dockerfile Syntax Validation › should validate Python Dockerfile\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m  98 |\u001b[39m       }\n     \u001b[90m  99 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 100 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m     it(\u001b[32m'should validate Go Dockerfile'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (tests/integration/docker/build-validation.test.js:100:28)\n\n  ● Docker Build Validation › Build Configuration › should use build arguments for flexibility\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 206 |\u001b[39m         \u001b[36mconst\u001b[39m hasArgs \u001b[33m=\u001b[39m content\u001b[33m.\u001b[39mincludes(\u001b[32m'ARG'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 207 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 208 |\u001b[39m         expect(hasArgs)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 209 |\u001b[39m       }\n     \u001b[90m 210 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/integration/docker/build-validation.test.js:208:25)\n\n  ● Docker Build Validation › Build Configuration › should have proper labels\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m         \u001b[90m// Check for any LABEL instruction (more flexible)\u001b[39m\n     \u001b[90m 229 |\u001b[39m         \u001b[36mconst\u001b[39m hasLabels \u001b[33m=\u001b[39m content\u001b[33m.\u001b[39mmatch(\u001b[35m/LABEL\\s+\\w+=/\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m         expect(hasLabels)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m       }\n     \u001b[90m 232 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeNull (tests/integration/docker/build-validation.test.js:230:31)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Node.js image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/node.Dockerfile --label test=true -t test-node:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 253 |\u001b[39m       \n         \u001b[90m 254 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 255 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 256 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 257 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 258 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:255:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Python image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/python.Dockerfile --label test=true -t test-python:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 261 |\u001b[39m       \n         \u001b[90m 262 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 263 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 264 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 265 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 266 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:263:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Go image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/go.Dockerfile --label test=true -t test-go:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 269 |\u001b[39m       \n         \u001b[90m 270 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 272 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 273 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 274 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:271:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)\n\nPASS mcp-local-setup/tests/unit/security/tls-manager.test.js (8.35 s)\n  ● Console\n\n    console.warn\n      Let's Encrypt requires production environment. Generating self-signed certificate instead.\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m         \u001b[90m// Check if we're in production environment\u001b[39m\n     \u001b[90m 86 |\u001b[39m         \u001b[36mif\u001b[39m (process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m!==\u001b[39m \u001b[32m'production'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m             console\u001b[33m.\u001b[39mwarn(\u001b[32m'Let\\'s Encrypt requires production environment. Generating self-signed certificate instead.'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m             \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateSelfSigned(domain\u001b[33m,\u001b[39m options)\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m         }\n     \u001b[90m 90 |\u001b[39m\u001b[0m\n\n      at TLSManager.warn [as generateLetsEncrypt] (mcp-local-setup/security/tls/tls-manager.js:87:21)\n      at TLSManager.generateLetsEncrypt (mcp-local-setup/security/tls/tls-manager.js:46:25)\n      at Object.generateCertificate (mcp-local-setup/tests/unit/security/tls-manager.test.js:51:45)\n\nFAIL tests/unit/monitoring/alert-router.test.js (11.546 s)\n  ● Console\n\n    console.log\n      [ALERT] info: Test Alert {\n        id: 'alert-1753397522029-xji2bvge6',\n        timestamp: '2025-07-24T22:52:02.029Z',\n        severity: 'info',\n        title: 'Test Alert',\n        description: '',\n        source: 'unknown',\n        tags: {},\n        metadata: {},\n        dedupKey: '::Test Alert:'\n      }\n\n      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)\n\n    console.log\n      [ALERT] error: Duplicate Alert {\n        id: 'alert-1753397522060-jtwd2vvus',\n        timestamp: '2025-07-24T22:52:02.060Z',\n        severity: 'error',\n        title: 'Duplicate Alert',\n        description: '',\n        source: 'test',\n        tags: {},\n        metadata: {},\n        dedupKey: 'test:error:duplicate'\n      }\n\n      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)\n\n    console.log\n      [ALERT] warn: 1 alerts aggregated {\n        id: 'agg-1753397523069',\n        timestamp: '2025-07-24T22:52:03.069Z',\n        severity: 'warn',\n        title: '1 alerts aggregated',\n        description: '1 similar alerts in 1000ms window',\n        source: 'alert-aggregator',\n        tags: {},\n        metadata: {\n          firstSeen: '2025-07-24T22:52:02.068Z',\n          lastSeen: '2025-07-24T22:52:02.068Z',\n          count: 1\n        },\n        dedupKey: 'alert-aggregator:warn:1 alerts aggregated:',\n        alerts: [\n          {\n            id: 'alert-1753397522067-d326bh8if',\n            timestamp: '2025-07-24T22:52:02.067Z',\n            severity: 'warn',\n            title: 'Test Alert',\n            description: '',\n            source: 'test',\n            tags: {},\n            metadata: {},\n            dedupKey: 'test:warn:Test Alert:'\n          }\n        ]\n      }\n\n      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)\n\n  ● AlertRouter › alert actions › should handle action errors gracefully\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m     it(\u001b[32m'should handle action errors gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m       \u001b[36mconst\u001b[39m mockSend \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Send failed'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m       \n     \u001b[90m 295 |\u001b[39m       alertRouter\u001b[33m.\u001b[39maddChannel(\u001b[32m'failing'\u001b[39m\u001b[33m,\u001b[39m { send\u001b[33m:\u001b[39m mockSend })\u001b[33m;\u001b[39m\u001b[0m\n\n      at it (tests/unit/monitoring/alert-router.test.js:292:5)\n      at describe (tests/unit/monitoring/alert-router.test.js:224:3)\n      at Object.describe (tests/unit/monitoring/alert-router.test.js:3:1)\n\nFAIL mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js (15.451 s)\n  ● Console\n\n    console.log\n      Building Docker image for api-service\n\n      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)\n\n    console.log\n      Triggering GitHub Actions deployment for api-service to production\n\n      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)\n\n    console.log\n      Triggering GitHub Actions deployment for web to production\n\n      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)\n\n    console.log\n      Starting rollback for deployment dep-web-1753397525053, orchestrator: kubernetes, orchestratorDeploymentId: deploy-1753397525053-12tc8uvln\n\n      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:105:13)\n\n    console.log\n      No previous deployment found, created fake deployment for testing\n\n      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:125:17)\n\n    console.log\n      Rolling back web from v1 to v0\n\n      at GitHubAdapter.log [as rollback] (integrations/ci/platforms/GitHubAdapter.js:32:13)\n\n    console.log\n      Rolling back orchestration deployment deploy-1753397525053-12tc8uvln\n\n      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:138:19)\n\n    console.log\n      Running integration tests for api-service\n\n      at TestRunner.log (integrations/ci/utils/TestRunner.js:12:13)\n\n    console.log\n      Building Docker image for helm-app\n\n      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)\n\n    console.log\n      Building Docker image for swarm-service\n\n      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)\n\n    console.log\n      Triggering GitHub Actions deployment for swarm-service to production\n\n      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)\n\n  ● CI/CD and Orchestration Integration › Rollback works across CI/CD and orchestration\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"rolled-back\"\n    Received: \"Running\"\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m     \u001b[90m// Then orchestration should also rollback\u001b[39m\n     \u001b[90m  98 |\u001b[39m     \u001b[36mconst\u001b[39m k8sStatus \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m k8s\u001b[33m.\u001b[39mgetDeploymentStatus(deployment\u001b[33m.\u001b[39mdeploymentId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m     expect(k8sStatus\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'rolled-back'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m     expect(rollbackResult\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:99:30)\n\n  ● CI/CD and Orchestration Integration › CI/CD test results influence orchestration deployment\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"Tests must pass before deployment\"\n    Received string:    \"fail is not defined\"\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m         fail(\u001b[32m'Deployment should have been prevented'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         expect(error\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Tests must pass before deployment'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m       }\n     \u001b[90m 119 |\u001b[39m     }\n     \u001b[90m 120 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:117:31)\n\n  ● CI/CD and Orchestration Integration › Orchestration scaling triggers CI/CD metrics update\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 3\n\n    \u001b[0m \u001b[90m 132 |\u001b[39m     \u001b[90m// Then CI/CD should reflect the scaling\u001b[39m\n     \u001b[90m 133 |\u001b[39m     \u001b[36mconst\u001b[39m metrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m cicd\u001b[33m.\u001b[39mgetDeploymentStatus(deployment\u001b[33m.\u001b[39mdeploymentId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 134 |\u001b[39m     expect(metrics\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mreplicas)\u001b[33m.\u001b[39mtoBe(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 135 |\u001b[39m     expect(metrics\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mscalingEvents)\u001b[33m.\u001b[39mtoContainEqual(\n     \u001b[90m 136 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 137 |\u001b[39m         type\u001b[33m:\u001b[39m \u001b[32m'manual-scale'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:134:38)\n\n\n<--- Last few GCs --->\n\n[3738405:0x1bc12000]    14302 ms: Mark-Compact 4043.8 (4130.3) -> 4041.0 (4143.8) MB, pooled: 0 MB, 1226.94 / 0.00 ms  (average mu = 0.304, current mu = 0.125) allocation failure; scavenge might not succeed\n[3738405:0x1bc12000]    16698 ms: Mark-Compact 4056.7 (4143.8) -> 4051.5 (4154.3) MB, pooled: 0 MB, 2393.00 / 0.00 ms  (average mu = 0.115, current mu = 0.001) allocation failure; scavenge might not succeed\n\n\n<--- JS stacktrace --->\n\nFATAL ERROR: Reached heap limit Allocation failed - JavaScript heap out of memory\n----- Native stack trace -----\n\n\n  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"[ALERT] error: Test Error {\n      id: 'alert-1753397523171-ffj5aqj9g',\n      timestamp: '2025-07-24T22:52:03.171Z',\n      severity: 'error',\n      title: 'Test Error',\n      description: '',\n      source: 'unknown',\n      tags: {},\n      metadata: {},\n      dedupKey: ':error:Test Error:'\n    }\".\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39maddChannel(\u001b[32m'console'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 50 |\u001b[39m       send\u001b[33m:\u001b[39m \u001b[36masync\u001b[39m (alert) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m         console\u001b[33m.\u001b[39mlog(\u001b[32m`[ALERT] ${alert.severity}: ${alert.title}`\u001b[39m\u001b[33m,\u001b[39m alert)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m         \u001b[36mreturn\u001b[39m { success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 53 |\u001b[39m       }\n     \u001b[90m 54 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)\n      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)\n      at AlertRouter.send [as _sendAlert] (monitoring/errors/alert-router.js:460:38)\n      at AlertRouter._sendAlert [as _executeAction] (monitoring/errors/alert-router.js:413:27)\n      at AlertRouter._executeAction [as _executeRule] (monitoring/errors/alert-router.js:393:35)\n      at AlertRouter.route (monitoring/errors/alert-router.js:219:24)\n      at Object.<anonymous> (tests/unit/monitoring/alert-router.test.js:308:22)\n\nFAIL mcp-local-setup/tests/unit/cli/publish.test.js\n  ● Test suite failed to run\n\n    A jest worker process (pid=3738405) was terminated by another process: signal=SIGTERM, exitCode=null. Operating system logs may contain more information on why this occurred.\n\n      at ChildProcessWorker._onExit (node_modules/jest-worker/build/workers/ChildProcessWorker.js:370:23)\n\nFAIL mcp-local-setup/tests/unit/update/service-updater.unit.test.js (30.539 s)\n  ● Console\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:167:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:167:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:178:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:178:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at ServiceUpdater.updateService (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:109:17)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error (mcp-local-setup/scripts/service-updater.js:136:25)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)\n\n    console.error\n      Rollback failed: ReferenceError: installed is not defined\n          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)\n          at Object.<anonymous> (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:247:13)\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrollbackService(service\u001b[33m,\u001b[39m installed[service]\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m             } \u001b[36mcatch\u001b[39m (rollbackError) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m                 console\u001b[33m.\u001b[39merror(\u001b[32m'Rollback failed:'\u001b[39m\u001b[33m,\u001b[39m rollbackError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m             }\n     \u001b[90m 138 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m         }\u001b[0m\n\n      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:247:13)\n\n    console.log\n      Rolling back filesystem to version 1.0.0\n\n      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)\n\n    console.log\n      Rolling back filesystem to version 1.0.0\n\n      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)\n\n    console.log\n      Rolling back filesystem to version 1.0.0\n\n      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)\n\n  ● ServiceUpdater › updateService › should update service successfully\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)\n\n  ● ServiceUpdater › updateService › should allow incompatible update with force flag\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)\n\n  ● ServiceUpdater › updateService › should update dependencies first\n\n    Service dependency1 is not installed\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m             \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39minstalled[service]) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} is not installed`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m             }\n     \u001b[90m 80 |\u001b[39m\n     \u001b[90m 81 |\u001b[39m             \u001b[90m// Get update info\u001b[39m\u001b[0m\n\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:78:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n  ● ServiceUpdater › updateService › should backup service before update\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)\n\n  ● ServiceUpdater › updateService › should run migrations after update\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)\n\n  ● ServiceUpdater › updateService › should rollback on failure\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"filesystem\", \"1.0.0\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m             )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Start failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m             expect(rollbackSpy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.0.0'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:251:33)\n\n  ● ServiceUpdater › verifyService › should verify Docker service is running\n\n    expect(received).resolves.not.toThrow()\n\n    Received promise rejected instead of resolved\n    Rejected to value: [TypeError: Cannot read properties of undefined (reading 'type')]\n\n    \u001b[0m \u001b[90m 344 |\u001b[39m             execSync\u001b[33m.\u001b[39mmockReturnValue(\u001b[32m'Up 5 seconds\\n'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 345 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 346 |\u001b[39m             \u001b[36mawait\u001b[39m expect(\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 347 |\u001b[39m                 serviceUpdater\u001b[33m.\u001b[39mverifyService(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.1.0'\u001b[39m)\n     \u001b[90m 348 |\u001b[39m             )\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 349 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:346:19)\n\n  ● ServiceUpdater › verifyService › should throw if Docker service not running\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Service filesystem failed to start\"\n    Received message:   \"Cannot read properties of undefined (reading 'type')\"\n\n        \u001b[0m \u001b[90m 565 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n         \u001b[90m 566 |\u001b[39m         \n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 567 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n         \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 568 |\u001b[39m             \u001b[90m// Check Docker container is running\u001b[39m\n         \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\u001b[0m\n\n      at ServiceUpdater.type [as verifyService] (mcp-local-setup/scripts/service-updater.js:567:32)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:354:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:356:23)\n\n  ● ServiceUpdater › rollbackService › should rollback to previous version\n\n    TypeError: Cannot read properties of undefined (reading 'type')\n\n    \u001b[0m \u001b[90m 431 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 433 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 434 |\u001b[39m             execSync(\u001b[32m`docker stop mcp-${service}`\u001b[39m\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m {\n     \u001b[90m 436 |\u001b[39m             \u001b[90m// Stop local service (would need process management)\u001b[39m\u001b[0m\n\n      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)\n      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:366:13)\n\n  ● ServiceUpdater › rollbackService › should use most recent backup\n\n    TypeError: Cannot read properties of undefined (reading 'type')\n\n    \u001b[0m \u001b[90m 431 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 433 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 434 |\u001b[39m             execSync(\u001b[32m`docker stop mcp-${service}`\u001b[39m\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m {\n     \u001b[90m 436 |\u001b[39m             \u001b[90m// Stop local service (would need process management)\u001b[39m\u001b[0m\n\n      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)\n      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:374:13)\n\n  ● ServiceUpdater › runMigrations › should run applicable migrations in order\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 435 |\u001b[39m             \u001b[36mawait\u001b[39m serviceUpdater\u001b[33m.\u001b[39mrunMigrations(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.0.0'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.2.0'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 436 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 437 |\u001b[39m             expect(migration1\u001b[33m.\u001b[39mup)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 438 |\u001b[39m             expect(migration2\u001b[33m.\u001b[39mup)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 439 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 440 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:437:35)\n\nFAIL mcp-local-setup/tests/integration/service-lifecycle.integration.test.js (67.222 s)\n  ● Service Lifecycle Integration Tests › Service Start › should start a service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m       \u001b[90m// Start the service\u001b[39m\n     \u001b[90m 45 |\u001b[39m       \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m\n     \u001b[90m 48 |\u001b[39m       \u001b[90m// Mark for cleanup\u001b[39m\n     \u001b[90m 49 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${testServiceName}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:46:23)\n\n  ● Service Lifecycle Integration Tests › Service Start › should handle starting already running service\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m       \u001b[90m// Try to start again\u001b[39m\n     \u001b[90m 62 |\u001b[39m       \u001b[36mconst\u001b[39m startedAgain \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m       expect(startedAgain)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Docker compose should handle this gracefully\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m\n     \u001b[90m 66 |\u001b[39m     it(\u001b[32m'should start multiple services in order'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:63:28)\n\n  ● Service Lifecycle Integration Tests › Service Start › should start multiple services in order\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 71 |\u001b[39m         \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(service\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 73 |\u001b[39m         expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 74 |\u001b[39m         \n     \u001b[90m 75 |\u001b[39m         startTimes\u001b[33m.\u001b[39mpush({ service\u001b[33m,\u001b[39m time\u001b[33m:\u001b[39m startTime })\u001b[33m;\u001b[39m\n     \u001b[90m 76 |\u001b[39m         testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${service}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:73:25)\n\n  ● Service Lifecycle Integration Tests › Service Start › should respect environment variables when starting\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${testServiceName}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m       \n     \u001b[90m 96 |\u001b[39m       \u001b[36mdelete\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mTEST_SERVICE_PORT\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:93:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should stop a running service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 106 |\u001b[39m       \u001b[90m// Stop the service\u001b[39m\n     \u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m stopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 108 |\u001b[39m       expect(stopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 109 |\u001b[39m\n     \u001b[90m 110 |\u001b[39m       \u001b[90m// Verify service is stopped\u001b[39m\n     \u001b[90m 111 |\u001b[39m       \u001b[36mawait\u001b[39m expect(waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m5000\u001b[39m))\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:108:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should handle stopping already stopped service\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m       \u001b[90m// Try to stop a service that's not running\u001b[39m\n     \u001b[90m 116 |\u001b[39m       \u001b[36mconst\u001b[39m stopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'non-existent-service'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m       expect(stopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Docker compose returns 0 even for non-existent services\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m\n     \u001b[90m 120 |\u001b[39m     it(\u001b[32m'should stop dependent services in correct order'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:117:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should stop dependent services in correct order\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 126 |\u001b[39m       \u001b[90m// Stop API first (which depends on database)\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[36mconst\u001b[39m apiStopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'api'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 128 |\u001b[39m       expect(apiStopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n     \u001b[90m 130 |\u001b[39m       \u001b[90m// Then stop database\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \u001b[36mconst\u001b[39m dbStopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'database'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:128:26)\n\n  ● Service Lifecycle Integration Tests › Service Restart › should restart a service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 141 |\u001b[39m       \n     \u001b[90m 142 |\u001b[39m       \u001b[36mconst\u001b[39m healthyBefore \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m10000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 143 |\u001b[39m       expect(healthyBefore)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n     \u001b[90m 145 |\u001b[39m       \u001b[90m// Restart service\u001b[39m\n     \u001b[90m 146 |\u001b[39m       \u001b[36mconst\u001b[39m restarted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mPromise\u001b[39m((resolve) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:143:29)\n\n  ● Service Lifecycle Integration Tests › Service Dependencies › should start dependencies automatically\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 195 |\u001b[39m       \u001b[90m// Start only the API service\u001b[39m\n     \u001b[90m 196 |\u001b[39m       \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(apiService\u001b[33m.\u001b[39mname\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 198 |\u001b[39m       \n     \u001b[90m 199 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m'service:api-with-deps'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'service:database'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'service:cache'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:197:23)\n\n  ● Service Lifecycle Integration Tests › Service Health Monitoring › should detect when service becomes unhealthy\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m       \n     \u001b[90m 229 |\u001b[39m       \u001b[36mconst\u001b[39m initialHealth \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m10000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m       expect(initialHealth)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m\n     \u001b[90m 232 |\u001b[39m       \u001b[90m// Simulate service becoming unhealthy\u001b[39m\n     \u001b[90m 233 |\u001b[39m       \u001b[90m// (In a real scenario, you might trigger an error condition)\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:230:29)\n\n  ● Service Lifecycle Integration Tests › Service Health Monitoring › should recover from temporary failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 265 |\u001b[39m       \u001b[90m// Service should recover and become healthy again\u001b[39m\n     \u001b[90m 266 |\u001b[39m       \u001b[36mconst\u001b[39m recovered \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m30000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 267 |\u001b[39m       expect(recovered)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 268 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 269 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:267:25)\n\n  ● Service Lifecycle Integration Tests › Resource Cleanup › should remove orphaned containers\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 297 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 298 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 299 |\u001b[39m       expect(cleaned)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 300 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 302 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:299:23)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nSummary of all failing tests\nFAIL mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js\n  ● Phase 5 End-to-End Integration › Complete developer workflow from IDE to production\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Collaborative development with multiple tools\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Progressive rollout with monitoring\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Multi-cloud deployment with unified management\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\n  ● Phase 5 End-to-End Integration › Debugging production issues with integrated tools\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)\n\nFAIL tests/unit/config/settings.test.js\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid port\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 123 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 126 |\u001b[39m\n     \u001b[90m 127 |\u001b[39m     it(\u001b[32m'should fail validation with invalid log level'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:124:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid log level\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 131 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m     it(\u001b[32m'should fail validation with invalid node environment'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:132:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid node environment\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 138 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 139 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 140 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 141 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 142 |\u001b[39m\n     \u001b[90m 143 |\u001b[39m     it(\u001b[32m'should fail validation with invalid API version format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:140:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid API version format\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 147 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should fail validation with invalid max request size format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:148:10)\n\n  ● Production Settings Configuration › Configuration Validation › should fail validation with invalid max request size format\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 154 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 155 |\u001b[39m         require(\u001b[32m'../../../config/production/settings'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 156 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m\u001b[0m\n\n      at Object.toThrow (tests/unit/config/settings.test.js:156:10)\n\n  ● Production Settings Configuration › Path Configuration › should have correct absolute paths\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"config/production/../..\"\n    Received string:    \"/home/jenner/code/mcps\"\n\n    \u001b[0m \u001b[90m 164 |\u001b[39m       expect(path\u001b[33m.\u001b[39misAbsolute(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39mroot))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m       expect(path\u001b[33m.\u001b[39misAbsolute(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39m\u001b[36mpublic\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 166 |\u001b[39m       expect(settings\u001b[33m.\u001b[39mpaths\u001b[33m.\u001b[39mroot)\u001b[33m.\u001b[39mtoContain(\u001b[32m'config/production/../..'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 167 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 168 |\u001b[39m\n     \u001b[90m 169 |\u001b[39m     it(\u001b[32m'should allow overriding paths via environment variables'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toContain (tests/unit/config/settings.test.js:166:35)\n\nFAIL tests/unit/config/features.test.js\n  ● Production Feature Flags Configuration › Rollout Percentage Logic › should roughly match rollout percentage across many users\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 10\n    Received:   2.8000000000000003\n\n    \u001b[0m \u001b[90m 350 |\u001b[39m       \n     \u001b[90m 351 |\u001b[39m       \u001b[90m// Allow 15% variance due to simple hash function and sequential IDs\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 352 |\u001b[39m       expect(actualPercentage)\u001b[33m.\u001b[39mtoBeGreaterThan(rolloutPercentage \u001b[33m-\u001b[39m \u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 353 |\u001b[39m       expect(actualPercentage)\u001b[33m.\u001b[39mtoBeLessThan(rolloutPercentage \u001b[33m+\u001b[39m \u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThan (tests/unit/config/features.test.js:352:32)\n\nFAIL mcp-local-setup/tests/unit/backup/data-manager.unit.test.js\n  ● DataManager Unit Tests › exportServiceData › should export service data volumes\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m             expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m             expect(result\u001b[33m.\u001b[39mvolumes[\u001b[32m'test-service'\u001b[39m])\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m             expect(mockFs\u001b[33m.\u001b[39mmkdir)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m         it(\u001b[32m'should handle export failures'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:132:34)\n\n  ● DataManager Unit Tests › exportServiceData › should handle export failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    \u001b[0m \u001b[90m 143 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m dataManager\u001b[33m.\u001b[39mexportServiceData(services\u001b[33m,\u001b[39m exportPath)\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 145 |\u001b[39m             expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 146 |\u001b[39m             expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m             expect(result\u001b[33m.\u001b[39merrors[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mservice)\u001b[33m.\u001b[39mtoBe(\u001b[32m'failing-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 148 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:145:36)\n\n  ● DataManager Unit Tests › helper methods › should walk directory recursively\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"/test/dir/subdir/file2.txt\"\n    Received array: [\"/test/dir/file1.txt\"]\n\n    \u001b[0m \u001b[90m 447 |\u001b[39m\n     \u001b[90m 448 |\u001b[39m             expect(files)\u001b[33m.\u001b[39mtoContain(\u001b[32m'/test/dir/file1.txt'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 449 |\u001b[39m             expect(files)\u001b[33m.\u001b[39mtoContain(\u001b[32m'/test/dir/subdir/file2.txt'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 450 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 451 |\u001b[39m\n     \u001b[90m 452 |\u001b[39m         it(\u001b[32m'should match file patterns'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toContain (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:449:27)\n\nFAIL tests/integration/security/rate-limiting.test.js\n  ● Rate Limiting Integration Tests › IP-based Security Features › should detect and handle suspicious IPs\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 229 |\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[90m// Should be marked as suspicious\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 231 |\u001b[39m       expect(ipLimiter\u001b[33m.\u001b[39misSuspicious(suspiciousIP))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 232 |\u001b[39m\n     \u001b[90m 233 |\u001b[39m       \u001b[90m// Should get reduced limits\u001b[39m\n     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m limit \u001b[33m=\u001b[39m ipLimiter\u001b[33m.\u001b[39mgetRateLimitForIP(suspiciousIP\u001b[33m,\u001b[39m \u001b[32m'/api/data'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/integration/security/rate-limiting.test.js:231:52)\n\n  ● Rate Limiting Integration Tests › Rate Limit Headers and Responses › should set appropriate rate limit headers\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 100\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 99\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.063Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 281 |\u001b[39m\n     \u001b[90m 282 |\u001b[39m       \u001b[90m// Check user rate limit headers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 283 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 284 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Remaining'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m99\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'free'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:283:29)\n\n  ● Rate Limiting Integration Tests › Advanced Rate Limiting Scenarios › should handle different endpoints with different limits\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 5\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 4\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.079Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 464 |\u001b[39m       \u001b[36mawait\u001b[39m middleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 465 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo\u001b[33m.\u001b[39mresource)\u001b[33m.\u001b[39mtoBe(\u001b[32m'uploads'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 466 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Free tier upload limit\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 467 |\u001b[39m\n     \u001b[90m 468 |\u001b[39m       \u001b[90m// Test export endpoint\u001b[39m\n     \u001b[90m 469 |\u001b[39m       req\u001b[33m.\u001b[39mpath \u001b[33m=\u001b[39m \u001b[32m'/api/export'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:466:29)\n\nFAIL tests/unit/security/ip-limiter.test.js\n  ● IPRateLimiter › constructor › should accept custom options\n\n    TypeError: customLimiter.options.ipWhitelist.has is not a function\n\n    \u001b[0m \u001b[90m 34 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mtrustProxy)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 35 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mproxyDepth)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 36 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mipWhitelist\u001b[33m.\u001b[39mhas(\u001b[32m'192.168.1.1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 37 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39moptions\u001b[33m.\u001b[39mipBlacklist\u001b[33m.\u001b[39mhas(\u001b[32m'10.0.0.1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 38 |\u001b[39m       expect(customLimiter\u001b[33m.\u001b[39mlimits\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m.\u001b[39mlimit)\u001b[33m.\u001b[39mtoBe(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 39 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.has (tests/unit/security/ip-limiter.test.js:36:48)\n\nFAIL tests/unit/config/env-validation.test.js\n  ● Environment Configuration Validation › Environment Variable Types › should handle numeric environment variables correctly\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 234 |\u001b[39m         \n     \u001b[90m 235 |\u001b[39m         \u001b[36mconst\u001b[39m invalidValue \u001b[33m=\u001b[39m config\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39msplit(\u001b[32m'.'\u001b[39m)\u001b[33m.\u001b[39mreduce((obj\u001b[33m,\u001b[39m key) \u001b[33m=>\u001b[39m obj[key]\u001b[33m,\u001b[39m module)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 236 |\u001b[39m         expect(\u001b[33mNumber\u001b[39m\u001b[33m.\u001b[39misNaN(invalidValue))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// parseInt returns NaN for invalid input\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 237 |\u001b[39m         \n     \u001b[90m 238 |\u001b[39m         \u001b[36mdelete\u001b[39m process\u001b[33m.\u001b[39menv[envVar]\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m       }\u001b[0m\n\n      at Object.toBe (tests/unit/config/env-validation.test.js:236:44)\n\n  ● Environment Configuration Validation › Cross-Module Consistency › should have consistent timeout values across modules\n\n    Invalid time format: 45000\n\n    \u001b[0m \u001b[90m  8 |\u001b[39m   \u001b[36mconst\u001b[39m match \u001b[33m=\u001b[39m timeStr\u001b[33m.\u001b[39mmatch(\u001b[35m/^(\\d+)([smhd])$/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mmatch) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 10 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Invalid time format: ${timeStr}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 11 |\u001b[39m   }\n     \u001b[90m 12 |\u001b[39m   \n     \u001b[90m 13 |\u001b[39m   \u001b[36mconst\u001b[39m value \u001b[33m=\u001b[39m parseInt(match[\u001b[35m1\u001b[39m]\u001b[33m,\u001b[39m \u001b[35m10\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at parseTimeToMs (config/production/limits.js:10:11)\n      at Object.parseTimeToMs (config/production/limits.js:248:16)\n      at Object.require (tests/unit/config/env-validation.test.js:381:22)\n\nFAIL mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js\n  ● BackupManager Unit Tests › createBackup › should create a full backup\n\n    Backup creation failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 200 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Backup creation failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m         }\n     \u001b[90m 203 |\u001b[39m     }\n     \u001b[90m 204 |\u001b[39m\u001b[0m\n\n      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:112:30)\n\n  ● BackupManager Unit Tests › createBackup › should create incremental backup\n\n    Backup creation failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 200 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Backup creation failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m         }\n     \u001b[90m 203 |\u001b[39m     }\n     \u001b[90m 204 |\u001b[39m\u001b[0m\n\n      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:138:30)\n\n  ● BackupManager Unit Tests › restoreBackup › should restore a backup\n\n    Restore failed: Backup integrity check failed\n\n    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 323 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 324 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Restore failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 325 |\u001b[39m         }\n     \u001b[90m 326 |\u001b[39m     }\n     \u001b[90m 327 |\u001b[39m\u001b[0m\n\n      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:239:28)\n\n  ● BackupManager Unit Tests › restoreBackup › should handle dry run mode\n\n    Restore failed: Backup integrity check failed\n\n    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 323 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 324 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Restore failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 325 |\u001b[39m         }\n     \u001b[90m 326 |\u001b[39m     }\n     \u001b[90m 327 |\u001b[39m\u001b[0m\n\n      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:257:28)\n\n  ● BackupManager Unit Tests › cleanupBackups › should cleanup backups older than maxAge\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 5\n\n    \u001b[0m \u001b[90m 430 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 431 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 432 |\u001b[39m             expect(result\u001b[33m.\u001b[39mdeletedCount)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 433 |\u001b[39m             expect(backupManager\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mhas(\u001b[32m'backup-1'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 434 |\u001b[39m             expect(backupManager\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mhas(\u001b[32m'backup-2'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:432:41)\n\n  ● BackupManager Unit Tests › importBackup/exportBackup › should import backup from local filesystem\n\n    Import failed: require(...).createReadStream is not a function\n\n    \u001b[0m \u001b[90m 510 |\u001b[39m                 \u001b[90m// Ignore cleanup errors\u001b[39m\n     \u001b[90m 511 |\u001b[39m             }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 512 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Import failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 513 |\u001b[39m         }\n     \u001b[90m 514 |\u001b[39m     }\n     \u001b[90m 515 |\u001b[39m\u001b[0m\n\n      at BackupManager.importBackup (mcp-local-setup/scripts/backup-manager.js:512:19)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:461:30)\n\nFAIL mcp-local-setup/tests/unit/config/configuration-manager.test.js\n  ● ConfigurationManager › loadConfig › should load configuration for an environment\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m     describe(\u001b[32m'loadConfig'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 43 |\u001b[39m         it(\u001b[32m'should load configuration for an environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             \n     \u001b[90m 47 |\u001b[39m             \u001b[36mconst\u001b[39m config \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mloadConfig(\u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:44:23)\n\n  ● ConfigurationManager › loadConfig › should throw error for non-existent environment\n\n    TypeError: fs.access.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 54 |\u001b[39m         \n     \u001b[90m 55 |\u001b[39m         it(\u001b[32m'should throw error for non-existent environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 56 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 57 |\u001b[39m             \n     \u001b[90m 58 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mloadConfig(\u001b[32m'nonexistent'\u001b[39m))\n     \u001b[90m 59 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Configuration for environment 'nonexistent' not found\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:56:23)\n\n  ● ConfigurationManager › loadConfig › should include secrets when requested\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m         \n     \u001b[90m 62 |\u001b[39m         it(\u001b[32m'should include secrets when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'DB_PASSWORD.enc'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 66 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:63:23)\n\n  ● ConfigurationManager › loadConfig › should apply runtime overrides\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m         \n     \u001b[90m 77 |\u001b[39m         it(\u001b[32m'should apply runtime overrides'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 80 |\u001b[39m             \n     \u001b[90m 81 |\u001b[39m             \u001b[36mconst\u001b[39m overrides \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:78:23)\n\n  ● ConfigurationManager › loadConfig › should validate configuration when requested\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 92 |\u001b[39m         \n     \u001b[90m 93 |\u001b[39m         it(\u001b[32m'should validate configuration when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 94 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 95 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 96 |\u001b[39m             \n     \u001b[90m 97 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:94:23)\n\n  ● ConfigurationManager › saveConfig › should save configuration to file\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 177 |\u001b[39m     describe(\u001b[32m'saveConfig'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 178 |\u001b[39m         it(\u001b[32m'should save configuration to file'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 179 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 180 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m             \n     \u001b[90m 182 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39msaveConfig(mockConfig\u001b[33m,\u001b[39m \u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:179:22)\n\n  ● ConfigurationManager › saveConfig › should create backup when requested\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 195 |\u001b[39m         \n     \u001b[90m 196 |\u001b[39m         it(\u001b[32m'should create backup when requested'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 198 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockConfig))\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:197:22)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should encrypt and save secrets\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m     describe(\u001b[32m'getSecrets and setSecrets'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 219 |\u001b[39m         it(\u001b[32m'should encrypt and save secrets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m \u001b[90m// No existing metadata\u001b[39m\n     \u001b[90m 222 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:220:22)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should decrypt and retrieve secrets\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 239 |\u001b[39m         it(\u001b[32m'should decrypt and retrieve secrets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 240 |\u001b[39m             \u001b[36mconst\u001b[39m encryptedData \u001b[33m=\u001b[39m configManager\u001b[33m.\u001b[39m_encrypt(\u001b[32m'secret-value'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 241 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(encryptedData)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 242 |\u001b[39m             \n     \u001b[90m 243 |\u001b[39m             \u001b[36mconst\u001b[39m secrets \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mgetSecrets([\u001b[32m'API_KEY'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:241:25)\n\n  ● ConfigurationManager › getSecrets and setSecrets › should throw error for non-existent secret\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 247 |\u001b[39m         \n     \u001b[90m 248 |\u001b[39m         it(\u001b[32m'should throw error for non-existent secret'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m             fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 250 |\u001b[39m             \n     \u001b[90m 251 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mgetSecrets([\u001b[32m'NONEXISTENT'\u001b[39m]))\n     \u001b[90m 252 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Secret 'NONEXISTENT' not found\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:249:25)\n\n  ● ConfigurationManager › environment management › should list available environments\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 284 |\u001b[39m     describe(\u001b[32m'environment management'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 285 |\u001b[39m         it(\u001b[32m'should list available environments'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 286 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'dev.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'prod.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test.json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'README.md'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 287 |\u001b[39m             \n     \u001b[90m 288 |\u001b[39m             \u001b[36mconst\u001b[39m environments \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mlistEnvironments()\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m             \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:286:24)\n\n  ● ConfigurationManager › environment management › should create new environment\n\n    TypeError: fs.access.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 292 |\u001b[39m         \n     \u001b[90m 293 |\u001b[39m         it(\u001b[32m'should create new environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 294 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockRejectedValue({ code\u001b[33m:\u001b[39m \u001b[32m'ENOENT'\u001b[39m })\u001b[33m;\u001b[39m \u001b[90m// Doesn't exist\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 295 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m             \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:294:23)\n\n  ● ConfigurationManager › environment management › should throw error if environment already exists\n\n    TypeError: fs.access.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 311 |\u001b[39m         \n     \u001b[90m 312 |\u001b[39m         it(\u001b[32m'should throw error if environment already exists'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 313 |\u001b[39m             fs\u001b[33m.\u001b[39maccess\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m \u001b[90m// Exists\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 314 |\u001b[39m             \n     \u001b[90m 315 |\u001b[39m             \u001b[36mawait\u001b[39m expect(configManager\u001b[33m.\u001b[39mcreateEnvironment(\u001b[32m'existing'\u001b[39m))\n     \u001b[90m 316 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"Environment 'existing' already exists\"\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:313:23)\n\n  ● ConfigurationManager › environment management › should delete environment\n\n    TypeError: fs.unlink.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m         \n     \u001b[90m 319 |\u001b[39m         it(\u001b[32m'should delete environment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m             fs\u001b[33m.\u001b[39munlink\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m             fs\u001b[33m.\u001b[39mrmdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 322 |\u001b[39m             \n     \u001b[90m 323 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m configManager\u001b[33m.\u001b[39mdeleteEnvironment(\u001b[32m'test'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:320:23)\n\n  ● ConfigurationManager › import/export › should import JSON configuration\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 348 |\u001b[39m         \n     \u001b[90m 349 |\u001b[39m         it(\u001b[32m'should import JSON configuration'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 350 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 351 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 352 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 353 |\u001b[39m                 valid\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:350:22)\n\n  ● ConfigurationManager › import/export › should merge imported configuration when requested\n\n    TypeError: fs.mkdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 373 |\u001b[39m             \n     \u001b[90m 374 |\u001b[39m             configManager\u001b[33m.\u001b[39mloadConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(existingConfig)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 375 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 376 |\u001b[39m             fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 377 |\u001b[39m             configManager\u001b[33m.\u001b[39mvalidateConfig \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 378 |\u001b[39m                 valid\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:375:22)\n\nFAIL tests/integration/security/middleware-chain.test.js\n  ● Security Middleware Chain Integration › Complete Security Middleware Stack › should process request through full security stack\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m     it(\u001b[32m'should process request through full security stack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 95 |\u001b[39m       \u001b[90m// Setup middleware chain\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n     \u001b[90m 98 |\u001b[39m       app\u001b[33m.\u001b[39muse(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m 99 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:96:32)\n\n  ● Security Middleware Chain Integration › Complete Security Middleware Stack › should handle authentication failure in middleware chain\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m       \u001b[90m// Setup middleware chain with required auth\u001b[39m\n     \u001b[90m 119 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m       app\u001b[33m.\u001b[39muse(userLimiter\u001b[33m.\u001b[39mcreateMiddleware(\u001b[32m'api-calls'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m\n     \u001b[90m 123 |\u001b[39m       \u001b[90m// No authentication provided\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:120:23)\n\n  ● Security Middleware Chain Integration › Authentication Middleware Combinations › should support multiple authentication methods\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 156 |\u001b[39m       \u001b[36mconst\u001b[39m authMiddleware \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 157 |\u001b[39m         \u001b[90m// Try JWT first\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 158 |\u001b[39m         \u001b[36mconst\u001b[39m jwtMiddleware \u001b[33m=\u001b[39m jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 159 |\u001b[39m         \u001b[36mawait\u001b[39m jwtMiddleware(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {})\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\n     \u001b[90m 161 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:158:39)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:178:17)\n\n  ● Security Middleware Chain Integration › Authentication Middleware Combinations › should enforce permission requirements across auth methods\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       app\u001b[33m.\u001b[39muse(\u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 208 |\u001b[39m         \u001b[90m// Try both auth methods\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m         \u001b[36mawait\u001b[39m jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {})\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m         \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mreq\u001b[33m.\u001b[39muser) {\n     \u001b[90m 211 |\u001b[39m           \u001b[36mawait\u001b[39m apiKeyManager\u001b[33m.\u001b[39mmiddleware()(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 212 |\u001b[39m         } \u001b[36melse\u001b[39m {\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:209:23)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:221:17)\n\n  ● Security Middleware Chain Integration › CORS and Security Headers › should handle preflight requests with security headers\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 235 |\u001b[39m     it(\u001b[32m'should handle preflight requests with security headers'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 236 |\u001b[39m       \u001b[90m// Setup middleware\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 237 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 238 |\u001b[39m       app\u001b[33m.\u001b[39muse(corsMiddleware\u001b[33m.\u001b[39mhandle())\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m\n     \u001b[90m 240 |\u001b[39m       \u001b[90m// Preflight request\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:237:32)\n\n  ● Security Middleware Chain Integration › CORS and Security Headers › should apply CSP headers dynamically\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 266 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 267 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m       app\u001b[33m.\u001b[39muse(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 269 |\u001b[39m       app\u001b[33m.\u001b[39muse(dynamicCSP)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n     \u001b[90m 271 |\u001b[39m       \u001b[90m// Test admin route\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:268:32)\n\n  ● Security Middleware Chain Integration › Rate Limiting with Authentication › should apply different rate limits for authenticated vs anonymous users\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m     it(\u001b[32m'should apply different rate limits for authenticated vs anonymous users'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 286 |\u001b[39m       \u001b[90m// Setup middleware chain\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m       app\u001b[33m.\u001b[39muse(\u001b[36masync\u001b[39m (req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 289 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\n     \u001b[90m 290 |\u001b[39m           \u001b[90m// Authenticated users get user-based limits\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:287:23)\n\n  ● Security Middleware Chain Integration › Rate Limiting with Authentication › should combine IP and user rate limiting for defense in depth\n\n    TypeError: jwtAuth.middleware is not a function\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m       \u001b[90m// Setup both limiters\u001b[39m\n     \u001b[90m 319 |\u001b[39m       app\u001b[33m.\u001b[39muse(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m       app\u001b[33m.\u001b[39muse(jwtAuth\u001b[33m.\u001b[39mmiddleware({ optional\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m       app\u001b[33m.\u001b[39muse((req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 322 |\u001b[39m         \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39muser) {\n     \u001b[90m 323 |\u001b[39m           \u001b[36mconst\u001b[39m userMiddleware \u001b[33m=\u001b[39m userLimiter\u001b[33m.\u001b[39mcreateMiddleware(\u001b[32m'api-calls'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.middleware (tests/integration/security/middleware-chain.test.js:320:23)\n\n  ● Security Middleware Chain Integration › Advanced Middleware Patterns › should support conditional middleware application\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 432 |\u001b[39m         } \u001b[36melse\u001b[39m \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mstartsWith(\u001b[32m'/api'\u001b[39m)) {\n     \u001b[90m 433 |\u001b[39m           \u001b[90m// API routes - full security\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 434 |\u001b[39m           \u001b[36mreturn\u001b[39m helmetMiddleware\u001b[33m.\u001b[39mmiddleware()(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m \u001b[36mif\u001b[39m (req\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mstartsWith(\u001b[32m'/admin'\u001b[39m)) {\n     \u001b[90m 436 |\u001b[39m           \u001b[90m// Admin routes - strict security\u001b[39m\n     \u001b[90m 437 |\u001b[39m           res\u001b[33m.\u001b[39msetHeader(\u001b[32m'X-Admin-Route'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'true'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:434:35)\n      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)\n      at Object.process (tests/integration/security/middleware-chain.test.js:467:17)\n\n  ● Security Middleware Chain Integration › Advanced Middleware Patterns › should support middleware composition\n\n    TypeError: helmetMiddleware.middleware is not a function\n\n    \u001b[0m \u001b[90m 487 |\u001b[39m         }\n     \u001b[90m 488 |\u001b[39m         \u001b[36mif\u001b[39m (options\u001b[33m.\u001b[39mhelmet) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 489 |\u001b[39m           middlewares\u001b[33m.\u001b[39mpush(helmetMiddleware\u001b[33m.\u001b[39mmiddleware())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 490 |\u001b[39m         }\n     \u001b[90m 491 |\u001b[39m         \u001b[36mif\u001b[39m (options\u001b[33m.\u001b[39mrateLimit) {\n     \u001b[90m 492 |\u001b[39m           middlewares\u001b[33m.\u001b[39mpush(ipLimiter\u001b[33m.\u001b[39mcreateMiddleware())\u001b[33m;\u001b[39m\u001b[0m\n\n      at middleware (tests/integration/security/middleware-chain.test.js:489:45)\n      at Object.securityMiddleware (tests/integration/security/middleware-chain.test.js:512:15)\n\nFAIL mcp-local-setup/tests/unit/config/secret-manager.test.js\n  ● SecretManager › backupSecrets › should create backup of secrets directory\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 211 |\u001b[39m         it(\u001b[32m'should create backup of secrets directory'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 212 |\u001b[39m             \u001b[36mconst\u001b[39m mockFiles \u001b[33m=\u001b[39m [\u001b[32m'secret1.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'secret2.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'_metadata.json'\u001b[39m]\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 213 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue(mockFiles)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 214 |\u001b[39m             fs\u001b[33m.\u001b[39mstat\u001b[33m.\u001b[39mmockResolvedValue({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 215 |\u001b[39m             fs\u001b[33m.\u001b[39mmkdir\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 216 |\u001b[39m             fs\u001b[33m.\u001b[39mcopyFile\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:213:24)\n\n  ● SecretManager › backupSecrets › should skip directories when backing up\n\n    TypeError: fs.readdir.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 226 |\u001b[39m         \n     \u001b[90m 227 |\u001b[39m         it(\u001b[32m'should skip directories when backing up'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 228 |\u001b[39m             fs\u001b[33m.\u001b[39mreaddir\u001b[33m.\u001b[39mmockResolvedValue([\u001b[32m'file.enc'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'subdir'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 229 |\u001b[39m             fs\u001b[33m.\u001b[39mstat\n     \u001b[90m 230 |\u001b[39m                 \u001b[33m.\u001b[39mmockResolvedValueOnce({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m })\n     \u001b[90m 231 |\u001b[39m                 \u001b[33m.\u001b[39mmockResolvedValueOnce({ isFile\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:228:24)\n\nFAIL tests/unit/security/user-limiter.test.js\n  ● UserRateLimiter › createMiddleware › should create middleware that allows requests\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"X-RateLimit-Limit\", 100\n    Received\n           1: \"X-RateLimit-Limit\", undefined\n           2: \"X-RateLimit-Remaining\", 99\n           3: \"X-RateLimit-Reset\", \"2025-07-24T23:52:02.073Z\"\n\n    Number of calls: 4\n\n    \u001b[0m \u001b[90m 484 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 485 |\u001b[39m       expect(req\u001b[33m.\u001b[39mrateLimitInfo\u001b[33m.\u001b[39mresource)\u001b[33m.\u001b[39mtoBe(\u001b[32m'api-calls'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 486 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Limit'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 487 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Remaining'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m99\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 488 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'X-RateLimit-Tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'free'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 489 |\u001b[39m       expect(next)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/user-limiter.test.js:486:29)\n\n  ● UserRateLimiter › cleanup › should handle unlimited tier in cleanup\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 752 |\u001b[39m       \n     \u001b[90m 753 |\u001b[39m       \u001b[90m// Should still exist as enterprise has unlimited (-1) limit\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 754 |\u001b[39m       expect(userLimiter\u001b[33m.\u001b[39mmemoryStore\u001b[33m.\u001b[39mhas(\u001b[32m'user-ratelimit:enterprise-user:api-calls'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 755 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 756 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 757 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/unit/security/user-limiter.test.js:754:87)\n\nFAIL mcp-local-setup/tests/integration/configuration.integration.test.js\n  ● Configuration Management Integration Tests › Environment Configuration › should create new environment\n\n    Schema version '1.0.0' not found\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m             }\n     \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:160:13)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should load environment configuration\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:167:34)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should apply runtime overrides\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:191:34)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should list all environments\n\n    Schema version '1.0.0' not found\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m             }\n     \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:203:13)\n\n  ● Configuration Management Integration Tests › Environment Configuration › should get configuration metadata\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.getConfigMetadata (mcp-local-setup/config/advanced/configuration-manager.js:367:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:215:30)\n\n  ● Configuration Management Integration Tests › Configuration Validation › should detect validation errors\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 256 |\u001b[39m             \n     \u001b[90m 257 |\u001b[39m             \u001b[36mconst\u001b[39m nameError \u001b[33m=\u001b[39m result\u001b[33m.\u001b[39merrors\u001b[33m.\u001b[39mfind(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mpath\u001b[33m.\u001b[39mincludes(\u001b[32m'name'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 258 |\u001b[39m             expect(nameError)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 259 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n     \u001b[90m 261 |\u001b[39m         it(\u001b[32m'should provide validation warnings'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeDefined (mcp-local-setup/tests/integration/configuration.integration.test.js:258:31)\n\n  ● Configuration Management Integration Tests › Secret Management › should list secret metadata without values\n\n    expect(received).toBeInstanceOf(expected)\n\n    Expected constructor: Date\n\n    Received value has no prototype\n    Received value: \"2025-07-24T22:52:02.012Z\"\n\n    \u001b[0m \u001b[90m 318 |\u001b[39m             expect(testSecret)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 319 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mdescription)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 320 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mcreatedAt)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mDate\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 321 |\u001b[39m             expect(testSecret\u001b[33m.\u001b[39mvalue)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m \u001b[90m// Should not expose value\u001b[39m\n     \u001b[90m 322 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 323 |\u001b[39m\u001b[0m\n\n      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/configuration.integration.test.js:320:42)\n\n  ● Configuration Management Integration Tests › Secret Management › should load config with secrets\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:344:39)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should export configuration as JSON\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:395:30)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should throw error for unsupported YAML format\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"YAML export not yet implemented\"\n    Received message:   \"Configuration for environment 'test-integration' not found\"\n\n        \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 70 |\u001b[39m             }\n         \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n         \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:407:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:410:25)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should export configuration as env file\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:414:30)\n\n  ● Configuration Management Integration Tests › Configuration Import/Export › should merge imported configuration\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:449:36)\n\n  ● Configuration Management Integration Tests › Configuration Persistence › should save configuration changes\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:470:36)\n\n  ● Configuration Management Integration Tests › Configuration Persistence › should rollback on save failure\n\n    Configuration for environment 'test-integration' not found\n\n    \u001b[0m \u001b[90m 67 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 68 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 69 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Configuration for environment '${environment}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 70 |\u001b[39m             }\n     \u001b[90m 71 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:502:31)\n\n  ● Configuration Management Integration Tests › Error Handling › should prevent duplicate environment creation\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Environment already exists\"\n    Received message:   \"Schema version '1.0.0' not found\"\n\n        \u001b[0m \u001b[90m 276 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 277 |\u001b[39m             \u001b[36mif\u001b[39m (error\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[32m'ENOENT'\u001b[39m) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Schema version '${version}' not found`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 279 |\u001b[39m             }\n         \u001b[90m 280 |\u001b[39m             \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\n         \u001b[90m 281 |\u001b[39m         }\u001b[0m\n\n      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)\n      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)\n      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)\n      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/configuration.integration.test.js:538:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:539:26)\n\nFAIL tests/unit/security/redis-limiter.test.js\n  ● RedisRateLimiter › checkLimit › should calculate correct reset time from oldest entry\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1753399322093\n    Received: NaN\n\n    \u001b[0m \u001b[90m 162 |\u001b[39m       \n     \u001b[90m 163 |\u001b[39m       \u001b[36mconst\u001b[39m expectedReset \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(oldestTime \u001b[33m+\u001b[39m \u001b[35m3600000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(result\u001b[33m.\u001b[39mresetAt\u001b[33m.\u001b[39mgetTime())\u001b[33m.\u001b[39mtoBe(expectedReset\u001b[33m.\u001b[39mgetTime())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 165 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m\n     \u001b[90m 167 |\u001b[39m     it(\u001b[32m'should fail open on Redis errors'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (tests/unit/security/redis-limiter.test.js:164:40)\n\n  ● RedisRateLimiter › createMiddleware › should block requests exceeding limit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n      Object {\n    -   \"blocked\": false,\n    +   \"blocked\": undefined,\n        \"error\": \"Too many requests\",\n    -   \"retryAfter\": Any<Date>,\n    +   \"retryAfter\": 2025-07-24T23:52:02.158Z,\n      },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 435 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Retry-After'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 436 |\u001b[39m       expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m429\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 437 |\u001b[39m       expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 438 |\u001b[39m         error\u001b[33m:\u001b[39m \u001b[32m'Too many requests'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 439 |\u001b[39m         retryAfter\u001b[33m:\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mDate\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 440 |\u001b[39m         blocked\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/redis-limiter.test.js:437:24)\n\nFAIL mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js\n  ● Service Mesh and Orchestration Integration › Services deployed to K8s are automatically registered in mesh\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Traffic management policies apply to orchestrated services\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Service mesh mTLS works with orchestrator networking\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › SDK can query services through mesh-enabled endpoints\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Circuit breaker policies protect orchestrated services\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Service mesh observability integrates with orchestrator metrics\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Canary deployments use both orchestration and mesh\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\n  ● Service Mesh and Orchestration Integration › Fault injection tests orchestrated service resilience\n\n    Not implemented - Service Mesh team will implement\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m   constructor(meshType) {\n     \u001b[90m  7 |\u001b[39m     \u001b[90m// meshType: 'istio' | 'linkerd' | 'consul'\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - Service Mesh team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   }\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m   \u001b[90m// Service registration\u001b[39m\u001b[0m\n\n      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)\n\nFAIL tests/integration/phase6/security-health-integration.test.js\n  ● Security and Health Monitoring Integration › API authentication integrates with health status\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"authentication\"\n    Received path: []\n\n    Expected value: \"enabled\"\n    Received value: {\"lastCheck\": null, \"message\": \"Not checked yet\", \"status\": \"pending\"}\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m     \u001b[90m// Then health should include auth status\u001b[39m\n     \u001b[90m 71 |\u001b[39m     expect(health\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m     expect(health\u001b[33m.\u001b[39mdetails)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'authentication'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'enabled'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 74 |\u001b[39m\n     \u001b[90m 75 |\u001b[39m   test(\u001b[32m'Service dependencies include security components'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveProperty (tests/integration/phase6/security-health-integration.test.js:72:28)\n\nFAIL tests/integration/monitoring/logging-pipeline.test.js\n  ● Logging Pipeline Integration › End-to-End Logging › should log messages through the complete pipeline\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › End-to-End Logging › should apply formatters correctly\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › End-to-End Logging › should handle high-volume logging\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should rotate logs based on size\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should compress rotated files\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Log Rotation Integration › should clean up old logs\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Error Handling › should handle logging errors gracefully\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Error Handling › should continue logging after transport failure\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Context and Correlation › should maintain correlation IDs across log entries\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Context and Correlation › should preserve context through async operations\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Performance Monitoring › should log performance metrics\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\n  ● Logging Pipeline Integration › Multi-transport Scenarios › should route logs to appropriate transports based on level\n\n    TypeError: logRotation.initialize is not a function\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logRotation\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m     logger \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mLogger\u001b[39m({\n     \u001b[90m 37 |\u001b[39m       winstonConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)\n\nFAIL tests/unit/security/helmet-middleware.test.js\n  ● HelmetMiddleware › CSP Report Handler › should handle errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 500\n    Received: 400\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 153 |\u001b[39m       handler(req\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 155 |\u001b[39m       expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 156 |\u001b[39m       expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({ error\u001b[33m:\u001b[39m \u001b[32m'Failed to process CSP report'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:155:26)\n\n  ● HelmetMiddleware › createNonceMiddleware › should modify CSP header to include nonce\n\n    expect(received).toHaveBeenCalledWith(...expected)\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function anonymous]\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m       res\u001b[33m.\u001b[39msetHeader(\u001b[32m'Content-Security-Policy'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m\"script-src 'self'\"\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m         \u001b[32m'Content-Security-Policy'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 334 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m`'nonce-${res.locals.nonce}'`\u001b[39m)\n     \u001b[90m 335 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:332:29)\n\nFAIL tests/unit/security/cors.test.js\n  ● CORSMiddleware › handlePreflight › should handle wildcard origin without credentials in preflight\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Access-Control-Allow-Origin\", \"*\"\n    Received\n           1: \"Access-Control-Allow-Origin\", \"https://example.com\"\n           2: \"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-API-Key\"\n           3: \"Access-Control-Max-Age\", \"86400\"\n\n    Number of calls: 3\n\n    \u001b[0m \u001b[90m 276 |\u001b[39m       corsMiddleware\u001b[33m.\u001b[39mhandlePreflight(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 277 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 278 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Origin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'*'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 279 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Credentials'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'true'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 280 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:278:29)\n\n  ● CORSMiddleware › Edge cases › should handle malformed request headers gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-API-Key\"\n    Received\n           1: \"Access-Control-Allow-Origin\", \"https://example.com\"\n           2: \"Access-Control-Allow-Credentials\", \"true\"\n           3: \"Access-Control-Max-Age\", \"86400\"\n\n    Number of calls: 3\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m       corsMiddleware\u001b[33m.\u001b[39mhandlePreflight(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(res\u001b[33m.\u001b[39msetHeader)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Access-Control-Allow-Headers'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Content-Type, Authorization, X-API-Key'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m\n     \u001b[90m 330 |\u001b[39m     it(\u001b[32m'should handle mixed origin configurations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:327:29)\n\nFAIL tests/security/auth-bypass.test.js\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent JWT signature stripping\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent JWT algorithm confusion attacks\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent weak secret key attacks\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent token replay attacks with expired tokens\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › JWT Authentication Bypass Attempts › should prevent privilege escalation via token manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent brute force API key guessing\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent API key format manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent permission escalation via API keys\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › API Key Authentication Bypass Attempts › should prevent API key reuse after revocation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent refresh token reuse after rotation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent cross-user token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Token Refresh Authentication Bypass › should prevent infinite token refresh chains\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth state parameter bypass\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth token injection\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › OAuth Authentication Bypass › should prevent OAuth redirect URI manipulation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Session Fixation Prevention › should regenerate session ID on authentication\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Race Conditions › should handle concurrent authentication attempts safely\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Race Conditions › should prevent race condition in API key validation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Downgrade Attacks › should prevent downgrade from strong to weak authentication\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\n  ● Security Vulnerability Tests - Authentication Bypass › Authentication Context Validation › should validate authentication context consistency\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 22 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 24 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 25 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 26 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 27 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/security/auth-bypass.test.js:24:20)\n\nFAIL tests/integration/monitoring/metrics-collection.test.js\n  ● Metrics Collection Integration › HTTP Metrics Collection › should collect HTTP request metrics\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m       \n     \u001b[90m 80 |\u001b[39m       \u001b[90m// Make multiple requests\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/test'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/test'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 83 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39mpost(\u001b[32m'/api/users'\u001b[39m)\u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Test'\u001b[39m })\u001b[33m.\u001b[39mexpect(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m       \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/error'\u001b[39m)\u001b[33m.\u001b[39mexpect(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.expect (tests/integration/monitoring/metrics-collection.test.js:81:39)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Metrics Collection Integration › HTTP Metrics Collection › should track request sizes\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Business Metrics Collection › should collect business events\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Business Metrics Collection › should track API usage metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Database Metrics Collection › should collect database operation metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Database Metrics Collection › should track connection pool metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Cache Metrics Collection › should collect cache operation metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Custom Metrics › should allow custom metric definitions\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › System Metrics › should collect system resource metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metric Aggregation › should aggregate metrics across multiple sources\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metrics Export Formats › should export metrics in Prometheus format\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Metrics Export Formats › should export metrics as JSON\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Real-time Monitoring › should provide real-time metric updates\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\n  ● Metrics Collection Integration › Real-time Monitoring › should handle metric resets\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/integration/monitoring/metrics-collection.test.js:24:21)\n\nFAIL mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js\n  ● IDE Extension and SDK Integration › IDE extension initializes with SDK instance\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Code completion suggests available MCP services\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Hover info shows service documentation from SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Diagnostics validate service configurations against SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Service panel shows real-time health from SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Debugging integration uses SDK service endpoints\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\n  ● IDE Extension and SDK Integration › Code actions can install missing services via SDK\n\n    Not implemented - SDK team will implement\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m {\n     \u001b[90m  6 |\u001b[39m   constructor(config) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m     \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Not implemented - SDK team will implement'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   }\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[90m// Authentication methods\u001b[39m\u001b[0m\n\n      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)\n\nFAIL mcp-local-setup/tests/unit/community/features.test.js\n  ● CommunityFeatures › rateService › should track analytics event\n\n    TypeError: Cannot read properties of undefined (reading 'events')\n\n    \u001b[0m \u001b[90m 170 |\u001b[39m       expect(analyticsCall)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m analyticsData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(analyticsCall[\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 172 |\u001b[39m       expect(analyticsData[\u001b[32m'service-1'\u001b[39m]\u001b[33m.\u001b[39mevents)\u001b[33m.\u001b[39mtoContainEqual(\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 173 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 174 |\u001b[39m           type\u001b[33m:\u001b[39m \u001b[32m'rating'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 175 |\u001b[39m           userId\u001b[33m:\u001b[39m \u001b[32m'user-5'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.events (mcp-local-setup/tests/unit/community/features.test.js:172:41)\n\n  ● CommunityFeatures › private methods › should calculate week number correctly\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 50\n    Received:   1\n\n    \u001b[0m \u001b[90m 360 |\u001b[39m       \n     \u001b[90m 361 |\u001b[39m       expect(week1)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 362 |\u001b[39m       expect(week2)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 363 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 364 |\u001b[39m\n     \u001b[90m 365 |\u001b[39m     it(\u001b[32m'should calculate engagement score'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeGreaterThan (mcp-local-setup/tests/unit/community/features.test.js:362:21)\n\n  ● CommunityFeatures › private methods › should calculate growth rate\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 25\n    Received: 0\n\n    \u001b[0m \u001b[90m 386 |\u001b[39m\n     \u001b[90m 387 |\u001b[39m       \u001b[36mconst\u001b[39m growthRate \u001b[33m=\u001b[39m community\u001b[33m.\u001b[39m_calculateGrowthRate(analytics)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 388 |\u001b[39m       expect(growthRate)\u001b[33m.\u001b[39mtoBe(\u001b[35m25\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 25% growth\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 389 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 390 |\u001b[39m\n     \u001b[90m 391 |\u001b[39m     it(\u001b[32m'should handle zero previous downloads in growth rate'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/unit/community/features.test.js:388:26)\n\nFAIL mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js\n  ● Marketplace + Enterprise Integration › Tenant-based Service Access › should restrict marketplace access based on tenant permissions\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 35 |\u001b[39m     test(\u001b[32m'should restrict marketplace access based on tenant permissions'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 36 |\u001b[39m       \u001b[90m// Create test tenants\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 37 |\u001b[39m       \u001b[36mconst\u001b[39m enterpriseTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m    |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 38 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Enterprise Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 39 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 40 |\u001b[39m         features\u001b[33m:\u001b[39m [\u001b[32m'unlimited-services'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'private-marketplace'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:37:52)\n\n  ● Marketplace + Enterprise Integration › Tenant-based Service Access › should enforce tenant quotas on service installation\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m\n     \u001b[90m 71 |\u001b[39m     test(\u001b[32m'should enforce tenant quotas on service installation'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Limited Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 74 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'basic'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 75 |\u001b[39m         quotas\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:72:42)\n\n  ● Marketplace + Enterprise Integration › Marketplace Publishing with Multi-tenancy › should allow tenants to publish private services\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m   describe(\u001b[32m'Marketplace Publishing with Multi-tenancy'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 101 |\u001b[39m     test(\u001b[32m'should allow tenants to publish private services'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Service Provider Inc'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 104 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 105 |\u001b[39m         features\u001b[33m:\u001b[39m [\u001b[32m'marketplace-publisher'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:102:42)\n\n  ● Marketplace + Enterprise Integration › Marketplace Publishing with Multi-tenancy › should track marketplace revenue per tenant\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m     test(\u001b[32m'should track marketplace revenue per tenant'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m publisherTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'SaaS Provider'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 141 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\n     \u001b[90m 142 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:139:51)\n\n  ● Marketplace + Enterprise Integration › SSO + Marketplace Integration › should use SSO for marketplace authentication\n\n    Invalid authentication request\n\n    \u001b[0m \u001b[90m 213 |\u001b[39m   \u001b[36masync\u001b[39m authenticate(credentials\u001b[33m,\u001b[39m provider) {\n     \u001b[90m 214 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mcredentials \u001b[33m||\u001b[39m \u001b[33m!\u001b[39mprovider) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 215 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Invalid authentication request'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 216 |\u001b[39m     }\n     \u001b[90m 217 |\u001b[39m\n     \u001b[90m 218 |\u001b[39m     \u001b[36mconst\u001b[39m providerConfig \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39m_getProvider(provider)\u001b[33m;\u001b[39m\u001b[0m\n\n      at SSOAuthentication.authenticate (mcp-local-setup/enterprise/sso/authentication.js:215:13)\n      at Object.authenticate (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:184:40)\n\n  ● Marketplace + Enterprise Integration › SSO + Marketplace Integration › should map SSO roles to marketplace permissions\n\n    TypeError: ssoAuth.configureRoleMapping is not a function\n\n    \u001b[0m \u001b[90m 205 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 206 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 207 |\u001b[39m       \u001b[36mawait\u001b[39m ssoAuth\u001b[33m.\u001b[39mconfigureRoleMapping(roleMapping)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 208 |\u001b[39m\n     \u001b[90m 209 |\u001b[39m       \u001b[90m// Test different role access\u001b[39m\n     \u001b[90m 210 |\u001b[39m       \u001b[36mconst\u001b[39m adminUser \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m ssoAuth\u001b[33m.\u001b[39mauthenticate({\u001b[0m\n\n      at Object.configureRoleMapping (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:207:21)\n\n  ● Marketplace + Enterprise Integration › Compliance in Marketplace Operations › should audit all marketplace transactions\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 230 |\u001b[39m   describe(\u001b[32m'Compliance in Marketplace Operations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 231 |\u001b[39m     test(\u001b[32m'should audit all marketplace transactions'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 233 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Regulated Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 234 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 235 |\u001b[39m         compliance\u001b[33m:\u001b[39m [\u001b[32m'SOC2'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'HIPAA'\u001b[39m]\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:232:42)\n\n  ● Marketplace + Enterprise Integration › Compliance in Marketplace Operations › should enforce data residency for marketplace data\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m\n     \u001b[90m 297 |\u001b[39m     test(\u001b[32m'should enforce data residency for marketplace data'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       \u001b[36mconst\u001b[39m euTenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'EU Company'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 300 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 301 |\u001b[39m         dataResidency\u001b[33m:\u001b[39m \u001b[32m'eu-west-1'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:298:44)\n\n  ● Marketplace + Enterprise Integration › Community Features with Enterprise Controls › should moderate reviews based on tenant policies\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 333 |\u001b[39m   describe(\u001b[32m'Community Features with Enterprise Controls'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 334 |\u001b[39m     test(\u001b[32m'should moderate reviews based on tenant policies'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 335 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 336 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Strict Corp'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 337 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 338 |\u001b[39m         policies\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:335:42)\n\n  ● Marketplace + Enterprise Integration › Community Features with Enterprise Controls › should aggregate analytics per tenant\n\n    TypeError: communityFeatures.trackUsage is not a function\n\n    \u001b[0m \u001b[90m 374 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m tenantId \u001b[36mof\u001b[39m tenants) {\n     \u001b[90m 375 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mlet\u001b[39m i \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m i \u001b[33m<\u001b[39m \u001b[35m10\u001b[39m\u001b[33m;\u001b[39m i\u001b[33m++\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 376 |\u001b[39m           \u001b[36mawait\u001b[39m communityFeatures\u001b[33m.\u001b[39mtrackUsage({\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 377 |\u001b[39m             tenantId\u001b[33m,\u001b[39m\n     \u001b[90m 378 |\u001b[39m             serviceId\u001b[33m:\u001b[39m \u001b[32m'popular-service'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 379 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'api_call'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.trackUsage (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:376:35)\n\n  ● Marketplace + Enterprise Integration › Billing Integration › should handle marketplace billing through tenant billing system\n\n    TypeError: tenantManager.createTenant is not a function\n\n    \u001b[0m \u001b[90m 405 |\u001b[39m   describe(\u001b[32m'Billing Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 406 |\u001b[39m     test(\u001b[32m'should handle marketplace billing through tenant billing system'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 407 |\u001b[39m       \u001b[36mconst\u001b[39m tenant \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tenantManager\u001b[33m.\u001b[39mcreateTenant({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 408 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Paying Customer'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 409 |\u001b[39m         plan\u001b[33m:\u001b[39m \u001b[32m'enterprise'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 410 |\u001b[39m         billing\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:407:42)\n\nFAIL tests/integration/security/auth-flow.test.js\n  ● Security Authentication Flow Integration › Complete JWT Authentication Flow › should handle full JWT login and refresh flow\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Complete JWT Authentication Flow › should handle token expiration and renewal\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › OAuth Integration Flow › should handle complete OAuth flow with Google\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › OAuth Integration Flow › should handle OAuth errors gracefully\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › API Key Authentication Flow › should handle API key generation and validation flow\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Multi-Auth Strategy Flow › should handle multiple authentication methods in sequence\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Security Token Rotation › should handle secure token rotation\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Permission-based Access Control › should enforce permission-based access with API keys\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Permission-based Access Control › should handle JWT permissions\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Session Management Integration › should handle session lifecycle with token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Error Handling and Recovery › should handle authentication failures gracefully\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\n  ● Security Authentication Flow Integration › Error Handling and Recovery › should handle Redis failures in token refresh\n\n    TypeError: TokenRefresh is not a constructor\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m     tokenRefresh \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mTokenRefresh\u001b[39m({\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m       redis\u001b[33m:\u001b[39m mockRedisClient\u001b[33m,\u001b[39m\n     \u001b[90m 28 |\u001b[39m       accessTokenExpiry\u001b[33m:\u001b[39m \u001b[35m3600\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 29 |\u001b[39m       refreshTokenExpiry\u001b[33m:\u001b[39m \u001b[35m2592000\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/security/auth-flow.test.js:26:20)\n\nFAIL mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js\n  ● RegistryManager › loadCatalog › should load and parse catalog successfully\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 52 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockCatalog))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       \n     \u001b[90m 55 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 56 |\u001b[39m       \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:53:19)\n\n  ● RegistryManager › loadCatalog › should handle catalog file not found\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 60 |\u001b[39m\n     \u001b[90m 61 |\u001b[39m     it(\u001b[32m'should handle catalog file not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 62 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'ENOENT: no such file'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 63 |\u001b[39m       \n     \u001b[90m 64 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m       \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:62:19)\n\n  ● RegistryManager › loadCatalog › should handle invalid JSON in catalog\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 72 |\u001b[39m\n     \u001b[90m 73 |\u001b[39m     it(\u001b[32m'should handle invalid JSON in catalog'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 74 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'invalid json{'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 75 |\u001b[39m       \n     \u001b[90m 76 |\u001b[39m       \u001b[36mconst\u001b[39m catalog \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadCatalog()\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m       \u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:74:19)\n\n  ● RegistryManager › loadProfile › should load default profile\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'mocked yaml content'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m       yaml\u001b[33m.\u001b[39mload\u001b[33m.\u001b[39mmockReturnValue(mockProfile)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m       \n     \u001b[90m 96 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:93:19)\n\n  ● RegistryManager › loadProfile › should load specified profile\n\n    TypeError: fs.readFile.mockResolvedValue is not a function\n\n    \u001b[0m \u001b[90m 109 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 110 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 111 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'mocked yaml content'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 112 |\u001b[39m       yaml\u001b[33m.\u001b[39mload\u001b[33m.\u001b[39mmockReturnValue(mockProfile)\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m       \n     \u001b[90m 114 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile(\u001b[32m'development'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:111:19)\n\n  ● RegistryManager › loadProfile › should handle profile not found\n\n    TypeError: fs.readFile.mockRejectedValue is not a function\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m\n     \u001b[90m 123 |\u001b[39m     it(\u001b[32m'should handle profile not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       fs\u001b[33m.\u001b[39mreadFile\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'ENOENT'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m       \n     \u001b[90m 126 |\u001b[39m       \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mloadProfile(\u001b[32m'missing'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[0m\n\n      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:124:19)\n\n  ● RegistryManager › generateDockerCompose › should generate docker-compose configuration\n\n    TypeError: Cannot read properties of undefined (reading 'find')\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m serviceId \u001b[36mof\u001b[39m enabledServices) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             \u001b[36mconst\u001b[39m server \u001b[33m=\u001b[39m catalog\u001b[33m.\u001b[39mservers\u001b[33m.\u001b[39mfind(s \u001b[33m=>\u001b[39m s\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m serviceId)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mserver) {\n     \u001b[90m 86 |\u001b[39m                 console\u001b[33m.\u001b[39mwarn(\u001b[32m`Service ${serviceId} not found in catalog`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m                 \u001b[36mcontinue\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:174:7)\n\n  ● RegistryManager › generateDockerCompose › should filter services based on profile\n\n    TypeError: Cannot read properties of undefined (reading 'find')\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m serviceId \u001b[36mof\u001b[39m enabledServices) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             \u001b[36mconst\u001b[39m server \u001b[33m=\u001b[39m catalog\u001b[33m.\u001b[39mservers\u001b[33m.\u001b[39mfind(s \u001b[33m=>\u001b[39m s\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m serviceId)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mserver) {\n     \u001b[90m 86 |\u001b[39m                 console\u001b[33m.\u001b[39mwarn(\u001b[32m`Service ${serviceId} not found in catalog`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m                 \u001b[36mcontinue\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:225:7)\n\n  ● RegistryManager › updateService › should update service in catalog\n\n    TypeError: registryManager.updateService is not a function\n\n    \u001b[0m \u001b[90m 251 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 253 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mupdateService(updatedService)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 254 |\u001b[39m\n     \u001b[90m 255 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mwriteFile)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m 256 |\u001b[39m         registryManager\u001b[33m.\u001b[39mcatalogPath\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:253:29)\n\n  ● RegistryManager › updateService › should add new service to catalog\n\n    TypeError: registryManager.updateService is not a function\n\n    \u001b[0m \u001b[90m 272 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 274 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mupdateService(newService)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 275 |\u001b[39m\n     \u001b[90m 276 |\u001b[39m       \u001b[36mconst\u001b[39m writtenData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 277 |\u001b[39m       expect(writtenData\u001b[33m.\u001b[39mservices[\u001b[32m'new-service'\u001b[39m])\u001b[33m.\u001b[39mtoEqual(newService)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:274:29)\n\n  ● RegistryManager › removeService › should remove service from catalog\n\n    TypeError: registryManager.removeService is not a function\n\n    \u001b[0m \u001b[90m 291 |\u001b[39m       fs\u001b[33m.\u001b[39mwriteFile \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 292 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 293 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mremoveService(\u001b[32m'service1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 294 |\u001b[39m\n     \u001b[90m 295 |\u001b[39m       \u001b[36mconst\u001b[39m writtenData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(fs\u001b[33m.\u001b[39mwriteFile\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m       expect(writtenData\u001b[33m.\u001b[39mservices\u001b[33m.\u001b[39mservice1)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:293:29)\n\n  ● RegistryManager › removeService › should handle removing non-existent service\n\n    TypeError: registryManager.removeService is not a function\n\n    \u001b[0m \u001b[90m 306 |\u001b[39m       fs\u001b[33m.\u001b[39mwriteFile \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 307 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 308 |\u001b[39m       \u001b[36mawait\u001b[39m registryManager\u001b[33m.\u001b[39mremoveService(\u001b[32m'non-existent'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 309 |\u001b[39m\n     \u001b[90m 310 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mwriteFile)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 311 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:308:29)\n\n  ● RegistryManager › validateCatalog › should validate catalog structure\n\n    TypeError: registryManager.validateCatalog is not a function\n\n    \u001b[0m \u001b[90m 327 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 328 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 329 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m registryManager\u001b[33m.\u001b[39mvalidateCatalog(validCatalog)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 330 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 331 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:329:38)\n\n  ● RegistryManager › validateCatalog › should detect missing required fields\n\n    TypeError: registryManager.validateCatalog is not a function\n\n    \u001b[0m \u001b[90m 342 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 344 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m registryManager\u001b[33m.\u001b[39mvalidateCatalog(invalidCatalog)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 345 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 346 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Service service1 missing required field: name'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 347 |\u001b[39m       expect(result\u001b[33m.\u001b[39merrors)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Service service1 missing required field: version'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:344:38)\n\nFAIL tests/unit/monitoring/logging/formatters.test.js\n  ● LogFormatters › jsonFormat › should format logs as JSON\n\n    TypeError: LogFormatters.jsonFormat is not a function\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m   describe(\u001b[32m'jsonFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 80 |\u001b[39m     it(\u001b[32m'should format logs as JSON'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mjsonFormat()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:81:39)\n\n  ● LogFormatters › jsonFormat › should handle errors in JSON format\n\n    TypeError: LogFormatters.jsonFormat is not a function\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m\n     \u001b[90m  98 |\u001b[39m     it(\u001b[32m'should handle errors in JSON format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mjsonFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       \u001b[36mconst\u001b[39m error \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Test error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m       \n     \u001b[90m 102 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:99:39)\n\n  ● LogFormatters › prettyFormat › should format logs in human-readable format\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m   describe(\u001b[32m'prettyFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 118 |\u001b[39m     it(\u001b[32m'should format logs in human-readable format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 121 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 122 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:119:39)\n\n  ● LogFormatters › prettyFormat › should colorize output when enabled\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 133 |\u001b[39m\n     \u001b[90m 134 |\u001b[39m     it(\u001b[32m'should colorize output when enabled'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 135 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat({ colorize\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 136 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 137 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 138 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Error message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:135:39)\n\n  ● LogFormatters › prettyFormat › should include metadata when present\n\n    TypeError: LogFormatters.prettyFormat is not a function\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should include metadata when present'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mprettyFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 154 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 155 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:152:39)\n\n  ● LogFormatters › compactFormat › should format logs in compact single-line format\n\n    TypeError: LogFormatters.compactFormat is not a function\n\n    \u001b[0m \u001b[90m 169 |\u001b[39m   describe(\u001b[32m'compactFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 170 |\u001b[39m     it(\u001b[32m'should format logs in compact single-line format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcompactFormat()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 173 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 174 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:171:39)\n\n  ● LogFormatters › compactFormat › should truncate long messages\n\n    TypeError: LogFormatters.compactFormat is not a function\n\n    \u001b[0m \u001b[90m 187 |\u001b[39m\n     \u001b[90m 188 |\u001b[39m     it(\u001b[32m'should truncate long messages'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 189 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcompactFormat({ maxLength\u001b[33m:\u001b[39m \u001b[35m50\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 190 |\u001b[39m       \u001b[36mconst\u001b[39m longMessage \u001b[33m=\u001b[39m \u001b[32m'A'\u001b[39m\u001b[33m.\u001b[39mrepeat(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 191 |\u001b[39m       \n     \u001b[90m 192 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:189:39)\n\n  ● LogFormatters › logstashFormat › should format logs for Logstash ingestion\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"info\"\n    Received: undefined\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m       expect(parsed[\u001b[32m'@version'\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Test message'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mseverity)\u001b[33m.\u001b[39mtoBe(\u001b[32m'info'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mhost)\u001b[33m.\u001b[39mtoBe(\u001b[32m'test-host'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mservice)\u001b[33m.\u001b[39mtoBe(\u001b[32m'test-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/unit/monitoring/logging/formatters.test.js:223:31)\n\n  ● LogFormatters › logstashFormat › should add fields from metadata\n\n    TypeError: Cannot read properties of undefined (reading 'userId')\n\n    \u001b[0m \u001b[90m 240 |\u001b[39m       \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(formatted[\u001b[33mSymbol\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfor\u001b[39m(\u001b[32m'message'\u001b[39m)])\u001b[33m;\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 242 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mfields\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(\u001b[35m123\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 243 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mfields\u001b[33m.\u001b[39mrequestId)\u001b[33m.\u001b[39mtoBe(\u001b[32m'req-456'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mtags)\u001b[33m.\u001b[39mtoEqual([\u001b[32m'api'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'v2'\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.userId (tests/unit/monitoring/logging/formatters.test.js:242:28)\n\n  ● LogFormatters › customFormat › should allow custom formatting function\n\n    TypeError: LogFormatters.customFormat is not a function\n\n    \u001b[0m \u001b[90m 252 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 254 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcustomFormat(customFormatter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 255 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 256 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 257 |\u001b[39m         message\u001b[33m:\u001b[39m \u001b[32m'Test message'\u001b[39m\u001b[0m\n\n      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:254:39)\n\n  ● LogFormatters › customFormat › should support template strings\n\n    TypeError: LogFormatters.customFormat is not a function\n\n    \u001b[0m \u001b[90m 266 |\u001b[39m     it(\u001b[32m'should support template strings'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 267 |\u001b[39m       \u001b[36mconst\u001b[39m template \u001b[33m=\u001b[39m \u001b[32m'{{timestamp}} [{{level}}] {{service}}: {{message}}'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mcustomFormat(template)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 269 |\u001b[39m       \n     \u001b[90m 270 |\u001b[39m       \u001b[36mconst\u001b[39m logInfo \u001b[33m=\u001b[39m {\n     \u001b[90m 271 |\u001b[39m         level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:268:39)\n\n  ● LogFormatters › multiFormat › should combine multiple formatters\n\n    TypeError: LogFormatters.multiFormat is not a function\n\n    \u001b[0m \u001b[90m 284 |\u001b[39m   describe(\u001b[32m'multiFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 285 |\u001b[39m     it(\u001b[32m'should combine multiple formatters'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 286 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmultiFormat([\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 287 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39mtimestamp()\u001b[33m,\u001b[39m\n     \u001b[90m 288 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39merrors({ stack\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m,\u001b[39m\n     \u001b[90m 289 |\u001b[39m         winston\u001b[33m.\u001b[39mformat\u001b[33m.\u001b[39mjson()\u001b[0m\n\n      at Object.multiFormat (tests/unit/monitoring/logging/formatters.test.js:286:39)\n\n  ● LogFormatters › filterFormat › should filter logs based on criteria\n\n    TypeError: LogFormatters.filterFormat is not a function\n\n    \u001b[0m \u001b[90m 304 |\u001b[39m   describe(\u001b[32m'filterFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 305 |\u001b[39m     it(\u001b[32m'should filter logs based on criteria'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 306 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mfilterFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 307 |\u001b[39m         levels\u001b[33m:\u001b[39m [\u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'warn'\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 308 |\u001b[39m         excludeMessages\u001b[33m:\u001b[39m [\u001b[35m/debug/i\u001b[39m]\n     \u001b[90m 309 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:306:39)\n\n  ● LogFormatters › filterFormat › should filter based on metadata fields\n\n    TypeError: LogFormatters.filterFormat is not a function\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     it(\u001b[32m'should filter based on metadata fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mfilterFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m         metadata\u001b[33m:\u001b[39m {\n     \u001b[90m 334 |\u001b[39m           environment\u001b[33m:\u001b[39m \u001b[32m'production'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 335 |\u001b[39m           userId\u001b[33m:\u001b[39m (value) \u001b[33m=>\u001b[39m value \u001b[33m>\u001b[39m \u001b[35m100\u001b[39m\u001b[0m\n\n      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:332:39)\n\n  ● LogFormatters › maskFormat › should mask sensitive fields\n\n    TypeError: LogFormatters.maskFormat is not a function\n\n    \u001b[0m \u001b[90m 366 |\u001b[39m   describe(\u001b[32m'maskFormat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 367 |\u001b[39m     it(\u001b[32m'should mask sensitive fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 368 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmaskFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 369 |\u001b[39m         fields\u001b[33m:\u001b[39m [\u001b[32m'password'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'token'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'ssn'\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 370 |\u001b[39m         patterns\u001b[33m:\u001b[39m [\u001b[35m/\\b\\d{3}-\\d{2}-\\d{4}\\b/g\u001b[39m] \u001b[90m// SSN pattern\u001b[39m\n     \u001b[90m 371 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:368:39)\n\n  ● LogFormatters › maskFormat › should handle nested fields\n\n    TypeError: LogFormatters.maskFormat is not a function\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m\n     \u001b[90m 389 |\u001b[39m     it(\u001b[32m'should handle nested fields'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m       \u001b[36mconst\u001b[39m formatter \u001b[33m=\u001b[39m \u001b[33mLogFormatters\u001b[39m\u001b[33m.\u001b[39mmaskFormat({\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m         fields\u001b[33m:\u001b[39m [\u001b[32m'user.password'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'auth.token'\u001b[39m]\n     \u001b[90m 392 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 393 |\u001b[39m\u001b[0m\n\n      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:390:39)\n\nFAIL mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js\n  ● Monitoring + Cloud Integration › AWS Monitoring Integration › should collect metrics from AWS-deployed services\n\n    Environment must have name and region\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mregion) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and region'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m     }\n     \u001b[90m 334 |\u001b[39m\n     \u001b[90m 335 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:34:46)\n\n  ● Monitoring + Cloud Integration › AWS Monitoring Integration › should trigger alerts for AWS service anomalies\n\n    TypeError: alertingSystem.addChannel is not a function\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 56 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39maddChannel(\u001b[32m'test-channel'\u001b[39m\u001b[33m,\u001b[39m alertChannel)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m       \n     \u001b[90m 59 |\u001b[39m       \u001b[90m// Create alert rule for high CPU\u001b[39m\n     \u001b[90m 60 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39mcreateRule({\u001b[0m\n\n      at Object.addChannel (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:57:28)\n\n  ● Monitoring + Cloud Integration › GCP Monitoring Integration › should collect metrics from GCP Cloud Run services\n\n    Environment must have name and projectId\n\n    \u001b[0m \u001b[90m 533 |\u001b[39m\n     \u001b[90m 534 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mprojectId) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 535 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and projectId'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 536 |\u001b[39m     }\n     \u001b[90m 537 |\u001b[39m\n     \u001b[90m 538 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at GCPDeployment.deploy (mcp-local-setup/deploy/gcp/deployment.js:535:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:89:46)\n\n  ● Monitoring + Cloud Integration › GCP Monitoring Integration › should integrate with GCP monitoring APIs\n\n    TypeError: gcpDeployment.getMetrics is not a function\n\n    \u001b[0m \u001b[90m 105 |\u001b[39m\n     \u001b[90m 106 |\u001b[39m     test(\u001b[32m'should integrate with GCP monitoring APIs'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m gcpMetrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m gcpDeployment\u001b[33m.\u001b[39mgetMetrics(\u001b[32m'test-service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 108 |\u001b[39m       \n     \u001b[90m 109 |\u001b[39m       \u001b[90m// Export to Prometheus format\u001b[39m\n     \u001b[90m 110 |\u001b[39m       \u001b[36mconst\u001b[39m prometheusMetrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mexportMetrics(gcpMetrics)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.getMetrics (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:107:46)\n\n  ● Monitoring + Cloud Integration › Azure Monitoring Integration › should collect metrics from Azure Container Instances\n\n    Environment must have name, subscriptionId, and resourceGroup\n\n    \u001b[0m \u001b[90m 483 |\u001b[39m\n     \u001b[90m 484 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39msubscriptionId \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mresourceGroup) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 485 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name, subscriptionId, and resourceGroup'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 486 |\u001b[39m     }\n     \u001b[90m 487 |\u001b[39m\n     \u001b[90m 488 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AzureDeployment.deploy (mcp-local-setup/deploy/azure/deployment.js:485:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:120:48)\n\n  ● Monitoring + Cloud Integration › Cross-Cloud Monitoring › should aggregate metrics across multiple cloud providers\n\n    Environment must have name and region\n\n    \u001b[0m \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mname \u001b[33m||\u001b[39m \u001b[33m!\u001b[39menvironment\u001b[33m.\u001b[39mregion) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 332 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Environment must have name and region'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 333 |\u001b[39m     }\n     \u001b[90m 334 |\u001b[39m\n     \u001b[90m 335 |\u001b[39m     \u001b[36mconst\u001b[39m deployment \u001b[33m=\u001b[39m {\u001b[0m\n\n      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)\n      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:141:46)\n\n  ● Monitoring + Cloud Integration › Cross-Cloud Monitoring › should create unified dashboards for multi-cloud deployments\n\n    TypeError: metricsCollector.createDashboard is not a function\n\n    \u001b[0m \u001b[90m 179 |\u001b[39m       }\u001b[33m;\u001b[39m\n     \u001b[90m 180 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 181 |\u001b[39m       \u001b[36mconst\u001b[39m dashboard \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mcreateDashboard(dashboardConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 182 |\u001b[39m       \n     \u001b[90m 183 |\u001b[39m       expect(dashboard)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'url'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m       expect(dashboard\u001b[33m.\u001b[39mpanels)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createDashboard (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:181:48)\n\n  ● Monitoring + Cloud Integration › Alert Integration Across Clouds › should correlate alerts from different cloud providers\n\n    TypeError: alertingSystem.on is not a function\n\n    \u001b[0m \u001b[90m 192 |\u001b[39m       \n     \u001b[90m 193 |\u001b[39m       \u001b[90m// Setup alert collection\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 194 |\u001b[39m       alertingSystem\u001b[33m.\u001b[39mon(\u001b[32m'alert'\u001b[39m\u001b[33m,\u001b[39m (alert) \u001b[33m=>\u001b[39m alerts\u001b[33m.\u001b[39mpush(alert))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 195 |\u001b[39m\n     \u001b[90m 196 |\u001b[39m       \u001b[90m// Simulate alerts from different clouds\u001b[39m\n     \u001b[90m 197 |\u001b[39m       \u001b[36mawait\u001b[39m alertingSystem\u001b[33m.\u001b[39mprocessCloudAlert({\u001b[0m\n\n      at Object.on (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:194:22)\n\n  ● Monitoring + Cloud Integration › Performance Monitoring › should track deployment performance metrics\n\n    TypeError: metricsCollector.trackDeployment is not a function\n\n    \u001b[0m \u001b[90m 229 |\u001b[39m       \u001b[90m// Track deployment performance\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m [cloud\u001b[33m,\u001b[39m metrics] \u001b[36mof\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mentries(deploymentMetrics)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 231 |\u001b[39m         \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mtrackDeployment(cloud\u001b[33m,\u001b[39m metrics)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 232 |\u001b[39m       }\n     \u001b[90m 233 |\u001b[39m\n     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m performanceReport \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m metricsCollector\u001b[33m.\u001b[39mgetPerformanceReport()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.trackDeployment (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:231:32)\n\nFAIL tests/performance/monitoring/metrics-load.test.js\n  ● Metrics Performance Under Load › High-Frequency Metric Updates › should handle 10k metrics/second\n\n    Added label \"status\" is not included in initial labelset: [ 'method', 'route', 'status_code', 'status_class' ]\n\n    \u001b[0m \u001b[90m 40 |\u001b[39m       \u001b[90m// Generate metrics at high frequency\u001b[39m\n     \u001b[90m 41 |\u001b[39m       \u001b[36mwhile\u001b[39m (\u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow() \u001b[33m-\u001b[39m startTime \u001b[33m<\u001b[39m duration \u001b[33m&&\u001b[39m operations \u001b[33m<\u001b[39m targetOps) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 42 |\u001b[39m         httpExporter\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mhttpRequestsTotal\u001b[33m.\u001b[39minc({\n     \u001b[90m    |\u001b[39m                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 43 |\u001b[39m           method\u001b[33m:\u001b[39m [\u001b[32m'GET'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'POST'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'PUT'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'DELETE'\u001b[39m][operations \u001b[33m%\u001b[39m \u001b[35m4\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 44 |\u001b[39m           status\u001b[33m:\u001b[39m [\u001b[32m'200'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'201'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'400'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'500'\u001b[39m][operations \u001b[33m%\u001b[39m \u001b[35m4\u001b[39m]\n     \u001b[90m 45 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)\n      at Counter.incWithoutExemplar (node_modules/prom-client/lib/counter.js:44:4)\n      at Object.inc (tests/performance/monitoring/metrics-load.test.js:42:48)\n\n  ● Metrics Performance Under Load › High-Frequency Metric Updates › should handle concurrent metric updates\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Memory Efficiency › should maintain stable memory usage with high cardinality\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Memory Efficiency › should handle metric lifecycle efficiently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Metric Collection Performance › should efficiently serialize large numbers of metrics\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Metric Collection Performance › should handle metric endpoint under load\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Histogram Performance › should efficiently calculate percentiles\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Histogram Performance › should handle multiple histogram updates concurrently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Label Cardinality Performance › should handle high label cardinality efficiently\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Real-world Load Simulation › should handle realistic mixed workload\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\n  ● Metrics Performance Under Load › Stress Testing › should remain stable under extreme load\n\n    A metric with the name mcp_mcp_active_connections has already been registered.\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m   _initializeMCPMetrics() {\n     \u001b[90m 52 |\u001b[39m     \u001b[90m// Active MCP connections\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmetrics\u001b[33m.\u001b[39mmcpActiveConnections \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m client\u001b[33m.\u001b[39m\u001b[33mGauge\u001b[39m({\n     \u001b[90m    |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       name\u001b[33m:\u001b[39m \u001b[32m`${this.options.prefix}mcp_active_connections`\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m       help\u001b[33m:\u001b[39m \u001b[32m'Number of active MCP connections'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m       labelNames\u001b[33m:\u001b[39m [\u001b[32m'transport'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'client_type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'version'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\n\n      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)\n      at new Metric (node_modules/prom-client/lib/metric.js:64:13)\n      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)\n      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)\n      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)\n      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)\n      at Object.<anonymous> (tests/performance/monitoring/metrics-load.test.js:21:21)\n\nFAIL mcp-local-setup/tests/integration/profile-switching.integration.test.js\n  ● Profile Switching Integration Tests › Profile Creation › should handle profile name conflicts\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: \"/home/jenner/.mcp-platform/profiles/duplicate-profile.yml\"\n\n    \u001b[0m \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m       \u001b[90m// Try to create duplicate\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 86 |\u001b[39m       \u001b[36mawait\u001b[39m expect(createTestProfile([\u001b[32m'service2'\u001b[39m]\u001b[33m,\u001b[39m { name\u001b[33m:\u001b[39m profileName }))\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 87 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/integration/profile-switching.integration.test.js:86:13)\n\n  ● Profile Switching Integration Tests › Profile Creation › should validate profile yaml structure\n\n    YAMLException: bad indentation of a mapping entry (1:14)\n\n     1 | invalid: yaml: structure:\n    ------------------^\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[90m// Try to load the profile\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m       \u001b[36mawait\u001b[39m expect(yaml\u001b[33m.\u001b[39mload(\u001b[36mawait\u001b[39m fs\u001b[33m.\u001b[39mreadFile(profilePath\u001b[33m,\u001b[39m \u001b[32m'utf8'\u001b[39m)))\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at generateError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:183:10)\n      at throwError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:187:9)\n      at readBlockMapping (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1182:7)\n      at composeNode (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1441:12)\n      at readDocument (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1625:3)\n      at loadDocuments (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1688:5)\n      at Object.load (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1714:19)\n      at Object.load (mcp-local-setup/tests/integration/profile-switching.integration.test.js:99:25)\n\n  ● Profile Switching Integration Tests › Profile Switching › should update docker-compose when switching profiles\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 159 |\u001b[39m\n     \u001b[90m 160 |\u001b[39m       \u001b[36mconst\u001b[39m generated \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m generateCompose()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 161 |\u001b[39m       expect(generated)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[90m// Docker compose should now contain services from profile1\u001b[39m\n     \u001b[90m 164 |\u001b[39m       \u001b[36mconst\u001b[39m composePath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(\u001b[33mMCP_HOME\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'docker-compose.yml'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/profile-switching.integration.test.js:161:25)\n\nFAIL mcp-local-setup/tests/integration/backup.integration.test.js\n  ● Backup & Restore Integration Tests › Selective Service Backup › should handle incremental backups\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 993\n    Received:   993\n\n    \u001b[0m \u001b[90m 155 |\u001b[39m             \u001b[36mconst\u001b[39m metadata \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m backup\u001b[33m.\u001b[39mgetBackupMetadata(incrementalId)\u001b[33m;\u001b[39m\n     \u001b[90m 156 |\u001b[39m             expect(metadata\u001b[33m.\u001b[39mtype)\u001b[33m.\u001b[39mtoBe(\u001b[32m'incremental'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 157 |\u001b[39m             expect(metadata\u001b[33m.\u001b[39msize)\u001b[33m.\u001b[39mtoBeLessThan(metadata\u001b[33m.\u001b[39msize)\u001b[33m;\u001b[39m \u001b[90m// Should be smaller than full\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 158 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\u001b[0m\n\n      at Object.toBeLessThan (mcp-local-setup/tests/integration/backup.integration.test.js:157:35)\n\n  ● Backup & Restore Integration Tests › Scheduled Backups › should list backup schedules\n\n    expect(received).toBeInstanceOf(expected)\n\n    Expected constructor: Date\n\n    Received value has no prototype\n    Received value: null\n\n    \u001b[0m \u001b[90m 182 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39mcronExpression)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0 2 * * *'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 183 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39menabled)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 184 |\u001b[39m             expect(testSchedule\u001b[33m.\u001b[39mnextRun)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mDate\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 185 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m\n     \u001b[90m 187 |\u001b[39m         it(\u001b[32m'should update backup schedule'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/backup.integration.test.js:184:42)\n\n  ● Backup & Restore Integration Tests › Backup Storage Management › should delete specific backup\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m         it(\u001b[32m'should delete specific backup'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 297 |\u001b[39m             \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m backup\u001b[33m.\u001b[39mdeleteBackup(testBackupId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m             expect(deleted)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m\n     \u001b[90m 300 |\u001b[39m             \u001b[36mawait\u001b[39m expect(backup\u001b[33m.\u001b[39mgetBackupMetadata(testBackupId))\n     \u001b[90m 301 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Backup not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/backup.integration.test.js:298:29)\n\n  ● Backup & Restore Integration Tests › Error Handling › should validate backup options\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: \"backup-2025-07-24T22-52-02-438Z-7bfbf9bc\"\n\n    \u001b[0m \u001b[90m 321 |\u001b[39m             }\u001b[33m;\u001b[39m\n     \u001b[90m 322 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 323 |\u001b[39m             \u001b[36mawait\u001b[39m expect(backup\u001b[33m.\u001b[39mcreateBackup(invalidOptions))\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 324 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 325 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/integration/backup.integration.test.js:323:19)\n\nFAIL tests/integration/phase6/production-deployment.test.js\n  ● Production Deployment Integration › Production request flow with all components\n\n    Added label \"status\" is not included in initial labelset: []\n\n    \u001b[0m \u001b[90m 149 |\u001b[39m\n     \u001b[90m 150 |\u001b[39m       requestLogger\u001b[33m.\u001b[39merror(\u001b[32m'Request failed'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 151 |\u001b[39m       requestTimer({ status\u001b[33m:\u001b[39m \u001b[35m500\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 152 |\u001b[39m     } \u001b[36mfinally\u001b[39m {\n     \u001b[90m 153 |\u001b[39m       transaction\u001b[33m.\u001b[39mfinish()\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m     }\u001b[0m\n\n      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)\n      at node_modules/prom-client/lib/histogram.js:235:3\n      at Histogram.observeWithoutExemplar (node_modules/prom-client/lib/histogram.js:74:54)\n      at node_modules/prom-client/lib/histogram.js:185:9\n      at Object.requestTimer (tests/integration/phase6/production-deployment.test.js:151:7)\n\n  ● Production Deployment Integration › Production monitoring and alerting\n\n    ReferenceError: Cannot access 'health' before initialization\n\n    \u001b[0m \u001b[90m 181 |\u001b[39m\n     \u001b[90m 182 |\u001b[39m     \u001b[90m// Check health degradation\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 183 |\u001b[39m     \u001b[36mconst\u001b[39m health \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m health\u001b[33m.\u001b[39mcheckHealth()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 184 |\u001b[39m     expect(health\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'degraded'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m\n     \u001b[90m 186 |\u001b[39m     \u001b[90m// Verify metrics\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/phase6/production-deployment.test.js:183:20)\n\nFAIL mcp-local-setup/tests/unit/cli-mcp-cli.unit.test.js\n  ● MCP CLI Command Parsing › CLI Initialization › should set up correct environment variables\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › CLI Initialization › should define all required command paths\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › fileExists should check file accessibility\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › runCommand should spawn process with correct arguments\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Utility Functions › runCommand should handle process errors\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Command Structure › should parse version command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Command Structure › should parse help command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service start command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service stop command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Service Commands › should validate service restart command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should handle profile list command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should handle profile switch command\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Profile Commands › should validate profile creation\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle missing docker-compose file\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle invalid profile names\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\n  ● MCP CLI Command Parsing › Error Handling › should handle service command failures gracefully\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \\uXXXX. (603:26)\n\n    \u001b[0m \u001b[90m 601 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`\\nMCP_HOME: ${MCP_HOME}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 602 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m`Config file: ${path.join(MCP_HOME, '.env')`);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 603 |\u001b[39m \u001b[32m            console.log(`\\nAvailable clients for config generation:`);\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 604 |\u001b[39m \u001b[32m            console.log(`  - claude-code`);\u001b[39m\n     \u001b[90m 605 |\u001b[39m \u001b[32m            console.log(`  - vscode`);\u001b[39m\n     \u001b[90m 606 |\u001b[39m \u001b[32m            console.log(`  - cursor`);\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)\n      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)\n      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)\n      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)\n      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)\n      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)\n      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)\n      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)\n      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)\n      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)\n      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)\n      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)\n      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)\n      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)\n      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)\n      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n\nFAIL tests/unit/security/xss-protection.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'isomorphic-dompurify' from 'tests/unit/security/xss-protection.test.js'\n\n    \u001b[0m \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[90m// Mock isomorphic-dompurify\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 4 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'isomorphic-dompurify'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 5 |\u001b[39m   \u001b[36mreturn\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m 6 |\u001b[39m     sanitize\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn((dirty\u001b[33m,\u001b[39m config) \u001b[33m=>\u001b[39m {\n     \u001b[90m 7 |\u001b[39m       \u001b[90m// Simple mock sanitization\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.mock (tests/unit/security/xss-protection.test.js:4:6)\n\nFAIL mcp-local-setup/tests/unit/update/update-manager.unit.test.js\n  ● Test suite failed to run\n\n    TypeError: Cannot destructure property 'O_CREAT' of 'fs.constants' as it is undefined.\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mconst\u001b[39m { pipeline } \u001b[33m=\u001b[39m require(\u001b[32m'stream/promises'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mconst\u001b[39m { createWriteStream\u001b[33m,\u001b[39m createReadStream } \u001b[33m=\u001b[39m require(\u001b[32m'fs'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mconst\u001b[39m tar \u001b[33m=\u001b[39m require(\u001b[32m'tar'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m \u001b[36mconst\u001b[39m semver \u001b[33m=\u001b[39m require(\u001b[32m'semver'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m cron \u001b[33m=\u001b[39m require(\u001b[32m'node-cron'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/get-write-flag.js:14:9)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/unpack.js:48:17)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/lib/extract.js:5:16)\n      at Object.<anonymous> (mcp-local-setup/node_modules/tar/index.js:8:31)\n      at Object.require (mcp-local-setup/scripts/update-manager.js:13:13)\n      at Object.require (mcp-local-setup/tests/unit/update/update-manager.unit.test.js:5:23)\n\nFAIL mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../monitoring/logging/service' from 'mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mComplianceTools\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../enterprise/compliance/tools'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mTenantManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../enterprise/multi-tenant/tenancy'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLoggingService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertingSystem\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/alerts/alerting'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m describe(\u001b[32m'SSO + Compliance Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js:9:24)\n\nFAIL tests/unit/security/input-validator.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'validator' from 'security/validation/input-validator.js'\n\n    Require stack:\n      security/validation/input-validator.js\n      tests/unit/security/input-validator.test.js\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m validator \u001b[33m=\u001b[39m require(\u001b[32m'validator'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m createDOMPurify \u001b[33m=\u001b[39m require(\u001b[32m'isomorphic-dompurify'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mInputValidator\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (security/validation/input-validator.js:8:19)\n      at Object.<anonymous> (tests/unit/security/input-validator.test.js:1:79)\n\nFAIL tests/security/injection-prevention.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'validator' from 'security/validation/input-validator.js'\n\n    Require stack:\n      security/validation/input-validator.js\n      tests/security/injection-prevention.test.js\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m validator \u001b[33m=\u001b[39m require(\u001b[32m'validator'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m createDOMPurify \u001b[33m=\u001b[39m require(\u001b[32m'isomorphic-dompurify'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mInputValidator\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (security/validation/input-validator.js:8:19)\n      at Object.<anonymous> (tests/security/injection-prevention.test.js:1:76)\n\nFAIL tests/unit/security/oauth.test.js\n  ● OAuth2Provider › getUserInfo › should return user info\n\n    User info URL not configured\n\n    \u001b[0m \u001b[90m 211 |\u001b[39m   \u001b[36masync\u001b[39m getUserInfo(accessToken) {\n     \u001b[90m 212 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconfig\u001b[33m.\u001b[39muserInfoURL) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 213 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'User info URL not configured'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 214 |\u001b[39m     }\n     \u001b[90m 215 |\u001b[39m\n     \u001b[90m 216 |\u001b[39m     \u001b[36mtry\u001b[39m {\u001b[0m\n\n      at OAuth2Provider.getUserInfo (security/api-auth/oauth.js:213:13)\n      at Object.getUserInfo (tests/unit/security/oauth.test.js:161:39)\n\nFAIL mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../monitoring/logging/service' from 'mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAzureDeployment\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../deploy/azure/deployment'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMetricsCollector\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/metrics/collector'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLoggingService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/service'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertingSystem\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/alerts/alerting'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 19 |\u001b[39m\n     \u001b[90m 20 |\u001b[39m describe(\u001b[32m'Phase 4 Full Workflow Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js:17:24)\n\nFAIL mcp-local-setup/monitoring/tests/logging-service.test.js\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockWinston' before initialization\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'winston'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m mockWinston)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m\n     \u001b[90m 33 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'winston-daily-rotate-file'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 34 |\u001b[39m   \u001b[36mreturn\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m ({}))\u001b[33m;\u001b[39m\u001b[0m\n\n      at mockWinston (mcp-local-setup/monitoring/tests/logging-service.test.js:31:28)\n      at Object.require (mcp-local-setup/monitoring/logging/logger.js:6:17)\n      at Object.require (mcp-local-setup/monitoring/tests/logging-service.test.js:5:24)\n\nFAIL tests/sdk-core.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../../../../mcp-local-setup/enterprise/sso/authentication' from 'sdk/core/index.js'\n\n    Require stack:\n      sdk/core/index.js\n      tests/sdk-core.test.js\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mEventEmitter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'events'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m crypto \u001b[33m=\u001b[39m require(\u001b[32m'crypto'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mSSOAuthentication\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../mcp-local-setup/enterprise/sso/authentication'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMarketplaceDiscovery\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../mcp-local-setup/api/marketplace/discovery'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mSDKCoreInterface\u001b[39m \u001b[36mextends\u001b[39m \u001b[33mEventEmitter\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (sdk/core/index.js:7:27)\n      at Object.require (tests/sdk-core.test.js:6:17)\n\nFAIL tests/unit/monitoring/logging/rotation.test.js\n  ● Test suite failed to run\n\n    TypeError: Cannot assign to read only property 'createGzip' of object '#<Object>'\n\n      at node_modules/jest-mock/build/index.js:784:33\n          at Set.forEach (<anonymous>)\n\nFAIL mcp-local-setup/tests/unit/security/network-manager.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word 'public'. (240:14)\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m         \u001b[90m// Group services by isolation requirements\u001b[39m\n     \u001b[90m 239 |\u001b[39m         \u001b[36mconst\u001b[39m isolated \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m         \u001b[36mconst\u001b[39m \u001b[36mpublic\u001b[39m \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n     \u001b[90m 242 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m rule \u001b[36mof\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrules\u001b[33m.\u001b[39mvalues()) {\n     \u001b[90m 243 |\u001b[39m             \u001b[36mif\u001b[39m (rule\u001b[33m.\u001b[39mallowed) {\u001b[0m\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mRateLimiter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./rate-limiter'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mCORSManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./cors-manager'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mServiceIsolation\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./service-isolation'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mNetworkManager\u001b[39m {\n     \u001b[90m 11 |\u001b[39m     constructor() {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)\n      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)\n      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)\n      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)\n      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)\n      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)\n      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)\n      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)\n      at Object.require (mcp-local-setup/tests/unit/security/network-manager.test.js:5:24)\n\nFAIL tests/unit/monitoring/errors/error-boundaries.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax 'jsx' isn't currently enabled (96:11):\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33mFallbackComponent\u001b[39m) {\n     \u001b[90m 95 |\u001b[39m         \u001b[36mreturn\u001b[39m (\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33mFallbackComponent\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m             error\u001b[33m=\u001b[39m{error}\n     \u001b[90m 98 |\u001b[39m             errorInfo\u001b[33m=\u001b[39m{errorInfo}\n     \u001b[90m 99 |\u001b[39m             resetErrorBoundary\u001b[33m=\u001b[39m{\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mresetErrorBoundary}\u001b[0m\n\n    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the 'presets' section of your Babel config to enable transformation.\n    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the 'plugins' section to enable parsing.\n\n    If you already added the plugin for this syntax to your config, it's possible that your config isn't being loaded.\n    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:\n    \tnpx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js <your build command>\n    See https://babeljs.io/docs/configuration#print-effective-configs for more info.\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorBoundaries\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../../monitoring/errors/error-boundaries'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mEventEmitter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'events'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m\n     \u001b[90m 4 |\u001b[39m describe(\u001b[32m'ErrorBoundaries'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)\n      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)\n      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)\n      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.<anonymous> (tests/unit/monitoring/errors/error-boundaries.test.js:1:82)\n\nFAIL mcp-local-setup/tests/e2e/installation-flow.e2e.test.js\n  ● Installation Flow E2E Tests › Initial Installation › should set correct file permissions\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 123 |\u001b[39m         \u001b[36mconst\u001b[39m stats \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m fs\u001b[33m.\u001b[39mstat(filePath)\u001b[33m;\u001b[39m\n     \u001b[90m 124 |\u001b[39m         \u001b[36mconst\u001b[39m isExecutable \u001b[33m=\u001b[39m (stats\u001b[33m.\u001b[39mmode \u001b[33m&\u001b[39m \u001b[35m0o111\u001b[39m) \u001b[33m!==\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 125 |\u001b[39m         expect(isExecutable)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 126 |\u001b[39m       }\n     \u001b[90m 127 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 128 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/e2e/installation-flow.e2e.test.js:125:30)\n\nFAIL mcp-local-setup/tests/integration/security.integration.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word 'public'. (240:14)\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m         \u001b[90m// Group services by isolation requirements\u001b[39m\n     \u001b[90m 239 |\u001b[39m         \u001b[36mconst\u001b[39m isolated \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m         \u001b[36mconst\u001b[39m \u001b[36mpublic\u001b[39m \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSet\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m\n     \u001b[90m 242 |\u001b[39m         \u001b[36mfor\u001b[39m (\u001b[36mconst\u001b[39m rule \u001b[36mof\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mrules\u001b[33m.\u001b[39mvalues()) {\n     \u001b[90m 243 |\u001b[39m             \u001b[36mif\u001b[39m (rule\u001b[33m.\u001b[39mallowed) {\u001b[0m\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mRateLimiter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./rate-limiter'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mCORSManager\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./cors-manager'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mServiceIsolation\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'./service-isolation'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mNetworkManager\u001b[39m {\n     \u001b[90m 11 |\u001b[39m     constructor() {\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)\n      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)\n      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)\n      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)\n      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)\n      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)\n      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)\n      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)\n      at Object.require (mcp-local-setup/security/index.js:8:24)\n      at Object.require (mcp-local-setup/tests/integration/security.integration.test.js:6:32)\n\nFAIL tests/integration/monitoring/error-tracking.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax 'jsx' isn't currently enabled (96:11):\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33mFallbackComponent\u001b[39m) {\n     \u001b[90m 95 |\u001b[39m         \u001b[36mreturn\u001b[39m (\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33mFallbackComponent\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m             error\u001b[33m=\u001b[39m{error}\n     \u001b[90m 98 |\u001b[39m             errorInfo\u001b[33m=\u001b[39m{errorInfo}\n     \u001b[90m 99 |\u001b[39m             resetErrorBoundary\u001b[33m=\u001b[39m{\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mresetErrorBoundary}\u001b[0m\n\n    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the 'presets' section of your Babel config to enable transformation.\n    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the 'plugins' section to enable parsing.\n\n    If you already added the plugin for this syntax to your config, it's possible that your config isn't being loaded.\n    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:\n    \tnpx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js <your build command>\n    See https://babeljs.io/docs/configuration#print-effective-configs for more info.\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mSentryIntegration\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/sentry-integration'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorBoundaries\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/error-boundaries'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mAlertRouter\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/alert-router'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mErrorTracker\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/errors/error-tracker'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mLogger\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../monitoring/logging/logger'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)\n      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)\n      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)\n      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)\n      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)\n      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)\n      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)\n      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)\n      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)\n      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)\n      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)\n      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)\n      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)\n      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)\n      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)\n      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)\n      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)\n      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)\n      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)\n      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)\n      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)\n      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)\n      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)\n      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)\n      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)\n      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)\n      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)\n      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)\n      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)\n      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)\n      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)\n      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)\n      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)\n      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (node_modules/gensync/index.js:251:28)\n      at sync (node_modules/gensync/index.js:89:14)\n      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n      at Object.require (tests/integration/monitoring/error-tracking.test.js:2:25)\n\nFAIL mcp-local-setup/tests/integration/update.integration.test.js\n  ● Update Mechanism Integration Tests › Platform Self-Update › should check for platform updates\n\n    Failed to check for updates: Invalid version. Must be a string. Got type \"object\".\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m             \u001b[36mreturn\u001b[39m applicableUpdates\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check for updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m         }\n     \u001b[90m 105 |\u001b[39m     }\n     \u001b[90m 106 |\u001b[39m\u001b[0m\n\n      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:38:29)\n\n  ● Update Mechanism Integration Tests › Platform Self-Update › should check beta channel updates\n\n    Failed to check for updates: Invalid version. Must be a string. Got type \"object\".\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m             \u001b[36mreturn\u001b[39m applicableUpdates\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check for updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m         }\n     \u001b[90m 105 |\u001b[39m     }\n     \u001b[90m 106 |\u001b[39m\u001b[0m\n\n      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:57:29)\n\n  ● Update Mechanism Integration Tests › Service Updates › should check for service updates\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:137:36)\n\n  ● Update Mechanism Integration Tests › Service Updates › should handle dependency resolution\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:161:29)\n\n  ● Update Mechanism Integration Tests › Service Updates › should detect breaking changes\n\n    Failed to check service updates: Cannot read properties of undefined (reading 'echo')\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[36mreturn\u001b[39m updates\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m         } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to check service updates: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         }\n     \u001b[90m 68 |\u001b[39m     }\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:172:29)\n\n  ● Update Mechanism Integration Tests › Rollback Functionality › should fail rollback to incompatible version\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Incompatible version\"\n    Received message:   \"No backup found for version 0.1.0\"\n\n        \u001b[0m \u001b[90m 266 |\u001b[39m             \u001b[36mconst\u001b[39m backupPath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mupdateDir\u001b[33m,\u001b[39m \u001b[32m'backups'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`backup-${version}.tar.gz`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m 267 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mfileExists(backupPath)) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 268 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`No backup found for version ${version}`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 269 |\u001b[39m             }\n         \u001b[90m 270 |\u001b[39m\n         \u001b[90m 271 |\u001b[39m             \u001b[90m// Check compatibility unless forced\u001b[39m\u001b[0m\n\n      at UpdateManager.rollback (mcp-local-setup/scripts/update-manager.js:268:23)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:241:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:242:26)\n\n  ● Update Mechanism Integration Tests › Update Notifications › should get current update status\n\n    expect(received).toBeTruthy()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m             \n     \u001b[90m 250 |\u001b[39m             \u001b[36mif\u001b[39m (status) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mupdateId)\u001b[33m.\u001b[39mtoBeTruthy()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/downloading|ready|applying|complete|failed/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mprogress)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m                 expect(status\u001b[33m.\u001b[39mprogress)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeTruthy (mcp-local-setup/tests/integration/update.integration.test.js:251:41)\n\n  ● Update Mechanism Integration Tests › Error Handling › should prevent downgrade without force flag\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Downgrade not allowed\"\n    Received message:   \"metadata is not defined\"\n\n        \u001b[0m \u001b[90m 244 |\u001b[39m                 installedAt\u001b[33m:\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m\n         \u001b[90m 245 |\u001b[39m                 installedBy\u001b[33m:\u001b[39m \u001b[32m'system'\u001b[39m\u001b[33m,\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 246 |\u001b[39m                 previousVersion\u001b[33m:\u001b[39m metadata\u001b[33m.\u001b[39mcurrentVersion\u001b[33m,\u001b[39m\n         \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 247 |\u001b[39m                 success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n         \u001b[90m 248 |\u001b[39m                 notes\u001b[33m:\u001b[39m error\u001b[33m.\u001b[39mmessage\n         \u001b[90m 249 |\u001b[39m             })\u001b[33m;\u001b[39m\u001b[0m\n\n      at UpdateManager.metadata [as applyUpdate] (mcp-local-setup/scripts/update-manager.js:246:34)\n      at Object.<anonymous> (mcp-local-setup/tests/integration/update.integration.test.js:336:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:337:26)\n\nFAIL mcp-local-setup/tests/unit/cli-commands-health.unit.test.js\n  ● Test suite failed to run\n\n    Jest worker encountered 4 child process exceptions, exceeding retry limit\n\n      at ChildProcessWorker.initialize (node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)\n\nFAIL mcp-local-setup/tests/unit/security/auth-manager.test.js\n  ● AuthManager › rotateToken › should rotate valid token\n\n    Bad \"options.expiresIn\" option the payload already has an \"exp\" property.\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m \u001b[90m     */\u001b[39m\n     \u001b[90m 219 |\u001b[39m     generateJWT(payload) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         \u001b[36mreturn\u001b[39m jwt\u001b[33m.\u001b[39msign(payload\u001b[33m,\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mjwtSecret\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             expiresIn\u001b[33m:\u001b[39m \u001b[32m'1h'\u001b[39m\n     \u001b[90m 222 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m     }\u001b[0m\n\n      at Object.<anonymous>.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)\n      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)\n      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/security/auth-manager.test.js:122:29)\n\n  ● AuthManager › rotateToken › should keep old token valid during grace period\n\n    Bad \"options.expiresIn\" option the payload already has an \"exp\" property.\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m \u001b[90m     */\u001b[39m\n     \u001b[90m 219 |\u001b[39m     generateJWT(payload) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         \u001b[36mreturn\u001b[39m jwt\u001b[33m.\u001b[39msign(payload\u001b[33m,\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mjwtSecret\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m             expiresIn\u001b[33m:\u001b[39m \u001b[32m'1h'\u001b[39m\n     \u001b[90m 222 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m     }\u001b[0m\n\n      at Object.<anonymous>.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)\n      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)\n      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/security/auth-manager.test.js:131:29)\n\nFAIL tests/integration/docker/build-validation.test.js (5.181 s)\n  ● Docker Build Validation › Dockerfile Syntax Validation › should validate Python Dockerfile\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m  98 |\u001b[39m       }\n     \u001b[90m  99 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 100 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m     it(\u001b[32m'should validate Go Dockerfile'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (tests/integration/docker/build-validation.test.js:100:28)\n\n  ● Docker Build Validation › Build Configuration › should use build arguments for flexibility\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 206 |\u001b[39m         \u001b[36mconst\u001b[39m hasArgs \u001b[33m=\u001b[39m content\u001b[33m.\u001b[39mincludes(\u001b[32m'ARG'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 207 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 208 |\u001b[39m         expect(hasArgs)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 209 |\u001b[39m       }\n     \u001b[90m 210 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m\u001b[0m\n\n      at Object.toBe (tests/integration/docker/build-validation.test.js:208:25)\n\n  ● Docker Build Validation › Build Configuration › should have proper labels\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m         \u001b[90m// Check for any LABEL instruction (more flexible)\u001b[39m\n     \u001b[90m 229 |\u001b[39m         \u001b[36mconst\u001b[39m hasLabels \u001b[33m=\u001b[39m content\u001b[33m.\u001b[39mmatch(\u001b[35m/LABEL\\s+\\w+=/\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m         expect(hasLabels)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m       }\n     \u001b[90m 232 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeNull (tests/integration/docker/build-validation.test.js:230:31)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Node.js image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/node.Dockerfile --label test=true -t test-node:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 253 |\u001b[39m       \n         \u001b[90m 254 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 255 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 256 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 257 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 258 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:255:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Python image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/python.Dockerfile --label test=true -t test-python:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 261 |\u001b[39m       \n         \u001b[90m 262 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 263 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 264 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 265 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 266 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:263:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)\n\n  ● Docker Build Validation › Docker Build Tests (requires Docker) › should build Go image successfully\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Command failed: docker build -f /home/jenner/code/mcps/docker/production/go.Dockerfile --label test=true -t test-go:latest /home/jenner/code/mcps/docker/production\"\n\n        \u001b[0m \u001b[90m 269 |\u001b[39m       \n         \u001b[90m 270 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m         execSync(buildCommand\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 272 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 273 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 274 |\u001b[39m\u001b[0m\n\n      at execSync (tests/integration/docker/build-validation.test.js:271:9)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)\n      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)\n\nFAIL tests/unit/monitoring/alert-router.test.js (11.546 s)\n  ● AlertRouter › alert actions › should handle action errors gracefully\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m     it(\u001b[32m'should handle action errors gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m       \u001b[36mconst\u001b[39m mockSend \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Send failed'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m       \n     \u001b[90m 295 |\u001b[39m       alertRouter\u001b[33m.\u001b[39maddChannel(\u001b[32m'failing'\u001b[39m\u001b[33m,\u001b[39m { send\u001b[33m:\u001b[39m mockSend })\u001b[33m;\u001b[39m\u001b[0m\n\n      at it (tests/unit/monitoring/alert-router.test.js:292:5)\n      at describe (tests/unit/monitoring/alert-router.test.js:224:3)\n      at Object.describe (tests/unit/monitoring/alert-router.test.js:3:1)\n\nFAIL mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js (15.451 s)\n  ● CI/CD and Orchestration Integration › Rollback works across CI/CD and orchestration\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"rolled-back\"\n    Received: \"Running\"\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m     \u001b[90m// Then orchestration should also rollback\u001b[39m\n     \u001b[90m  98 |\u001b[39m     \u001b[36mconst\u001b[39m k8sStatus \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m k8s\u001b[33m.\u001b[39mgetDeploymentStatus(deployment\u001b[33m.\u001b[39mdeploymentId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m     expect(k8sStatus\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'rolled-back'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m     expect(rollbackResult\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:99:30)\n\n  ● CI/CD and Orchestration Integration › CI/CD test results influence orchestration deployment\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"Tests must pass before deployment\"\n    Received string:    \"fail is not defined\"\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m         fail(\u001b[32m'Deployment should have been prevented'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         expect(error\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Tests must pass before deployment'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m       }\n     \u001b[90m 119 |\u001b[39m     }\n     \u001b[90m 120 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:117:31)\n\n  ● CI/CD and Orchestration Integration › Orchestration scaling triggers CI/CD metrics update\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 3\n\n    \u001b[0m \u001b[90m 132 |\u001b[39m     \u001b[90m// Then CI/CD should reflect the scaling\u001b[39m\n     \u001b[90m 133 |\u001b[39m     \u001b[36mconst\u001b[39m metrics \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m cicd\u001b[33m.\u001b[39mgetDeploymentStatus(deployment\u001b[33m.\u001b[39mdeploymentId)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 134 |\u001b[39m     expect(metrics\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mreplicas)\u001b[33m.\u001b[39mtoBe(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 135 |\u001b[39m     expect(metrics\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mscalingEvents)\u001b[33m.\u001b[39mtoContainEqual(\n     \u001b[90m 136 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 137 |\u001b[39m         type\u001b[33m:\u001b[39m \u001b[32m'manual-scale'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:134:38)\n\nFAIL mcp-local-setup/tests/unit/cli/publish.test.js\n  ● Test suite failed to run\n\n    A jest worker process (pid=3738405) was terminated by another process: signal=SIGTERM, exitCode=null. Operating system logs may contain more information on why this occurred.\n\n      at ChildProcessWorker._onExit (node_modules/jest-worker/build/workers/ChildProcessWorker.js:370:23)\n\nFAIL mcp-local-setup/tests/unit/update/service-updater.unit.test.js (30.539 s)\n  ● ServiceUpdater › updateService › should update service successfully\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)\n\n  ● ServiceUpdater › updateService › should allow incompatible update with force flag\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)\n\n  ● ServiceUpdater › updateService › should update dependencies first\n\n    Service dependency1 is not installed\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m             \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39minstalled[service]) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} is not installed`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m             }\n     \u001b[90m 80 |\u001b[39m\n     \u001b[90m 81 |\u001b[39m             \u001b[90m// Get update info\u001b[39m\u001b[0m\n\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:78:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)\n\n  ● ServiceUpdater › updateService › should backup service before update\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)\n\n  ● ServiceUpdater › updateService › should run migrations after update\n\n    Service filesystem failed to start\n\n    \u001b[0m \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 571 |\u001b[39m                 \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service ${service} failed to start`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 572 |\u001b[39m             }\n     \u001b[90m 573 |\u001b[39m         }\n     \u001b[90m 574 |\u001b[39m         \u001b[0m\n\n      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)\n      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)\n\n  ● ServiceUpdater › updateService › should rollback on failure\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"filesystem\", \"1.0.0\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m             )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Start failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m             expect(rollbackSpy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.0.0'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:251:33)\n\n  ● ServiceUpdater › verifyService › should verify Docker service is running\n\n    expect(received).resolves.not.toThrow()\n\n    Received promise rejected instead of resolved\n    Rejected to value: [TypeError: Cannot read properties of undefined (reading 'type')]\n\n    \u001b[0m \u001b[90m 344 |\u001b[39m             execSync\u001b[33m.\u001b[39mmockReturnValue(\u001b[32m'Up 5 seconds\\n'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 345 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 346 |\u001b[39m             \u001b[36mawait\u001b[39m expect(\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 347 |\u001b[39m                 serviceUpdater\u001b[33m.\u001b[39mverifyService(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.1.0'\u001b[39m)\n     \u001b[90m 348 |\u001b[39m             )\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 349 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:346:19)\n\n  ● ServiceUpdater › verifyService › should throw if Docker service not running\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Service filesystem failed to start\"\n    Received message:   \"Cannot read properties of undefined (reading 'type')\"\n\n        \u001b[0m \u001b[90m 565 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n         \u001b[90m 566 |\u001b[39m         \n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 567 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n         \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 568 |\u001b[39m             \u001b[90m// Check Docker container is running\u001b[39m\n         \u001b[90m 569 |\u001b[39m             \u001b[36mconst\u001b[39m output \u001b[33m=\u001b[39m execSync(\u001b[32m`docker ps --filter name=mcp-${service} --format \"{{.Status}}\"`\u001b[39m\u001b[33m,\u001b[39m { encoding\u001b[33m:\u001b[39m \u001b[32m'utf8'\u001b[39m })\u001b[33m;\u001b[39m\n         \u001b[90m 570 |\u001b[39m             \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39moutput\u001b[33m.\u001b[39mincludes(\u001b[32m'Up'\u001b[39m)) {\u001b[0m\n\n      at ServiceUpdater.type [as verifyService] (mcp-local-setup/scripts/service-updater.js:567:32)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:354:13)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:356:23)\n\n  ● ServiceUpdater › rollbackService › should rollback to previous version\n\n    TypeError: Cannot read properties of undefined (reading 'type')\n\n    \u001b[0m \u001b[90m 431 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 433 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 434 |\u001b[39m             execSync(\u001b[32m`docker stop mcp-${service}`\u001b[39m\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m {\n     \u001b[90m 436 |\u001b[39m             \u001b[90m// Stop local service (would need process management)\u001b[39m\u001b[0m\n\n      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)\n      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:366:13)\n\n  ● ServiceUpdater › rollbackService › should use most recent backup\n\n    TypeError: Cannot read properties of undefined (reading 'type')\n\n    \u001b[0m \u001b[90m 431 |\u001b[39m         \u001b[36mconst\u001b[39m installed \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgetInstalledServices()\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m         \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 433 |\u001b[39m         \u001b[36mif\u001b[39m (installed[service]\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'docker'\u001b[39m) {\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 434 |\u001b[39m             execSync(\u001b[32m`docker stop mcp-${service}`\u001b[39m\u001b[33m,\u001b[39m { stdio\u001b[33m:\u001b[39m \u001b[32m'ignore'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m         } \u001b[36melse\u001b[39m {\n     \u001b[90m 436 |\u001b[39m             \u001b[90m// Stop local service (would need process management)\u001b[39m\u001b[0m\n\n      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)\n      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)\n      at Object.<anonymous> (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:374:13)\n\n  ● ServiceUpdater › runMigrations › should run applicable migrations in order\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 435 |\u001b[39m             \u001b[36mawait\u001b[39m serviceUpdater\u001b[33m.\u001b[39mrunMigrations(\u001b[32m'filesystem'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.0.0'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'1.2.0'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 436 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 437 |\u001b[39m             expect(migration1\u001b[33m.\u001b[39mup)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 438 |\u001b[39m             expect(migration2\u001b[33m.\u001b[39mup)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 439 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 440 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:437:35)\n\nFAIL mcp-local-setup/tests/integration/service-lifecycle.integration.test.js (67.222 s)\n  ● Service Lifecycle Integration Tests › Service Start › should start a service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m       \u001b[90m// Start the service\u001b[39m\n     \u001b[90m 45 |\u001b[39m       \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m\n     \u001b[90m 48 |\u001b[39m       \u001b[90m// Mark for cleanup\u001b[39m\n     \u001b[90m 49 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${testServiceName}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:46:23)\n\n  ● Service Lifecycle Integration Tests › Service Start › should handle starting already running service\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m       \u001b[90m// Try to start again\u001b[39m\n     \u001b[90m 62 |\u001b[39m       \u001b[36mconst\u001b[39m startedAgain \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m       expect(startedAgain)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Docker compose should handle this gracefully\u001b[39m\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m\n     \u001b[90m 66 |\u001b[39m     it(\u001b[32m'should start multiple services in order'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:63:28)\n\n  ● Service Lifecycle Integration Tests › Service Start › should start multiple services in order\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 71 |\u001b[39m         \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m         \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(service\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 73 |\u001b[39m         expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 74 |\u001b[39m         \n     \u001b[90m 75 |\u001b[39m         startTimes\u001b[33m.\u001b[39mpush({ service\u001b[33m,\u001b[39m time\u001b[33m:\u001b[39m startTime })\u001b[33m;\u001b[39m\n     \u001b[90m 76 |\u001b[39m         testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${service}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:73:25)\n\n  ● Service Lifecycle Integration Tests › Service Start › should respect environment variables when starting\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m`service:${testServiceName}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m       \n     \u001b[90m 96 |\u001b[39m       \u001b[36mdelete\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mTEST_SERVICE_PORT\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:93:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should stop a running service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 106 |\u001b[39m       \u001b[90m// Stop the service\u001b[39m\n     \u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m stopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(testServiceName\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 108 |\u001b[39m       expect(stopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 109 |\u001b[39m\n     \u001b[90m 110 |\u001b[39m       \u001b[90m// Verify service is stopped\u001b[39m\n     \u001b[90m 111 |\u001b[39m       \u001b[36mawait\u001b[39m expect(waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m5000\u001b[39m))\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:108:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should handle stopping already stopped service\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m       \u001b[90m// Try to stop a service that's not running\u001b[39m\n     \u001b[90m 116 |\u001b[39m       \u001b[36mconst\u001b[39m stopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'non-existent-service'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m       expect(stopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Docker compose returns 0 even for non-existent services\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m\n     \u001b[90m 120 |\u001b[39m     it(\u001b[32m'should stop dependent services in correct order'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:117:23)\n\n  ● Service Lifecycle Integration Tests › Service Stop › should stop dependent services in correct order\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 126 |\u001b[39m       \u001b[90m// Stop API first (which depends on database)\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[36mconst\u001b[39m apiStopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'api'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 128 |\u001b[39m       expect(apiStopped)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n     \u001b[90m 130 |\u001b[39m       \u001b[90m// Then stop database\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \u001b[36mconst\u001b[39m dbStopped \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m stopService(\u001b[32m'database'\u001b[39m\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:128:26)\n\n  ● Service Lifecycle Integration Tests › Service Restart › should restart a service successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 141 |\u001b[39m       \n     \u001b[90m 142 |\u001b[39m       \u001b[36mconst\u001b[39m healthyBefore \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m10000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 143 |\u001b[39m       expect(healthyBefore)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n     \u001b[90m 145 |\u001b[39m       \u001b[90m// Restart service\u001b[39m\n     \u001b[90m 146 |\u001b[39m       \u001b[36mconst\u001b[39m restarted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mPromise\u001b[39m((resolve) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:143:29)\n\n  ● Service Lifecycle Integration Tests › Service Dependencies › should start dependencies automatically\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 195 |\u001b[39m       \u001b[90m// Start only the API service\u001b[39m\n     \u001b[90m 196 |\u001b[39m       \u001b[36mconst\u001b[39m started \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m startService(apiService\u001b[33m.\u001b[39mname\u001b[33m,\u001b[39m { silent\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m       expect(started)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 198 |\u001b[39m       \n     \u001b[90m 199 |\u001b[39m       testResources\u001b[33m.\u001b[39mpush(\u001b[32m'service:api-with-deps'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'service:database'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'service:cache'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:197:23)\n\n  ● Service Lifecycle Integration Tests › Service Health Monitoring › should detect when service becomes unhealthy\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m       \n     \u001b[90m 229 |\u001b[39m       \u001b[36mconst\u001b[39m initialHealth \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m10000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m       expect(initialHealth)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m\n     \u001b[90m 232 |\u001b[39m       \u001b[90m// Simulate service becoming unhealthy\u001b[39m\n     \u001b[90m 233 |\u001b[39m       \u001b[90m// (In a real scenario, you might trigger an error condition)\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:230:29)\n\n  ● Service Lifecycle Integration Tests › Service Health Monitoring › should recover from temporary failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 265 |\u001b[39m       \u001b[90m// Service should recover and become healthy again\u001b[39m\n     \u001b[90m 266 |\u001b[39m       \u001b[36mconst\u001b[39m recovered \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m waitForHealthy(testServiceName\u001b[33m,\u001b[39m \u001b[35m30000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 267 |\u001b[39m       expect(recovered)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 268 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 269 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:267:25)\n\n  ● Service Lifecycle Integration Tests › Resource Cleanup › should remove orphaned containers\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 297 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 298 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 299 |\u001b[39m       expect(cleaned)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 300 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 302 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:299:23)\n\n\nTest Suites: 57 failed, 38 passed, 95 total\nTests:       286 failed, 9 skipped, 1390 passed, 1685 total\nSnapshots:   0 total\nTime:        68.078 s, estimated 71 s\nRan all test suites.\nTest results written to: test-results/unit-results.json\n"
    ]
  },
  "duration": 68921,
  "durationFormatted": "1m 8s",
  "timestamp": "2025-07-24T22:53:09.560Z",
  "environment": {
    "node": "v22.17.0",
    "platform": "linux",
    "arch": "x64",
    "ci": true
  },
  "options": {
    "testTypes": [
      "unit"
    ],
    "coverage": false,
    "parallel": false
  }
}