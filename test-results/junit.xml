<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="MCP Platform Tests" tests="0" failures="0" errors="1" time="68.921">
  <testsuite name="unit" tests="0" failures="0" errors="1" time="68.918">
    <system-err>npx jest --json --outputFile /home/jenner/code/mcps/test-results/unit-results.json --testTimeout 60000 --testPathPattern tests/unit/**/*.test.js --testPathPattern mcp-local-setup/tests/unit/**/*.test.js --testPathPattern **/__tests__/**/*.test.js failed with code 1
jest-haste-map: Haste module naming collision: mcp-vscode
  The following files share their name; please adjust your hasteImpl:
    * &lt;rootDir&gt;/ide/vscode/package.json
    * &lt;rootDir&gt;/dist/ide/vscode/package.json

jest-haste-map: Haste module naming collision: mcp-platform-cli
  The following files share their name; please adjust your hasteImpl:
    * &lt;rootDir&gt;/mcp-local-setup/cli/package.json
    * &lt;rootDir&gt;/dist/mcp-local-setup/cli/package.json

jest-haste-map: Haste module naming collision: mcp-cli-plugin-git
  The following files share their name; please adjust your hasteImpl:
    * &lt;rootDir&gt;/mcp-local-setup/cli/plugins/examples/git-plugin/package.json
    * &lt;rootDir&gt;/dist/mcp-local-setup/cli/plugins/examples/git-plugin/package.json

jest-haste-map: Haste module naming collision: mcp-cli-plugins-installed
  The following files share their name; please adjust your hasteImpl:
    * &lt;rootDir&gt;/mcp-local-setup/cli/plugins/installed/package.json
    * &lt;rootDir&gt;/dist/packages/debian-package/usr/local/mcp-platform/mcp-local-setup/cli/plugins/installed/package.json

jest-haste-map: Haste module naming collision: mcp-cli-plugin-docker
  The following files share their name; please adjust your hasteImpl:
    * &lt;rootDir&gt;/mcp-local-setup/cli/plugins/examples/docker-plugin/package.json
    * &lt;rootDir&gt;/dist/packages/debian-package/usr/local/mcp-platform/mcp-local-setup/cli/plugins/examples/docker-plugin/package.json

FAIL mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js
  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Complete developer workflow from IDE to production

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Collaborative development with multiple tools

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Progressive rollout with monitoring

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Multi-cloud deployment with unified management

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Debugging production issues with integrated tools

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

FAIL tests/unit/config/settings.test.js
  ‚óè Console

    console.error
      Configuration validation failed: Invalid configuration: port = 70000

    [0m [90m 150 |[39m   }[33m,[39m validationSchema)[33m;[39m
     [90m 151 |[39m } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 152 |[39m   console[33m.[39merror([32m&apos;Configuration validation failed:&apos;[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 153 |[39m   process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m 154 |[39m }
     [90m 155 |[39m[0m

      at Object.error (config/production/settings.js:152:11)
      at require (tests/unit/config/settings.test.js:123:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/config/settings.test.js:124:10)

    console.error
      Configuration validation failed: Invalid configuration: logLevel = debug

    [0m [90m 150 |[39m   }[33m,[39m validationSchema)[33m;[39m
     [90m 151 |[39m } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 152 |[39m   console[33m.[39merror([32m&apos;Configuration validation failed:&apos;[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 153 |[39m   process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m 154 |[39m }
     [90m 155 |[39m[0m

      at Object.error (config/production/settings.js:152:11)
      at require (tests/unit/config/settings.test.js:131:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/config/settings.test.js:132:10)

    console.error
      Configuration validation failed: Invalid configuration: nodeEnv = development

    [0m [90m 150 |[39m   }[33m,[39m validationSchema)[33m;[39m
     [90m 151 |[39m } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 152 |[39m   console[33m.[39merror([32m&apos;Configuration validation failed:&apos;[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 153 |[39m   process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m 154 |[39m }
     [90m 155 |[39m[0m

      at Object.error (config/production/settings.js:152:11)
      at require (tests/unit/config/settings.test.js:139:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/config/settings.test.js:140:10)

    console.error
      Configuration validation failed: Invalid configuration: apiVersion = version1

    [0m [90m 150 |[39m   }[33m,[39m validationSchema)[33m;[39m
     [90m 151 |[39m } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 152 |[39m   console[33m.[39merror([32m&apos;Configuration validation failed:&apos;[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 153 |[39m   process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m 154 |[39m }
     [90m 155 |[39m[0m

      at Object.error (config/production/settings.js:152:11)
      at require (tests/unit/config/settings.test.js:147:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/config/settings.test.js:148:10)

    console.error
      Configuration validation failed: Invalid configuration: maxRequestSize = 10megabytes

    [0m [90m 150 |[39m   }[33m,[39m validationSchema)[33m;[39m
     [90m 151 |[39m } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 152 |[39m   console[33m.[39merror([32m&apos;Configuration validation failed:&apos;[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 153 |[39m   process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m 154 |[39m }
     [90m 155 |[39m[0m

      at Object.error (config/production/settings.js:152:11)
      at require (tests/unit/config/settings.test.js:155:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/config/settings.test.js:156:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid port

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 122 |[39m       expect(() [33m=&gt;[39m {
     [90m 123 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 124 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 125 |[39m     })[33m;[39m
     [90m 126 |[39m
     [90m 127 |[39m     it([32m&apos;should fail validation with invalid log level&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toThrow (tests/unit/config/settings.test.js:124:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid log level

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 130 |[39m       expect(() [33m=&gt;[39m {
     [90m 131 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 132 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 133 |[39m     })[33m;[39m
     [90m 134 |[39m
     [90m 135 |[39m     it([32m&apos;should fail validation with invalid node environment&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toThrow (tests/unit/config/settings.test.js:132:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid node environment

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 138 |[39m       expect(() [33m=&gt;[39m {
     [90m 139 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 140 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 141 |[39m     })[33m;[39m
     [90m 142 |[39m
     [90m 143 |[39m     it([32m&apos;should fail validation with invalid API version format&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toThrow (tests/unit/config/settings.test.js:140:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid API version format

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 146 |[39m       expect(() [33m=&gt;[39m {
     [90m 147 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 148 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 149 |[39m     })[33m;[39m
     [90m 150 |[39m
     [90m 151 |[39m     it([32m&apos;should fail validation with invalid max request size format&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toThrow (tests/unit/config/settings.test.js:148:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid max request size format

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 154 |[39m       expect(() [33m=&gt;[39m {
     [90m 155 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 156 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 157 |[39m     })[33m;[39m
     [90m 158 |[39m   })[33m;[39m
     [90m 159 |[39m[0m

      at Object.toThrow (tests/unit/config/settings.test.js:156:10)

  ‚óè Production Settings Configuration ‚Ä∫ Path Configuration ‚Ä∫ should have correct absolute paths

    expect(received).toContain(expected) // indexOf

    Expected substring: &quot;config/production/../..&quot;
    Received string:    &quot;/home/jenner/code/mcps&quot;

    [0m [90m 164 |[39m       expect(path[33m.[39misAbsolute(settings[33m.[39mpaths[33m.[39mroot))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 165 |[39m       expect(path[33m.[39misAbsolute(settings[33m.[39mpaths[33m.[39m[36mpublic[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 166 |[39m       expect(settings[33m.[39mpaths[33m.[39mroot)[33m.[39mtoContain([32m&apos;config/production/../..&apos;[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 167 |[39m     })[33m;[39m
     [90m 168 |[39m
     [90m 169 |[39m     it([32m&apos;should allow overriding paths via environment variables&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toContain (tests/unit/config/settings.test.js:166:35)

FAIL tests/unit/config/features.test.js
  ‚óè Production Feature Flags Configuration ‚Ä∫ Rollout Percentage Logic ‚Ä∫ should roughly match rollout percentage across many users

    expect(received).toBeGreaterThan(expected)

    Expected: &gt; 10
    Received:   2.8000000000000003

    [0m [90m 350 |[39m       
     [90m 351 |[39m       [90m// Allow 15% variance due to simple hash function and sequential IDs[39m
    [31m[1m&gt;[22m[39m[90m 352 |[39m       expect(actualPercentage)[33m.[39mtoBeGreaterThan(rolloutPercentage [33m-[39m [35m15[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 353 |[39m       expect(actualPercentage)[33m.[39mtoBeLessThan(rolloutPercentage [33m+[39m [35m15[39m)[33m;[39m
     [90m 354 |[39m     })[33m;[39m
     [90m 355 |[39m[0m

      at Object.toBeGreaterThan (tests/unit/config/features.test.js:352:32)

(node:3738482) [DEP0147] DeprecationWarning: In future versions of Node.js, fs.rmdir(path, { recursive: true }) will be removed. Use fs.rm(path, { recursive: true }) instead
(Use `node --trace-deprecation ...` to show where the warning was created)
FAIL mcp-local-setup/tests/unit/backup/data-manager.unit.test.js
  ‚óè DataManager Unit Tests ‚Ä∫ exportServiceData ‚Ä∫ should export service data volumes

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: &gt;= 1
    Received number of calls:    0

    [0m [90m 130 |[39m             expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 131 |[39m             expect(result[33m.[39mvolumes[[32m&apos;test-service&apos;[39m])[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 132 |[39m             expect(mockFs[33m.[39mmkdir)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 133 |[39m         })[33m;[39m
     [90m 134 |[39m
     [90m 135 |[39m         it([32m&apos;should handle export failures&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:132:34)

  ‚óè DataManager Unit Tests ‚Ä∫ exportServiceData ‚Ä∫ should handle export failures

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 143 |[39m             [36mconst[39m result [33m=[39m [36mawait[39m dataManager[33m.[39mexportServiceData(services[33m,[39m exportPath)[33m;[39m
     [90m 144 |[39m
    [31m[1m&gt;[22m[39m[90m 145 |[39m             expect(result[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 146 |[39m             expect(result[33m.[39merrors)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m 147 |[39m             expect(result[33m.[39merrors[[35m0[39m][33m.[39mservice)[33m.[39mtoBe([32m&apos;failing-service&apos;[39m)[33m;[39m
     [90m 148 |[39m         })[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:145:36)

  ‚óè DataManager Unit Tests ‚Ä∫ helper methods ‚Ä∫ should walk directory recursively

    expect(received).toContain(expected) // indexOf

    Expected value: &quot;/test/dir/subdir/file2.txt&quot;
    Received array: [&quot;/test/dir/file1.txt&quot;]

    [0m [90m 447 |[39m
     [90m 448 |[39m             expect(files)[33m.[39mtoContain([32m&apos;/test/dir/file1.txt&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 449 |[39m             expect(files)[33m.[39mtoContain([32m&apos;/test/dir/subdir/file2.txt&apos;[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 450 |[39m         })[33m;[39m
     [90m 451 |[39m
     [90m 452 |[39m         it([32m&apos;should match file patterns&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toContain (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:449:27)

FAIL tests/integration/security/rate-limiting.test.js
  ‚óè Console

    console.error
      Redis consume token error: Error: Redis connection lost
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/integration/security/rate-limiting.test.js:157:50)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 246 |[39m       }[33m;[39m
     [90m 247 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 248 |[39m       console[33m.[39merror([32m&apos;Redis consume token error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 249 |[39m       [90m// Fail open on Redis errors[39m
     [90m 250 |[39m       [36mreturn[39m {
     [90m 251 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m[0m

      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)
      at Object.&lt;anonymous&gt; (tests/integration/security/rate-limiting.test.js:160:22)

  ‚óè Rate Limiting Integration Tests ‚Ä∫ IP-based Security Features ‚Ä∫ should detect and handle suspicious IPs

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 229 |[39m
     [90m 230 |[39m       [90m// Should be marked as suspicious[39m
    [31m[1m&gt;[22m[39m[90m 231 |[39m       expect(ipLimiter[33m.[39misSuspicious(suspiciousIP))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                                    [31m[1m^[22m[39m
     [90m 232 |[39m
     [90m 233 |[39m       [90m// Should get reduced limits[39m
     [90m 234 |[39m       [36mconst[39m limit [33m=[39m ipLimiter[33m.[39mgetRateLimitForIP(suspiciousIP[33m,[39m [32m&apos;/api/data&apos;[39m)[33m;[39m[0m

      at Object.toBe (tests/integration/security/rate-limiting.test.js:231:52)

  ‚óè Rate Limiting Integration Tests ‚Ä∫ Rate Limit Headers and Responses ‚Ä∫ should set appropriate rate limit headers

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;X-RateLimit-Limit&quot;, 100
    Received
           1: &quot;X-RateLimit-Limit&quot;, undefined
           2: &quot;X-RateLimit-Remaining&quot;, 99
           3: &quot;X-RateLimit-Reset&quot;, &quot;2025-07-24T23:52:02.063Z&quot;

    Number of calls: 4

    [0m [90m 281 |[39m
     [90m 282 |[39m       [90m// Check user rate limit headers[39m
    [31m[1m&gt;[22m[39m[90m 283 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Limit&apos;[39m[33m,[39m [35m100[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 284 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Remaining&apos;[39m[33m,[39m [35m99[39m)[33m;[39m
     [90m 285 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Tier&apos;[39m[33m,[39m [32m&apos;free&apos;[39m)[33m;[39m
     [90m 286 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:283:29)

  ‚óè Rate Limiting Integration Tests ‚Ä∫ Advanced Rate Limiting Scenarios ‚Ä∫ should handle different endpoints with different limits

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;X-RateLimit-Limit&quot;, 5
    Received
           1: &quot;X-RateLimit-Limit&quot;, undefined
           2: &quot;X-RateLimit-Remaining&quot;, 4
           3: &quot;X-RateLimit-Reset&quot;, &quot;2025-07-24T23:52:02.079Z&quot;

    Number of calls: 4

    [0m [90m 464 |[39m       [36mawait[39m middleware(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 465 |[39m       expect(req[33m.[39mrateLimitInfo[33m.[39mresource)[33m.[39mtoBe([32m&apos;uploads&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 466 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Limit&apos;[39m[33m,[39m [35m5[39m)[33m;[39m [90m// Free tier upload limit[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 467 |[39m
     [90m 468 |[39m       [90m// Test export endpoint[39m
     [90m 469 |[39m       req[33m.[39mpath [33m=[39m [32m&apos;/api/export&apos;[39m[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:466:29)

(node:3738387) [DEP0147] DeprecationWarning: In future versions of Node.js, fs.rmdir(path, { recursive: true }) will be removed. Use fs.rm(path, { recursive: true }) instead
(Use `node --trace-deprecation ...` to show where the warning was created)
FAIL tests/unit/security/ip-limiter.test.js
  ‚óè Console

    console.warn
      Could not determine client IP

    [0m [90m 344 |[39m         [36mconst[39m ip [33m=[39m [36mthis[39m[33m.[39mgetClientIP(req)[33m;[39m
     [90m 345 |[39m         [36mif[39m ([33m![39mip) {
    [31m[1m&gt;[22m[39m[90m 346 |[39m           console[33m.[39mwarn([32m&apos;Could not determine client IP&apos;[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 347 |[39m           [36mreturn[39m next()[33m;[39m
     [90m 348 |[39m         }
     [90m 349 |[39m[0m

      at warn (security/rate-limiting/ip-limiter.js:346:19)
      at Object.middleware (tests/unit/security/ip-limiter.test.js:536:13)

    console.error
      IP rate limit middleware error: Error: Redis storage not implemented in this module
          at IPRateLimiter.consumeToken (/home/jenner/code/mcps/security/rate-limiting/ip-limiter.js:332:11)
          at consumeToken (/home/jenner/code/mcps/security/rate-limiting/ip-limiter.js:361:35)
          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/ip-limiter.test.js:547:13)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 388 |[39m         next()[33m;[39m
     [90m 389 |[39m       } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 390 |[39m         console[33m.[39merror([32m&apos;IP rate limit middleware error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 391 |[39m         next()[33m;[39m [90m// Fail open[39m
     [90m 392 |[39m       }
     [90m 393 |[39m     }[33m;[39m[0m

      at error (security/rate-limiting/ip-limiter.js:390:17)
      at Object.&lt;anonymous&gt; (tests/unit/security/ip-limiter.test.js:547:7)

  ‚óè IPRateLimiter ‚Ä∫ constructor ‚Ä∫ should accept custom options

    TypeError: customLimiter.options.ipWhitelist.has is not a function

    [0m [90m 34 |[39m       expect(customLimiter[33m.[39moptions[33m.[39mtrustProxy)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 35 |[39m       expect(customLimiter[33m.[39moptions[33m.[39mproxyDepth)[33m.[39mtoBe([35m2[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 36 |[39m       expect(customLimiter[33m.[39moptions[33m.[39mipWhitelist[33m.[39mhas([32m&apos;192.168.1.1&apos;[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                                [31m[1m^[22m[39m
     [90m 37 |[39m       expect(customLimiter[33m.[39moptions[33m.[39mipBlacklist[33m.[39mhas([32m&apos;10.0.0.1&apos;[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 38 |[39m       expect(customLimiter[33m.[39mlimits[33m.[39m[36mdefault[39m[33m.[39mlimit)[33m.[39mtoBe([35m50[39m)[33m;[39m
     [90m 39 |[39m     })[33m;[39m[0m

      at Object.has (tests/unit/security/ip-limiter.test.js:36:48)

FAIL tests/unit/config/env-validation.test.js
  ‚óè Console

    console.error
      Configuration validation failed: Invalid configuration: nodeEnv = development

    [0m [90m 150 |[39m   }[33m,[39m validationSchema)[33m;[39m
     [90m 151 |[39m } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 152 |[39m   console[33m.[39merror([32m&apos;Configuration validation failed:&apos;[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 153 |[39m   process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m 154 |[39m }
     [90m 155 |[39m[0m

      at Object.error (config/production/settings.js:152:11)
      at Object.require (tests/unit/config/env-validation.test.js:342:7)

  ‚óè Environment Configuration Validation ‚Ä∫ Environment Variable Types ‚Ä∫ should handle numeric environment variables correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 234 |[39m         
     [90m 235 |[39m         [36mconst[39m invalidValue [33m=[39m config[33m.[39mpath[33m.[39msplit([32m&apos;.&apos;[39m)[33m.[39mreduce((obj[33m,[39m key) [33m=&gt;[39m obj[key][33m,[39m module)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 236 |[39m         expect([33mNumber[39m[33m.[39misNaN(invalidValue))[33m.[39mtoBe([36mtrue[39m)[33m;[39m [90m// parseInt returns NaN for invalid input[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 237 |[39m         
     [90m 238 |[39m         [36mdelete[39m process[33m.[39menv[envVar][33m;[39m
     [90m 239 |[39m       }[0m

      at Object.toBe (tests/unit/config/env-validation.test.js:236:44)

  ‚óè Environment Configuration Validation ‚Ä∫ Cross-Module Consistency ‚Ä∫ should have consistent timeout values across modules

    Invalid time format: 45000

    [0m [90m  8 |[39m   [36mconst[39m match [33m=[39m timeStr[33m.[39mmatch([35m/^(\d+)([smhd])$/[39m)[33m;[39m
     [90m  9 |[39m   [36mif[39m ([33m![39mmatch) {
    [31m[1m&gt;[22m[39m[90m 10 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Invalid time format: ${timeStr}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 11 |[39m   }
     [90m 12 |[39m   
     [90m 13 |[39m   [36mconst[39m value [33m=[39m parseInt(match[[35m1[39m][33m,[39m [35m10[39m)[33m;[39m[0m

      at parseTimeToMs (config/production/limits.js:10:11)
      at Object.parseTimeToMs (config/production/limits.js:248:16)
      at Object.require (tests/unit/config/env-validation.test.js:381:22)

FAIL mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js
  ‚óè BackupManager Unit Tests ‚Ä∫ createBackup ‚Ä∫ should create a full backup

    Backup creation failed: require(...).createReadStream is not a function

    [0m [90m 199 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 200 |[39m             }
    [31m[1m&gt;[22m[39m[90m 201 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Backup creation failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 202 |[39m         }
     [90m 203 |[39m     }
     [90m 204 |[39m[0m

      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:112:30)

  ‚óè BackupManager Unit Tests ‚Ä∫ createBackup ‚Ä∫ should create incremental backup

    Backup creation failed: require(...).createReadStream is not a function

    [0m [90m 199 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 200 |[39m             }
    [31m[1m&gt;[22m[39m[90m 201 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Backup creation failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 202 |[39m         }
     [90m 203 |[39m     }
     [90m 204 |[39m[0m

      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:138:30)

  ‚óè BackupManager Unit Tests ‚Ä∫ restoreBackup ‚Ä∫ should restore a backup

    Restore failed: Backup integrity check failed

    [0m [90m 322 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 323 |[39m             }
    [31m[1m&gt;[22m[39m[90m 324 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Restore failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 325 |[39m         }
     [90m 326 |[39m     }
     [90m 327 |[39m[0m

      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:239:28)

  ‚óè BackupManager Unit Tests ‚Ä∫ restoreBackup ‚Ä∫ should handle dry run mode

    Restore failed: Backup integrity check failed

    [0m [90m 322 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 323 |[39m             }
    [31m[1m&gt;[22m[39m[90m 324 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Restore failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 325 |[39m         }
     [90m 326 |[39m     }
     [90m 327 |[39m[0m

      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:257:28)

  ‚óè BackupManager Unit Tests ‚Ä∫ cleanupBackups ‚Ä∫ should cleanup backups older than maxAge

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 5

    [0m [90m 430 |[39m             })[33m;[39m
     [90m 431 |[39m
    [31m[1m&gt;[22m[39m[90m 432 |[39m             expect(result[33m.[39mdeletedCount)[33m.[39mtoBe([35m2[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 433 |[39m             expect(backupManager[33m.[39mmetadata[33m.[39mhas([32m&apos;backup-1&apos;[39m))[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 434 |[39m             expect(backupManager[33m.[39mmetadata[33m.[39mhas([32m&apos;backup-2&apos;[39m))[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 435 |[39m         })[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:432:41)

  ‚óè BackupManager Unit Tests ‚Ä∫ importBackup/exportBackup ‚Ä∫ should import backup from local filesystem

    Import failed: require(...).createReadStream is not a function

    [0m [90m 510 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 511 |[39m             }
    [31m[1m&gt;[22m[39m[90m 512 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Import failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 513 |[39m         }
     [90m 514 |[39m     }
     [90m 515 |[39m[0m

      at BackupManager.importBackup (mcp-local-setup/scripts/backup-manager.js:512:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:461:30)

FAIL mcp-local-setup/tests/unit/config/configuration-manager.test.js
  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should load configuration for an environment

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 42 |[39m     describe([32m&apos;loadConfig&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 43 |[39m         it([32m&apos;should load configuration for an environment&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 44 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 45 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 46 |[39m             
     [90m 47 |[39m             [36mconst[39m config [33m=[39m [36mawait[39m configManager[33m.[39mloadConfig([32m&apos;test&apos;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:44:23)

  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should throw error for non-existent environment

    TypeError: fs.access.mockRejectedValue is not a function

    [0m [90m 54 |[39m         
     [90m 55 |[39m         it([32m&apos;should throw error for non-existent environment&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 56 |[39m             fs[33m.[39maccess[33m.[39mmockRejectedValue({ code[33m:[39m [32m&apos;ENOENT&apos;[39m })[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 57 |[39m             
     [90m 58 |[39m             [36mawait[39m expect(configManager[33m.[39mloadConfig([32m&apos;nonexistent&apos;[39m))
     [90m 59 |[39m                 [33m.[39mrejects[33m.[39mtoThrow([32m&quot;Configuration for environment &apos;nonexistent&apos; not found&quot;[39m)[33m;[39m[0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:56:23)

  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should include secrets when requested

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 61 |[39m         
     [90m 62 |[39m         it([32m&apos;should include secrets when requested&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 63 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 64 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 65 |[39m             fs[33m.[39mreaddir[33m.[39mmockResolvedValue([[32m&apos;DB_PASSWORD.enc&apos;[39m])[33m;[39m
     [90m 66 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:63:23)

  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should apply runtime overrides

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 76 |[39m         
     [90m 77 |[39m         it([32m&apos;should apply runtime overrides&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 78 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 79 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 80 |[39m             
     [90m 81 |[39m             [36mconst[39m overrides [33m=[39m {[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:78:23)

  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should validate configuration when requested

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 92 |[39m         
     [90m 93 |[39m         it([32m&apos;should validate configuration when requested&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 94 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 95 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 96 |[39m             
     [90m 97 |[39m             configManager[33m.[39mvalidateConfig [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue({[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:94:23)

  ‚óè ConfigurationManager ‚Ä∫ saveConfig ‚Ä∫ should save configuration to file

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 177 |[39m     describe([32m&apos;saveConfig&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 178 |[39m         it([32m&apos;should save configuration to file&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 179 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 180 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 181 |[39m             
     [90m 182 |[39m             [36mconst[39m result [33m=[39m [36mawait[39m configManager[33m.[39msaveConfig(mockConfig[33m,[39m [32m&apos;test&apos;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:179:22)

  ‚óè ConfigurationManager ‚Ä∫ saveConfig ‚Ä∫ should create backup when requested

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 195 |[39m         
     [90m 196 |[39m         it([32m&apos;should create backup when requested&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 197 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 198 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 199 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 200 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:197:22)

  ‚óè ConfigurationManager ‚Ä∫ getSecrets and setSecrets ‚Ä∫ should encrypt and save secrets

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 218 |[39m     describe([32m&apos;getSecrets and setSecrets&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 219 |[39m         it([32m&apos;should encrypt and save secrets&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 220 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 221 |[39m             fs[33m.[39mreadFile[33m.[39mmockRejectedValue({ code[33m:[39m [32m&apos;ENOENT&apos;[39m })[33m;[39m [90m// No existing metadata[39m
     [90m 222 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 223 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:220:22)

  ‚óè ConfigurationManager ‚Ä∫ getSecrets and setSecrets ‚Ä∫ should decrypt and retrieve secrets

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 239 |[39m         it([32m&apos;should decrypt and retrieve secrets&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 240 |[39m             [36mconst[39m encryptedData [33m=[39m configManager[33m.[39m_encrypt([32m&apos;secret-value&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 241 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue(encryptedData)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 242 |[39m             
     [90m 243 |[39m             [36mconst[39m secrets [33m=[39m [36mawait[39m configManager[33m.[39mgetSecrets([[32m&apos;API_KEY&apos;[39m])[33m;[39m
     [90m 244 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:241:25)

  ‚óè ConfigurationManager ‚Ä∫ getSecrets and setSecrets ‚Ä∫ should throw error for non-existent secret

    TypeError: fs.readFile.mockRejectedValue is not a function

    [0m [90m 247 |[39m         
     [90m 248 |[39m         it([32m&apos;should throw error for non-existent secret&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 249 |[39m             fs[33m.[39mreadFile[33m.[39mmockRejectedValue({ code[33m:[39m [32m&apos;ENOENT&apos;[39m })[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 250 |[39m             
     [90m 251 |[39m             [36mawait[39m expect(configManager[33m.[39mgetSecrets([[32m&apos;NONEXISTENT&apos;[39m]))
     [90m 252 |[39m                 [33m.[39mrejects[33m.[39mtoThrow([32m&quot;Secret &apos;NONEXISTENT&apos; not found&quot;[39m)[33m;[39m[0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:249:25)

  ‚óè ConfigurationManager ‚Ä∫ environment management ‚Ä∫ should list available environments

    TypeError: fs.readdir.mockResolvedValue is not a function

    [0m [90m 284 |[39m     describe([32m&apos;environment management&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 285 |[39m         it([32m&apos;should list available environments&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 286 |[39m             fs[33m.[39mreaddir[33m.[39mmockResolvedValue([[32m&apos;dev.json&apos;[39m[33m,[39m [32m&apos;prod.json&apos;[39m[33m,[39m [32m&apos;test.json&apos;[39m[33m,[39m [32m&apos;README.md&apos;[39m])[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 287 |[39m             
     [90m 288 |[39m             [36mconst[39m environments [33m=[39m [36mawait[39m configManager[33m.[39mlistEnvironments()[33m;[39m
     [90m 289 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:286:24)

  ‚óè ConfigurationManager ‚Ä∫ environment management ‚Ä∫ should create new environment

    TypeError: fs.access.mockRejectedValue is not a function

    [0m [90m 292 |[39m         
     [90m 293 |[39m         it([32m&apos;should create new environment&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 294 |[39m             fs[33m.[39maccess[33m.[39mmockRejectedValue({ code[33m:[39m [32m&apos;ENOENT&apos;[39m })[33m;[39m [90m// Doesn&apos;t exist[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 295 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 296 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 297 |[39m             [0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:294:23)

  ‚óè ConfigurationManager ‚Ä∫ environment management ‚Ä∫ should throw error if environment already exists

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 311 |[39m         
     [90m 312 |[39m         it([32m&apos;should throw error if environment already exists&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 313 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m [90m// Exists[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 314 |[39m             
     [90m 315 |[39m             [36mawait[39m expect(configManager[33m.[39mcreateEnvironment([32m&apos;existing&apos;[39m))
     [90m 316 |[39m                 [33m.[39mrejects[33m.[39mtoThrow([32m&quot;Environment &apos;existing&apos; already exists&quot;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:313:23)

  ‚óè ConfigurationManager ‚Ä∫ environment management ‚Ä∫ should delete environment

    TypeError: fs.unlink.mockResolvedValue is not a function

    [0m [90m 318 |[39m         
     [90m 319 |[39m         it([32m&apos;should delete environment&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 320 |[39m             fs[33m.[39munlink[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 321 |[39m             fs[33m.[39mrmdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 322 |[39m             
     [90m 323 |[39m             [36mconst[39m result [33m=[39m [36mawait[39m configManager[33m.[39mdeleteEnvironment([32m&apos;test&apos;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:320:23)

  ‚óè ConfigurationManager ‚Ä∫ import/export ‚Ä∫ should import JSON configuration

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 348 |[39m         
     [90m 349 |[39m         it([32m&apos;should import JSON configuration&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 350 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 351 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 352 |[39m             configManager[33m.[39mvalidateConfig [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue({
     [90m 353 |[39m                 valid[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:350:22)

  ‚óè ConfigurationManager ‚Ä∫ import/export ‚Ä∫ should merge imported configuration when requested

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 373 |[39m             
     [90m 374 |[39m             configManager[33m.[39mloadConfig [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue(existingConfig)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 375 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 376 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 377 |[39m             configManager[33m.[39mvalidateConfig [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue({
     [90m 378 |[39m                 valid[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:375:22)

FAIL tests/integration/security/middleware-chain.test.js
  ‚óè Security Middleware Chain Integration ‚Ä∫ Complete Security Middleware Stack ‚Ä∫ should process request through full security stack

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 94 |[39m     it([32m&apos;should process request through full security stack&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 95 |[39m       [90m// Setup middleware chain[39m
    [31m[1m&gt;[22m[39m[90m 96 |[39m       app[33m.[39muse(helmetMiddleware[33m.[39mmiddleware())[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 97 |[39m       app[33m.[39muse(corsMiddleware[33m.[39mhandle())[33m;[39m
     [90m 98 |[39m       app[33m.[39muse(ipLimiter[33m.[39mcreateMiddleware())[33m;[39m
     [90m 99 |[39m       app[33m.[39muse(jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m }))[33m;[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:96:32)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Complete Security Middleware Stack ‚Ä∫ should handle authentication failure in middleware chain

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 118 |[39m       [90m// Setup middleware chain with required auth[39m
     [90m 119 |[39m       app[33m.[39muse(corsMiddleware[33m.[39mhandle())[33m;[39m
    [31m[1m&gt;[22m[39m[90m 120 |[39m       app[33m.[39muse(jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mfalse[39m }))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 121 |[39m       app[33m.[39muse(userLimiter[33m.[39mcreateMiddleware([32m&apos;api-calls&apos;[39m))[33m;[39m
     [90m 122 |[39m
     [90m 123 |[39m       [90m// No authentication provided[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:120:23)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Authentication Middleware Combinations ‚Ä∫ should support multiple authentication methods

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 156 |[39m       [36mconst[39m authMiddleware [33m=[39m [36masync[39m (req[33m,[39m res[33m,[39m next) [33m=&gt;[39m {
     [90m 157 |[39m         [90m// Try JWT first[39m
    [31m[1m&gt;[22m[39m[90m 158 |[39m         [36mconst[39m jwtMiddleware [33m=[39m jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m })[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 159 |[39m         [36mawait[39m jwtMiddleware(req[33m,[39m res[33m,[39m () [33m=&gt;[39m {})[33m;[39m
     [90m 160 |[39m
     [90m 161 |[39m         [36mif[39m (req[33m.[39muser) {[0m

      at middleware (tests/integration/security/middleware-chain.test.js:158:39)
      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)
      at Object.process (tests/integration/security/middleware-chain.test.js:178:17)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Authentication Middleware Combinations ‚Ä∫ should enforce permission requirements across auth methods

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 207 |[39m       app[33m.[39muse([36masync[39m (req[33m,[39m res[33m,[39m next) [33m=&gt;[39m {
     [90m 208 |[39m         [90m// Try both auth methods[39m
    [31m[1m&gt;[22m[39m[90m 209 |[39m         [36mawait[39m jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m })(req[33m,[39m res[33m,[39m () [33m=&gt;[39m {})[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 210 |[39m         [36mif[39m ([33m![39mreq[33m.[39muser) {
     [90m 211 |[39m           [36mawait[39m apiKeyManager[33m.[39mmiddleware()(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 212 |[39m         } [36melse[39m {[0m

      at middleware (tests/integration/security/middleware-chain.test.js:209:23)
      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)
      at Object.process (tests/integration/security/middleware-chain.test.js:221:17)

  ‚óè Security Middleware Chain Integration ‚Ä∫ CORS and Security Headers ‚Ä∫ should handle preflight requests with security headers

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 235 |[39m     it([32m&apos;should handle preflight requests with security headers&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 236 |[39m       [90m// Setup middleware[39m
    [31m[1m&gt;[22m[39m[90m 237 |[39m       app[33m.[39muse(helmetMiddleware[33m.[39mmiddleware())[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 238 |[39m       app[33m.[39muse(corsMiddleware[33m.[39mhandle())[33m;[39m
     [90m 239 |[39m
     [90m 240 |[39m       [90m// Preflight request[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:237:32)

  ‚óè Security Middleware Chain Integration ‚Ä∫ CORS and Security Headers ‚Ä∫ should apply CSP headers dynamically

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 266 |[39m       }[33m;[39m
     [90m 267 |[39m
    [31m[1m&gt;[22m[39m[90m 268 |[39m       app[33m.[39muse(helmetMiddleware[33m.[39mmiddleware())[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 269 |[39m       app[33m.[39muse(dynamicCSP)[33m;[39m
     [90m 270 |[39m
     [90m 271 |[39m       [90m// Test admin route[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:268:32)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Rate Limiting with Authentication ‚Ä∫ should apply different rate limits for authenticated vs anonymous users

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 285 |[39m     it([32m&apos;should apply different rate limits for authenticated vs anonymous users&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 286 |[39m       [90m// Setup middleware chain[39m
    [31m[1m&gt;[22m[39m[90m 287 |[39m       app[33m.[39muse(jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m }))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 288 |[39m       app[33m.[39muse([36masync[39m (req[33m,[39m res[33m,[39m next) [33m=&gt;[39m {
     [90m 289 |[39m         [36mif[39m (req[33m.[39muser) {
     [90m 290 |[39m           [90m// Authenticated users get user-based limits[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:287:23)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Rate Limiting with Authentication ‚Ä∫ should combine IP and user rate limiting for defense in depth

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 318 |[39m       [90m// Setup both limiters[39m
     [90m 319 |[39m       app[33m.[39muse(ipLimiter[33m.[39mcreateMiddleware())[33m;[39m
    [31m[1m&gt;[22m[39m[90m 320 |[39m       app[33m.[39muse(jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m }))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 321 |[39m       app[33m.[39muse((req[33m,[39m res[33m,[39m next) [33m=&gt;[39m {
     [90m 322 |[39m         [36mif[39m (req[33m.[39muser) {
     [90m 323 |[39m           [36mconst[39m userMiddleware [33m=[39m userLimiter[33m.[39mcreateMiddleware([32m&apos;api-calls&apos;[39m)[33m;[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:320:23)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Advanced Middleware Patterns ‚Ä∫ should support conditional middleware application

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 432 |[39m         } [36melse[39m [36mif[39m (req[33m.[39mpath[33m.[39mstartsWith([32m&apos;/api&apos;[39m)) {
     [90m 433 |[39m           [90m// API routes - full security[39m
    [31m[1m&gt;[22m[39m[90m 434 |[39m           [36mreturn[39m helmetMiddleware[33m.[39mmiddleware()(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 435 |[39m         } [36melse[39m [36mif[39m (req[33m.[39mpath[33m.[39mstartsWith([32m&apos;/admin&apos;[39m)) {
     [90m 436 |[39m           [90m// Admin routes - strict security[39m
     [90m 437 |[39m           res[33m.[39msetHeader([32m&apos;X-Admin-Route&apos;[39m[33m,[39m [32m&apos;true&apos;[39m)[33m;[39m[0m

      at middleware (tests/integration/security/middleware-chain.test.js:434:35)
      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)
      at Object.process (tests/integration/security/middleware-chain.test.js:467:17)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Advanced Middleware Patterns ‚Ä∫ should support middleware composition

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 487 |[39m         }
     [90m 488 |[39m         [36mif[39m (options[33m.[39mhelmet) {
    [31m[1m&gt;[22m[39m[90m 489 |[39m           middlewares[33m.[39mpush(helmetMiddleware[33m.[39mmiddleware())[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 490 |[39m         }
     [90m 491 |[39m         [36mif[39m (options[33m.[39mrateLimit) {
     [90m 492 |[39m           middlewares[33m.[39mpush(ipLimiter[33m.[39mcreateMiddleware())[33m;[39m[0m

      at middleware (tests/integration/security/middleware-chain.test.js:489:45)
      at Object.securityMiddleware (tests/integration/security/middleware-chain.test.js:512:15)

FAIL mcp-local-setup/tests/unit/config/secret-manager.test.js
  ‚óè SecretManager ‚Ä∫ backupSecrets ‚Ä∫ should create backup of secrets directory

    TypeError: fs.readdir.mockResolvedValue is not a function

    [0m [90m 211 |[39m         it([32m&apos;should create backup of secrets directory&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 212 |[39m             [36mconst[39m mockFiles [33m=[39m [[32m&apos;secret1.enc&apos;[39m[33m,[39m [32m&apos;secret2.enc&apos;[39m[33m,[39m [32m&apos;_metadata.json&apos;[39m][33m;[39m
    [31m[1m&gt;[22m[39m[90m 213 |[39m             fs[33m.[39mreaddir[33m.[39mmockResolvedValue(mockFiles)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 214 |[39m             fs[33m.[39mstat[33m.[39mmockResolvedValue({ isFile[33m:[39m () [33m=&gt;[39m [36mtrue[39m })[33m;[39m
     [90m 215 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 216 |[39m             fs[33m.[39mcopyFile[33m.[39mmockResolvedValue(undefined)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:213:24)

  ‚óè SecretManager ‚Ä∫ backupSecrets ‚Ä∫ should skip directories when backing up

    TypeError: fs.readdir.mockResolvedValue is not a function

    [0m [90m 226 |[39m         
     [90m 227 |[39m         it([32m&apos;should skip directories when backing up&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 228 |[39m             fs[33m.[39mreaddir[33m.[39mmockResolvedValue([[32m&apos;file.enc&apos;[39m[33m,[39m [32m&apos;subdir&apos;[39m])[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 229 |[39m             fs[33m.[39mstat
     [90m 230 |[39m                 [33m.[39mmockResolvedValueOnce({ isFile[33m:[39m () [33m=&gt;[39m [36mtrue[39m })
     [90m 231 |[39m                 [33m.[39mmockResolvedValueOnce({ isFile[33m:[39m () [33m=&gt;[39m [36mfalse[39m })[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:228:24)

FAIL tests/unit/security/user-limiter.test.js
  ‚óè Console

    console.error
      User rate limit middleware error: Error: Test error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:586:62)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 380 |[39m         next()[33m;[39m
     [90m 381 |[39m       } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 382 |[39m         console[33m.[39merror([32m&apos;User rate limit middleware error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 383 |[39m         
     [90m 384 |[39m         [36mif[39m (skipOnError) {
     [90m 385 |[39m           next()[33m;[39m[0m

      at error (security/rate-limiting/user-limiter.js:382:17)
      at Object.&lt;anonymous&gt; (tests/unit/security/user-limiter.test.js:590:7)

    console.error
      User rate limit middleware error: Error: Test error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:586:62)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 380 |[39m         next()[33m;[39m
     [90m 381 |[39m       } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 382 |[39m         console[33m.[39merror([32m&apos;User rate limit middleware error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 383 |[39m         
     [90m 384 |[39m         [36mif[39m (skipOnError) {
     [90m 385 |[39m           next()[33m;[39m[0m

      at error (security/rate-limiting/user-limiter.js:382:17)
      at Object.&lt;anonymous&gt; (tests/unit/security/user-limiter.test.js:597:7)

    console.error
      Tiered rate limit error: Error: Test error
          at UserRateLimiter.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:655:15)
          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:397:39
          at UserRateLimiter.&lt;anonymous&gt; (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:404:13)
          at UserRateLimiter.mockConstructor [as createMiddleware] (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:148:19)
          at createMiddleware (/home/jenner/code/mcps/security/rate-limiting/user-limiter.js:415:33)
          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:660:13)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 416 |[39m         [36mreturn[39m middleware(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 417 |[39m       } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 418 |[39m         console[33m.[39merror([32m&apos;Tiered rate limit error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 419 |[39m         next()[33m;[39m
     [90m 420 |[39m       }
     [90m 421 |[39m     }[33m;[39m[0m

      at error (security/rate-limiting/user-limiter.js:418:17)
      at Object.middleware (tests/unit/security/user-limiter.test.js:660:13)

  ‚óè UserRateLimiter ‚Ä∫ createMiddleware ‚Ä∫ should create middleware that allows requests

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;X-RateLimit-Limit&quot;, 100
    Received
           1: &quot;X-RateLimit-Limit&quot;, undefined
           2: &quot;X-RateLimit-Remaining&quot;, 99
           3: &quot;X-RateLimit-Reset&quot;, &quot;2025-07-24T23:52:02.073Z&quot;

    Number of calls: 4

    [0m [90m 484 |[39m       expect(req[33m.[39mrateLimitInfo)[33m.[39mtoBeDefined()[33m;[39m
     [90m 485 |[39m       expect(req[33m.[39mrateLimitInfo[33m.[39mresource)[33m.[39mtoBe([32m&apos;api-calls&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 486 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Limit&apos;[39m[33m,[39m [35m100[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 487 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Remaining&apos;[39m[33m,[39m [35m99[39m)[33m;[39m
     [90m 488 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Tier&apos;[39m[33m,[39m [32m&apos;free&apos;[39m)[33m;[39m
     [90m 489 |[39m       expect(next)[33m.[39mtoHaveBeenCalled()[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/user-limiter.test.js:486:29)

  ‚óè UserRateLimiter ‚Ä∫ cleanup ‚Ä∫ should handle unlimited tier in cleanup

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 752 |[39m       
     [90m 753 |[39m       [90m// Should still exist as enterprise has unlimited (-1) limit[39m
    [31m[1m&gt;[22m[39m[90m 754 |[39m       expect(userLimiter[33m.[39mmemoryStore[33m.[39mhas([32m&apos;user-ratelimit:enterprise-user:api-calls&apos;[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                                                                       [31m[1m^[22m[39m
     [90m 755 |[39m     })[33m;[39m
     [90m 756 |[39m   })[33m;[39m
     [90m 757 |[39m })[33m;[39m[0m

      at Object.toBe (tests/unit/security/user-limiter.test.js:754:87)

/home/jenner/code/mcps/node_modules/expect/build/index.js:314
      throw error;
      ^

JestAssertionError: expect(received).toBe(expected) // Object.is equality

Expected: 2
Received: 1
    at Timeout.toBe [as _onTimeout] (/home/jenner/code/mcps/tests/unit/security/user-limiter.test.js:317:34)
    at listOnTimeout (node:internal/timers:588:17)
    at processTimers (node:internal/timers:523:7) {
  matcherResult: {
    actual: 1,
    expected: 2,
    message: &apos;expect(received).toBe(expected) // Object.is equality\n&apos; +
      &apos;\n&apos; +
      &apos;Expected: 2\n&apos; +
      &apos;Received: 1&apos;,
    name: &apos;toBe&apos;,
    pass: false
  }
}

Node.js v22.17.0
FAIL mcp-local-setup/tests/integration/configuration.integration.test.js
  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should create new environment

    Schema version &apos;1.0.0&apos; not found

    [0m [90m 276 |[39m         } [36mcatch[39m (error) {
     [90m 277 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 278 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Schema version &apos;${version}&apos; not found`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 279 |[39m             }
     [90m 280 |[39m             [36mthrow[39m error[33m;[39m
     [90m 281 |[39m         }[0m

      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)
      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)
      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)
      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:160:13)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should load environment configuration

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:167:34)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should apply runtime overrides

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:191:34)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should list all environments

    Schema version &apos;1.0.0&apos; not found

    [0m [90m 276 |[39m         } [36mcatch[39m (error) {
     [90m 277 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 278 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Schema version &apos;${version}&apos; not found`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 279 |[39m             }
     [90m 280 |[39m             [36mthrow[39m error[33m;[39m
     [90m 281 |[39m         }[0m

      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)
      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)
      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)
      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:203:13)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should get configuration metadata

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at ConfigurationManager.getConfigMetadata (mcp-local-setup/config/advanced/configuration-manager.js:367:24)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:215:30)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Validation ‚Ä∫ should detect validation errors

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 256 |[39m             
     [90m 257 |[39m             [36mconst[39m nameError [33m=[39m result[33m.[39merrors[33m.[39mfind(e [33m=&gt;[39m e[33m.[39mpath[33m.[39mincludes([32m&apos;name&apos;[39m))[33m;[39m
    [31m[1m&gt;[22m[39m[90m 258 |[39m             expect(nameError)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 259 |[39m         })[33m;[39m
     [90m 260 |[39m
     [90m 261 |[39m         it([32m&apos;should provide validation warnings&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBeDefined (mcp-local-setup/tests/integration/configuration.integration.test.js:258:31)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Secret Management ‚Ä∫ should list secret metadata without values

    expect(received).toBeInstanceOf(expected)

    Expected constructor: Date

    Received value has no prototype
    Received value: &quot;2025-07-24T22:52:02.012Z&quot;

    [0m [90m 318 |[39m             expect(testSecret)[33m.[39mtoBeDefined()[33m;[39m
     [90m 319 |[39m             expect(testSecret[33m.[39mdescription)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 320 |[39m             expect(testSecret[33m.[39mcreatedAt)[33m.[39mtoBeInstanceOf([33mDate[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 321 |[39m             expect(testSecret[33m.[39mvalue)[33m.[39mtoBeUndefined()[33m;[39m [90m// Should not expose value[39m
     [90m 322 |[39m         })[33m;[39m
     [90m 323 |[39m[0m

      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/configuration.integration.test.js:320:42)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Secret Management ‚Ä∫ should load config with secrets

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:344:39)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Import/Export ‚Ä∫ should export configuration as JSON

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:395:30)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Import/Export ‚Ä∫ should throw error for unsupported YAML format

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;YAML export not yet implemented&quot;
    Received message:   &quot;Configuration for environment &apos;test-integration&apos; not found&quot;

        [0m [90m 67 |[39m         } [36mcatch[39m (error) {
         [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
        [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
         [90m    |[39m                       [31m[1m^[22m[39m
         [90m 70 |[39m             }
         [90m 71 |[39m             [36mthrow[39m error[33m;[39m
         [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:407:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:410:25)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Import/Export ‚Ä∫ should export configuration as env file

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:414:30)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Import/Export ‚Ä∫ should merge imported configuration

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:449:36)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Persistence ‚Ä∫ should save configuration changes

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:470:36)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Persistence ‚Ä∫ should rollback on save failure

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:502:31)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should prevent duplicate environment creation

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;Environment already exists&quot;
    Received message:   &quot;Schema version &apos;1.0.0&apos; not found&quot;

        [0m [90m 276 |[39m         } [36mcatch[39m (error) {
         [90m 277 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
        [31m[1m&gt;[22m[39m[90m 278 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Schema version &apos;${version}&apos; not found`[39m)[33m;[39m
         [90m     |[39m                       [31m[1m^[22m[39m
         [90m 279 |[39m             }
         [90m 280 |[39m             [36mthrow[39m error[33m;[39m
         [90m 281 |[39m         }[0m

      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)
      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)
      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)
      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:538:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:539:26)

FAIL tests/unit/security/redis-limiter.test.js
  ‚óè Console

    console.error
      Redis rate limit check error: Error: Redis error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:168:57)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 118 |[39m       }[33m;[39m
     [90m 119 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 120 |[39m       console[33m.[39merror([32m&apos;Redis rate limit check error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 121 |[39m       [90m// Fail open - allow request on Redis errors[39m
     [90m 122 |[39m       [36mreturn[39m {
     [90m 123 |[39m         allowed[33m:[39m [36mtrue[39m[33m,[39m[0m

      at RedisRateLimiter.error [as checkLimit] (security/rate-limiting/redis-limiter.js:120:15)
      at Object.&lt;anonymous&gt; (tests/unit/security/redis-limiter.test.js:170:22)

    console.error
      Redis rate limit check error: Error: Redis pipeline error
          at RedisRateLimiter.checkLimit (/home/jenner/code/mcps/security/rate-limiting/redis-limiter.js:80:15)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:184:22)

    [0m [90m 118 |[39m       }[33m;[39m
     [90m 119 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 120 |[39m       console[33m.[39merror([32m&apos;Redis rate limit check error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 121 |[39m       [90m// Fail open - allow request on Redis errors[39m
     [90m 122 |[39m       [36mreturn[39m {
     [90m 123 |[39m         allowed[33m:[39m [36mtrue[39m[33m,[39m[0m

      at RedisRateLimiter.error [as checkLimit] (security/rate-limiting/redis-limiter.js:120:15)
      at Object.&lt;anonymous&gt; (tests/unit/security/redis-limiter.test.js:184:22)

    console.error
      Redis consume token error: Error: Redis error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:257:46)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 246 |[39m       }[33m;[39m
     [90m 247 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 248 |[39m       console[33m.[39merror([32m&apos;Redis consume token error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 249 |[39m       [90m// Fail open on Redis errors[39m
     [90m 250 |[39m       [36mreturn[39m {
     [90m 251 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m[0m

      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)
      at Object.&lt;anonymous&gt; (tests/unit/security/redis-limiter.test.js:259:22)

    console.error
      Redis reset limit error: Error: Redis error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:284:45)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 272 |[39m       [36mreturn[39m { success[33m:[39m [36mtrue[39m }[33m;[39m
     [90m 273 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 274 |[39m       console[33m.[39merror([32m&apos;Redis reset limit error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 275 |[39m       [36mreturn[39m { success[33m:[39m [36mfalse[39m[33m,[39m error[33m:[39m error[33m.[39mmessage }[33m;[39m
     [90m 276 |[39m     }
     [90m 277 |[39m   }[0m

      at RedisRateLimiter.error [as resetLimit] (security/rate-limiting/redis-limiter.js:274:15)
      at Object.&lt;anonymous&gt; (tests/unit/security/redis-limiter.test.js:286:22)

    console.error
      Redis get usage error: Error: Redis error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:325:58)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 312 |[39m       }[33m;[39m
     [90m 313 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 314 |[39m       console[33m.[39merror([32m&apos;Redis get usage error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 315 |[39m       [36mreturn[39m {
     [90m 316 |[39m         used[33m:[39m [35m0[39m[33m,[39m
     [90m 317 |[39m         limit[33m:[39m ruleConfig[33m.[39mlimit[33m,[39m[0m

      at RedisRateLimiter.error [as getUsage] (security/rate-limiting/redis-limiter.js:314:15)
      at Object.&lt;anonymous&gt; (tests/unit/security/redis-limiter.test.js:327:22)

    console.error
      Redis consume token error: Error: Redis error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:472:46)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 246 |[39m       }[33m;[39m
     [90m 247 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 248 |[39m       console[33m.[39merror([32m&apos;Redis consume token error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 249 |[39m       [90m// Fail open on Redis errors[39m
     [90m 250 |[39m       [36mreturn[39m {
     [90m 251 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m[0m

      at RedisRateLimiter.error [as consumeToken] (security/rate-limiting/redis-limiter.js:248:15)
      at security/rate-limiting/redis-limiter.js:372:24
      at Object.&lt;anonymous&gt; (tests/unit/security/redis-limiter.test.js:477:7)

    console.error
      Redis get stats error: Error: Redis error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:551:46)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 453 |[39m       [36mreturn[39m stats[33m;[39m
     [90m 454 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 455 |[39m       console[33m.[39merror([32m&apos;Redis get stats error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 456 |[39m       [36mreturn[39m { [33m...[39mstats[33m,[39m error[33m:[39m error[33m.[39mmessage }[33m;[39m
     [90m 457 |[39m     }
     [90m 458 |[39m   }[0m

      at RedisRateLimiter.error [as getStats] (security/rate-limiting/redis-limiter.js:455:15)
      at Object.&lt;anonymous&gt; (tests/unit/security/redis-limiter.test.js:553:21)

    console.error
      Redis cleanup error: Error: Redis error
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/security/redis-limiter.test.js:620:46)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 496 |[39m       [36mreturn[39m { success[33m:[39m [36mtrue[39m[33m,[39m cleaned }[33m;[39m
     [90m 497 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 498 |[39m       console[33m.[39merror([32m&apos;Redis cleanup error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 499 |[39m       [36mreturn[39m { success[33m:[39m [36mfalse[39m[33m,[39m error[33m:[39m error[33m.[39mmessage }[33m;[39m
     [90m 500 |[39m     }
     [90m 501 |[39m   }[0m

      at RedisRateLimiter.error [as cleanup] (security/rate-limiting/redis-limiter.js:498:15)
      at Object.&lt;anonymous&gt; (tests/unit/security/redis-limiter.test.js:622:22)

  ‚óè RedisRateLimiter ‚Ä∫ checkLimit ‚Ä∫ should calculate correct reset time from oldest entry

    expect(received).toBe(expected) // Object.is equality

    Expected: 1753399322093
    Received: NaN

    [0m [90m 162 |[39m       
     [90m 163 |[39m       [36mconst[39m expectedReset [33m=[39m [36mnew[39m [33mDate[39m(oldestTime [33m+[39m [35m3600000[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 164 |[39m       expect(result[33m.[39mresetAt[33m.[39mgetTime())[33m.[39mtoBe(expectedReset[33m.[39mgetTime())[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 165 |[39m     })[33m;[39m
     [90m 166 |[39m
     [90m 167 |[39m     it([32m&apos;should fail open on Redis errors&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBe (tests/unit/security/redis-limiter.test.js:164:40)

  ‚óè RedisRateLimiter ‚Ä∫ createMiddleware ‚Ä∫ should block requests exceeding limit

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   &quot;blocked&quot;: false,
    +   &quot;blocked&quot;: undefined,
        &quot;error&quot;: &quot;Too many requests&quot;,
    -   &quot;retryAfter&quot;: Any&lt;Date&gt;,
    +   &quot;retryAfter&quot;: 2025-07-24T23:52:02.158Z,
      },

    Number of calls: 1

    [0m [90m 435 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;Retry-After&apos;[39m[33m,[39m expect[33m.[39many([33mNumber[39m))[33m;[39m
     [90m 436 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m429[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 437 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 438 |[39m         error[33m:[39m [32m&apos;Too many requests&apos;[39m[33m,[39m
     [90m 439 |[39m         retryAfter[33m:[39m expect[33m.[39many([33mDate[39m)[33m,[39m
     [90m 440 |[39m         blocked[33m:[39m [36mfalse[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/redis-limiter.test.js:437:24)

FAIL mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js
  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Services deployed to K8s are automatically registered in mesh

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Traffic management policies apply to orchestrated services

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Service mesh mTLS works with orchestrator networking

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ SDK can query services through mesh-enabled endpoints

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Circuit breaker policies protect orchestrated services

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Service mesh observability integrates with orchestrator metrics

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Canary deployments use both orchestration and mesh

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Fault injection tests orchestrated service resilience

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

FAIL tests/integration/phase6/security-health-integration.test.js
  ‚óè Security and Health Monitoring Integration ‚Ä∫ API authentication integrates with health status

    expect(received).toHaveProperty(path, value)

    Expected path: &quot;authentication&quot;
    Received path: []

    Expected value: &quot;enabled&quot;
    Received value: {&quot;lastCheck&quot;: null, &quot;message&quot;: &quot;Not checked yet&quot;, &quot;status&quot;: &quot;pending&quot;}

    [0m [90m 70 |[39m     [90m// Then health should include auth status[39m
     [90m 71 |[39m     expect(health[33m.[39mstatus)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 72 |[39m     expect(health[33m.[39mdetails)[33m.[39mtoHaveProperty([32m&apos;authentication&apos;[39m[33m,[39m [32m&apos;enabled&apos;[39m)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 73 |[39m   })[33m;[39m
     [90m 74 |[39m
     [90m 75 |[39m   test([32m&apos;Service dependencies include security components&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toHaveProperty (tests/integration/phase6/security-health-integration.test.js:72:28)

FAIL tests/integration/monitoring/logging-pipeline.test.js
  ‚óè Logging Pipeline Integration ‚Ä∫ End-to-End Logging ‚Ä∫ should log messages through the complete pipeline

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ End-to-End Logging ‚Ä∫ should apply formatters correctly

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ End-to-End Logging ‚Ä∫ should handle high-volume logging

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Log Rotation Integration ‚Ä∫ should rotate logs based on size

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Log Rotation Integration ‚Ä∫ should compress rotated files

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Log Rotation Integration ‚Ä∫ should clean up old logs

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Error Handling ‚Ä∫ should handle logging errors gracefully

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Error Handling ‚Ä∫ should continue logging after transport failure

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Context and Correlation ‚Ä∫ should maintain correlation IDs across log entries

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Context and Correlation ‚Ä∫ should preserve context through async operations

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Performance Monitoring ‚Ä∫ should log performance metrics

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Multi-transport Scenarios ‚Ä∫ should route logs to appropriate transports based on level

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

FAIL tests/unit/security/helmet-middleware.test.js
  ‚óè Console

    console.warn
      CSP Violation: {
        documentUri: &apos;https://example.com/page&apos;,
        violatedDirective: &apos;script-src&apos;,
        blockedUri: &apos;https://evil.com/script.js&apos;
      }

    [0m [90m 274 |[39m
     [90m 275 |[39m         [90m// Log for monitoring[39m
    [31m[1m&gt;[22m[39m[90m 276 |[39m         console[33m.[39mwarn([32m&apos;CSP Violation:&apos;[39m[33m,[39m {
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 277 |[39m           documentUri[33m:[39m reportData[33m.[39mdocumentUri[33m,[39m
     [90m 278 |[39m           violatedDirective[33m:[39m reportData[33m.[39mviolatedDirective[33m,[39m
     [90m 279 |[39m           blockedUri[33m:[39m reportData[33m.[39mblockedUri[0m

      at warn (security/middleware/helmet.js:276:17)
      at Object.handler (tests/unit/security/helmet-middleware.test.js:112:7)

    console.warn
      CSP Violation: {
        documentUri: &apos;https://example.com/page&apos;,
        violatedDirective: &apos;script-src&apos;,
        blockedUri: &apos;https://evil0.com&apos;
      }

    [0m [90m 274 |[39m
     [90m 275 |[39m         [90m// Log for monitoring[39m
    [31m[1m&gt;[22m[39m[90m 276 |[39m         console[33m.[39mwarn([32m&apos;CSP Violation:&apos;[39m[33m,[39m {
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 277 |[39m           documentUri[33m:[39m reportData[33m.[39mdocumentUri[33m,[39m
     [90m 278 |[39m           violatedDirective[33m:[39m reportData[33m.[39mviolatedDirective[33m,[39m
     [90m 279 |[39m           blockedUri[33m:[39m reportData[33m.[39mblockedUri[0m

      at warn (security/middleware/helmet.js:276:17)
      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)

    console.warn
      CSP Violation: {
        documentUri: &apos;https://example.com/page&apos;,
        violatedDirective: &apos;script-src&apos;,
        blockedUri: &apos;https://evil1.com&apos;
      }

    [0m [90m 274 |[39m
     [90m 275 |[39m         [90m// Log for monitoring[39m
    [31m[1m&gt;[22m[39m[90m 276 |[39m         console[33m.[39mwarn([32m&apos;CSP Violation:&apos;[39m[33m,[39m {
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 277 |[39m           documentUri[33m:[39m reportData[33m.[39mdocumentUri[33m,[39m
     [90m 278 |[39m           violatedDirective[33m:[39m reportData[33m.[39mviolatedDirective[33m,[39m
     [90m 279 |[39m           blockedUri[33m:[39m reportData[33m.[39mblockedUri[0m

      at warn (security/middleware/helmet.js:276:17)
      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)

    console.warn
      CSP Violation: {
        documentUri: &apos;https://example.com/page&apos;,
        violatedDirective: &apos;script-src&apos;,
        blockedUri: &apos;https://evil2.com&apos;
      }

    [0m [90m 274 |[39m
     [90m 275 |[39m         [90m// Log for monitoring[39m
    [31m[1m&gt;[22m[39m[90m 276 |[39m         console[33m.[39mwarn([32m&apos;CSP Violation:&apos;[39m[33m,[39m {
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 277 |[39m           documentUri[33m:[39m reportData[33m.[39mdocumentUri[33m,[39m
     [90m 278 |[39m           violatedDirective[33m:[39m reportData[33m.[39mviolatedDirective[33m,[39m
     [90m 279 |[39m           blockedUri[33m:[39m reportData[33m.[39mblockedUri[0m

      at warn (security/middleware/helmet.js:276:17)
      at Object.handler (tests/unit/security/helmet-middleware.test.js:141:9)

  ‚óè HelmetMiddleware ‚Ä∫ CSP Report Handler ‚Ä∫ should handle errors gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 500
    Received: 400

    Number of calls: 1

    [0m [90m 153 |[39m       handler(req[33m,[39m res)[33m;[39m
     [90m 154 |[39m       
    [31m[1m&gt;[22m[39m[90m 155 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m500[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 156 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({ error[33m:[39m [32m&apos;Failed to process CSP report&apos;[39m })[33m;[39m
     [90m 157 |[39m     })[33m;[39m
     [90m 158 |[39m   })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:155:26)

  ‚óè HelmetMiddleware ‚Ä∫ createNonceMiddleware ‚Ä∫ should modify CSP header to include nonce

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function anonymous]

    [0m [90m 330 |[39m       res[33m.[39msetHeader([32m&apos;Content-Security-Policy&apos;[39m[33m,[39m [32m&quot;script-src &apos;self&apos;&quot;[39m)[33m;[39m
     [90m 331 |[39m       
    [31m[1m&gt;[22m[39m[90m 332 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 333 |[39m         [32m&apos;Content-Security-Policy&apos;[39m[33m,[39m
     [90m 334 |[39m         expect[33m.[39mstringContaining([32m`&apos;nonce-${res.locals.nonce}&apos;`[39m)
     [90m 335 |[39m       )[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:332:29)

FAIL tests/unit/security/cors.test.js
  ‚óè CORSMiddleware ‚Ä∫ handlePreflight ‚Ä∫ should handle wildcard origin without credentials in preflight

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;
    Received
           1: &quot;Access-Control-Allow-Origin&quot;, &quot;https://example.com&quot;
           2: &quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Authorization, X-API-Key&quot;
           3: &quot;Access-Control-Max-Age&quot;, &quot;86400&quot;

    Number of calls: 3

    [0m [90m 276 |[39m       corsMiddleware[33m.[39mhandlePreflight(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 277 |[39m       
    [31m[1m&gt;[22m[39m[90m 278 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;Access-Control-Allow-Origin&apos;[39m[33m,[39m [32m&apos;*&apos;[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 279 |[39m       expect(res[33m.[39msetHeader)[33m.[39mnot[33m.[39mtoHaveBeenCalledWith([32m&apos;Access-Control-Allow-Credentials&apos;[39m[33m,[39m [32m&apos;true&apos;[39m)[33m;[39m
     [90m 280 |[39m     })[33m;[39m
     [90m 281 |[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:278:29)

  ‚óè CORSMiddleware ‚Ä∫ Edge cases ‚Ä∫ should handle malformed request headers gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Authorization, X-API-Key&quot;
    Received
           1: &quot;Access-Control-Allow-Origin&quot;, &quot;https://example.com&quot;
           2: &quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;
           3: &quot;Access-Control-Max-Age&quot;, &quot;86400&quot;

    Number of calls: 3

    [0m [90m 325 |[39m       corsMiddleware[33m.[39mhandlePreflight(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 326 |[39m       
    [31m[1m&gt;[22m[39m[90m 327 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;Access-Control-Allow-Headers&apos;[39m[33m,[39m [32m&apos;Content-Type, Authorization, X-API-Key&apos;[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 328 |[39m     })[33m;[39m
     [90m 329 |[39m
     [90m 330 |[39m     it([32m&apos;should handle mixed origin configurations&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:327:29)

PASS mcp-local-setup/enterprise/tests/compliance.test.js
FAIL tests/security/auth-bypass.test.js
  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent JWT signature stripping

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent JWT algorithm confusion attacks

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent weak secret key attacks

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent token replay attacks with expired tokens

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent privilege escalation via token manipulation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ API Key Authentication Bypass Attempts ‚Ä∫ should prevent brute force API key guessing

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ API Key Authentication Bypass Attempts ‚Ä∫ should prevent API key format manipulation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ API Key Authentication Bypass Attempts ‚Ä∫ should prevent permission escalation via API keys

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ API Key Authentication Bypass Attempts ‚Ä∫ should prevent API key reuse after revocation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Token Refresh Authentication Bypass ‚Ä∫ should prevent refresh token reuse after rotation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Token Refresh Authentication Bypass ‚Ä∫ should prevent cross-user token refresh

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Token Refresh Authentication Bypass ‚Ä∫ should prevent infinite token refresh chains

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ OAuth Authentication Bypass ‚Ä∫ should prevent OAuth state parameter bypass

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ OAuth Authentication Bypass ‚Ä∫ should prevent OAuth token injection

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ OAuth Authentication Bypass ‚Ä∫ should prevent OAuth redirect URI manipulation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Session Fixation Prevention ‚Ä∫ should regenerate session ID on authentication

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Authentication Race Conditions ‚Ä∫ should handle concurrent authentication attempts safely

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Authentication Race Conditions ‚Ä∫ should prevent race condition in API key validation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Authentication Downgrade Attacks ‚Ä∫ should prevent downgrade from strong to weak authentication

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Authentication Context Validation ‚Ä∫ should validate authentication context consistency

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

FAIL tests/integration/monitoring/metrics-collection.test.js
  ‚óè Metrics Collection Integration ‚Ä∫ HTTP Metrics Collection ‚Ä∫ should collect HTTP request metrics

    expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;

    [0m [90m 79 |[39m       
     [90m 80 |[39m       [90m// Make multiple requests[39m
    [31m[1m&gt;[22m[39m[90m 81 |[39m       [36mawait[39m request(app)[33m.[39m[36mget[39m([32m&apos;/test&apos;[39m)[33m.[39mexpect([35m200[39m)[33m;[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m 82 |[39m       [36mawait[39m request(app)[33m.[39m[36mget[39m([32m&apos;/test&apos;[39m)[33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 83 |[39m       [36mawait[39m request(app)[33m.[39mpost([32m&apos;/api/users&apos;[39m)[33m.[39msend({ name[33m:[39m [32m&apos;Test&apos;[39m })[33m.[39mexpect([35m201[39m)[33m;[39m
     [90m 84 |[39m       [36mawait[39m request(app)[33m.[39m[36mget[39m([32m&apos;/error&apos;[39m)[33m.[39mexpect([35m500[39m)[33m;[39m[0m

      at Object.expect (tests/integration/monitoring/metrics-collection.test.js:81:39)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.&lt;anonymous&gt; (node_modules/supertest/lib/test.js:152:11)

  ‚óè Metrics Collection Integration ‚Ä∫ HTTP Metrics Collection ‚Ä∫ should track request sizes

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Business Metrics Collection ‚Ä∫ should collect business events

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Business Metrics Collection ‚Ä∫ should track API usage metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Database Metrics Collection ‚Ä∫ should collect database operation metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Database Metrics Collection ‚Ä∫ should track connection pool metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Cache Metrics Collection ‚Ä∫ should collect cache operation metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Custom Metrics ‚Ä∫ should allow custom metric definitions

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ System Metrics ‚Ä∫ should collect system resource metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Metric Aggregation ‚Ä∫ should aggregate metrics across multiple sources

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Metrics Export Formats ‚Ä∫ should export metrics in Prometheus format

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Metrics Export Formats ‚Ä∫ should export metrics as JSON

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Real-time Monitoring ‚Ä∫ should provide real-time metric updates

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Real-time Monitoring ‚Ä∫ should handle metric resets

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

FAIL mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js
  ‚óè IDE Extension and SDK Integration ‚Ä∫ IDE extension initializes with SDK instance

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Code completion suggests available MCP services

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Hover info shows service documentation from SDK

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Diagnostics validate service configurations against SDK

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Service panel shows real-time health from SDK

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Debugging integration uses SDK service endpoints

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Code actions can install missing services via SDK

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

FAIL mcp-local-setup/tests/unit/community/features.test.js
  ‚óè CommunityFeatures ‚Ä∫ rateService ‚Ä∫ should track analytics event

    TypeError: Cannot read properties of undefined (reading &apos;events&apos;)

    [0m [90m 170 |[39m       expect(analyticsCall)[33m.[39mtoBeDefined()[33m;[39m
     [90m 171 |[39m       [36mconst[39m analyticsData [33m=[39m [33mJSON[39m[33m.[39mparse(analyticsCall[[35m1[39m])[33m;[39m
    [31m[1m&gt;[22m[39m[90m 172 |[39m       expect(analyticsData[[32m&apos;service-1&apos;[39m][33m.[39mevents)[33m.[39mtoContainEqual(
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 173 |[39m         expect[33m.[39mobjectContaining({
     [90m 174 |[39m           type[33m:[39m [32m&apos;rating&apos;[39m[33m,[39m
     [90m 175 |[39m           userId[33m:[39m [32m&apos;user-5&apos;[39m[33m,[39m[0m

      at Object.events (mcp-local-setup/tests/unit/community/features.test.js:172:41)

  ‚óè CommunityFeatures ‚Ä∫ private methods ‚Ä∫ should calculate week number correctly

    expect(received).toBeGreaterThan(expected)

    Expected: &gt; 50
    Received:   1

    [0m [90m 360 |[39m       
     [90m 361 |[39m       expect(week1)[33m.[39mtoBe([35m1[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 362 |[39m       expect(week2)[33m.[39mtoBeGreaterThan([35m50[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 363 |[39m     })[33m;[39m
     [90m 364 |[39m
     [90m 365 |[39m     it([32m&apos;should calculate engagement score&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toBeGreaterThan (mcp-local-setup/tests/unit/community/features.test.js:362:21)

  ‚óè CommunityFeatures ‚Ä∫ private methods ‚Ä∫ should calculate growth rate

    expect(received).toBe(expected) // Object.is equality

    Expected: 25
    Received: 0

    [0m [90m 386 |[39m
     [90m 387 |[39m       [36mconst[39m growthRate [33m=[39m community[33m.[39m_calculateGrowthRate(analytics)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 388 |[39m       expect(growthRate)[33m.[39mtoBe([35m25[39m)[33m;[39m [90m// 25% growth[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 389 |[39m     })[33m;[39m
     [90m 390 |[39m
     [90m 391 |[39m     it([32m&apos;should handle zero previous downloads in growth rate&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toBe (mcp-local-setup/tests/unit/community/features.test.js:388:26)

FAIL mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js
  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Tenant-based Service Access ‚Ä∫ should restrict marketplace access based on tenant permissions

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 35 |[39m     test([32m&apos;should restrict marketplace access based on tenant permissions&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 36 |[39m       [90m// Create test tenants[39m
    [31m[1m&gt;[22m[39m[90m 37 |[39m       [36mconst[39m enterpriseTenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m    |[39m                                                    [31m[1m^[22m[39m
     [90m 38 |[39m         name[33m:[39m [32m&apos;Enterprise Corp&apos;[39m[33m,[39m
     [90m 39 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 40 |[39m         features[33m:[39m [[32m&apos;unlimited-services&apos;[39m[33m,[39m [32m&apos;private-marketplace&apos;[39m][0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:37:52)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Tenant-based Service Access ‚Ä∫ should enforce tenant quotas on service installation

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 70 |[39m
     [90m 71 |[39m     test([32m&apos;should enforce tenant quotas on service installation&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 72 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m    |[39m                                          [31m[1m^[22m[39m
     [90m 73 |[39m         name[33m:[39m [32m&apos;Limited Corp&apos;[39m[33m,[39m
     [90m 74 |[39m         plan[33m:[39m [32m&apos;basic&apos;[39m[33m,[39m
     [90m 75 |[39m         quotas[33m:[39m {[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:72:42)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Marketplace Publishing with Multi-tenancy ‚Ä∫ should allow tenants to publish private services

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 100 |[39m   describe([32m&apos;Marketplace Publishing with Multi-tenancy&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 101 |[39m     test([32m&apos;should allow tenants to publish private services&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 102 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 103 |[39m         name[33m:[39m [32m&apos;Service Provider Inc&apos;[39m[33m,[39m
     [90m 104 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 105 |[39m         features[33m:[39m [[32m&apos;marketplace-publisher&apos;[39m][0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:102:42)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Marketplace Publishing with Multi-tenancy ‚Ä∫ should track marketplace revenue per tenant

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 137 |[39m
     [90m 138 |[39m     test([32m&apos;should track marketplace revenue per tenant&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 139 |[39m       [36mconst[39m publisherTenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 140 |[39m         name[33m:[39m [32m&apos;SaaS Provider&apos;[39m[33m,[39m
     [90m 141 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m
     [90m 142 |[39m       })[33m;[39m[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:139:51)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ SSO + Marketplace Integration ‚Ä∫ should use SSO for marketplace authentication

    Invalid authentication request

    [0m [90m 213 |[39m   [36masync[39m authenticate(credentials[33m,[39m provider) {
     [90m 214 |[39m     [36mif[39m ([33m![39mcredentials [33m||[39m [33m![39mprovider) {
    [31m[1m&gt;[22m[39m[90m 215 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Invalid authentication request&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 216 |[39m     }
     [90m 217 |[39m
     [90m 218 |[39m     [36mconst[39m providerConfig [33m=[39m [36mthis[39m[33m.[39m_getProvider(provider)[33m;[39m[0m

      at SSOAuthentication.authenticate (mcp-local-setup/enterprise/sso/authentication.js:215:13)
      at Object.authenticate (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:184:40)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ SSO + Marketplace Integration ‚Ä∫ should map SSO roles to marketplace permissions

    TypeError: ssoAuth.configureRoleMapping is not a function

    [0m [90m 205 |[39m       }[33m;[39m
     [90m 206 |[39m
    [31m[1m&gt;[22m[39m[90m 207 |[39m       [36mawait[39m ssoAuth[33m.[39mconfigureRoleMapping(roleMapping)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 208 |[39m
     [90m 209 |[39m       [90m// Test different role access[39m
     [90m 210 |[39m       [36mconst[39m adminUser [33m=[39m [36mawait[39m ssoAuth[33m.[39mauthenticate({[0m

      at Object.configureRoleMapping (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:207:21)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Compliance in Marketplace Operations ‚Ä∫ should audit all marketplace transactions

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 230 |[39m   describe([32m&apos;Compliance in Marketplace Operations&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 231 |[39m     test([32m&apos;should audit all marketplace transactions&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 232 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 233 |[39m         name[33m:[39m [32m&apos;Regulated Corp&apos;[39m[33m,[39m
     [90m 234 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 235 |[39m         compliance[33m:[39m [[32m&apos;SOC2&apos;[39m[33m,[39m [32m&apos;HIPAA&apos;[39m][0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:232:42)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Compliance in Marketplace Operations ‚Ä∫ should enforce data residency for marketplace data

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 296 |[39m
     [90m 297 |[39m     test([32m&apos;should enforce data residency for marketplace data&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 298 |[39m       [36mconst[39m euTenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 299 |[39m         name[33m:[39m [32m&apos;EU Company&apos;[39m[33m,[39m
     [90m 300 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 301 |[39m         dataResidency[33m:[39m [32m&apos;eu-west-1&apos;[39m[33m,[39m[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:298:44)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Community Features with Enterprise Controls ‚Ä∫ should moderate reviews based on tenant policies

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 333 |[39m   describe([32m&apos;Community Features with Enterprise Controls&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 334 |[39m     test([32m&apos;should moderate reviews based on tenant policies&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 335 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 336 |[39m         name[33m:[39m [32m&apos;Strict Corp&apos;[39m[33m,[39m
     [90m 337 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 338 |[39m         policies[33m:[39m {[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:335:42)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Community Features with Enterprise Controls ‚Ä∫ should aggregate analytics per tenant

    TypeError: communityFeatures.trackUsage is not a function

    [0m [90m 374 |[39m       [36mfor[39m ([36mconst[39m tenantId [36mof[39m tenants) {
     [90m 375 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m&lt;[39m [35m10[39m[33m;[39m i[33m++[39m) {
    [31m[1m&gt;[22m[39m[90m 376 |[39m           [36mawait[39m communityFeatures[33m.[39mtrackUsage({
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 377 |[39m             tenantId[33m,[39m
     [90m 378 |[39m             serviceId[33m:[39m [32m&apos;popular-service&apos;[39m[33m,[39m
     [90m 379 |[39m             action[33m:[39m [32m&apos;api_call&apos;[39m[33m,[39m[0m

      at Object.trackUsage (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:376:35)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Billing Integration ‚Ä∫ should handle marketplace billing through tenant billing system

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 405 |[39m   describe([32m&apos;Billing Integration&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 406 |[39m     test([32m&apos;should handle marketplace billing through tenant billing system&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 407 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 408 |[39m         name[33m:[39m [32m&apos;Paying Customer&apos;[39m[33m,[39m
     [90m 409 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 410 |[39m         billing[33m:[39m {[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:407:42)

FAIL tests/integration/security/auth-flow.test.js
  ‚óè Security Authentication Flow Integration ‚Ä∫ Complete JWT Authentication Flow ‚Ä∫ should handle full JWT login and refresh flow

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Complete JWT Authentication Flow ‚Ä∫ should handle token expiration and renewal

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ OAuth Integration Flow ‚Ä∫ should handle complete OAuth flow with Google

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ OAuth Integration Flow ‚Ä∫ should handle OAuth errors gracefully

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ API Key Authentication Flow ‚Ä∫ should handle API key generation and validation flow

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Multi-Auth Strategy Flow ‚Ä∫ should handle multiple authentication methods in sequence

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Security Token Rotation ‚Ä∫ should handle secure token rotation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Permission-based Access Control ‚Ä∫ should enforce permission-based access with API keys

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Permission-based Access Control ‚Ä∫ should handle JWT permissions

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Session Management Integration ‚Ä∫ should handle session lifecycle with token refresh

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Error Handling and Recovery ‚Ä∫ should handle authentication failures gracefully

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Error Handling and Recovery ‚Ä∫ should handle Redis failures in token refresh

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

FAIL mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js
  ‚óè RegistryManager ‚Ä∫ loadCatalog ‚Ä∫ should load and parse catalog successfully

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 51 |[39m       }[33m;[39m
     [90m 52 |[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m       fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockCatalog))[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 54 |[39m       
     [90m 55 |[39m       [36mconst[39m catalog [33m=[39m [36mawait[39m registryManager[33m.[39mloadCatalog()[33m;[39m
     [90m 56 |[39m       [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:53:19)

  ‚óè RegistryManager ‚Ä∫ loadCatalog ‚Ä∫ should handle catalog file not found

    TypeError: fs.readFile.mockRejectedValue is not a function

    [0m [90m 60 |[39m
     [90m 61 |[39m     it([32m&apos;should handle catalog file not found&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 62 |[39m       fs[33m.[39mreadFile[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m&apos;ENOENT: no such file&apos;[39m))[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 63 |[39m       
     [90m 64 |[39m       [36mconst[39m catalog [33m=[39m [36mawait[39m registryManager[33m.[39mloadCatalog()[33m;[39m
     [90m 65 |[39m       [0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:62:19)

  ‚óè RegistryManager ‚Ä∫ loadCatalog ‚Ä∫ should handle invalid JSON in catalog

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 72 |[39m
     [90m 73 |[39m     it([32m&apos;should handle invalid JSON in catalog&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 74 |[39m       fs[33m.[39mreadFile[33m.[39mmockResolvedValue([32m&apos;invalid json{&apos;[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 75 |[39m       
     [90m 76 |[39m       [36mconst[39m catalog [33m=[39m [36mawait[39m registryManager[33m.[39mloadCatalog()[33m;[39m
     [90m 77 |[39m       [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:74:19)

  ‚óè RegistryManager ‚Ä∫ loadProfile ‚Ä∫ should load default profile

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 91 |[39m       }[33m;[39m
     [90m 92 |[39m
    [31m[1m&gt;[22m[39m[90m 93 |[39m       fs[33m.[39mreadFile[33m.[39mmockResolvedValue([32m&apos;mocked yaml content&apos;[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 94 |[39m       yaml[33m.[39mload[33m.[39mmockReturnValue(mockProfile)[33m;[39m
     [90m 95 |[39m       
     [90m 96 |[39m       [36mconst[39m profile [33m=[39m [36mawait[39m registryManager[33m.[39mloadProfile()[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:93:19)

  ‚óè RegistryManager ‚Ä∫ loadProfile ‚Ä∫ should load specified profile

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 109 |[39m       }[33m;[39m
     [90m 110 |[39m
    [31m[1m&gt;[22m[39m[90m 111 |[39m       fs[33m.[39mreadFile[33m.[39mmockResolvedValue([32m&apos;mocked yaml content&apos;[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 112 |[39m       yaml[33m.[39mload[33m.[39mmockReturnValue(mockProfile)[33m;[39m
     [90m 113 |[39m       
     [90m 114 |[39m       [36mconst[39m profile [33m=[39m [36mawait[39m registryManager[33m.[39mloadProfile([32m&apos;development&apos;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:111:19)

  ‚óè RegistryManager ‚Ä∫ loadProfile ‚Ä∫ should handle profile not found

    TypeError: fs.readFile.mockRejectedValue is not a function

    [0m [90m 122 |[39m
     [90m 123 |[39m     it([32m&apos;should handle profile not found&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 124 |[39m       fs[33m.[39mreadFile[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m&apos;ENOENT&apos;[39m))[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 125 |[39m       
     [90m 126 |[39m       [36mconst[39m profile [33m=[39m [36mawait[39m registryManager[33m.[39mloadProfile([32m&apos;missing&apos;[39m)[33m;[39m
     [90m 127 |[39m       [0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:124:19)

  ‚óè RegistryManager ‚Ä∫ generateDockerCompose ‚Ä∫ should generate docker-compose configuration

    TypeError: Cannot read properties of undefined (reading &apos;find&apos;)

    [0m [90m 82 |[39m
     [90m 83 |[39m         [36mfor[39m ([36mconst[39m serviceId [36mof[39m enabledServices) {
    [31m[1m&gt;[22m[39m[90m 84 |[39m             [36mconst[39m server [33m=[39m catalog[33m.[39mservers[33m.[39mfind(s [33m=&gt;[39m s[33m.[39mid [33m===[39m serviceId)[33m;[39m
     [90m    |[39m                                            [31m[1m^[22m[39m
     [90m 85 |[39m             [36mif[39m ([33m![39mserver) {
     [90m 86 |[39m                 console[33m.[39mwarn([32m`Service ${serviceId} not found in catalog`[39m)[33m;[39m
     [90m 87 |[39m                 [36mcontinue[39m[33m;[39m[0m

      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:174:7)

  ‚óè RegistryManager ‚Ä∫ generateDockerCompose ‚Ä∫ should filter services based on profile

    TypeError: Cannot read properties of undefined (reading &apos;find&apos;)

    [0m [90m 82 |[39m
     [90m 83 |[39m         [36mfor[39m ([36mconst[39m serviceId [36mof[39m enabledServices) {
    [31m[1m&gt;[22m[39m[90m 84 |[39m             [36mconst[39m server [33m=[39m catalog[33m.[39mservers[33m.[39mfind(s [33m=&gt;[39m s[33m.[39mid [33m===[39m serviceId)[33m;[39m
     [90m    |[39m                                            [31m[1m^[22m[39m
     [90m 85 |[39m             [36mif[39m ([33m![39mserver) {
     [90m 86 |[39m                 console[33m.[39mwarn([32m`Service ${serviceId} not found in catalog`[39m)[33m;[39m
     [90m 87 |[39m                 [36mcontinue[39m[33m;[39m[0m

      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:225:7)

  ‚óè RegistryManager ‚Ä∫ updateService ‚Ä∫ should update service in catalog

    TypeError: registryManager.updateService is not a function

    [0m [90m 251 |[39m       }[33m;[39m
     [90m 252 |[39m
    [31m[1m&gt;[22m[39m[90m 253 |[39m       [36mawait[39m registryManager[33m.[39mupdateService(updatedService)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 254 |[39m
     [90m 255 |[39m       expect(fs[33m.[39mwriteFile)[33m.[39mtoHaveBeenCalledWith(
     [90m 256 |[39m         registryManager[33m.[39mcatalogPath[33m,[39m[0m

      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:253:29)

  ‚óè RegistryManager ‚Ä∫ updateService ‚Ä∫ should add new service to catalog

    TypeError: registryManager.updateService is not a function

    [0m [90m 272 |[39m       }[33m;[39m
     [90m 273 |[39m
    [31m[1m&gt;[22m[39m[90m 274 |[39m       [36mawait[39m registryManager[33m.[39mupdateService(newService)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 275 |[39m
     [90m 276 |[39m       [36mconst[39m writtenData [33m=[39m [33mJSON[39m[33m.[39mparse(fs[33m.[39mwriteFile[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m1[39m])[33m;[39m
     [90m 277 |[39m       expect(writtenData[33m.[39mservices[[32m&apos;new-service&apos;[39m])[33m.[39mtoEqual(newService)[33m;[39m[0m

      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:274:29)

  ‚óè RegistryManager ‚Ä∫ removeService ‚Ä∫ should remove service from catalog

    TypeError: registryManager.removeService is not a function

    [0m [90m 291 |[39m       fs[33m.[39mwriteFile [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 292 |[39m
    [31m[1m&gt;[22m[39m[90m 293 |[39m       [36mawait[39m registryManager[33m.[39mremoveService([32m&apos;service1&apos;[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 294 |[39m
     [90m 295 |[39m       [36mconst[39m writtenData [33m=[39m [33mJSON[39m[33m.[39mparse(fs[33m.[39mwriteFile[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m1[39m])[33m;[39m
     [90m 296 |[39m       expect(writtenData[33m.[39mservices[33m.[39mservice1)[33m.[39mtoBeUndefined()[33m;[39m[0m

      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:293:29)

  ‚óè RegistryManager ‚Ä∫ removeService ‚Ä∫ should handle removing non-existent service

    TypeError: registryManager.removeService is not a function

    [0m [90m 306 |[39m       fs[33m.[39mwriteFile [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 307 |[39m
    [31m[1m&gt;[22m[39m[90m 308 |[39m       [36mawait[39m registryManager[33m.[39mremoveService([32m&apos;non-existent&apos;[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 309 |[39m
     [90m 310 |[39m       expect(fs[33m.[39mwriteFile)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 311 |[39m     })[33m;[39m[0m

      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:308:29)

  ‚óè RegistryManager ‚Ä∫ validateCatalog ‚Ä∫ should validate catalog structure

    TypeError: registryManager.validateCatalog is not a function

    [0m [90m 327 |[39m       }[33m;[39m
     [90m 328 |[39m
    [31m[1m&gt;[22m[39m[90m 329 |[39m       [36mconst[39m result [33m=[39m registryManager[33m.[39mvalidateCatalog(validCatalog)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 330 |[39m       expect(result[33m.[39mvalid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 331 |[39m       expect(result[33m.[39merrors)[33m.[39mtoEqual([])[33m;[39m
     [90m 332 |[39m     })[33m;[39m[0m

      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:329:38)

  ‚óè RegistryManager ‚Ä∫ validateCatalog ‚Ä∫ should detect missing required fields

    TypeError: registryManager.validateCatalog is not a function

    [0m [90m 342 |[39m       }[33m;[39m
     [90m 343 |[39m
    [31m[1m&gt;[22m[39m[90m 344 |[39m       [36mconst[39m result [33m=[39m registryManager[33m.[39mvalidateCatalog(invalidCatalog)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 345 |[39m       expect(result[33m.[39mvalid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 346 |[39m       expect(result[33m.[39merrors)[33m.[39mtoContain([32m&apos;Service service1 missing required field: name&apos;[39m)[33m;[39m
     [90m 347 |[39m       expect(result[33m.[39merrors)[33m.[39mtoContain([32m&apos;Service service1 missing required field: version&apos;[39m)[33m;[39m[0m

      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:344:38)

FAIL tests/unit/monitoring/logging/formatters.test.js
  ‚óè LogFormatters ‚Ä∫ jsonFormat ‚Ä∫ should format logs as JSON

    TypeError: LogFormatters.jsonFormat is not a function

    [0m [90m 79 |[39m   describe([32m&apos;jsonFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 80 |[39m     it([32m&apos;should format logs as JSON&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 81 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mjsonFormat()[33m;[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m 82 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 83 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 84 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[33m,[39m[0m

      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:81:39)

  ‚óè LogFormatters ‚Ä∫ jsonFormat ‚Ä∫ should handle errors in JSON format

    TypeError: LogFormatters.jsonFormat is not a function

    [0m [90m  97 |[39m
     [90m  98 |[39m     it([32m&apos;should handle errors in JSON format&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m  99 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mjsonFormat()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 100 |[39m       [36mconst[39m error [33m=[39m [36mnew[39m [33mError[39m([32m&apos;Test error&apos;[39m)[33m;[39m
     [90m 101 |[39m       
     [90m 102 |[39m       [36mconst[39m logInfo [33m=[39m {[0m

      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:99:39)

  ‚óè LogFormatters ‚Ä∫ prettyFormat ‚Ä∫ should format logs in human-readable format

    TypeError: LogFormatters.prettyFormat is not a function

    [0m [90m 117 |[39m   describe([32m&apos;prettyFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 118 |[39m     it([32m&apos;should format logs in human-readable format&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 119 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mprettyFormat()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 120 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 121 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 122 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[33m,[39m[0m

      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:119:39)

  ‚óè LogFormatters ‚Ä∫ prettyFormat ‚Ä∫ should colorize output when enabled

    TypeError: LogFormatters.prettyFormat is not a function

    [0m [90m 133 |[39m
     [90m 134 |[39m     it([32m&apos;should colorize output when enabled&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 135 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mprettyFormat({ colorize[33m:[39m [36mtrue[39m })[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 136 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 137 |[39m         level[33m:[39m [32m&apos;error&apos;[39m[33m,[39m
     [90m 138 |[39m         message[33m:[39m [32m&apos;Error message&apos;[39m[33m,[39m[0m

      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:135:39)

  ‚óè LogFormatters ‚Ä∫ prettyFormat ‚Ä∫ should include metadata when present

    TypeError: LogFormatters.prettyFormat is not a function

    [0m [90m 150 |[39m
     [90m 151 |[39m     it([32m&apos;should include metadata when present&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 152 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mprettyFormat()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 153 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 154 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 155 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[33m,[39m[0m

      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:152:39)

  ‚óè LogFormatters ‚Ä∫ compactFormat ‚Ä∫ should format logs in compact single-line format

    TypeError: LogFormatters.compactFormat is not a function

    [0m [90m 169 |[39m   describe([32m&apos;compactFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 170 |[39m     it([32m&apos;should format logs in compact single-line format&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 171 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mcompactFormat()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 172 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 173 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 174 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[33m,[39m[0m

      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:171:39)

  ‚óè LogFormatters ‚Ä∫ compactFormat ‚Ä∫ should truncate long messages

    TypeError: LogFormatters.compactFormat is not a function

    [0m [90m 187 |[39m
     [90m 188 |[39m     it([32m&apos;should truncate long messages&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 189 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mcompactFormat({ maxLength[33m:[39m [35m50[39m })[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 190 |[39m       [36mconst[39m longMessage [33m=[39m [32m&apos;A&apos;[39m[33m.[39mrepeat([35m100[39m)[33m;[39m
     [90m 191 |[39m       
     [90m 192 |[39m       [36mconst[39m logInfo [33m=[39m {[0m

      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:189:39)

  ‚óè LogFormatters ‚Ä∫ logstashFormat ‚Ä∫ should format logs for Logstash ingestion

    expect(received).toBe(expected) // Object.is equality

    Expected: &quot;info&quot;
    Received: undefined

    [0m [90m 221 |[39m       expect(parsed[[32m&apos;@version&apos;[39m])[33m.[39mtoBe([32m&apos;1&apos;[39m)[33m;[39m
     [90m 222 |[39m       expect(parsed[33m.[39mmessage)[33m.[39mtoBe([32m&apos;Test message&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 223 |[39m       expect(parsed[33m.[39mseverity)[33m.[39mtoBe([32m&apos;info&apos;[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 224 |[39m       expect(parsed[33m.[39mhost)[33m.[39mtoBe([32m&apos;test-host&apos;[39m)[33m;[39m
     [90m 225 |[39m       expect(parsed[33m.[39mservice)[33m.[39mtoBe([32m&apos;test-service&apos;[39m)[33m;[39m
     [90m 226 |[39m     })[33m;[39m[0m

      at Object.toBe (tests/unit/monitoring/logging/formatters.test.js:223:31)

  ‚óè LogFormatters ‚Ä∫ logstashFormat ‚Ä∫ should add fields from metadata

    TypeError: Cannot read properties of undefined (reading &apos;userId&apos;)

    [0m [90m 240 |[39m       [36mconst[39m parsed [33m=[39m [33mJSON[39m[33m.[39mparse(formatted[[33mSymbol[39m[33m.[39m[36mfor[39m([32m&apos;message&apos;[39m)])[33m;[39m
     [90m 241 |[39m
    [31m[1m&gt;[22m[39m[90m 242 |[39m       expect(parsed[33m.[39mfields[33m.[39muserId)[33m.[39mtoBe([35m123[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 243 |[39m       expect(parsed[33m.[39mfields[33m.[39mrequestId)[33m.[39mtoBe([32m&apos;req-456&apos;[39m)[33m;[39m
     [90m 244 |[39m       expect(parsed[33m.[39mtags)[33m.[39mtoEqual([[32m&apos;api&apos;[39m[33m,[39m [32m&apos;v2&apos;[39m])[33m;[39m
     [90m 245 |[39m     })[33m;[39m[0m

      at Object.userId (tests/unit/monitoring/logging/formatters.test.js:242:28)

  ‚óè LogFormatters ‚Ä∫ customFormat ‚Ä∫ should allow custom formatting function

    TypeError: LogFormatters.customFormat is not a function

    [0m [90m 252 |[39m       }[33m;[39m
     [90m 253 |[39m
    [31m[1m&gt;[22m[39m[90m 254 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mcustomFormat(customFormatter)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 255 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 256 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 257 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[0m

      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:254:39)

  ‚óè LogFormatters ‚Ä∫ customFormat ‚Ä∫ should support template strings

    TypeError: LogFormatters.customFormat is not a function

    [0m [90m 266 |[39m     it([32m&apos;should support template strings&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 267 |[39m       [36mconst[39m template [33m=[39m [32m&apos;{{timestamp}} [{{level}}] {{service}}: {{message}}&apos;[39m[33m;[39m
    [31m[1m&gt;[22m[39m[90m 268 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mcustomFormat(template)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 269 |[39m       
     [90m 270 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 271 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m[0m

      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:268:39)

  ‚óè LogFormatters ‚Ä∫ multiFormat ‚Ä∫ should combine multiple formatters

    TypeError: LogFormatters.multiFormat is not a function

    [0m [90m 284 |[39m   describe([32m&apos;multiFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 285 |[39m     it([32m&apos;should combine multiple formatters&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 286 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mmultiFormat([
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 287 |[39m         winston[33m.[39mformat[33m.[39mtimestamp()[33m,[39m
     [90m 288 |[39m         winston[33m.[39mformat[33m.[39merrors({ stack[33m:[39m [36mtrue[39m })[33m,[39m
     [90m 289 |[39m         winston[33m.[39mformat[33m.[39mjson()[0m

      at Object.multiFormat (tests/unit/monitoring/logging/formatters.test.js:286:39)

  ‚óè LogFormatters ‚Ä∫ filterFormat ‚Ä∫ should filter logs based on criteria

    TypeError: LogFormatters.filterFormat is not a function

    [0m [90m 304 |[39m   describe([32m&apos;filterFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 305 |[39m     it([32m&apos;should filter logs based on criteria&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 306 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mfilterFormat({
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 307 |[39m         levels[33m:[39m [[32m&apos;error&apos;[39m[33m,[39m [32m&apos;warn&apos;[39m][33m,[39m
     [90m 308 |[39m         excludeMessages[33m:[39m [[35m/debug/i[39m]
     [90m 309 |[39m       })[33m;[39m[0m

      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:306:39)

  ‚óè LogFormatters ‚Ä∫ filterFormat ‚Ä∫ should filter based on metadata fields

    TypeError: LogFormatters.filterFormat is not a function

    [0m [90m 330 |[39m
     [90m 331 |[39m     it([32m&apos;should filter based on metadata fields&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 332 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mfilterFormat({
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 333 |[39m         metadata[33m:[39m {
     [90m 334 |[39m           environment[33m:[39m [32m&apos;production&apos;[39m[33m,[39m
     [90m 335 |[39m           userId[33m:[39m (value) [33m=&gt;[39m value [33m&gt;[39m [35m100[39m[0m

      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:332:39)

  ‚óè LogFormatters ‚Ä∫ maskFormat ‚Ä∫ should mask sensitive fields

    TypeError: LogFormatters.maskFormat is not a function

    [0m [90m 366 |[39m   describe([32m&apos;maskFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 367 |[39m     it([32m&apos;should mask sensitive fields&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 368 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mmaskFormat({
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 369 |[39m         fields[33m:[39m [[32m&apos;password&apos;[39m[33m,[39m [32m&apos;token&apos;[39m[33m,[39m [32m&apos;ssn&apos;[39m][33m,[39m
     [90m 370 |[39m         patterns[33m:[39m [[35m/\b\d{3}-\d{2}-\d{4}\b/g[39m] [90m// SSN pattern[39m
     [90m 371 |[39m       })[33m;[39m[0m

      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:368:39)

  ‚óè LogFormatters ‚Ä∫ maskFormat ‚Ä∫ should handle nested fields

    TypeError: LogFormatters.maskFormat is not a function

    [0m [90m 388 |[39m
     [90m 389 |[39m     it([32m&apos;should handle nested fields&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 390 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mmaskFormat({
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 391 |[39m         fields[33m:[39m [[32m&apos;user.password&apos;[39m[33m,[39m [32m&apos;auth.token&apos;[39m]
     [90m 392 |[39m       })[33m;[39m
     [90m 393 |[39m[0m

      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:390:39)

FAIL mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js
  ‚óè Monitoring + Cloud Integration ‚Ä∫ AWS Monitoring Integration ‚Ä∫ should collect metrics from AWS-deployed services

    Environment must have name and region

    [0m [90m 330 |[39m
     [90m 331 |[39m     [36mif[39m ([33m![39menvironment[33m.[39mname [33m||[39m [33m![39menvironment[33m.[39mregion) {
    [31m[1m&gt;[22m[39m[90m 332 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Environment must have name and region&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 333 |[39m     }
     [90m 334 |[39m
     [90m 335 |[39m     [36mconst[39m deployment [33m=[39m {[0m

      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)
      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:34:46)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ AWS Monitoring Integration ‚Ä∫ should trigger alerts for AWS service anomalies

    TypeError: alertingSystem.addChannel is not a function

    [0m [90m 55 |[39m       }[33m;[39m
     [90m 56 |[39m       
    [31m[1m&gt;[22m[39m[90m 57 |[39m       [36mawait[39m alertingSystem[33m.[39maddChannel([32m&apos;test-channel&apos;[39m[33m,[39m alertChannel)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 58 |[39m       
     [90m 59 |[39m       [90m// Create alert rule for high CPU[39m
     [90m 60 |[39m       [36mawait[39m alertingSystem[33m.[39mcreateRule({[0m

      at Object.addChannel (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:57:28)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ GCP Monitoring Integration ‚Ä∫ should collect metrics from GCP Cloud Run services

    Environment must have name and projectId

    [0m [90m 533 |[39m
     [90m 534 |[39m     [36mif[39m ([33m![39menvironment[33m.[39mname [33m||[39m [33m![39menvironment[33m.[39mprojectId) {
    [31m[1m&gt;[22m[39m[90m 535 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Environment must have name and projectId&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 536 |[39m     }
     [90m 537 |[39m
     [90m 538 |[39m     [36mconst[39m deployment [33m=[39m {[0m

      at GCPDeployment.deploy (mcp-local-setup/deploy/gcp/deployment.js:535:13)
      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:89:46)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ GCP Monitoring Integration ‚Ä∫ should integrate with GCP monitoring APIs

    TypeError: gcpDeployment.getMetrics is not a function

    [0m [90m 105 |[39m
     [90m 106 |[39m     test([32m&apos;should integrate with GCP monitoring APIs&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 107 |[39m       [36mconst[39m gcpMetrics [33m=[39m [36mawait[39m gcpDeployment[33m.[39mgetMetrics([32m&apos;test-service&apos;[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 108 |[39m       
     [90m 109 |[39m       [90m// Export to Prometheus format[39m
     [90m 110 |[39m       [36mconst[39m prometheusMetrics [33m=[39m [36mawait[39m metricsCollector[33m.[39mexportMetrics(gcpMetrics)[33m;[39m[0m

      at Object.getMetrics (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:107:46)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Azure Monitoring Integration ‚Ä∫ should collect metrics from Azure Container Instances

    Environment must have name, subscriptionId, and resourceGroup

    [0m [90m 483 |[39m
     [90m 484 |[39m     [36mif[39m ([33m![39menvironment[33m.[39mname [33m||[39m [33m![39menvironment[33m.[39msubscriptionId [33m||[39m [33m![39menvironment[33m.[39mresourceGroup) {
    [31m[1m&gt;[22m[39m[90m 485 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Environment must have name, subscriptionId, and resourceGroup&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 486 |[39m     }
     [90m 487 |[39m
     [90m 488 |[39m     [36mconst[39m deployment [33m=[39m {[0m

      at AzureDeployment.deploy (mcp-local-setup/deploy/azure/deployment.js:485:13)
      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:120:48)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Cross-Cloud Monitoring ‚Ä∫ should aggregate metrics across multiple cloud providers

    Environment must have name and region

    [0m [90m 330 |[39m
     [90m 331 |[39m     [36mif[39m ([33m![39menvironment[33m.[39mname [33m||[39m [33m![39menvironment[33m.[39mregion) {
    [31m[1m&gt;[22m[39m[90m 332 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Environment must have name and region&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 333 |[39m     }
     [90m 334 |[39m
     [90m 335 |[39m     [36mconst[39m deployment [33m=[39m {[0m

      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)
      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:141:46)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Cross-Cloud Monitoring ‚Ä∫ should create unified dashboards for multi-cloud deployments

    TypeError: metricsCollector.createDashboard is not a function

    [0m [90m 179 |[39m       }[33m;[39m
     [90m 180 |[39m
    [31m[1m&gt;[22m[39m[90m 181 |[39m       [36mconst[39m dashboard [33m=[39m [36mawait[39m metricsCollector[33m.[39mcreateDashboard(dashboardConfig)[33m;[39m
     [90m     |[39m                                                [31m[1m^[22m[39m
     [90m 182 |[39m       
     [90m 183 |[39m       expect(dashboard)[33m.[39mtoHaveProperty([32m&apos;url&apos;[39m)[33m;[39m
     [90m 184 |[39m       expect(dashboard[33m.[39mpanels)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m[0m

      at Object.createDashboard (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:181:48)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Alert Integration Across Clouds ‚Ä∫ should correlate alerts from different cloud providers

    TypeError: alertingSystem.on is not a function

    [0m [90m 192 |[39m       
     [90m 193 |[39m       [90m// Setup alert collection[39m
    [31m[1m&gt;[22m[39m[90m 194 |[39m       alertingSystem[33m.[39mon([32m&apos;alert&apos;[39m[33m,[39m (alert) [33m=&gt;[39m alerts[33m.[39mpush(alert))[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 195 |[39m
     [90m 196 |[39m       [90m// Simulate alerts from different clouds[39m
     [90m 197 |[39m       [36mawait[39m alertingSystem[33m.[39mprocessCloudAlert({[0m

      at Object.on (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:194:22)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Performance Monitoring ‚Ä∫ should track deployment performance metrics

    TypeError: metricsCollector.trackDeployment is not a function

    [0m [90m 229 |[39m       [90m// Track deployment performance[39m
     [90m 230 |[39m       [36mfor[39m ([36mconst[39m [cloud[33m,[39m metrics] [36mof[39m [33mObject[39m[33m.[39mentries(deploymentMetrics)) {
    [31m[1m&gt;[22m[39m[90m 231 |[39m         [36mawait[39m metricsCollector[33m.[39mtrackDeployment(cloud[33m,[39m metrics)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 232 |[39m       }
     [90m 233 |[39m
     [90m 234 |[39m       [36mconst[39m performanceReport [33m=[39m [36mawait[39m metricsCollector[33m.[39mgetPerformanceReport()[33m;[39m[0m

      at Object.trackDeployment (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:231:32)

FAIL tests/performance/monitoring/metrics-load.test.js
  ‚óè Metrics Performance Under Load ‚Ä∫ High-Frequency Metric Updates ‚Ä∫ should handle 10k metrics/second

    Added label &quot;status&quot; is not included in initial labelset: [ &apos;method&apos;, &apos;route&apos;, &apos;status_code&apos;, &apos;status_class&apos; ]

    [0m [90m 40 |[39m       [90m// Generate metrics at high frequency[39m
     [90m 41 |[39m       [36mwhile[39m ([33mDate[39m[33m.[39mnow() [33m-[39m startTime [33m&lt;[39m duration [33m&amp;&amp;[39m operations [33m&lt;[39m targetOps) {
    [31m[1m&gt;[22m[39m[90m 42 |[39m         httpExporter[33m.[39mmetrics[33m.[39mhttpRequestsTotal[33m.[39minc({
     [90m    |[39m                                                [31m[1m^[22m[39m
     [90m 43 |[39m           method[33m:[39m [[32m&apos;GET&apos;[39m[33m,[39m [32m&apos;POST&apos;[39m[33m,[39m [32m&apos;PUT&apos;[39m[33m,[39m [32m&apos;DELETE&apos;[39m][operations [33m%[39m [35m4[39m][33m,[39m
     [90m 44 |[39m           status[33m:[39m [[32m&apos;200&apos;[39m[33m,[39m [32m&apos;201&apos;[39m[33m,[39m [32m&apos;400&apos;[39m[33m,[39m [32m&apos;500&apos;[39m][operations [33m%[39m [35m4[39m]
     [90m 45 |[39m         })[33m;[39m[0m

      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)
      at Counter.incWithoutExemplar (node_modules/prom-client/lib/counter.js:44:4)
      at Object.inc (tests/performance/monitoring/metrics-load.test.js:42:48)

  ‚óè Metrics Performance Under Load ‚Ä∫ High-Frequency Metric Updates ‚Ä∫ should handle concurrent metric updates

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Memory Efficiency ‚Ä∫ should maintain stable memory usage with high cardinality

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Memory Efficiency ‚Ä∫ should handle metric lifecycle efficiently

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Metric Collection Performance ‚Ä∫ should efficiently serialize large numbers of metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Metric Collection Performance ‚Ä∫ should handle metric endpoint under load

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Histogram Performance ‚Ä∫ should efficiently calculate percentiles

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Histogram Performance ‚Ä∫ should handle multiple histogram updates concurrently

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Label Cardinality Performance ‚Ä∫ should handle high label cardinality efficiently

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Real-world Load Simulation ‚Ä∫ should handle realistic mixed workload

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Stress Testing ‚Ä∫ should remain stable under extreme load

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

PASS mcp-local-setup/deploy/tests/azure.test.js
PASS mcp-local-setup/tests/e2e/client-configuration.e2e.test.js
FAIL mcp-local-setup/tests/integration/profile-switching.integration.test.js
  ‚óè Profile Switching Integration Tests ‚Ä∫ Profile Creation ‚Ä∫ should handle profile name conflicts

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: &quot;/home/jenner/.mcp-platform/profiles/duplicate-profile.yml&quot;

    [0m [90m 84 |[39m
     [90m 85 |[39m       [90m// Try to create duplicate[39m
    [31m[1m&gt;[22m[39m[90m 86 |[39m       [36mawait[39m expect(createTestProfile([[32m&apos;service2&apos;[39m][33m,[39m { name[33m:[39m profileName }))
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 87 |[39m         [33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 88 |[39m     })[33m;[39m
     [90m 89 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (mcp-local-setup/tests/integration/profile-switching.integration.test.js:86:13)

  ‚óè Profile Switching Integration Tests ‚Ä∫ Profile Creation ‚Ä∫ should validate profile yaml structure

    YAMLException: bad indentation of a mapping entry (1:14)

     1 | invalid: yaml: structure:
    ------------------^

    [0m [90m  97 |[39m
     [90m  98 |[39m       [90m// Try to load the profile[39m
    [31m[1m&gt;[22m[39m[90m  99 |[39m       [36mawait[39m expect(yaml[33m.[39mload([36mawait[39m fs[33m.[39mreadFile(profilePath[33m,[39m [32m&apos;utf8&apos;[39m)))
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 100 |[39m         [33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 101 |[39m     })[33m;[39m
     [90m 102 |[39m   })[33m;[39m[0m

      at generateError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:183:10)
      at throwError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:187:9)
      at readBlockMapping (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1182:7)
      at composeNode (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1441:12)
      at readDocument (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1625:3)
      at loadDocuments (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1688:5)
      at Object.load (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1714:19)
      at Object.load (mcp-local-setup/tests/integration/profile-switching.integration.test.js:99:25)

  ‚óè Profile Switching Integration Tests ‚Ä∫ Profile Switching ‚Ä∫ should update docker-compose when switching profiles

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 159 |[39m
     [90m 160 |[39m       [36mconst[39m generated [33m=[39m [36mawait[39m generateCompose()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 161 |[39m       expect(generated)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 162 |[39m
     [90m 163 |[39m       [90m// Docker compose should now contain services from profile1[39m
     [90m 164 |[39m       [36mconst[39m composePath [33m=[39m path[33m.[39mjoin([33mMCP_HOME[39m[33m,[39m [32m&apos;docker-compose.yml&apos;[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/profile-switching.integration.test.js:161:25)

PASS tests/unit/config/limits.test.js
PASS tests/integration/phase6/observability-integration.test.js
  ‚óè Console

    console.log
      [32minfo[39m: Request started {&quot;metadata&quot;:{&quot;method&quot;:&quot;GET&quot;,&quot;path&quot;:&quot;/api/users&quot;,&quot;requestId&quot;:&quot;req-123&quot;},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.219Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Request completed {&quot;metadata&quot;:{&quot;requestId&quot;:&quot;req-123&quot;,&quot;status&quot;:200},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.339Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [31merror[39m: Database error occurred {&quot;metadata&quot;:{&quot;error&quot;:{&quot;message&quot;:&quot;Database connection failed&quot;,&quot;name&quot;:&quot;Error&quot;,&quot;stack&quot;:&quot;Error: Database connection failed\n    at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/integration/phase6/observability-integration.test.js:60:19)\n    at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)&quot;},&quot;query&quot;:&quot;SELECT * FROM users&quot;,&quot;requestId&quot;:&quot;req-456&quot;,&quot;service&quot;:&quot;api&quot;},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.364Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [33mwarn[39m: Slow response detected {&quot;endpoint&quot;:&quot;/api/heavy&quot;,&quot;responseTime&quot;:5500,&quot;threshold&quot;:5000,&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.374Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Request received {&quot;metadata&quot;:{&quot;headers&quot;:{&quot;x-request-id&quot;:&quot;req-789&quot;},&quot;ip&quot;:&quot;unknown&quot;,&quot;method&quot;:&quot;POST&quot;,&quot;path&quot;:&quot;/api/users&quot;,&quot;requestId&quot;:&quot;req-789&quot;},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.379Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Processing request {&quot;metadata&quot;:{&quot;requestId&quot;:&quot;trace-123&quot;,&quot;traceId&quot;:&quot;e3f03f789c9c577cabcafdb9edbe9eb8&quot;},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.386Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS mcp-local-setup/deploy/tests/aws.test.js
PASS mcp-local-setup/enterprise/tests/tenancy.test.js
  ‚óè Console

    console.log
      Disabling services for tenant lifecycle-tenant

      at MultiTenancy.log [as _disableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:348:13)

    console.log
      Disabling services for tenant lifecycle-tenant

      at MultiTenancy.log [as _disableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:348:13)

    console.log
      Enabling services for tenant lifecycle-tenant

      at MultiTenancy.log [as _enableTenantServices] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:354:13)

    console.log
      Backing up tenant lifecycle-tenant to /home/jenner/code/mcps/data/tenants/backups/lifecycle-tenant

      at MultiTenancy.log [as _backupTenantData] (mcp-local-setup/enterprise/multi-tenant/tenancy.js:366:15)

FAIL mcp-local-setup/tests/integration/backup.integration.test.js
  ‚óè Console

    console.log
      Stopping services: filesystem, git, browser, postgres, everest

      at BackupManager.log [as stopServices] (mcp-local-setup/scripts/backup-manager.js:863:17)

    console.log
      Restoring configuration for: filesystem, git, browser, postgres, everest

      at BackupManager.log [as restoreConfiguration] (mcp-local-setup/scripts/backup-manager.js:883:17)

    console.log
      Restoring data for: filesystem, git, browser, postgres, everest

      at BackupManager.log [as restoreServiceData] (mcp-local-setup/scripts/backup-manager.js:893:17)

    console.log
      Starting services: filesystem, git, browser, postgres, everest

      at BackupManager.log [as startServices] (mcp-local-setup/scripts/backup-manager.js:872:17)

    console.log
      Stopping services: filesystem

      at BackupManager.log [as stopServices] (mcp-local-setup/scripts/backup-manager.js:863:17)

    console.log
      Restoring configuration for: filesystem

      at BackupManager.log [as restoreConfiguration] (mcp-local-setup/scripts/backup-manager.js:883:17)

    console.log
      Restoring data for: filesystem

      at BackupManager.log [as restoreServiceData] (mcp-local-setup/scripts/backup-manager.js:893:17)

    console.log
      Starting services: filesystem

      at BackupManager.log [as startServices] (mcp-local-setup/scripts/backup-manager.js:872:17)

    console.log
      Dry run mode - no changes will be made

      at BackupManager.log [as restoreBackup] (mcp-local-setup/scripts/backup-manager.js:287:25)

    console.log
      Would restore services: non-existent-service

      at BackupManager.log [as restoreBackup] (mcp-local-setup/scripts/backup-manager.js:288:25)

  ‚óè Backup &amp; Restore Integration Tests ‚Ä∫ Selective Service Backup ‚Ä∫ should handle incremental backups

    expect(received).toBeLessThan(expected)

    Expected: &lt; 993
    Received:   993

    [0m [90m 155 |[39m             [36mconst[39m metadata [33m=[39m [36mawait[39m backup[33m.[39mgetBackupMetadata(incrementalId)[33m;[39m
     [90m 156 |[39m             expect(metadata[33m.[39mtype)[33m.[39mtoBe([32m&apos;incremental&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 157 |[39m             expect(metadata[33m.[39msize)[33m.[39mtoBeLessThan(metadata[33m.[39msize)[33m;[39m [90m// Should be smaller than full[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 158 |[39m         })[33m;[39m
     [90m 159 |[39m     })[33m;[39m
     [90m 160 |[39m[0m

      at Object.toBeLessThan (mcp-local-setup/tests/integration/backup.integration.test.js:157:35)

  ‚óè Backup &amp; Restore Integration Tests ‚Ä∫ Scheduled Backups ‚Ä∫ should list backup schedules

    expect(received).toBeInstanceOf(expected)

    Expected constructor: Date

    Received value has no prototype
    Received value: null

    [0m [90m 182 |[39m             expect(testSchedule[33m.[39mcronExpression)[33m.[39mtoBe([32m&apos;0 2 * * *&apos;[39m)[33m;[39m
     [90m 183 |[39m             expect(testSchedule[33m.[39menabled)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 184 |[39m             expect(testSchedule[33m.[39mnextRun)[33m.[39mtoBeInstanceOf([33mDate[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 185 |[39m         })[33m;[39m
     [90m 186 |[39m
     [90m 187 |[39m         it([32m&apos;should update backup schedule&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/backup.integration.test.js:184:42)

  ‚óè Backup &amp; Restore Integration Tests ‚Ä∫ Backup Storage Management ‚Ä∫ should delete specific backup

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 296 |[39m         it([32m&apos;should delete specific backup&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 297 |[39m             [36mconst[39m deleted [33m=[39m [36mawait[39m backup[33m.[39mdeleteBackup(testBackupId)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 298 |[39m             expect(deleted)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 299 |[39m
     [90m 300 |[39m             [36mawait[39m expect(backup[33m.[39mgetBackupMetadata(testBackupId))
     [90m 301 |[39m                 [33m.[39mrejects[33m.[39mtoThrow([32m&apos;Backup not found&apos;[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/backup.integration.test.js:298:29)

  ‚óè Backup &amp; Restore Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should validate backup options

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: &quot;backup-2025-07-24T22-52-02-438Z-7bfbf9bc&quot;

    [0m [90m 321 |[39m             }[33m;[39m
     [90m 322 |[39m
    [31m[1m&gt;[22m[39m[90m 323 |[39m             [36mawait[39m expect(backup[33m.[39mcreateBackup(invalidOptions))
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 324 |[39m                 [33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 325 |[39m         })[33m;[39m
     [90m 326 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (mcp-local-setup/tests/integration/backup.integration.test.js:323:19)

PASS tests/integration/docker/security-scan.test.js
PASS mcp-local-setup/monitoring/tests/alerting-system.test.js
  ‚óè Console

    console.error
      Failed to configure notification channel test: Error: Unsupported channel type: unsupported
          at AlertingSystem.configureNotificationChannel (/home/jenner/code/mcps/mcp-local-setup/monitoring/alerts/alerting.js:90:17)
          at configureNotificationChannel (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:170:35)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/home/jenner/code/mcps/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:171:10)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 100 |[39m       }[33m;[39m
     [90m 101 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 102 |[39m       console[33m.[39merror([32m`Failed to configure notification channel ${channel.name}:`[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 103 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Channel configuration failed: ${error.message}`[39m)[33m;[39m
     [90m 104 |[39m     }
     [90m 105 |[39m   }[0m

      at AlertingSystem.error [as configureNotificationChannel] (mcp-local-setup/monitoring/alerts/alerting.js:102:15)
      at configureNotificationChannel (mcp-local-setup/monitoring/tests/alerting-system.test.js:170:35)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (mcp-local-setup/monitoring/tests/alerting-system.test.js:171:10)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.446Z
      ========================================
      Title: Test Alert
      Message: This is a test alert
      Rule: test-rule
      ID: alert-1753397522446-1idpim4hm
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.error
      Failed to send alert: Error: Alert rule not found: non-existent
          at AlertingSystem.sendAlert (/home/jenner/code/mcps/mcp-local-setup/monitoring/alerts/alerting.js:151:15)
          at Object.sendAlert (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:257:35)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 189 |[39m       }[33m;[39m
     [90m 190 |[39m     } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 191 |[39m       console[33m.[39merror([32m&apos;Failed to send alert:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Alert sending failed: ${error.message}`[39m)[33m;[39m
     [90m 193 |[39m     }
     [90m 194 |[39m   }[0m

      at AlertingSystem.error [as sendAlert] (mcp-local-setup/monitoring/alerts/alerting.js:191:15)
      at Object.sendAlert (mcp-local-setup/monitoring/tests/alerting-system.test.js:257:35)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.453Z
      ========================================
      Title: test-rule
      Message: Test alert
      Rule: test-rule
      ID: alert-1753397522453-ln2ylgwyd
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.454Z
      ========================================
      Title: test-rule
      Message: Test alert
      Rule: test-rule
      ID: alert-1753397522454-gnhc8jd3u
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.456Z
      ========================================
      Title: escalation-rule
      Message: Test escalation
      Rule: escalation-rule
      ID: alert-1753397522456-eohzjoq2y
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.error
      Failed to send notification to test-email: Error: Email failed
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/monitoring/tests/alerting-system.test.js:371:55)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 448 |[39m         })[33m;[39m
     [90m 449 |[39m       } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 450 |[39m         console[33m.[39merror([32m`Failed to send notification to ${channelName}:`[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 451 |[39m         results[33m.[39mpush({
     [90m 452 |[39m           channel[33m:[39m channelName[33m,[39m
     [90m 453 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at AlertingSystem.error [as sendNotifications] (mcp-local-setup/monitoring/alerts/alerting.js:450:17)
      at Object.&lt;anonymous&gt; (mcp-local-setup/monitoring/tests/alerting-system.test.js:379:23)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.464Z
      ========================================
      Title: test-rule
      Message: Test alert
      Rule: test-rule
      ID: alert-1753397522464-o2lvvxgxd
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.465Z
      ========================================
      Title: test-rule
      Message: Test alert
      Rule: test-rule
      ID: alert-1753397522465-okkywl6hp
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.466Z
      ========================================
      Title: test-rule
      Message: Test alert
      Rule: test-rule
      ID: alert-1753397522466-y9fej1gjy
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.467Z
      ========================================
      Title: test-rule
      Message: Test alert
      Rule: test-rule
      ID: alert-1753397522467-lvufyz0t4
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.468Z
      ========================================
      Title: test-rule
      Message: Test alert
      Rule: test-rule
      ID: alert-1753397522468-2jq5dhal3
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

    console.log
      
      ========================================
      ALERT [WARNING] - 2025-07-24T22:52:02.469Z
      ========================================
      Title: test-rule
      Message: Test alert
      Rule: test-rule
      ID: alert-1753397522469-66fegexag
      ----------------------------------------
      {}
      ========================================

      at Object.log [as send] (mcp-local-setup/monitoring/alerts/alerting.js:351:17)

PASS mcp-local-setup/tests/integration/phase5/orchestration-only.test.js
PASS mcp-local-setup/monitoring/tests/metrics-collector-simple.test.js
PASS mcp-local-setup/tests/integration/phase5/sdk-cli-integration.test.js
PASS tests/unit/monitoring/error-tracker.test.js
PASS tests/unit/monitoring/prometheus-exporter.test.js
PASS tests/unit/monitoring/winston-config.test.js
  ‚óè Console

    console.log
      2025-07-24 18:52:02.490 [test-service] [32minfo[39m: [32m	Incoming request[39m {&quot;correlationId&quot;:&quot;1753397522490-pngkgahh0&quot;,&quot;hostname&quot;:&quot;TorrenceBioAI1&quot;,&quot;pid&quot;:3738385,&quot;method&quot;:&quot;GET&quot;,&quot;url&quot;:&quot;/test&quot;,&quot;headers&quot;:{&quot;user-agent&quot;:&quot;test&quot;},&quot;ip&quot;:&quot;127.0.0.1&quot;} {&quot;environment&quot;:&quot;test&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/docker/health/readiness.test.js
PASS mcp-local-setup/enterprise/tests/authentication.test.js
  ‚óè Console

    console.log
      Testing LDAP connection to ldaps://ldap.example.com:636

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Testing LDAP connection to ldaps://ldap.example.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Testing LDAP connection to ldaps://ldap.example.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Testing LDAP connection to ldap://test.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Processing SAML assertion

      at SSOAuthentication.log [as _authenticateSAML] (mcp-local-setup/enterprise/sso/authentication.js:357:13)

    console.log
      Testing LDAP connection to ldap://test.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Exchanging OAuth2 code for tokens

      at SSOAuthentication.log [as _authenticateOAuth2] (mcp-local-setup/enterprise/sso/authentication.js:374:13)

    console.log
      Testing LDAP connection to ldap://test.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Authenticating via LDAP

      at SSOAuthentication.log [as _authenticateLDAP] (mcp-local-setup/enterprise/sso/authentication.js:392:13)

    console.log
      Testing LDAP connection to ldap://test.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Testing LDAP connection to ldap://test.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Authenticating via LDAP

      at SSOAuthentication.log [as _authenticateLDAP] (mcp-local-setup/enterprise/sso/authentication.js:392:13)

    console.log
      Testing LDAP connection to ldap://test.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Processing SAML assertion

      at SSOAuthentication.log [as _authenticateSAML] (mcp-local-setup/enterprise/sso/authentication.js:357:13)

    console.log
      Testing LDAP connection to ldap://test.com

      at SSOAuthentication.log [as _testLDAPConnection] (mcp-local-setup/enterprise/sso/authentication.js:350:13)

    console.log
      Exchanging OAuth2 code for tokens

      at SSOAuthentication.log [as _authenticateOAuth2] (mcp-local-setup/enterprise/sso/authentication.js:374:13)

FAIL tests/integration/phase6/production-deployment.test.js
  ‚óè Console

    console.warn
      Redis storage requested but no Redis client provided, falling back to memory storage

    [0m [90m  6 |[39m     [90m// If Redis storage is requested but no Redis client provided, fall back to memory[39m
     [90m  7 |[39m     [36mif[39m ([36mthis[39m[33m.[39mstorage [33m===[39m [32m&apos;redis&apos;[39m [33m&amp;&amp;[39m [33m![39m[36mthis[39m[33m.[39mredis) {
    [31m[1m&gt;[22m[39m[90m  8 |[39m       console[33m.[39mwarn([32m&apos;Redis storage requested but no Redis client provided, falling back to memory storage&apos;[39m)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m  9 |[39m       [36mthis[39m[33m.[39mstorage [33m=[39m [32m&apos;memory&apos;[39m[33m;[39m
     [90m 10 |[39m     }
     [90m 11 |[39m     [0m

      at new warn (security/rate-limiting/rate-limiter.js:8:15)
      at Object.&lt;anonymous&gt; (tests/integration/phase6/production-deployment.test.js:22:19)

    console.log
      [32minfo[39m: Production system started {&quot;environment&quot;:&quot;production&quot;,&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.260Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.warn
      Redis storage requested but no Redis client provided, falling back to memory storage

    [0m [90m  6 |[39m     [90m// If Redis storage is requested but no Redis client provided, fall back to memory[39m
     [90m  7 |[39m     [36mif[39m ([36mthis[39m[33m.[39mstorage [33m===[39m [32m&apos;redis&apos;[39m [33m&amp;&amp;[39m [33m![39m[36mthis[39m[33m.[39mredis) {
    [31m[1m&gt;[22m[39m[90m  8 |[39m       console[33m.[39mwarn([32m&apos;Redis storage requested but no Redis client provided, falling back to memory storage&apos;[39m)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m  9 |[39m       [36mthis[39m[33m.[39mstorage [33m=[39m [32m&apos;memory&apos;[39m[33m;[39m
     [90m 10 |[39m     }
     [90m 11 |[39m     [0m

      at new warn (security/rate-limiting/rate-limiter.js:8:15)
      at Object.&lt;anonymous&gt; (tests/integration/phase6/production-deployment.test.js:22:19)

    console.log
      [32minfo[39m: Request started {&quot;metadata&quot;:{&quot;ip&quot;:&quot;203.0.113.1&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;path&quot;:&quot;/api/profile&quot;,&quot;requestId&quot;:&quot;prod-req-001&quot;,&quot;userId&quot;:&quot;user-123&quot;},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.275Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [31merror[39m: Request failed {&quot;metadata&quot;:{&quot;error&quot;:{&quot;message&quot;:&quot;Added label \&quot;status\&quot; is not included in initial labelset: []&quot;,&quot;name&quot;:&quot;Error&quot;,&quot;stack&quot;:&quot;Error: Added label \&quot;status\&quot; is not included in initial labelset: []\n    at validateLabel (/home/jenner/code/mcps/node_modules/prom-client/lib/validation.js:20:10)\n    at /home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:235:3\n    at Histogram.observeWithoutExemplar (/home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:74:54)\n    at /home/jenner/code/mcps/node_modules/prom-client/lib/histogram.js:185:9\n    at Object.requestTimer (/home/jenner/code/mcps/tests/integration/phase6/production-deployment.test.js:134:7)&quot;},&quot;requestId&quot;:&quot;prod-req-001&quot;,&quot;userId&quot;:&quot;user-123&quot;},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.392Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.warn
      Redis storage requested but no Redis client provided, falling back to memory storage

    [0m [90m  6 |[39m     [90m// If Redis storage is requested but no Redis client provided, fall back to memory[39m
     [90m  7 |[39m     [36mif[39m ([36mthis[39m[33m.[39mstorage [33m===[39m [32m&apos;redis&apos;[39m [33m&amp;&amp;[39m [33m![39m[36mthis[39m[33m.[39mredis) {
    [31m[1m&gt;[22m[39m[90m  8 |[39m       console[33m.[39mwarn([32m&apos;Redis storage requested but no Redis client provided, falling back to memory storage&apos;[39m)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m  9 |[39m       [36mthis[39m[33m.[39mstorage [33m=[39m [32m&apos;memory&apos;[39m[33m;[39m
     [90m 10 |[39m     }
     [90m 11 |[39m     [0m

      at new warn (security/rate-limiting/rate-limiter.js:8:15)
      at Object.&lt;anonymous&gt; (tests/integration/phase6/production-deployment.test.js:22:19)

    console.warn
      Redis storage requested but no Redis client provided, falling back to memory storage

    [0m [90m  6 |[39m     [90m// If Redis storage is requested but no Redis client provided, fall back to memory[39m
     [90m  7 |[39m     [36mif[39m ([36mthis[39m[33m.[39mstorage [33m===[39m [32m&apos;redis&apos;[39m [33m&amp;&amp;[39m [33m![39m[36mthis[39m[33m.[39mredis) {
    [31m[1m&gt;[22m[39m[90m  8 |[39m       console[33m.[39mwarn([32m&apos;Redis storage requested but no Redis client provided, falling back to memory storage&apos;[39m)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m  9 |[39m       [36mthis[39m[33m.[39mstorage [33m=[39m [32m&apos;memory&apos;[39m[33m;[39m
     [90m 10 |[39m     }
     [90m 11 |[39m     [0m

      at new warn (security/rate-limiting/rate-limiter.js:8:15)
      at Object.&lt;anonymous&gt; (tests/integration/phase6/production-deployment.test.js:22:19)

    console.log
      [33mwarn[39m: Graceful shutdown initiated {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.400Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Graceful shutdown complete {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.503Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Production Deployment Integration ‚Ä∫ Production request flow with all components

    Added label &quot;status&quot; is not included in initial labelset: []

    [0m [90m 149 |[39m
     [90m 150 |[39m       requestLogger[33m.[39merror([32m&apos;Request failed&apos;[39m[33m,[39m error)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 151 |[39m       requestTimer({ status[33m:[39m [35m500[39m })[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 152 |[39m     } [36mfinally[39m {
     [90m 153 |[39m       transaction[33m.[39mfinish()[33m;[39m
     [90m 154 |[39m     }[0m

      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)
      at node_modules/prom-client/lib/histogram.js:235:3
      at Histogram.observeWithoutExemplar (node_modules/prom-client/lib/histogram.js:74:54)
      at node_modules/prom-client/lib/histogram.js:185:9
      at Object.requestTimer (tests/integration/phase6/production-deployment.test.js:151:7)

  ‚óè Production Deployment Integration ‚Ä∫ Production monitoring and alerting

    ReferenceError: Cannot access &apos;health&apos; before initialization

    [0m [90m 181 |[39m
     [90m 182 |[39m     [90m// Check health degradation[39m
    [31m[1m&gt;[22m[39m[90m 183 |[39m     [36mconst[39m health [33m=[39m [36mawait[39m health[33m.[39mcheckHealth()[33m;[39m
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 184 |[39m     expect(health[33m.[39mstatus)[33m.[39mtoBe([32m&apos;degraded&apos;[39m)[33m;[39m
     [90m 185 |[39m
     [90m 186 |[39m     [90m// Verify metrics[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/phase6/production-deployment.test.js:183:20)

PASS tests/docker-production.test.js
PASS mcp-local-setup/deploy/tests/gcp.test.js
PASS mcp-local-setup/tests/unit/config/config-validator.test.js
PASS mcp-local-setup/tests/integration/phase5/orchestration-cicd-only.test.js
PASS tests/unit/security/jwt-auth.test.js
PASS tests/unit/monitoring/custom-metrics.test.js
PASS tests/unit/security/rate-limiter.test.js
PASS mcp-local-setup/deploy/tests/index.test.js
PASS mcp-local-setup/tests/unit/marketplace/discovery.test.js
PASS tests/unit/security/api-key.test.js
FAIL mcp-local-setup/tests/unit/cli-mcp-cli.unit.test.js
  ‚óè MCP CLI Command Parsing ‚Ä∫ CLI Initialization ‚Ä∫ should set up correct environment variables

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ CLI Initialization ‚Ä∫ should define all required command paths

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Utility Functions ‚Ä∫ fileExists should check file accessibility

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Utility Functions ‚Ä∫ runCommand should spawn process with correct arguments

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Utility Functions ‚Ä∫ runCommand should handle process errors

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Command Structure ‚Ä∫ should parse version command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Command Structure ‚Ä∫ should parse help command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Service Commands ‚Ä∫ should validate service start command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Service Commands ‚Ä∫ should validate service stop command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Service Commands ‚Ä∫ should validate service restart command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Profile Commands ‚Ä∫ should handle profile list command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Profile Commands ‚Ä∫ should handle profile switch command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Profile Commands ‚Ä∫ should validate profile creation

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Error Handling ‚Ä∫ should handle missing docker-compose file

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Error Handling ‚Ä∫ should handle invalid profile names

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Error Handling ‚Ä∫ should handle service command failures gracefully

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

PASS tests/unit/docker/health/liveness.test.js
PASS tests/unit/monitoring/logger.test.js
  ‚óè Console

    console.log
      [34mdebug[39m: Debug message {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.091Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Info message {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.112Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [33mwarn[39m: Warning message {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.113Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [31merror[39m: Error message {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.115Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Test message {&quot;action&quot;:&quot;login&quot;,&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.129Z&quot;,&quot;userId&quot;:123}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [31merror[39m: Error occurred {&quot;context&quot;:&quot;test&quot;,&quot;error&quot;:{&quot;message&quot;:&quot;Test error&quot;,&quot;name&quot;:&quot;Error&quot;,&quot;stack&quot;:&quot;Error: Test error\n    at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/tests/unit/monitoring/logger.test.js:37:21)\n    at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)&quot;},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.145Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Timer test-operation completed {&quot;duration&quot;:101,&quot;durationMs&quot;:101,&quot;timer&quot;:&quot;test-operation&quot;,&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.267Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Timer db-query completed {&quot;duration&quot;:54,&quot;durationMs&quot;:54,&quot;query&quot;:&quot;SELECT * FROM users&quot;,&quot;timer&quot;:&quot;db-query&quot;,&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.327Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Request received {&quot;metadata&quot;:{&quot;headers&quot;:{&quot;content-type&quot;:&quot;application/json&quot;},&quot;ip&quot;:&quot;127.0.0.1&quot;,&quot;method&quot;:&quot;POST&quot;,&quot;path&quot;:&quot;/api/users&quot;,&quot;requestId&quot;:&quot;req-1753397522339-xmcqowxoh&quot;},&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.340Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Test message 1 {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.360Z&quot;,&quot;type&quot;:&quot;test&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Test message 2 {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.363Z&quot;,&quot;type&quot;:&quot;other&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [31merror[39m: Error message {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.470Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [32minfo[39m: Info message {&quot;timestamp&quot;:&quot;2025-07-24T22:52:02.473Z&quot;}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/docker/health/startup.test.js
PASS tests/unit/monitoring/metrics.test.js
PASS tests/unit/docker/graceful-shutdown.test.js
FAIL tests/unit/security/xss-protection.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;isomorphic-dompurify&apos; from &apos;tests/unit/security/xss-protection.test.js&apos;

    [0m [90m 2 |[39m
     [90m 3 |[39m [90m// Mock isomorphic-dompurify[39m
    [31m[1m&gt;[22m[39m[90m 4 |[39m jest[33m.[39mmock([32m&apos;isomorphic-dompurify&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 5 |[39m   [36mreturn[39m () [33m=&gt;[39m ({
     [90m 6 |[39m     sanitize[33m:[39m jest[33m.[39mfn((dirty[33m,[39m config) [33m=&gt;[39m {
     [90m 7 |[39m       [90m// Simple mock sanitization[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (tests/unit/security/xss-protection.test.js:4:6)

FAIL mcp-local-setup/tests/unit/update/update-manager.unit.test.js
  ‚óè Test suite failed to run

    TypeError: Cannot destructure property &apos;O_CREAT&apos; of &apos;fs.constants&apos; as it is undefined.

    [0m [90m 11 |[39m [36mconst[39m { pipeline } [33m=[39m require([32m&apos;stream/promises&apos;[39m)[33m;[39m
     [90m 12 |[39m [36mconst[39m { createWriteStream[33m,[39m createReadStream } [33m=[39m require([32m&apos;fs&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 13 |[39m [36mconst[39m tar [33m=[39m require([32m&apos;tar&apos;[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 14 |[39m [36mconst[39m semver [33m=[39m require([32m&apos;semver&apos;[39m)[33m;[39m
     [90m 15 |[39m [36mconst[39m cron [33m=[39m require([32m&apos;node-cron&apos;[39m)[33m;[39m
     [90m 16 |[39m[0m

      at Object.&lt;anonymous&gt; (mcp-local-setup/node_modules/tar/lib/get-write-flag.js:14:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/node_modules/tar/lib/unpack.js:48:17)
      at Object.&lt;anonymous&gt; (mcp-local-setup/node_modules/tar/lib/extract.js:5:16)
      at Object.&lt;anonymous&gt; (mcp-local-setup/node_modules/tar/index.js:8:31)
      at Object.require (mcp-local-setup/scripts/update-manager.js:13:13)
      at Object.require (mcp-local-setup/tests/unit/update/update-manager.unit.test.js:5:23)

FAIL mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;../../../monitoring/logging/service&apos; from &apos;mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js&apos;

    [0m [90m  7 |[39m [36mconst[39m [33mComplianceTools[39m [33m=[39m require([32m&apos;../../../enterprise/compliance/tools&apos;[39m)[33m;[39m
     [90m  8 |[39m [36mconst[39m [33mTenantManager[39m [33m=[39m require([32m&apos;../../../enterprise/multi-tenant/tenancy&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  9 |[39m [36mconst[39m [33mLoggingService[39m [33m=[39m require([32m&apos;../../../monitoring/logging/service&apos;[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 10 |[39m [36mconst[39m [33mAlertingSystem[39m [33m=[39m require([32m&apos;../../../monitoring/alerts/alerting&apos;[39m)[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m&apos;SSO + Compliance Integration&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js:9:24)

FAIL tests/unit/security/input-validator.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;validator&apos; from &apos;security/validation/input-validator.js&apos;

    Require stack:
      security/validation/input-validator.js
      tests/unit/security/input-validator.test.js

    [0m [90m  6 |[39m [90m */[39m
     [90m  7 |[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m [36mconst[39m validator [33m=[39m require([32m&apos;validator&apos;[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m  9 |[39m [36mconst[39m createDOMPurify [33m=[39m require([32m&apos;isomorphic-dompurify&apos;[39m)[33m;[39m
     [90m 10 |[39m
     [90m 11 |[39m [36mclass[39m [33mInputValidator[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (security/validation/input-validator.js:8:19)
      at Object.&lt;anonymous&gt; (tests/unit/security/input-validator.test.js:1:79)

FAIL tests/security/injection-prevention.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;validator&apos; from &apos;security/validation/input-validator.js&apos;

    Require stack:
      security/validation/input-validator.js
      tests/security/injection-prevention.test.js

    [0m [90m  6 |[39m [90m */[39m
     [90m  7 |[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m [36mconst[39m validator [33m=[39m require([32m&apos;validator&apos;[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m  9 |[39m [36mconst[39m createDOMPurify [33m=[39m require([32m&apos;isomorphic-dompurify&apos;[39m)[33m;[39m
     [90m 10 |[39m
     [90m 11 |[39m [36mclass[39m [33mInputValidator[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (security/validation/input-validator.js:8:19)
      at Object.&lt;anonymous&gt; (tests/security/injection-prevention.test.js:1:76)

FAIL tests/unit/security/oauth.test.js
  ‚óè OAuth2Provider ‚Ä∫ getUserInfo ‚Ä∫ should return user info

    User info URL not configured

    [0m [90m 211 |[39m   [36masync[39m getUserInfo(accessToken) {
     [90m 212 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mconfig[33m.[39muserInfoURL) {
    [31m[1m&gt;[22m[39m[90m 213 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;User info URL not configured&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 214 |[39m     }
     [90m 215 |[39m
     [90m 216 |[39m     [36mtry[39m {[0m

      at OAuth2Provider.getUserInfo (security/api-auth/oauth.js:213:13)
      at Object.getUserInfo (tests/unit/security/oauth.test.js:161:39)

FAIL mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;../../../monitoring/logging/service&apos; from &apos;mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js&apos;

    [0m [90m 15 |[39m [36mconst[39m [33mAzureDeployment[39m [33m=[39m require([32m&apos;../../../deploy/azure/deployment&apos;[39m)[33m;[39m
     [90m 16 |[39m [36mconst[39m [33mMetricsCollector[39m [33m=[39m require([32m&apos;../../../monitoring/metrics/collector&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 17 |[39m [36mconst[39m [33mLoggingService[39m [33m=[39m require([32m&apos;../../../monitoring/logging/service&apos;[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 18 |[39m [36mconst[39m [33mAlertingSystem[39m [33m=[39m require([32m&apos;../../../monitoring/alerts/alerting&apos;[39m)[33m;[39m
     [90m 19 |[39m
     [90m 20 |[39m describe([32m&apos;Phase 4 Full Workflow Integration&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js:17:24)

FAIL mcp-local-setup/monitoring/tests/logging-service.test.js
  ‚óè Test suite failed to run

    ReferenceError: Cannot access &apos;mockWinston&apos; before initialization

    [0m [90m 29 |[39m }[33m;[39m
     [90m 30 |[39m
    [31m[1m&gt;[22m[39m[90m 31 |[39m jest[33m.[39mmock([32m&apos;winston&apos;[39m[33m,[39m () [33m=&gt;[39m mockWinston)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 32 |[39m
     [90m 33 |[39m jest[33m.[39mmock([32m&apos;winston-daily-rotate-file&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 34 |[39m   [36mreturn[39m jest[33m.[39mfn()[33m.[39mmockImplementation(() [33m=&gt;[39m ({}))[33m;[39m[0m

      at mockWinston (mcp-local-setup/monitoring/tests/logging-service.test.js:31:28)
      at Object.require (mcp-local-setup/monitoring/logging/logger.js:6:17)
      at Object.require (mcp-local-setup/monitoring/tests/logging-service.test.js:5:24)

FAIL tests/sdk-core.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;../../../../mcp-local-setup/enterprise/sso/authentication&apos; from &apos;sdk/core/index.js&apos;

    Require stack:
      sdk/core/index.js
      tests/sdk-core.test.js

    [0m [90m  5 |[39m [36mconst[39m [33mEventEmitter[39m [33m=[39m require([32m&apos;events&apos;[39m)[33m;[39m
     [90m  6 |[39m [36mconst[39m crypto [33m=[39m require([32m&apos;crypto&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  7 |[39m [36mconst[39m [33mSSOAuthentication[39m [33m=[39m require([32m&apos;../../../../mcp-local-setup/enterprise/sso/authentication&apos;[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m  8 |[39m [36mconst[39m [33mMarketplaceDiscovery[39m [33m=[39m require([32m&apos;../../../../mcp-local-setup/api/marketplace/discovery&apos;[39m)[33m;[39m
     [90m  9 |[39m
     [90m 10 |[39m [36mclass[39m [33mSDKCoreInterface[39m [36mextends[39m [33mEventEmitter[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (sdk/core/index.js:7:27)
      at Object.require (tests/sdk-core.test.js:6:17)

  ‚óè  process.exit called with &quot;1&quot;

    [0m [90m 66 |[39m     spinner[33m.[39mfail([32m&apos;Failed to check system health&apos;[39m)[33m;[39m
     [90m 67 |[39m     console[33m.[39merror(chalk[33m.[39mred([32m&apos;Error:&apos;[39m)[33m,[39m error[33m.[39mmessage)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 68 |[39m     process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 69 |[39m   }
     [90m 70 |[39m }
     [90m 71 |[39m[0m

      at exit (mcp-local-setup/cli/commands/health.js:68:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)
FAIL tests/unit/monitoring/logging/rotation.test.js
  ‚óè Test suite failed to run

    TypeError: Cannot assign to read only property &apos;createGzip&apos; of object &apos;#&lt;Object&gt;&apos;

      at node_modules/jest-mock/build/index.js:784:33
          at Set.forEach (&lt;anonymous&gt;)

FAIL mcp-local-setup/tests/unit/security/network-manager.test.js
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word &apos;public&apos;. (240:14)

    [0m [90m 238 |[39m         [90m// Group services by isolation requirements[39m
     [90m 239 |[39m         [36mconst[39m isolated [33m=[39m [36mnew[39m [33mSet[39m()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 240 |[39m         [36mconst[39m [36mpublic[39m [33m=[39m [36mnew[39m [33mSet[39m()[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 241 |[39m
     [90m 242 |[39m         [36mfor[39m ([36mconst[39m rule [36mof[39m [36mthis[39m[33m.[39mrules[33m.[39mvalues()) {
     [90m 243 |[39m             [36mif[39m (rule[33m.[39mallowed) {[0m

    [0m [90m  6 |[39m [36mconst[39m [33mRateLimiter[39m [33m=[39m require([32m&apos;./rate-limiter&apos;[39m)[33m;[39m
     [90m  7 |[39m [36mconst[39m [33mCORSManager[39m [33m=[39m require([32m&apos;./cors-manager&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m [36mconst[39m [33mServiceIsolation[39m [33m=[39m require([32m&apos;./service-isolation&apos;[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m  9 |[39m
     [90m 10 |[39m [36mclass[39m [33mNetworkManager[39m {
     [90m 11 |[39m     constructor() {[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)
      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)
      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)
      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)
      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)
      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)
      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)
      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)
      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)
      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)
      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)
      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)
      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)
      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)
      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)
      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (&lt;anonymous&gt;)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (&lt;anonymous&gt;)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (&lt;anonymous&gt;)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (&lt;anonymous&gt;)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)
      at Object.require (mcp-local-setup/tests/unit/security/network-manager.test.js:5:24)

FAIL tests/unit/monitoring/errors/error-boundaries.test.js
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax &apos;jsx&apos; isn&apos;t currently enabled (96:11):

    [0m [90m 94 |[39m       [36mif[39m ([33mFallbackComponent[39m) {
     [90m 95 |[39m         [36mreturn[39m (
    [31m[1m&gt;[22m[39m[90m 96 |[39m           [33m&lt;[39m[33mFallbackComponent[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 97 |[39m             error[33m=[39m{error}
     [90m 98 |[39m             errorInfo[33m=[39m{errorInfo}
     [90m 99 |[39m             resetErrorBoundary[33m=[39m{[36mthis[39m[33m.[39mresetErrorBoundary}[0m

    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the &apos;presets&apos; section of your Babel config to enable transformation.
    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the &apos;plugins&apos; section to enable parsing.

    If you already added the plugin for this syntax to your config, it&apos;s possible that your config isn&apos;t being loaded.
    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:
    	npx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js &lt;your build command&gt;
    See https://babeljs.io/docs/configuration#print-effective-configs for more info.

    [0m[31m[1m&gt;[22m[39m[90m 1 |[39m [36mconst[39m [33mErrorBoundaries[39m [33m=[39m require([32m&apos;../../../../monitoring/errors/error-boundaries&apos;[39m)[33m;[39m
     [90m   |[39m                                                                                  [31m[1m^[22m[39m
     [90m 2 |[39m [36mconst[39m [33mEventEmitter[39m [33m=[39m require([32m&apos;events&apos;[39m)[33m;[39m
     [90m 3 |[39m
     [90m 4 |[39m describe([32m&apos;ErrorBoundaries&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)
      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)
      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)
      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)
      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)
      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)
      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)
      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)
      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)
      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)
      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)
      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (&lt;anonymous&gt;)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (&lt;anonymous&gt;)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (&lt;anonymous&gt;)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (&lt;anonymous&gt;)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.&lt;anonymous&gt; (tests/unit/monitoring/errors/error-boundaries.test.js:1:82)

PASS tests/unit/monitoring/sentry-integration.test.js
FAIL mcp-local-setup/tests/e2e/installation-flow.e2e.test.js
  ‚óè Installation Flow E2E Tests ‚Ä∫ Initial Installation ‚Ä∫ should set correct file permissions

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 123 |[39m         [36mconst[39m stats [33m=[39m [36mawait[39m fs[33m.[39mstat(filePath)[33m;[39m
     [90m 124 |[39m         [36mconst[39m isExecutable [33m=[39m (stats[33m.[39mmode [33m&amp;[39m [35m0o111[39m) [33m!==[39m [35m0[39m[33m;[39m
    [31m[1m&gt;[22m[39m[90m 125 |[39m         expect(isExecutable)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 126 |[39m       }
     [90m 127 |[39m     })[33m;[39m
     [90m 128 |[39m[0m

      at Object.toBe (mcp-local-setup/tests/e2e/installation-flow.e2e.test.js:125:30)

PASS mcp-local-setup/tests/e2e/service-deployment.e2e.test.js
FAIL mcp-local-setup/tests/integration/security.integration.test.js
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word &apos;public&apos;. (240:14)

    [0m [90m 238 |[39m         [90m// Group services by isolation requirements[39m
     [90m 239 |[39m         [36mconst[39m isolated [33m=[39m [36mnew[39m [33mSet[39m()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 240 |[39m         [36mconst[39m [36mpublic[39m [33m=[39m [36mnew[39m [33mSet[39m()[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 241 |[39m
     [90m 242 |[39m         [36mfor[39m ([36mconst[39m rule [36mof[39m [36mthis[39m[33m.[39mrules[33m.[39mvalues()) {
     [90m 243 |[39m             [36mif[39m (rule[33m.[39mallowed) {[0m

    [0m [90m  6 |[39m [36mconst[39m [33mRateLimiter[39m [33m=[39m require([32m&apos;./rate-limiter&apos;[39m)[33m;[39m
     [90m  7 |[39m [36mconst[39m [33mCORSManager[39m [33m=[39m require([32m&apos;./cors-manager&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m [36mconst[39m [33mServiceIsolation[39m [33m=[39m require([32m&apos;./service-isolation&apos;[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m  9 |[39m
     [90m 10 |[39m [36mclass[39m [33mNetworkManager[39m {
     [90m 11 |[39m     constructor() {[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)
      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)
      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)
      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)
      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)
      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)
      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)
      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)
      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)
      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)
      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)
      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)
      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)
      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)
      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)
      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (&lt;anonymous&gt;)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (&lt;anonymous&gt;)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (&lt;anonymous&gt;)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (&lt;anonymous&gt;)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)
      at Object.require (mcp-local-setup/security/index.js:8:24)
      at Object.require (mcp-local-setup/tests/integration/security.integration.test.js:6:32)

FAIL tests/integration/monitoring/error-tracking.test.js
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax &apos;jsx&apos; isn&apos;t currently enabled (96:11):

    [0m [90m 94 |[39m       [36mif[39m ([33mFallbackComponent[39m) {
     [90m 95 |[39m         [36mreturn[39m (
    [31m[1m&gt;[22m[39m[90m 96 |[39m           [33m&lt;[39m[33mFallbackComponent[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 97 |[39m             error[33m=[39m{error}
     [90m 98 |[39m             errorInfo[33m=[39m{errorInfo}
     [90m 99 |[39m             resetErrorBoundary[33m=[39m{[36mthis[39m[33m.[39mresetErrorBoundary}[0m

    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the &apos;presets&apos; section of your Babel config to enable transformation.
    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the &apos;plugins&apos; section to enable parsing.

    If you already added the plugin for this syntax to your config, it&apos;s possible that your config isn&apos;t being loaded.
    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:
    	npx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js &lt;your build command&gt;
    See https://babeljs.io/docs/configuration#print-effective-configs for more info.

    [0m [90m 1 |[39m [36mconst[39m [33mSentryIntegration[39m [33m=[39m require([32m&apos;../../../monitoring/errors/sentry-integration&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 2 |[39m [36mconst[39m [33mErrorBoundaries[39m [33m=[39m require([32m&apos;../../../monitoring/errors/error-boundaries&apos;[39m)[33m;[39m
     [90m   |[39m                         [31m[1m^[22m[39m
     [90m 3 |[39m [36mconst[39m [33mAlertRouter[39m [33m=[39m require([32m&apos;../../../monitoring/errors/alert-router&apos;[39m)[33m;[39m
     [90m 4 |[39m [36mconst[39m [33mErrorTracker[39m [33m=[39m require([32m&apos;../../../monitoring/errors/error-tracker&apos;[39m)[33m;[39m
     [90m 5 |[39m [36mconst[39m [33mLogger[39m [33m=[39m require([32m&apos;../../../monitoring/logging/logger&apos;[39m)[33m;[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)
      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)
      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)
      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)
      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)
      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)
      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)
      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)
      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)
      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)
      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)
      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (&lt;anonymous&gt;)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (&lt;anonymous&gt;)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (&lt;anonymous&gt;)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (&lt;anonymous&gt;)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (tests/integration/monitoring/error-tracking.test.js:2:25)

  ‚óè  process.exit called with &quot;1&quot;

    [0m [90m 66 |[39m     spinner[33m.[39mfail([32m&apos;Failed to check system health&apos;[39m)[33m;[39m
     [90m 67 |[39m     console[33m.[39merror(chalk[33m.[39mred([32m&apos;Error:&apos;[39m)[33m,[39m error[33m.[39mmessage)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 68 |[39m     process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 69 |[39m   }
     [90m 70 |[39m }
     [90m 71 |[39m[0m

      at exit (mcp-local-setup/cli/commands/health.js:68:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)
PASS tests/unit/security/token-refresh.test.js
  ‚óè Console

    console.error
      Auto-refresh middleware error: Error: Test error
          at /home/jenner/code/mcps/tests/unit/security/token-refresh.test.js:308:15
          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:397:39
          at /home/jenner/code/mcps/node_modules/jest-mock/build/index.js:404:13
          at mockConstructor (/home/jenner/code/mcps/node_modules/jest-mock/build/index.js:148:19)
          at getTokenId (/home/jenner/code/mcps/security/api-auth/token-refresh.js:309:25)
          at Object.middleware (/home/jenner/code/mcps/tests/unit/security/token-refresh.test.js:321:13)
          at Promise.then.completed (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (&lt;anonymous&gt;)
          at callAsyncCircusFn (/home/jenner/code/mcps/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jenner/code/mcps/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jenner/code/mcps/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jenner/code/mcps/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jenner/code/mcps/node_modules/jest-runner/build/testWorker.js:106:12)

    [0m [90m 338 |[39m         next()[33m;[39m
     [90m 339 |[39m       } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 340 |[39m         console[33m.[39merror([32m&apos;Auto-refresh middleware error:&apos;[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 341 |[39m         next()[33m;[39m [90m// Don&apos;t block on errors[39m
     [90m 342 |[39m       }
     [90m 343 |[39m     }[33m;[39m[0m

      at error (security/api-auth/token-refresh.js:340:17)
      at Object.middleware (tests/unit/security/token-refresh.test.js:321:13)

  ‚óè  process.exit called with &quot;1&quot;

    [0m [90m 66 |[39m     spinner[33m.[39mfail([32m&apos;Failed to check system health&apos;[39m)[33m;[39m
     [90m 67 |[39m     console[33m.[39merror(chalk[33m.[39mred([32m&apos;Error:&apos;[39m)[33m,[39m error[33m.[39mmessage)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 68 |[39m     process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 69 |[39m   }
     [90m 70 |[39m }
     [90m 71 |[39m[0m

      at exit (mcp-local-setup/cli/commands/health.js:68:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)
FAIL mcp-local-setup/tests/integration/update.integration.test.js
  ‚óè Update Mechanism Integration Tests ‚Ä∫ Platform Self-Update ‚Ä∫ should check for platform updates

    Failed to check for updates: Invalid version. Must be a string. Got type &quot;object&quot;.

    [0m [90m 101 |[39m             [36mreturn[39m applicableUpdates[33m;[39m
     [90m 102 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 103 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check for updates: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m         }
     [90m 105 |[39m     }
     [90m 106 |[39m[0m

      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:38:29)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Platform Self-Update ‚Ä∫ should check beta channel updates

    Failed to check for updates: Invalid version. Must be a string. Got type &quot;object&quot;.

    [0m [90m 101 |[39m             [36mreturn[39m applicableUpdates[33m;[39m
     [90m 102 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 103 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check for updates: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m         }
     [90m 105 |[39m     }
     [90m 106 |[39m[0m

      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:57:29)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Service Updates ‚Ä∫ should check for service updates

    Failed to check service updates: Cannot read properties of undefined (reading &apos;echo&apos;)

    [0m [90m 64 |[39m             [36mreturn[39m updates[33m;[39m
     [90m 65 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 66 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check service updates: ${error.message}`[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 67 |[39m         }
     [90m 68 |[39m     }
     [90m 69 |[39m[0m

      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:137:36)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Service Updates ‚Ä∫ should handle dependency resolution

    Failed to check service updates: Cannot read properties of undefined (reading &apos;echo&apos;)

    [0m [90m 64 |[39m             [36mreturn[39m updates[33m;[39m
     [90m 65 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 66 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check service updates: ${error.message}`[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 67 |[39m         }
     [90m 68 |[39m     }
     [90m 69 |[39m[0m

      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:161:29)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Service Updates ‚Ä∫ should detect breaking changes

    Failed to check service updates: Cannot read properties of undefined (reading &apos;echo&apos;)

    [0m [90m 64 |[39m             [36mreturn[39m updates[33m;[39m
     [90m 65 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 66 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check service updates: ${error.message}`[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 67 |[39m         }
     [90m 68 |[39m     }
     [90m 69 |[39m[0m

      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:172:29)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Rollback Functionality ‚Ä∫ should fail rollback to incompatible version

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;Incompatible version&quot;
    Received message:   &quot;No backup found for version 0.1.0&quot;

        [0m [90m 266 |[39m             [36mconst[39m backupPath [33m=[39m path[33m.[39mjoin([36mthis[39m[33m.[39mupdateDir[33m,[39m [32m&apos;backups&apos;[39m[33m,[39m [32m`backup-${version}.tar.gz`[39m)[33m;[39m
         [90m 267 |[39m             [36mif[39m ([33m![39m[36mawait[39m [36mthis[39m[33m.[39mfileExists(backupPath)) {
        [31m[1m&gt;[22m[39m[90m 268 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`No backup found for version ${version}`[39m)[33m;[39m
         [90m     |[39m                       [31m[1m^[22m[39m
         [90m 269 |[39m             }
         [90m 270 |[39m
         [90m 271 |[39m             [90m// Check compatibility unless forced[39m[0m

      at UpdateManager.rollback (mcp-local-setup/scripts/update-manager.js:268:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:241:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:242:26)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Update Notifications ‚Ä∫ should get current update status

    expect(received).toBeTruthy()

    Received: undefined

    [0m [90m 249 |[39m             
     [90m 250 |[39m             [36mif[39m (status) {
    [31m[1m&gt;[22m[39m[90m 251 |[39m                 expect(status[33m.[39mupdateId)[33m.[39mtoBeTruthy()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 252 |[39m                 expect(status[33m.[39mstatus)[33m.[39mtoMatch([35m/downloading|ready|applying|complete|failed/[39m)[33m;[39m
     [90m 253 |[39m                 expect(status[33m.[39mprogress)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m 254 |[39m                 expect(status[33m.[39mprogress)[33m.[39mtoBeLessThanOrEqual([35m100[39m)[33m;[39m[0m

      at Object.toBeTruthy (mcp-local-setup/tests/integration/update.integration.test.js:251:41)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should prevent downgrade without force flag

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;Downgrade not allowed&quot;
    Received message:   &quot;metadata is not defined&quot;

        [0m [90m 244 |[39m                 installedAt[33m:[39m [36mnew[39m [33mDate[39m()[33m,[39m
         [90m 245 |[39m                 installedBy[33m:[39m [32m&apos;system&apos;[39m[33m,[39m
        [31m[1m&gt;[22m[39m[90m 246 |[39m                 previousVersion[33m:[39m metadata[33m.[39mcurrentVersion[33m,[39m
         [90m     |[39m                                  [31m[1m^[22m[39m
         [90m 247 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m
         [90m 248 |[39m                 notes[33m:[39m error[33m.[39mmessage
         [90m 249 |[39m             })[33m;[39m[0m

      at UpdateManager.metadata [as applyUpdate] (mcp-local-setup/scripts/update-manager.js:246:34)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:336:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:337:26)

  ‚óè  process.exit called with &quot;1&quot;

    [0m [90m 66 |[39m     spinner[33m.[39mfail([32m&apos;Failed to check system health&apos;[39m)[33m;[39m
     [90m 67 |[39m     console[33m.[39merror(chalk[33m.[39mred([32m&apos;Error:&apos;[39m)[33m,[39m error[33m.[39mmessage)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 68 |[39m     process[33m.[39mexit([35m1[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 69 |[39m   }
     [90m 70 |[39m }
     [90m 71 |[39m[0m

      at exit (mcp-local-setup/cli/commands/health.js:68:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/cli-commands-health.unit.test.js:112:7)
FAIL mcp-local-setup/tests/unit/cli-commands-health.unit.test.js
  ‚óè Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)

FAIL mcp-local-setup/tests/unit/security/auth-manager.test.js
  ‚óè AuthManager ‚Ä∫ rotateToken ‚Ä∫ should rotate valid token

    Bad &quot;options.expiresIn&quot; option the payload already has an &quot;exp&quot; property.

    [0m [90m 218 |[39m [90m     */[39m
     [90m 219 |[39m     generateJWT(payload) {
    [31m[1m&gt;[22m[39m[90m 220 |[39m         [36mreturn[39m jwt[33m.[39msign(payload[33m,[39m [36mthis[39m[33m.[39mjwtSecret[33m,[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 221 |[39m             expiresIn[33m:[39m [32m&apos;1h&apos;[39m
     [90m 222 |[39m         })[33m;[39m
     [90m 223 |[39m     }[0m

      at Object.&lt;anonymous&gt;.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)
      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)
      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/security/auth-manager.test.js:122:29)

  ‚óè AuthManager ‚Ä∫ rotateToken ‚Ä∫ should keep old token valid during grace period

    Bad &quot;options.expiresIn&quot; option the payload already has an &quot;exp&quot; property.

    [0m [90m 218 |[39m [90m     */[39m
     [90m 219 |[39m     generateJWT(payload) {
    [31m[1m&gt;[22m[39m[90m 220 |[39m         [36mreturn[39m jwt[33m.[39msign(payload[33m,[39m [36mthis[39m[33m.[39mjwtSecret[33m,[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 221 |[39m             expiresIn[33m:[39m [32m&apos;1h&apos;[39m
     [90m 222 |[39m         })[33m;[39m
     [90m 223 |[39m     }[0m

      at Object.&lt;anonymous&gt;.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)
      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)
      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/security/auth-manager.test.js:131:29)

PASS tests/health-monitor.test.js
PASS mcp-local-setup/tests/integration/health-check.integration.test.js
Error response from daemon: No such image: test-node:latest
Error response from daemon: No such image: test-python:latest
Error response from daemon: No such image: test-go:latest
FAIL tests/integration/docker/build-validation.test.js (5.181 s)
  ‚óè Console

    console.log
      Python Dockerfile validation errors: [
        &apos;Line 8: Clean apt cache after install&apos;,
        &apos;Line 47: Clean apt cache after install&apos;
      ]

      at Object.log (tests/integration/docker/build-validation.test.js:97:17)

  ‚óè Docker Build Validation ‚Ä∫ Dockerfile Syntax Validation ‚Ä∫ should validate Python Dockerfile

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m  98 |[39m       }
     [90m  99 |[39m       
    [31m[1m&gt;[22m[39m[90m 100 |[39m       expect(result[33m.[39mvalid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 101 |[39m     })[33m;[39m
     [90m 102 |[39m
     [90m 103 |[39m     it([32m&apos;should validate Go Dockerfile&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBe (tests/integration/docker/build-validation.test.js:100:28)

  ‚óè Docker Build Validation ‚Ä∫ Build Configuration ‚Ä∫ should use build arguments for flexibility

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 206 |[39m         [36mconst[39m hasArgs [33m=[39m content[33m.[39mincludes([32m&apos;ARG&apos;[39m)[33m;[39m
     [90m 207 |[39m         
    [31m[1m&gt;[22m[39m[90m 208 |[39m         expect(hasArgs)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 209 |[39m       }
     [90m 210 |[39m     })[33m;[39m
     [90m 211 |[39m[0m

      at Object.toBe (tests/integration/docker/build-validation.test.js:208:25)

  ‚óè Docker Build Validation ‚Ä∫ Build Configuration ‚Ä∫ should have proper labels

    expect(received).not.toBeNull()

    Received: null

    [0m [90m 228 |[39m         [90m// Check for any LABEL instruction (more flexible)[39m
     [90m 229 |[39m         [36mconst[39m hasLabels [33m=[39m content[33m.[39mmatch([35m/LABEL\s+\w+=/[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 230 |[39m         expect(hasLabels)[33m.[39mnot[33m.[39mtoBeNull()[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 231 |[39m       }
     [90m 232 |[39m     })[33m;[39m
     [90m 233 |[39m   })[33m;[39m[0m

      at Object.toBeNull (tests/integration/docker/build-validation.test.js:230:31)

  ‚óè Docker Build Validation ‚Ä∫ Docker Build Tests (requires Docker) ‚Ä∫ should build Node.js image successfully

    expect(received).not.toThrow()

    Error name:    &quot;Error&quot;
    Error message: &quot;Command failed: docker build -f /home/jenner/code/mcps/docker/production/node.Dockerfile --label test=true -t test-node:latest /home/jenner/code/mcps/docker/production&quot;

        [0m [90m 253 |[39m       
         [90m 254 |[39m       expect(() [33m=&gt;[39m {
        [31m[1m&gt;[22m[39m[90m 255 |[39m         execSync(buildCommand[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
         [90m     |[39m         [31m[1m^[22m[39m
         [90m 256 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 257 |[39m     })[33m;[39m
         [90m 258 |[39m[0m

      at execSync (tests/integration/docker/build-validation.test.js:255:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)

  ‚óè Docker Build Validation ‚Ä∫ Docker Build Tests (requires Docker) ‚Ä∫ should build Python image successfully

    expect(received).not.toThrow()

    Error name:    &quot;Error&quot;
    Error message: &quot;Command failed: docker build -f /home/jenner/code/mcps/docker/production/python.Dockerfile --label test=true -t test-python:latest /home/jenner/code/mcps/docker/production&quot;

        [0m [90m 261 |[39m       
         [90m 262 |[39m       expect(() [33m=&gt;[39m {
        [31m[1m&gt;[22m[39m[90m 263 |[39m         execSync(buildCommand[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
         [90m     |[39m         [31m[1m^[22m[39m
         [90m 264 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 265 |[39m     })[33m;[39m
         [90m 266 |[39m[0m

      at execSync (tests/integration/docker/build-validation.test.js:263:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)

  ‚óè Docker Build Validation ‚Ä∫ Docker Build Tests (requires Docker) ‚Ä∫ should build Go image successfully

    expect(received).not.toThrow()

    Error name:    &quot;Error&quot;
    Error message: &quot;Command failed: docker build -f /home/jenner/code/mcps/docker/production/go.Dockerfile --label test=true -t test-go:latest /home/jenner/code/mcps/docker/production&quot;

        [0m [90m 269 |[39m       
         [90m 270 |[39m       expect(() [33m=&gt;[39m {
        [31m[1m&gt;[22m[39m[90m 271 |[39m         execSync(buildCommand[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
         [90m     |[39m         [31m[1m^[22m[39m
         [90m 272 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 273 |[39m     })[33m;[39m
         [90m 274 |[39m[0m

      at execSync (tests/integration/docker/build-validation.test.js:271:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)

PASS mcp-local-setup/tests/unit/security/tls-manager.test.js (8.35 s)
  ‚óè Console

    console.warn
      Let&apos;s Encrypt requires production environment. Generating self-signed certificate instead.

    [0m [90m 85 |[39m         [90m// Check if we&apos;re in production environment[39m
     [90m 86 |[39m         [36mif[39m (process[33m.[39menv[33m.[39m[33mNODE_ENV[39m [33m!==[39m [32m&apos;production&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 87 |[39m             console[33m.[39mwarn([32m&apos;Let\&apos;s Encrypt requires production environment. Generating self-signed certificate instead.&apos;[39m)[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 88 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mgenerateSelfSigned(domain[33m,[39m options)[33m;[39m
     [90m 89 |[39m         }
     [90m 90 |[39m[0m

      at TLSManager.warn [as generateLetsEncrypt] (mcp-local-setup/security/tls/tls-manager.js:87:21)
      at TLSManager.generateLetsEncrypt (mcp-local-setup/security/tls/tls-manager.js:46:25)
      at Object.generateCertificate (mcp-local-setup/tests/unit/security/tls-manager.test.js:51:45)

FAIL tests/unit/monitoring/alert-router.test.js (11.546 s)
  ‚óè Console

    console.log
      [ALERT] info: Test Alert {
        id: &apos;alert-1753397522029-xji2bvge6&apos;,
        timestamp: &apos;2025-07-24T22:52:02.029Z&apos;,
        severity: &apos;info&apos;,
        title: &apos;Test Alert&apos;,
        description: &apos;&apos;,
        source: &apos;unknown&apos;,
        tags: {},
        metadata: {},
        dedupKey: &apos;::Test Alert:&apos;
      }

      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)

    console.log
      [ALERT] error: Duplicate Alert {
        id: &apos;alert-1753397522060-jtwd2vvus&apos;,
        timestamp: &apos;2025-07-24T22:52:02.060Z&apos;,
        severity: &apos;error&apos;,
        title: &apos;Duplicate Alert&apos;,
        description: &apos;&apos;,
        source: &apos;test&apos;,
        tags: {},
        metadata: {},
        dedupKey: &apos;test:error:duplicate&apos;
      }

      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)

    console.log
      [ALERT] warn: 1 alerts aggregated {
        id: &apos;agg-1753397523069&apos;,
        timestamp: &apos;2025-07-24T22:52:03.069Z&apos;,
        severity: &apos;warn&apos;,
        title: &apos;1 alerts aggregated&apos;,
        description: &apos;1 similar alerts in 1000ms window&apos;,
        source: &apos;alert-aggregator&apos;,
        tags: {},
        metadata: {
          firstSeen: &apos;2025-07-24T22:52:02.068Z&apos;,
          lastSeen: &apos;2025-07-24T22:52:02.068Z&apos;,
          count: 1
        },
        dedupKey: &apos;alert-aggregator:warn:1 alerts aggregated:&apos;,
        alerts: [
          {
            id: &apos;alert-1753397522067-d326bh8if&apos;,
            timestamp: &apos;2025-07-24T22:52:02.067Z&apos;,
            severity: &apos;warn&apos;,
            title: &apos;Test Alert&apos;,
            description: &apos;&apos;,
            source: &apos;test&apos;,
            tags: {},
            metadata: {},
            dedupKey: &apos;test:warn:Test Alert:&apos;
          }
        ]
      }

      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)

  ‚óè AlertRouter ‚Ä∫ alert actions ‚Ä∫ should handle action errors gracefully

    thrown: &quot;Exceeded timeout of 10000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;

    [0m [90m 290 |[39m     })[33m;[39m
     [90m 291 |[39m
    [31m[1m&gt;[22m[39m[90m 292 |[39m     it([32m&apos;should handle action errors gracefully&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 293 |[39m       [36mconst[39m mockSend [33m=[39m jest[33m.[39mfn()[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m&apos;Send failed&apos;[39m))[33m;[39m
     [90m 294 |[39m       
     [90m 295 |[39m       alertRouter[33m.[39maddChannel([32m&apos;failing&apos;[39m[33m,[39m { send[33m:[39m mockSend })[33m;[39m[0m

      at it (tests/unit/monitoring/alert-router.test.js:292:5)
      at describe (tests/unit/monitoring/alert-router.test.js:224:3)
      at Object.describe (tests/unit/monitoring/alert-router.test.js:3:1)

FAIL mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js (15.451 s)
  ‚óè Console

    console.log
      Building Docker image for api-service

      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)

    console.log
      Triggering GitHub Actions deployment for api-service to production

      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)

    console.log
      Triggering GitHub Actions deployment for web to production

      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)

    console.log
      Starting rollback for deployment dep-web-1753397525053, orchestrator: kubernetes, orchestratorDeploymentId: deploy-1753397525053-12tc8uvln

      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:105:13)

    console.log
      No previous deployment found, created fake deployment for testing

      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:125:17)

    console.log
      Rolling back web from v1 to v0

      at GitHubAdapter.log [as rollback] (integrations/ci/platforms/GitHubAdapter.js:32:13)

    console.log
      Rolling back orchestration deployment deploy-1753397525053-12tc8uvln

      at CICDIntegration.log [as rollbackDeployment] (integrations/ci/CICDIntegration.js:138:19)

    console.log
      Running integration tests for api-service

      at TestRunner.log (integrations/ci/utils/TestRunner.js:12:13)

    console.log
      Building Docker image for helm-app

      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)

    console.log
      Building Docker image for swarm-service

      at DockerBuilder.log [as build] (integrations/ci/utils/DockerBuilder.js:21:13)

    console.log
      Triggering GitHub Actions deployment for swarm-service to production

      at GitHubAdapter.log [as deploy] (integrations/ci/platforms/GitHubAdapter.js:9:13)

  ‚óè CI/CD and Orchestration Integration ‚Ä∫ Rollback works across CI/CD and orchestration

    expect(received).toBe(expected) // Object.is equality

    Expected: &quot;rolled-back&quot;
    Received: &quot;Running&quot;

    [0m [90m  97 |[39m     [90m// Then orchestration should also rollback[39m
     [90m  98 |[39m     [36mconst[39m k8sStatus [33m=[39m [36mawait[39m k8s[33m.[39mgetDeploymentStatus(deployment[33m.[39mdeploymentId)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  99 |[39m     expect(k8sStatus[33m.[39mstatus)[33m.[39mtoBe([32m&apos;rolled-back&apos;[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 100 |[39m     expect(rollbackResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 101 |[39m   })[33m;[39m
     [90m 102 |[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:99:30)

  ‚óè CI/CD and Orchestration Integration ‚Ä∫ CI/CD test results influence orchestration deployment

    expect(received).toContain(expected) // indexOf

    Expected substring: &quot;Tests must pass before deployment&quot;
    Received string:    &quot;fail is not defined&quot;

    [0m [90m 115 |[39m         fail([32m&apos;Deployment should have been prevented&apos;[39m)[33m;[39m
     [90m 116 |[39m       } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 117 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m&apos;Tests must pass before deployment&apos;[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 118 |[39m       }
     [90m 119 |[39m     }
     [90m 120 |[39m   })[33m;[39m[0m

      at Object.toContain (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:117:31)

  ‚óè CI/CD and Orchestration Integration ‚Ä∫ Orchestration scaling triggers CI/CD metrics update

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 3

    [0m [90m 132 |[39m     [90m// Then CI/CD should reflect the scaling[39m
     [90m 133 |[39m     [36mconst[39m metrics [33m=[39m [36mawait[39m cicd[33m.[39mgetDeploymentStatus(deployment[33m.[39mdeploymentId)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 134 |[39m     expect(metrics[33m.[39mdetails[33m.[39mreplicas)[33m.[39mtoBe([35m5[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 135 |[39m     expect(metrics[33m.[39mdetails[33m.[39mscalingEvents)[33m.[39mtoContainEqual(
     [90m 136 |[39m       expect[33m.[39mobjectContaining({
     [90m 137 |[39m         type[33m:[39m [32m&apos;manual-scale&apos;[39m[33m,[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:134:38)


&lt;--- Last few GCs ---&gt;

[3738405:0x1bc12000]    14302 ms: Mark-Compact 4043.8 (4130.3) -&gt; 4041.0 (4143.8) MB, pooled: 0 MB, 1226.94 / 0.00 ms  (average mu = 0.304, current mu = 0.125) allocation failure; scavenge might not succeed
[3738405:0x1bc12000]    16698 ms: Mark-Compact 4056.7 (4143.8) -&gt; 4051.5 (4154.3) MB, pooled: 0 MB, 2393.00 / 0.00 ms  (average mu = 0.115, current mu = 0.001) allocation failure; scavenge might not succeed


&lt;--- JS stacktrace ---&gt;

FATAL ERROR: Reached heap limit Allocation failed - JavaScript heap out of memory
----- Native stack trace -----


  ‚óè  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log &quot;[ALERT] error: Test Error {
      id: &apos;alert-1753397523171-ffj5aqj9g&apos;,
      timestamp: &apos;2025-07-24T22:52:03.171Z&apos;,
      severity: &apos;error&apos;,
      title: &apos;Test Error&apos;,
      description: &apos;&apos;,
      source: &apos;unknown&apos;,
      tags: {},
      metadata: {},
      dedupKey: &apos;:error:Test Error:&apos;
    }&quot;.

    [0m [90m 49 |[39m     [36mthis[39m[33m.[39maddChannel([32m&apos;console&apos;[39m[33m,[39m {
     [90m 50 |[39m       send[33m:[39m [36masync[39m (alert) [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 51 |[39m         console[33m.[39mlog([32m`[ALERT] ${alert.severity}: ${alert.title}`[39m[33m,[39m alert)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 52 |[39m         [36mreturn[39m { success[33m:[39m [36mtrue[39m }[33m;[39m
     [90m 53 |[39m       }
     [90m 54 |[39m     })[33m;[39m[0m

      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)
      at Object.log [as send] (monitoring/errors/alert-router.js:51:17)
      at AlertRouter.send [as _sendAlert] (monitoring/errors/alert-router.js:460:38)
      at AlertRouter._sendAlert [as _executeAction] (monitoring/errors/alert-router.js:413:27)
      at AlertRouter._executeAction [as _executeRule] (monitoring/errors/alert-router.js:393:35)
      at AlertRouter.route (monitoring/errors/alert-router.js:219:24)
      at Object.&lt;anonymous&gt; (tests/unit/monitoring/alert-router.test.js:308:22)

FAIL mcp-local-setup/tests/unit/cli/publish.test.js
  ‚óè Test suite failed to run

    A jest worker process (pid=3738405) was terminated by another process: signal=SIGTERM, exitCode=null. Operating system logs may contain more information on why this occurred.

      at ChildProcessWorker._onExit (node_modules/jest-worker/build/workers/ChildProcessWorker.js:370:23)

FAIL mcp-local-setup/tests/unit/update/service-updater.unit.test.js (30.539 s)
  ‚óè Console

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:167:13)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:167:13)

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:178:13)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:178:13)

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at ServiceUpdater.updateService (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:109:17)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error (mcp-local-setup/scripts/service-updater.js:136:25)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error (mcp-local-setup/scripts/service-updater.js:136:25)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)

    console.error
      Rollback failed: ReferenceError: installed is not defined
          at ServiceUpdater.installed [as updateService] (/home/jenner/code/mcps/mcp-local-setup/scripts/service-updater.js:134:53)
          at Object.&lt;anonymous&gt; (/home/jenner/code/mcps/mcp-local-setup/tests/unit/update/service-updater.unit.test.js:247:13)

    [0m [90m 134 |[39m                 [36mawait[39m [36mthis[39m[33m.[39mrollbackService(service[33m,[39m installed[service][33m.[39mversion)[33m;[39m
     [90m 135 |[39m             } [36mcatch[39m (rollbackError) {
    [31m[1m&gt;[22m[39m[90m 136 |[39m                 console[33m.[39merror([32m&apos;Rollback failed:&apos;[39m[33m,[39m rollbackError)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 137 |[39m             }
     [90m 138 |[39m             [36mthrow[39m error[33m;[39m
     [90m 139 |[39m         }[0m

      at ServiceUpdater.error [as updateService] (mcp-local-setup/scripts/service-updater.js:136:25)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:247:13)

    console.log
      Rolling back filesystem to version 1.0.0

      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)

    console.log
      Rolling back filesystem to version 1.0.0

      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)

    console.log
      Rolling back filesystem to version 1.0.0

      at ServiceUpdater.log [as rollbackService] (mcp-local-setup/scripts/service-updater.js:582:17)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should update service successfully

    Service filesystem failed to start

    [0m [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
     [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {
    [31m[1m&gt;[22m[39m[90m 571 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} failed to start`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 572 |[39m             }
     [90m 573 |[39m         }
     [90m 574 |[39m         [0m

      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should allow incompatible update with force flag

    Service filesystem failed to start

    [0m [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
     [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {
    [31m[1m&gt;[22m[39m[90m 571 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} failed to start`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 572 |[39m             }
     [90m 573 |[39m         }
     [90m 574 |[39m         [0m

      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should update dependencies first

    Service dependency1 is not installed

    [0m [90m 76 |[39m             [36mconst[39m installed [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mgetInstalledServices()[33m;[39m
     [90m 77 |[39m             [36mif[39m ([33m![39minstalled[service]) {
    [31m[1m&gt;[22m[39m[90m 78 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} is not installed`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 79 |[39m             }
     [90m 80 |[39m
     [90m 81 |[39m             [90m// Get update info[39m[0m

      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:78:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should backup service before update

    Service filesystem failed to start

    [0m [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
     [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {
    [31m[1m&gt;[22m[39m[90m 571 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} failed to start`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 572 |[39m             }
     [90m 573 |[39m         }
     [90m 574 |[39m         [0m

      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should run migrations after update

    Service filesystem failed to start

    [0m [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
     [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {
    [31m[1m&gt;[22m[39m[90m 571 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} failed to start`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 572 |[39m             }
     [90m 573 |[39m         }
     [90m 574 |[39m         [0m

      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should rollback on failure

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;filesystem&quot;, &quot;1.0.0&quot;

    Number of calls: 0

    [0m [90m 249 |[39m             )[33m.[39mrejects[33m.[39mtoThrow([32m&apos;Start failed&apos;[39m)[33m;[39m
     [90m 250 |[39m
    [31m[1m&gt;[22m[39m[90m 251 |[39m             expect(rollbackSpy)[33m.[39mtoHaveBeenCalledWith([32m&apos;filesystem&apos;[39m[33m,[39m [32m&apos;1.0.0&apos;[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 252 |[39m         })[33m;[39m
     [90m 253 |[39m     })[33m;[39m
     [90m 254 |[39m[0m

      at Object.toHaveBeenCalledWith (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:251:33)

  ‚óè ServiceUpdater ‚Ä∫ verifyService ‚Ä∫ should verify Docker service is running

    expect(received).resolves.not.toThrow()

    Received promise rejected instead of resolved
    Rejected to value: [TypeError: Cannot read properties of undefined (reading &apos;type&apos;)]

    [0m [90m 344 |[39m             execSync[33m.[39mmockReturnValue([32m&apos;Up 5 seconds\n&apos;[39m)[33m;[39m
     [90m 345 |[39m
    [31m[1m&gt;[22m[39m[90m 346 |[39m             [36mawait[39m expect(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 347 |[39m                 serviceUpdater[33m.[39mverifyService([32m&apos;filesystem&apos;[39m[33m,[39m [32m&apos;1.1.0&apos;[39m)
     [90m 348 |[39m             )[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 349 |[39m         })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:346:19)

  ‚óè ServiceUpdater ‚Ä∫ verifyService ‚Ä∫ should throw if Docker service not running

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;Service filesystem failed to start&quot;
    Received message:   &quot;Cannot read properties of undefined (reading &apos;type&apos;)&quot;

        [0m [90m 565 |[39m         [36mconst[39m installed [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mgetInstalledServices()[33m;[39m
         [90m 566 |[39m         
        [31m[1m&gt;[22m[39m[90m 567 |[39m         [36mif[39m (installed[service][33m.[39mtype [33m===[39m [32m&apos;docker&apos;[39m) {
         [90m     |[39m                                [31m[1m^[22m[39m
         [90m 568 |[39m             [90m// Check Docker container is running[39m
         [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
         [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {[0m

      at ServiceUpdater.type [as verifyService] (mcp-local-setup/scripts/service-updater.js:567:32)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:354:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:356:23)

  ‚óè ServiceUpdater ‚Ä∫ rollbackService ‚Ä∫ should rollback to previous version

    TypeError: Cannot read properties of undefined (reading &apos;type&apos;)

    [0m [90m 431 |[39m         [36mconst[39m installed [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mgetInstalledServices()[33m;[39m
     [90m 432 |[39m         
    [31m[1m&gt;[22m[39m[90m 433 |[39m         [36mif[39m (installed[service][33m.[39mtype [33m===[39m [32m&apos;docker&apos;[39m) {
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 434 |[39m             execSync([32m`docker stop mcp-${service}`[39m[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
     [90m 435 |[39m         } [36melse[39m {
     [90m 436 |[39m             [90m// Stop local service (would need process management)[39m[0m

      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)
      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:366:13)

  ‚óè ServiceUpdater ‚Ä∫ rollbackService ‚Ä∫ should use most recent backup

    TypeError: Cannot read properties of undefined (reading &apos;type&apos;)

    [0m [90m 431 |[39m         [36mconst[39m installed [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mgetInstalledServices()[33m;[39m
     [90m 432 |[39m         
    [31m[1m&gt;[22m[39m[90m 433 |[39m         [36mif[39m (installed[service][33m.[39mtype [33m===[39m [32m&apos;docker&apos;[39m) {
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 434 |[39m             execSync([32m`docker stop mcp-${service}`[39m[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
     [90m 435 |[39m         } [36melse[39m {
     [90m 436 |[39m             [90m// Stop local service (would need process management)[39m[0m

      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)
      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:374:13)

  ‚óè ServiceUpdater ‚Ä∫ runMigrations ‚Ä∫ should run applicable migrations in order

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: &gt;= 1
    Received number of calls:    0

    [0m [90m 435 |[39m             [36mawait[39m serviceUpdater[33m.[39mrunMigrations([32m&apos;filesystem&apos;[39m[33m,[39m [32m&apos;1.0.0&apos;[39m[33m,[39m [32m&apos;1.2.0&apos;[39m)[33m;[39m
     [90m 436 |[39m
    [31m[1m&gt;[22m[39m[90m 437 |[39m             expect(migration1[33m.[39mup)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 438 |[39m             expect(migration2[33m.[39mup)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 439 |[39m         })[33m;[39m
     [90m 440 |[39m[0m

      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:437:35)

FAIL mcp-local-setup/tests/integration/service-lifecycle.integration.test.js (67.222 s)
  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Start ‚Ä∫ should start a service successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 44 |[39m       [90m// Start the service[39m
     [90m 45 |[39m       [36mconst[39m started [33m=[39m [36mawait[39m startService(testServiceName[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 46 |[39m       expect(started)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 47 |[39m
     [90m 48 |[39m       [90m// Mark for cleanup[39m
     [90m 49 |[39m       testResources[33m.[39mpush([32m`service:${testServiceName}`[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:46:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Start ‚Ä∫ should handle starting already running service

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 61 |[39m       [90m// Try to start again[39m
     [90m 62 |[39m       [36mconst[39m startedAgain [33m=[39m [36mawait[39m startService(testServiceName[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 63 |[39m       expect(startedAgain)[33m.[39mtoBe([36mtrue[39m)[33m;[39m [90m// Docker compose should handle this gracefully[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 64 |[39m     })[33m;[39m
     [90m 65 |[39m
     [90m 66 |[39m     it([32m&apos;should start multiple services in order&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:63:28)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Start ‚Ä∫ should start multiple services in order

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 71 |[39m         [36mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m
     [90m 72 |[39m         [36mconst[39m started [33m=[39m [36mawait[39m startService(service[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 73 |[39m         expect(started)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 74 |[39m         
     [90m 75 |[39m         startTimes[33m.[39mpush({ service[33m,[39m time[33m:[39m startTime })[33m;[39m
     [90m 76 |[39m         testResources[33m.[39mpush([32m`service:${service}`[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:73:25)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Start ‚Ä∫ should respect environment variables when starting

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 91 |[39m       })[33m;[39m
     [90m 92 |[39m       
    [31m[1m&gt;[22m[39m[90m 93 |[39m       expect(started)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 94 |[39m       testResources[33m.[39mpush([32m`service:${testServiceName}`[39m)[33m;[39m
     [90m 95 |[39m       
     [90m 96 |[39m       [36mdelete[39m process[33m.[39menv[33m.[39m[33mTEST_SERVICE_PORT[39m[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:93:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Stop ‚Ä∫ should stop a running service successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 106 |[39m       [90m// Stop the service[39m
     [90m 107 |[39m       [36mconst[39m stopped [33m=[39m [36mawait[39m stopService(testServiceName[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 108 |[39m       expect(stopped)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 109 |[39m
     [90m 110 |[39m       [90m// Verify service is stopped[39m
     [90m 111 |[39m       [36mawait[39m expect(waitForHealthy(testServiceName[33m,[39m [35m5000[39m))[33m.[39mresolves[33m.[39mtoBe([36mfalse[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:108:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Stop ‚Ä∫ should handle stopping already stopped service

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 115 |[39m       [90m// Try to stop a service that&apos;s not running[39m
     [90m 116 |[39m       [36mconst[39m stopped [33m=[39m [36mawait[39m stopService([32m&apos;non-existent-service&apos;[39m[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 117 |[39m       expect(stopped)[33m.[39mtoBe([36mtrue[39m)[33m;[39m [90m// Docker compose returns 0 even for non-existent services[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 118 |[39m     })[33m;[39m
     [90m 119 |[39m
     [90m 120 |[39m     it([32m&apos;should stop dependent services in correct order&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:117:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Stop ‚Ä∫ should stop dependent services in correct order

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 126 |[39m       [90m// Stop API first (which depends on database)[39m
     [90m 127 |[39m       [36mconst[39m apiStopped [33m=[39m [36mawait[39m stopService([32m&apos;api&apos;[39m[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 128 |[39m       expect(apiStopped)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 129 |[39m
     [90m 130 |[39m       [90m// Then stop database[39m
     [90m 131 |[39m       [36mconst[39m dbStopped [33m=[39m [36mawait[39m stopService([32m&apos;database&apos;[39m[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:128:26)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Restart ‚Ä∫ should restart a service successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 141 |[39m       
     [90m 142 |[39m       [36mconst[39m healthyBefore [33m=[39m [36mawait[39m waitForHealthy(testServiceName[33m,[39m [35m10000[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 143 |[39m       expect(healthyBefore)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 144 |[39m
     [90m 145 |[39m       [90m// Restart service[39m
     [90m 146 |[39m       [36mconst[39m restarted [33m=[39m [36mawait[39m [36mnew[39m [33mPromise[39m((resolve) [33m=&gt;[39m {[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:143:29)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Dependencies ‚Ä∫ should start dependencies automatically

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 195 |[39m       [90m// Start only the API service[39m
     [90m 196 |[39m       [36mconst[39m started [33m=[39m [36mawait[39m startService(apiService[33m.[39mname[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 197 |[39m       expect(started)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 198 |[39m       
     [90m 199 |[39m       testResources[33m.[39mpush([32m&apos;service:api-with-deps&apos;[39m[33m,[39m [32m&apos;service:database&apos;[39m[33m,[39m [32m&apos;service:cache&apos;[39m)[33m;[39m
     [90m 200 |[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:197:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Health Monitoring ‚Ä∫ should detect when service becomes unhealthy

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 228 |[39m       
     [90m 229 |[39m       [36mconst[39m initialHealth [33m=[39m [36mawait[39m waitForHealthy(testServiceName[33m,[39m [35m10000[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 230 |[39m       expect(initialHealth)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 231 |[39m
     [90m 232 |[39m       [90m// Simulate service becoming unhealthy[39m
     [90m 233 |[39m       [90m// (In a real scenario, you might trigger an error condition)[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:230:29)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Health Monitoring ‚Ä∫ should recover from temporary failures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 265 |[39m       [90m// Service should recover and become healthy again[39m
     [90m 266 |[39m       [36mconst[39m recovered [33m=[39m [36mawait[39m waitForHealthy(testServiceName[33m,[39m [35m30000[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 267 |[39m       expect(recovered)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 268 |[39m     })[33m;[39m
     [90m 269 |[39m   })[33m;[39m
     [90m 270 |[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:267:25)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Resource Cleanup ‚Ä∫ should remove orphaned containers

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 297 |[39m       })[33m;[39m
     [90m 298 |[39m       
    [31m[1m&gt;[22m[39m[90m 299 |[39m       expect(cleaned)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 300 |[39m     })[33m;[39m
     [90m 301 |[39m   })[33m;[39m
     [90m 302 |[39m })[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:299:23)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js
  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Complete developer workflow from IDE to production

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Collaborative development with multiple tools

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Progressive rollout with monitoring

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Multi-cloud deployment with unified management

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

  ‚óè Phase 5 End-to-End Integration ‚Ä∫ Debugging production issues with integrated tools

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/phase5-e2e.test.js:21:11)

FAIL tests/unit/config/settings.test.js
  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid port

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 122 |[39m       expect(() [33m=&gt;[39m {
     [90m 123 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 124 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 125 |[39m     })[33m;[39m
     [90m 126 |[39m
     [90m 127 |[39m     it([32m&apos;should fail validation with invalid log level&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toThrow (tests/unit/config/settings.test.js:124:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid log level

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 130 |[39m       expect(() [33m=&gt;[39m {
     [90m 131 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 132 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 133 |[39m     })[33m;[39m
     [90m 134 |[39m
     [90m 135 |[39m     it([32m&apos;should fail validation with invalid node environment&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toThrow (tests/unit/config/settings.test.js:132:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid node environment

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 138 |[39m       expect(() [33m=&gt;[39m {
     [90m 139 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 140 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 141 |[39m     })[33m;[39m
     [90m 142 |[39m
     [90m 143 |[39m     it([32m&apos;should fail validation with invalid API version format&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toThrow (tests/unit/config/settings.test.js:140:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid API version format

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 146 |[39m       expect(() [33m=&gt;[39m {
     [90m 147 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 148 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 149 |[39m     })[33m;[39m
     [90m 150 |[39m
     [90m 151 |[39m     it([32m&apos;should fail validation with invalid max request size format&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toThrow (tests/unit/config/settings.test.js:148:10)

  ‚óè Production Settings Configuration ‚Ä∫ Configuration Validation ‚Ä∫ should fail validation with invalid max request size format

    expect(received).toThrow()

    Received function did not throw

    [0m [90m 154 |[39m       expect(() [33m=&gt;[39m {
     [90m 155 |[39m         require([32m&apos;../../../config/production/settings&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 156 |[39m       })[33m.[39mtoThrow()[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 157 |[39m     })[33m;[39m
     [90m 158 |[39m   })[33m;[39m
     [90m 159 |[39m[0m

      at Object.toThrow (tests/unit/config/settings.test.js:156:10)

  ‚óè Production Settings Configuration ‚Ä∫ Path Configuration ‚Ä∫ should have correct absolute paths

    expect(received).toContain(expected) // indexOf

    Expected substring: &quot;config/production/../..&quot;
    Received string:    &quot;/home/jenner/code/mcps&quot;

    [0m [90m 164 |[39m       expect(path[33m.[39misAbsolute(settings[33m.[39mpaths[33m.[39mroot))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 165 |[39m       expect(path[33m.[39misAbsolute(settings[33m.[39mpaths[33m.[39m[36mpublic[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 166 |[39m       expect(settings[33m.[39mpaths[33m.[39mroot)[33m.[39mtoContain([32m&apos;config/production/../..&apos;[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 167 |[39m     })[33m;[39m
     [90m 168 |[39m
     [90m 169 |[39m     it([32m&apos;should allow overriding paths via environment variables&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toContain (tests/unit/config/settings.test.js:166:35)

FAIL tests/unit/config/features.test.js
  ‚óè Production Feature Flags Configuration ‚Ä∫ Rollout Percentage Logic ‚Ä∫ should roughly match rollout percentage across many users

    expect(received).toBeGreaterThan(expected)

    Expected: &gt; 10
    Received:   2.8000000000000003

    [0m [90m 350 |[39m       
     [90m 351 |[39m       [90m// Allow 15% variance due to simple hash function and sequential IDs[39m
    [31m[1m&gt;[22m[39m[90m 352 |[39m       expect(actualPercentage)[33m.[39mtoBeGreaterThan(rolloutPercentage [33m-[39m [35m15[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 353 |[39m       expect(actualPercentage)[33m.[39mtoBeLessThan(rolloutPercentage [33m+[39m [35m15[39m)[33m;[39m
     [90m 354 |[39m     })[33m;[39m
     [90m 355 |[39m[0m

      at Object.toBeGreaterThan (tests/unit/config/features.test.js:352:32)

FAIL mcp-local-setup/tests/unit/backup/data-manager.unit.test.js
  ‚óè DataManager Unit Tests ‚Ä∫ exportServiceData ‚Ä∫ should export service data volumes

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: &gt;= 1
    Received number of calls:    0

    [0m [90m 130 |[39m             expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 131 |[39m             expect(result[33m.[39mvolumes[[32m&apos;test-service&apos;[39m])[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 132 |[39m             expect(mockFs[33m.[39mmkdir)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 133 |[39m         })[33m;[39m
     [90m 134 |[39m
     [90m 135 |[39m         it([32m&apos;should handle export failures&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:132:34)

  ‚óè DataManager Unit Tests ‚Ä∫ exportServiceData ‚Ä∫ should handle export failures

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 143 |[39m             [36mconst[39m result [33m=[39m [36mawait[39m dataManager[33m.[39mexportServiceData(services[33m,[39m exportPath)[33m;[39m
     [90m 144 |[39m
    [31m[1m&gt;[22m[39m[90m 145 |[39m             expect(result[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 146 |[39m             expect(result[33m.[39merrors)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m 147 |[39m             expect(result[33m.[39merrors[[35m0[39m][33m.[39mservice)[33m.[39mtoBe([32m&apos;failing-service&apos;[39m)[33m;[39m
     [90m 148 |[39m         })[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:145:36)

  ‚óè DataManager Unit Tests ‚Ä∫ helper methods ‚Ä∫ should walk directory recursively

    expect(received).toContain(expected) // indexOf

    Expected value: &quot;/test/dir/subdir/file2.txt&quot;
    Received array: [&quot;/test/dir/file1.txt&quot;]

    [0m [90m 447 |[39m
     [90m 448 |[39m             expect(files)[33m.[39mtoContain([32m&apos;/test/dir/file1.txt&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 449 |[39m             expect(files)[33m.[39mtoContain([32m&apos;/test/dir/subdir/file2.txt&apos;[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 450 |[39m         })[33m;[39m
     [90m 451 |[39m
     [90m 452 |[39m         it([32m&apos;should match file patterns&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toContain (mcp-local-setup/tests/unit/backup/data-manager.unit.test.js:449:27)

FAIL tests/integration/security/rate-limiting.test.js
  ‚óè Rate Limiting Integration Tests ‚Ä∫ IP-based Security Features ‚Ä∫ should detect and handle suspicious IPs

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 229 |[39m
     [90m 230 |[39m       [90m// Should be marked as suspicious[39m
    [31m[1m&gt;[22m[39m[90m 231 |[39m       expect(ipLimiter[33m.[39misSuspicious(suspiciousIP))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                                    [31m[1m^[22m[39m
     [90m 232 |[39m
     [90m 233 |[39m       [90m// Should get reduced limits[39m
     [90m 234 |[39m       [36mconst[39m limit [33m=[39m ipLimiter[33m.[39mgetRateLimitForIP(suspiciousIP[33m,[39m [32m&apos;/api/data&apos;[39m)[33m;[39m[0m

      at Object.toBe (tests/integration/security/rate-limiting.test.js:231:52)

  ‚óè Rate Limiting Integration Tests ‚Ä∫ Rate Limit Headers and Responses ‚Ä∫ should set appropriate rate limit headers

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;X-RateLimit-Limit&quot;, 100
    Received
           1: &quot;X-RateLimit-Limit&quot;, undefined
           2: &quot;X-RateLimit-Remaining&quot;, 99
           3: &quot;X-RateLimit-Reset&quot;, &quot;2025-07-24T23:52:02.063Z&quot;

    Number of calls: 4

    [0m [90m 281 |[39m
     [90m 282 |[39m       [90m// Check user rate limit headers[39m
    [31m[1m&gt;[22m[39m[90m 283 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Limit&apos;[39m[33m,[39m [35m100[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 284 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Remaining&apos;[39m[33m,[39m [35m99[39m)[33m;[39m
     [90m 285 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Tier&apos;[39m[33m,[39m [32m&apos;free&apos;[39m)[33m;[39m
     [90m 286 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:283:29)

  ‚óè Rate Limiting Integration Tests ‚Ä∫ Advanced Rate Limiting Scenarios ‚Ä∫ should handle different endpoints with different limits

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;X-RateLimit-Limit&quot;, 5
    Received
           1: &quot;X-RateLimit-Limit&quot;, undefined
           2: &quot;X-RateLimit-Remaining&quot;, 4
           3: &quot;X-RateLimit-Reset&quot;, &quot;2025-07-24T23:52:02.079Z&quot;

    Number of calls: 4

    [0m [90m 464 |[39m       [36mawait[39m middleware(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 465 |[39m       expect(req[33m.[39mrateLimitInfo[33m.[39mresource)[33m.[39mtoBe([32m&apos;uploads&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 466 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Limit&apos;[39m[33m,[39m [35m5[39m)[33m;[39m [90m// Free tier upload limit[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 467 |[39m
     [90m 468 |[39m       [90m// Test export endpoint[39m
     [90m 469 |[39m       req[33m.[39mpath [33m=[39m [32m&apos;/api/export&apos;[39m[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/integration/security/rate-limiting.test.js:466:29)

FAIL tests/unit/security/ip-limiter.test.js
  ‚óè IPRateLimiter ‚Ä∫ constructor ‚Ä∫ should accept custom options

    TypeError: customLimiter.options.ipWhitelist.has is not a function

    [0m [90m 34 |[39m       expect(customLimiter[33m.[39moptions[33m.[39mtrustProxy)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 35 |[39m       expect(customLimiter[33m.[39moptions[33m.[39mproxyDepth)[33m.[39mtoBe([35m2[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 36 |[39m       expect(customLimiter[33m.[39moptions[33m.[39mipWhitelist[33m.[39mhas([32m&apos;192.168.1.1&apos;[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                                [31m[1m^[22m[39m
     [90m 37 |[39m       expect(customLimiter[33m.[39moptions[33m.[39mipBlacklist[33m.[39mhas([32m&apos;10.0.0.1&apos;[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 38 |[39m       expect(customLimiter[33m.[39mlimits[33m.[39m[36mdefault[39m[33m.[39mlimit)[33m.[39mtoBe([35m50[39m)[33m;[39m
     [90m 39 |[39m     })[33m;[39m[0m

      at Object.has (tests/unit/security/ip-limiter.test.js:36:48)

FAIL tests/unit/config/env-validation.test.js
  ‚óè Environment Configuration Validation ‚Ä∫ Environment Variable Types ‚Ä∫ should handle numeric environment variables correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 234 |[39m         
     [90m 235 |[39m         [36mconst[39m invalidValue [33m=[39m config[33m.[39mpath[33m.[39msplit([32m&apos;.&apos;[39m)[33m.[39mreduce((obj[33m,[39m key) [33m=&gt;[39m obj[key][33m,[39m module)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 236 |[39m         expect([33mNumber[39m[33m.[39misNaN(invalidValue))[33m.[39mtoBe([36mtrue[39m)[33m;[39m [90m// parseInt returns NaN for invalid input[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 237 |[39m         
     [90m 238 |[39m         [36mdelete[39m process[33m.[39menv[envVar][33m;[39m
     [90m 239 |[39m       }[0m

      at Object.toBe (tests/unit/config/env-validation.test.js:236:44)

  ‚óè Environment Configuration Validation ‚Ä∫ Cross-Module Consistency ‚Ä∫ should have consistent timeout values across modules

    Invalid time format: 45000

    [0m [90m  8 |[39m   [36mconst[39m match [33m=[39m timeStr[33m.[39mmatch([35m/^(\d+)([smhd])$/[39m)[33m;[39m
     [90m  9 |[39m   [36mif[39m ([33m![39mmatch) {
    [31m[1m&gt;[22m[39m[90m 10 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Invalid time format: ${timeStr}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 11 |[39m   }
     [90m 12 |[39m   
     [90m 13 |[39m   [36mconst[39m value [33m=[39m parseInt(match[[35m1[39m][33m,[39m [35m10[39m)[33m;[39m[0m

      at parseTimeToMs (config/production/limits.js:10:11)
      at Object.parseTimeToMs (config/production/limits.js:248:16)
      at Object.require (tests/unit/config/env-validation.test.js:381:22)

FAIL mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js
  ‚óè BackupManager Unit Tests ‚Ä∫ createBackup ‚Ä∫ should create a full backup

    Backup creation failed: require(...).createReadStream is not a function

    [0m [90m 199 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 200 |[39m             }
    [31m[1m&gt;[22m[39m[90m 201 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Backup creation failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 202 |[39m         }
     [90m 203 |[39m     }
     [90m 204 |[39m[0m

      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:112:30)

  ‚óè BackupManager Unit Tests ‚Ä∫ createBackup ‚Ä∫ should create incremental backup

    Backup creation failed: require(...).createReadStream is not a function

    [0m [90m 199 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 200 |[39m             }
    [31m[1m&gt;[22m[39m[90m 201 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Backup creation failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 202 |[39m         }
     [90m 203 |[39m     }
     [90m 204 |[39m[0m

      at BackupManager.createBackup (mcp-local-setup/scripts/backup-manager.js:201:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:138:30)

  ‚óè BackupManager Unit Tests ‚Ä∫ restoreBackup ‚Ä∫ should restore a backup

    Restore failed: Backup integrity check failed

    [0m [90m 322 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 323 |[39m             }
    [31m[1m&gt;[22m[39m[90m 324 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Restore failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 325 |[39m         }
     [90m 326 |[39m     }
     [90m 327 |[39m[0m

      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:239:28)

  ‚óè BackupManager Unit Tests ‚Ä∫ restoreBackup ‚Ä∫ should handle dry run mode

    Restore failed: Backup integrity check failed

    [0m [90m 322 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 323 |[39m             }
    [31m[1m&gt;[22m[39m[90m 324 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Restore failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 325 |[39m         }
     [90m 326 |[39m     }
     [90m 327 |[39m[0m

      at BackupManager.restoreBackup (mcp-local-setup/scripts/backup-manager.js:324:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:257:28)

  ‚óè BackupManager Unit Tests ‚Ä∫ cleanupBackups ‚Ä∫ should cleanup backups older than maxAge

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 5

    [0m [90m 430 |[39m             })[33m;[39m
     [90m 431 |[39m
    [31m[1m&gt;[22m[39m[90m 432 |[39m             expect(result[33m.[39mdeletedCount)[33m.[39mtoBe([35m2[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 433 |[39m             expect(backupManager[33m.[39mmetadata[33m.[39mhas([32m&apos;backup-1&apos;[39m))[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 434 |[39m             expect(backupManager[33m.[39mmetadata[33m.[39mhas([32m&apos;backup-2&apos;[39m))[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 435 |[39m         })[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:432:41)

  ‚óè BackupManager Unit Tests ‚Ä∫ importBackup/exportBackup ‚Ä∫ should import backup from local filesystem

    Import failed: require(...).createReadStream is not a function

    [0m [90m 510 |[39m                 [90m// Ignore cleanup errors[39m
     [90m 511 |[39m             }
    [31m[1m&gt;[22m[39m[90m 512 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Import failed: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 513 |[39m         }
     [90m 514 |[39m     }
     [90m 515 |[39m[0m

      at BackupManager.importBackup (mcp-local-setup/scripts/backup-manager.js:512:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/backup/backup-manager.unit.test.js:461:30)

FAIL mcp-local-setup/tests/unit/config/configuration-manager.test.js
  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should load configuration for an environment

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 42 |[39m     describe([32m&apos;loadConfig&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 43 |[39m         it([32m&apos;should load configuration for an environment&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 44 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 45 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 46 |[39m             
     [90m 47 |[39m             [36mconst[39m config [33m=[39m [36mawait[39m configManager[33m.[39mloadConfig([32m&apos;test&apos;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:44:23)

  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should throw error for non-existent environment

    TypeError: fs.access.mockRejectedValue is not a function

    [0m [90m 54 |[39m         
     [90m 55 |[39m         it([32m&apos;should throw error for non-existent environment&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 56 |[39m             fs[33m.[39maccess[33m.[39mmockRejectedValue({ code[33m:[39m [32m&apos;ENOENT&apos;[39m })[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 57 |[39m             
     [90m 58 |[39m             [36mawait[39m expect(configManager[33m.[39mloadConfig([32m&apos;nonexistent&apos;[39m))
     [90m 59 |[39m                 [33m.[39mrejects[33m.[39mtoThrow([32m&quot;Configuration for environment &apos;nonexistent&apos; not found&quot;[39m)[33m;[39m[0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:56:23)

  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should include secrets when requested

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 61 |[39m         
     [90m 62 |[39m         it([32m&apos;should include secrets when requested&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 63 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 64 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 65 |[39m             fs[33m.[39mreaddir[33m.[39mmockResolvedValue([[32m&apos;DB_PASSWORD.enc&apos;[39m])[33m;[39m
     [90m 66 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:63:23)

  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should apply runtime overrides

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 76 |[39m         
     [90m 77 |[39m         it([32m&apos;should apply runtime overrides&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 78 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 79 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 80 |[39m             
     [90m 81 |[39m             [36mconst[39m overrides [33m=[39m {[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:78:23)

  ‚óè ConfigurationManager ‚Ä∫ loadConfig ‚Ä∫ should validate configuration when requested

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 92 |[39m         
     [90m 93 |[39m         it([32m&apos;should validate configuration when requested&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 94 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 95 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 96 |[39m             
     [90m 97 |[39m             configManager[33m.[39mvalidateConfig [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue({[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:94:23)

  ‚óè ConfigurationManager ‚Ä∫ saveConfig ‚Ä∫ should save configuration to file

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 177 |[39m     describe([32m&apos;saveConfig&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 178 |[39m         it([32m&apos;should save configuration to file&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 179 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 180 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 181 |[39m             
     [90m 182 |[39m             [36mconst[39m result [33m=[39m [36mawait[39m configManager[33m.[39msaveConfig(mockConfig[33m,[39m [32m&apos;test&apos;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:179:22)

  ‚óè ConfigurationManager ‚Ä∫ saveConfig ‚Ä∫ should create backup when requested

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 195 |[39m         
     [90m 196 |[39m         it([32m&apos;should create backup when requested&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 197 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 198 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockConfig))[33m;[39m
     [90m 199 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 200 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:197:22)

  ‚óè ConfigurationManager ‚Ä∫ getSecrets and setSecrets ‚Ä∫ should encrypt and save secrets

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 218 |[39m     describe([32m&apos;getSecrets and setSecrets&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 219 |[39m         it([32m&apos;should encrypt and save secrets&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 220 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 221 |[39m             fs[33m.[39mreadFile[33m.[39mmockRejectedValue({ code[33m:[39m [32m&apos;ENOENT&apos;[39m })[33m;[39m [90m// No existing metadata[39m
     [90m 222 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 223 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:220:22)

  ‚óè ConfigurationManager ‚Ä∫ getSecrets and setSecrets ‚Ä∫ should decrypt and retrieve secrets

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 239 |[39m         it([32m&apos;should decrypt and retrieve secrets&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 240 |[39m             [36mconst[39m encryptedData [33m=[39m configManager[33m.[39m_encrypt([32m&apos;secret-value&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 241 |[39m             fs[33m.[39mreadFile[33m.[39mmockResolvedValue(encryptedData)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 242 |[39m             
     [90m 243 |[39m             [36mconst[39m secrets [33m=[39m [36mawait[39m configManager[33m.[39mgetSecrets([[32m&apos;API_KEY&apos;[39m])[33m;[39m
     [90m 244 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:241:25)

  ‚óè ConfigurationManager ‚Ä∫ getSecrets and setSecrets ‚Ä∫ should throw error for non-existent secret

    TypeError: fs.readFile.mockRejectedValue is not a function

    [0m [90m 247 |[39m         
     [90m 248 |[39m         it([32m&apos;should throw error for non-existent secret&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 249 |[39m             fs[33m.[39mreadFile[33m.[39mmockRejectedValue({ code[33m:[39m [32m&apos;ENOENT&apos;[39m })[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 250 |[39m             
     [90m 251 |[39m             [36mawait[39m expect(configManager[33m.[39mgetSecrets([[32m&apos;NONEXISTENT&apos;[39m]))
     [90m 252 |[39m                 [33m.[39mrejects[33m.[39mtoThrow([32m&quot;Secret &apos;NONEXISTENT&apos; not found&quot;[39m)[33m;[39m[0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:249:25)

  ‚óè ConfigurationManager ‚Ä∫ environment management ‚Ä∫ should list available environments

    TypeError: fs.readdir.mockResolvedValue is not a function

    [0m [90m 284 |[39m     describe([32m&apos;environment management&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 285 |[39m         it([32m&apos;should list available environments&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 286 |[39m             fs[33m.[39mreaddir[33m.[39mmockResolvedValue([[32m&apos;dev.json&apos;[39m[33m,[39m [32m&apos;prod.json&apos;[39m[33m,[39m [32m&apos;test.json&apos;[39m[33m,[39m [32m&apos;README.md&apos;[39m])[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 287 |[39m             
     [90m 288 |[39m             [36mconst[39m environments [33m=[39m [36mawait[39m configManager[33m.[39mlistEnvironments()[33m;[39m
     [90m 289 |[39m             [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:286:24)

  ‚óè ConfigurationManager ‚Ä∫ environment management ‚Ä∫ should create new environment

    TypeError: fs.access.mockRejectedValue is not a function

    [0m [90m 292 |[39m         
     [90m 293 |[39m         it([32m&apos;should create new environment&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 294 |[39m             fs[33m.[39maccess[33m.[39mmockRejectedValue({ code[33m:[39m [32m&apos;ENOENT&apos;[39m })[33m;[39m [90m// Doesn&apos;t exist[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 295 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 296 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 297 |[39m             [0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:294:23)

  ‚óè ConfigurationManager ‚Ä∫ environment management ‚Ä∫ should throw error if environment already exists

    TypeError: fs.access.mockResolvedValue is not a function

    [0m [90m 311 |[39m         
     [90m 312 |[39m         it([32m&apos;should throw error if environment already exists&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 313 |[39m             fs[33m.[39maccess[33m.[39mmockResolvedValue(undefined)[33m;[39m [90m// Exists[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 314 |[39m             
     [90m 315 |[39m             [36mawait[39m expect(configManager[33m.[39mcreateEnvironment([32m&apos;existing&apos;[39m))
     [90m 316 |[39m                 [33m.[39mrejects[33m.[39mtoThrow([32m&quot;Environment &apos;existing&apos; already exists&quot;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:313:23)

  ‚óè ConfigurationManager ‚Ä∫ environment management ‚Ä∫ should delete environment

    TypeError: fs.unlink.mockResolvedValue is not a function

    [0m [90m 318 |[39m         
     [90m 319 |[39m         it([32m&apos;should delete environment&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 320 |[39m             fs[33m.[39munlink[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 321 |[39m             fs[33m.[39mrmdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 322 |[39m             
     [90m 323 |[39m             [36mconst[39m result [33m=[39m [36mawait[39m configManager[33m.[39mdeleteEnvironment([32m&apos;test&apos;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:320:23)

  ‚óè ConfigurationManager ‚Ä∫ import/export ‚Ä∫ should import JSON configuration

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 348 |[39m         
     [90m 349 |[39m         it([32m&apos;should import JSON configuration&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 350 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 351 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 352 |[39m             configManager[33m.[39mvalidateConfig [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue({
     [90m 353 |[39m                 valid[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:350:22)

  ‚óè ConfigurationManager ‚Ä∫ import/export ‚Ä∫ should merge imported configuration when requested

    TypeError: fs.mkdir.mockResolvedValue is not a function

    [0m [90m 373 |[39m             
     [90m 374 |[39m             configManager[33m.[39mloadConfig [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue(existingConfig)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 375 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 376 |[39m             fs[33m.[39mwriteFile[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 377 |[39m             configManager[33m.[39mvalidateConfig [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue({
     [90m 378 |[39m                 valid[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/configuration-manager.test.js:375:22)

FAIL tests/integration/security/middleware-chain.test.js
  ‚óè Security Middleware Chain Integration ‚Ä∫ Complete Security Middleware Stack ‚Ä∫ should process request through full security stack

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 94 |[39m     it([32m&apos;should process request through full security stack&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 95 |[39m       [90m// Setup middleware chain[39m
    [31m[1m&gt;[22m[39m[90m 96 |[39m       app[33m.[39muse(helmetMiddleware[33m.[39mmiddleware())[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 97 |[39m       app[33m.[39muse(corsMiddleware[33m.[39mhandle())[33m;[39m
     [90m 98 |[39m       app[33m.[39muse(ipLimiter[33m.[39mcreateMiddleware())[33m;[39m
     [90m 99 |[39m       app[33m.[39muse(jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m }))[33m;[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:96:32)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Complete Security Middleware Stack ‚Ä∫ should handle authentication failure in middleware chain

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 118 |[39m       [90m// Setup middleware chain with required auth[39m
     [90m 119 |[39m       app[33m.[39muse(corsMiddleware[33m.[39mhandle())[33m;[39m
    [31m[1m&gt;[22m[39m[90m 120 |[39m       app[33m.[39muse(jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mfalse[39m }))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 121 |[39m       app[33m.[39muse(userLimiter[33m.[39mcreateMiddleware([32m&apos;api-calls&apos;[39m))[33m;[39m
     [90m 122 |[39m
     [90m 123 |[39m       [90m// No authentication provided[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:120:23)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Authentication Middleware Combinations ‚Ä∫ should support multiple authentication methods

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 156 |[39m       [36mconst[39m authMiddleware [33m=[39m [36masync[39m (req[33m,[39m res[33m,[39m next) [33m=&gt;[39m {
     [90m 157 |[39m         [90m// Try JWT first[39m
    [31m[1m&gt;[22m[39m[90m 158 |[39m         [36mconst[39m jwtMiddleware [33m=[39m jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m })[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 159 |[39m         [36mawait[39m jwtMiddleware(req[33m,[39m res[33m,[39m () [33m=&gt;[39m {})[33m;[39m
     [90m 160 |[39m
     [90m 161 |[39m         [36mif[39m (req[33m.[39muser) {[0m

      at middleware (tests/integration/security/middleware-chain.test.js:158:39)
      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)
      at Object.process (tests/integration/security/middleware-chain.test.js:178:17)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Authentication Middleware Combinations ‚Ä∫ should enforce permission requirements across auth methods

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 207 |[39m       app[33m.[39muse([36masync[39m (req[33m,[39m res[33m,[39m next) [33m=&gt;[39m {
     [90m 208 |[39m         [90m// Try both auth methods[39m
    [31m[1m&gt;[22m[39m[90m 209 |[39m         [36mawait[39m jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m })(req[33m,[39m res[33m,[39m () [33m=&gt;[39m {})[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 210 |[39m         [36mif[39m ([33m![39mreq[33m.[39muser) {
     [90m 211 |[39m           [36mawait[39m apiKeyManager[33m.[39mmiddleware()(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 212 |[39m         } [36melse[39m {[0m

      at middleware (tests/integration/security/middleware-chain.test.js:209:23)
      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)
      at Object.process (tests/integration/security/middleware-chain.test.js:221:17)

  ‚óè Security Middleware Chain Integration ‚Ä∫ CORS and Security Headers ‚Ä∫ should handle preflight requests with security headers

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 235 |[39m     it([32m&apos;should handle preflight requests with security headers&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 236 |[39m       [90m// Setup middleware[39m
    [31m[1m&gt;[22m[39m[90m 237 |[39m       app[33m.[39muse(helmetMiddleware[33m.[39mmiddleware())[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 238 |[39m       app[33m.[39muse(corsMiddleware[33m.[39mhandle())[33m;[39m
     [90m 239 |[39m
     [90m 240 |[39m       [90m// Preflight request[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:237:32)

  ‚óè Security Middleware Chain Integration ‚Ä∫ CORS and Security Headers ‚Ä∫ should apply CSP headers dynamically

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 266 |[39m       }[33m;[39m
     [90m 267 |[39m
    [31m[1m&gt;[22m[39m[90m 268 |[39m       app[33m.[39muse(helmetMiddleware[33m.[39mmiddleware())[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 269 |[39m       app[33m.[39muse(dynamicCSP)[33m;[39m
     [90m 270 |[39m
     [90m 271 |[39m       [90m// Test admin route[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:268:32)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Rate Limiting with Authentication ‚Ä∫ should apply different rate limits for authenticated vs anonymous users

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 285 |[39m     it([32m&apos;should apply different rate limits for authenticated vs anonymous users&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 286 |[39m       [90m// Setup middleware chain[39m
    [31m[1m&gt;[22m[39m[90m 287 |[39m       app[33m.[39muse(jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m }))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 288 |[39m       app[33m.[39muse([36masync[39m (req[33m,[39m res[33m,[39m next) [33m=&gt;[39m {
     [90m 289 |[39m         [36mif[39m (req[33m.[39muser) {
     [90m 290 |[39m           [90m// Authenticated users get user-based limits[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:287:23)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Rate Limiting with Authentication ‚Ä∫ should combine IP and user rate limiting for defense in depth

    TypeError: jwtAuth.middleware is not a function

    [0m [90m 318 |[39m       [90m// Setup both limiters[39m
     [90m 319 |[39m       app[33m.[39muse(ipLimiter[33m.[39mcreateMiddleware())[33m;[39m
    [31m[1m&gt;[22m[39m[90m 320 |[39m       app[33m.[39muse(jwtAuth[33m.[39mmiddleware({ optional[33m:[39m [36mtrue[39m }))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 321 |[39m       app[33m.[39muse((req[33m,[39m res[33m,[39m next) [33m=&gt;[39m {
     [90m 322 |[39m         [36mif[39m (req[33m.[39muser) {
     [90m 323 |[39m           [36mconst[39m userMiddleware [33m=[39m userLimiter[33m.[39mcreateMiddleware([32m&apos;api-calls&apos;[39m)[33m;[39m[0m

      at Object.middleware (tests/integration/security/middleware-chain.test.js:320:23)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Advanced Middleware Patterns ‚Ä∫ should support conditional middleware application

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 432 |[39m         } [36melse[39m [36mif[39m (req[33m.[39mpath[33m.[39mstartsWith([32m&apos;/api&apos;[39m)) {
     [90m 433 |[39m           [90m// API routes - full security[39m
    [31m[1m&gt;[22m[39m[90m 434 |[39m           [36mreturn[39m helmetMiddleware[33m.[39mmiddleware()(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 435 |[39m         } [36melse[39m [36mif[39m (req[33m.[39mpath[33m.[39mstartsWith([32m&apos;/admin&apos;[39m)) {
     [90m 436 |[39m           [90m// Admin routes - strict security[39m
     [90m 437 |[39m           res[33m.[39msetHeader([32m&apos;X-Admin-Route&apos;[39m[33m,[39m [32m&apos;true&apos;[39m)[33m;[39m[0m

      at middleware (tests/integration/security/middleware-chain.test.js:434:35)
      at Object.middleware [as process] (tests/integration/security/middleware-chain.test.js:55:17)
      at Object.process (tests/integration/security/middleware-chain.test.js:467:17)

  ‚óè Security Middleware Chain Integration ‚Ä∫ Advanced Middleware Patterns ‚Ä∫ should support middleware composition

    TypeError: helmetMiddleware.middleware is not a function

    [0m [90m 487 |[39m         }
     [90m 488 |[39m         [36mif[39m (options[33m.[39mhelmet) {
    [31m[1m&gt;[22m[39m[90m 489 |[39m           middlewares[33m.[39mpush(helmetMiddleware[33m.[39mmiddleware())[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 490 |[39m         }
     [90m 491 |[39m         [36mif[39m (options[33m.[39mrateLimit) {
     [90m 492 |[39m           middlewares[33m.[39mpush(ipLimiter[33m.[39mcreateMiddleware())[33m;[39m[0m

      at middleware (tests/integration/security/middleware-chain.test.js:489:45)
      at Object.securityMiddleware (tests/integration/security/middleware-chain.test.js:512:15)

FAIL mcp-local-setup/tests/unit/config/secret-manager.test.js
  ‚óè SecretManager ‚Ä∫ backupSecrets ‚Ä∫ should create backup of secrets directory

    TypeError: fs.readdir.mockResolvedValue is not a function

    [0m [90m 211 |[39m         it([32m&apos;should create backup of secrets directory&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 212 |[39m             [36mconst[39m mockFiles [33m=[39m [[32m&apos;secret1.enc&apos;[39m[33m,[39m [32m&apos;secret2.enc&apos;[39m[33m,[39m [32m&apos;_metadata.json&apos;[39m][33m;[39m
    [31m[1m&gt;[22m[39m[90m 213 |[39m             fs[33m.[39mreaddir[33m.[39mmockResolvedValue(mockFiles)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 214 |[39m             fs[33m.[39mstat[33m.[39mmockResolvedValue({ isFile[33m:[39m () [33m=&gt;[39m [36mtrue[39m })[33m;[39m
     [90m 215 |[39m             fs[33m.[39mmkdir[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 216 |[39m             fs[33m.[39mcopyFile[33m.[39mmockResolvedValue(undefined)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:213:24)

  ‚óè SecretManager ‚Ä∫ backupSecrets ‚Ä∫ should skip directories when backing up

    TypeError: fs.readdir.mockResolvedValue is not a function

    [0m [90m 226 |[39m         
     [90m 227 |[39m         it([32m&apos;should skip directories when backing up&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 228 |[39m             fs[33m.[39mreaddir[33m.[39mmockResolvedValue([[32m&apos;file.enc&apos;[39m[33m,[39m [32m&apos;subdir&apos;[39m])[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 229 |[39m             fs[33m.[39mstat
     [90m 230 |[39m                 [33m.[39mmockResolvedValueOnce({ isFile[33m:[39m () [33m=&gt;[39m [36mtrue[39m })
     [90m 231 |[39m                 [33m.[39mmockResolvedValueOnce({ isFile[33m:[39m () [33m=&gt;[39m [36mfalse[39m })[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/config/secret-manager.test.js:228:24)

FAIL tests/unit/security/user-limiter.test.js
  ‚óè UserRateLimiter ‚Ä∫ createMiddleware ‚Ä∫ should create middleware that allows requests

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;X-RateLimit-Limit&quot;, 100
    Received
           1: &quot;X-RateLimit-Limit&quot;, undefined
           2: &quot;X-RateLimit-Remaining&quot;, 99
           3: &quot;X-RateLimit-Reset&quot;, &quot;2025-07-24T23:52:02.073Z&quot;

    Number of calls: 4

    [0m [90m 484 |[39m       expect(req[33m.[39mrateLimitInfo)[33m.[39mtoBeDefined()[33m;[39m
     [90m 485 |[39m       expect(req[33m.[39mrateLimitInfo[33m.[39mresource)[33m.[39mtoBe([32m&apos;api-calls&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 486 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Limit&apos;[39m[33m,[39m [35m100[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 487 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Remaining&apos;[39m[33m,[39m [35m99[39m)[33m;[39m
     [90m 488 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;X-RateLimit-Tier&apos;[39m[33m,[39m [32m&apos;free&apos;[39m)[33m;[39m
     [90m 489 |[39m       expect(next)[33m.[39mtoHaveBeenCalled()[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/user-limiter.test.js:486:29)

  ‚óè UserRateLimiter ‚Ä∫ cleanup ‚Ä∫ should handle unlimited tier in cleanup

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 752 |[39m       
     [90m 753 |[39m       [90m// Should still exist as enterprise has unlimited (-1) limit[39m
    [31m[1m&gt;[22m[39m[90m 754 |[39m       expect(userLimiter[33m.[39mmemoryStore[33m.[39mhas([32m&apos;user-ratelimit:enterprise-user:api-calls&apos;[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                                                                       [31m[1m^[22m[39m
     [90m 755 |[39m     })[33m;[39m
     [90m 756 |[39m   })[33m;[39m
     [90m 757 |[39m })[33m;[39m[0m

      at Object.toBe (tests/unit/security/user-limiter.test.js:754:87)

FAIL mcp-local-setup/tests/integration/configuration.integration.test.js
  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should create new environment

    Schema version &apos;1.0.0&apos; not found

    [0m [90m 276 |[39m         } [36mcatch[39m (error) {
     [90m 277 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 278 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Schema version &apos;${version}&apos; not found`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 279 |[39m             }
     [90m 280 |[39m             [36mthrow[39m error[33m;[39m
     [90m 281 |[39m         }[0m

      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)
      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)
      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)
      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:160:13)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should load environment configuration

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:167:34)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should apply runtime overrides

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:191:34)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should list all environments

    Schema version &apos;1.0.0&apos; not found

    [0m [90m 276 |[39m         } [36mcatch[39m (error) {
     [90m 277 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 278 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Schema version &apos;${version}&apos; not found`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 279 |[39m             }
     [90m 280 |[39m             [36mthrow[39m error[33m;[39m
     [90m 281 |[39m         }[0m

      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)
      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)
      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)
      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:203:13)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Environment Configuration ‚Ä∫ should get configuration metadata

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at ConfigurationManager.getConfigMetadata (mcp-local-setup/config/advanced/configuration-manager.js:367:24)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:215:30)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Validation ‚Ä∫ should detect validation errors

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 256 |[39m             
     [90m 257 |[39m             [36mconst[39m nameError [33m=[39m result[33m.[39merrors[33m.[39mfind(e [33m=&gt;[39m e[33m.[39mpath[33m.[39mincludes([32m&apos;name&apos;[39m))[33m;[39m
    [31m[1m&gt;[22m[39m[90m 258 |[39m             expect(nameError)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 259 |[39m         })[33m;[39m
     [90m 260 |[39m
     [90m 261 |[39m         it([32m&apos;should provide validation warnings&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBeDefined (mcp-local-setup/tests/integration/configuration.integration.test.js:258:31)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Secret Management ‚Ä∫ should list secret metadata without values

    expect(received).toBeInstanceOf(expected)

    Expected constructor: Date

    Received value has no prototype
    Received value: &quot;2025-07-24T22:52:02.012Z&quot;

    [0m [90m 318 |[39m             expect(testSecret)[33m.[39mtoBeDefined()[33m;[39m
     [90m 319 |[39m             expect(testSecret[33m.[39mdescription)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 320 |[39m             expect(testSecret[33m.[39mcreatedAt)[33m.[39mtoBeInstanceOf([33mDate[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 321 |[39m             expect(testSecret[33m.[39mvalue)[33m.[39mtoBeUndefined()[33m;[39m [90m// Should not expose value[39m
     [90m 322 |[39m         })[33m;[39m
     [90m 323 |[39m[0m

      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/configuration.integration.test.js:320:42)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Secret Management ‚Ä∫ should load config with secrets

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:344:39)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Import/Export ‚Ä∫ should export configuration as JSON

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:395:30)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Import/Export ‚Ä∫ should throw error for unsupported YAML format

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;YAML export not yet implemented&quot;
    Received message:   &quot;Configuration for environment &apos;test-integration&apos; not found&quot;

        [0m [90m 67 |[39m         } [36mcatch[39m (error) {
         [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
        [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
         [90m    |[39m                       [31m[1m^[22m[39m
         [90m 70 |[39m             }
         [90m 71 |[39m             [36mthrow[39m error[33m;[39m
         [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:407:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:410:25)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Import/Export ‚Ä∫ should export configuration as env file

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at ConfigurationManager.exportConfig (mcp-local-setup/config/advanced/configuration-manager.js:440:24)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:414:30)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Import/Export ‚Ä∫ should merge imported configuration

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:449:36)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Persistence ‚Ä∫ should save configuration changes

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:470:36)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Configuration Persistence ‚Ä∫ should rollback on save failure

    Configuration for environment &apos;test-integration&apos; not found

    [0m [90m 67 |[39m         } [36mcatch[39m (error) {
     [90m 68 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
    [31m[1m&gt;[22m[39m[90m 69 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Configuration for environment &apos;${environment}&apos; not found`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m             }
     [90m 71 |[39m             [36mthrow[39m error[33m;[39m
     [90m 72 |[39m         }[0m

      at ConfigurationManager.loadConfig (mcp-local-setup/config/advanced/configuration-manager.js:69:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:502:31)

  ‚óè Configuration Management Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should prevent duplicate environment creation

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;Environment already exists&quot;
    Received message:   &quot;Schema version &apos;1.0.0&apos; not found&quot;

        [0m [90m 276 |[39m         } [36mcatch[39m (error) {
         [90m 277 |[39m             [36mif[39m (error[33m.[39mcode [33m===[39m [32m&apos;ENOENT&apos;[39m) {
        [31m[1m&gt;[22m[39m[90m 278 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Schema version &apos;${version}&apos; not found`[39m)[33m;[39m
         [90m     |[39m                       [31m[1m^[22m[39m
         [90m 279 |[39m             }
         [90m 280 |[39m             [36mthrow[39m error[33m;[39m
         [90m 281 |[39m         }[0m

      at ConfigurationManager.getSchema (mcp-local-setup/config/advanced/configuration-manager.js:278:23)
      at ConfigurationManager.validateConfig (mcp-local-setup/config/advanced/configuration-manager.js:82:24)
      at ConfigurationManager.saveConfig (mcp-local-setup/config/advanced/configuration-manager.js:139:32)
      at ConfigurationManager.createEnvironment (mcp-local-setup/config/advanced/configuration-manager.js:330:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/configuration.integration.test.js:538:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/integration/configuration.integration.test.js:539:26)

FAIL tests/unit/security/redis-limiter.test.js
  ‚óè RedisRateLimiter ‚Ä∫ checkLimit ‚Ä∫ should calculate correct reset time from oldest entry

    expect(received).toBe(expected) // Object.is equality

    Expected: 1753399322093
    Received: NaN

    [0m [90m 162 |[39m       
     [90m 163 |[39m       [36mconst[39m expectedReset [33m=[39m [36mnew[39m [33mDate[39m(oldestTime [33m+[39m [35m3600000[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 164 |[39m       expect(result[33m.[39mresetAt[33m.[39mgetTime())[33m.[39mtoBe(expectedReset[33m.[39mgetTime())[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 165 |[39m     })[33m;[39m
     [90m 166 |[39m
     [90m 167 |[39m     it([32m&apos;should fail open on Redis errors&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBe (tests/unit/security/redis-limiter.test.js:164:40)

  ‚óè RedisRateLimiter ‚Ä∫ createMiddleware ‚Ä∫ should block requests exceeding limit

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   &quot;blocked&quot;: false,
    +   &quot;blocked&quot;: undefined,
        &quot;error&quot;: &quot;Too many requests&quot;,
    -   &quot;retryAfter&quot;: Any&lt;Date&gt;,
    +   &quot;retryAfter&quot;: 2025-07-24T23:52:02.158Z,
      },

    Number of calls: 1

    [0m [90m 435 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;Retry-After&apos;[39m[33m,[39m expect[33m.[39many([33mNumber[39m))[33m;[39m
     [90m 436 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m429[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 437 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 438 |[39m         error[33m:[39m [32m&apos;Too many requests&apos;[39m[33m,[39m
     [90m 439 |[39m         retryAfter[33m:[39m expect[33m.[39many([33mDate[39m)[33m,[39m
     [90m 440 |[39m         blocked[33m:[39m [36mfalse[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/redis-limiter.test.js:437:24)

FAIL mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js
  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Services deployed to K8s are automatically registered in mesh

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Traffic management policies apply to orchestrated services

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Service mesh mTLS works with orchestrator networking

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ SDK can query services through mesh-enabled endpoints

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Circuit breaker policies protect orchestrated services

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Service mesh observability integrates with orchestrator metrics

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Canary deployments use both orchestration and mesh

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

  ‚óè Service Mesh and Orchestration Integration ‚Ä∫ Fault injection tests orchestrated service resilience

    Not implemented - Service Mesh team will implement

    [0m [90m  6 |[39m   constructor(meshType) {
     [90m  7 |[39m     [90m// meshType: &apos;istio&apos; | &apos;linkerd&apos; | &apos;consul&apos;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - Service Mesh team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   }
     [90m 10 |[39m
     [90m 11 |[39m   [90m// Service registration[39m[0m

      at new ServiceMeshInterface (mcp-local-setup/interfaces/phase5/service-mesh.interface.js:8:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/mesh-orchestration-integration.test.js:15:13)

FAIL tests/integration/phase6/security-health-integration.test.js
  ‚óè Security and Health Monitoring Integration ‚Ä∫ API authentication integrates with health status

    expect(received).toHaveProperty(path, value)

    Expected path: &quot;authentication&quot;
    Received path: []

    Expected value: &quot;enabled&quot;
    Received value: {&quot;lastCheck&quot;: null, &quot;message&quot;: &quot;Not checked yet&quot;, &quot;status&quot;: &quot;pending&quot;}

    [0m [90m 70 |[39m     [90m// Then health should include auth status[39m
     [90m 71 |[39m     expect(health[33m.[39mstatus)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 72 |[39m     expect(health[33m.[39mdetails)[33m.[39mtoHaveProperty([32m&apos;authentication&apos;[39m[33m,[39m [32m&apos;enabled&apos;[39m)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 73 |[39m   })[33m;[39m
     [90m 74 |[39m
     [90m 75 |[39m   test([32m&apos;Service dependencies include security components&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toHaveProperty (tests/integration/phase6/security-health-integration.test.js:72:28)

FAIL tests/integration/monitoring/logging-pipeline.test.js
  ‚óè Logging Pipeline Integration ‚Ä∫ End-to-End Logging ‚Ä∫ should log messages through the complete pipeline

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ End-to-End Logging ‚Ä∫ should apply formatters correctly

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ End-to-End Logging ‚Ä∫ should handle high-volume logging

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Log Rotation Integration ‚Ä∫ should rotate logs based on size

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Log Rotation Integration ‚Ä∫ should compress rotated files

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Log Rotation Integration ‚Ä∫ should clean up old logs

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Error Handling ‚Ä∫ should handle logging errors gracefully

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Error Handling ‚Ä∫ should continue logging after transport failure

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Context and Correlation ‚Ä∫ should maintain correlation IDs across log entries

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Context and Correlation ‚Ä∫ should preserve context through async operations

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Performance Monitoring ‚Ä∫ should log performance metrics

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

  ‚óè Logging Pipeline Integration ‚Ä∫ Multi-transport Scenarios ‚Ä∫ should route logs to appropriate transports based on level

    TypeError: logRotation.initialize is not a function

    [0m [90m 32 |[39m     })[33m;[39m
     [90m 33 |[39m
    [31m[1m&gt;[22m[39m[90m 34 |[39m     [36mawait[39m logRotation[33m.[39minitialize()[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 35 |[39m
     [90m 36 |[39m     logger [33m=[39m [36mnew[39m [33mLogger[39m({
     [90m 37 |[39m       winstonConfig[33m,[39m[0m

      at Object.initialize (tests/integration/monitoring/logging-pipeline.test.js:34:23)

FAIL tests/unit/security/helmet-middleware.test.js
  ‚óè HelmetMiddleware ‚Ä∫ CSP Report Handler ‚Ä∫ should handle errors gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 500
    Received: 400

    Number of calls: 1

    [0m [90m 153 |[39m       handler(req[33m,[39m res)[33m;[39m
     [90m 154 |[39m       
    [31m[1m&gt;[22m[39m[90m 155 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m500[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 156 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({ error[33m:[39m [32m&apos;Failed to process CSP report&apos;[39m })[33m;[39m
     [90m 157 |[39m     })[33m;[39m
     [90m 158 |[39m   })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:155:26)

  ‚óè HelmetMiddleware ‚Ä∫ createNonceMiddleware ‚Ä∫ should modify CSP header to include nonce

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function anonymous]

    [0m [90m 330 |[39m       res[33m.[39msetHeader([32m&apos;Content-Security-Policy&apos;[39m[33m,[39m [32m&quot;script-src &apos;self&apos;&quot;[39m)[33m;[39m
     [90m 331 |[39m       
    [31m[1m&gt;[22m[39m[90m 332 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 333 |[39m         [32m&apos;Content-Security-Policy&apos;[39m[33m,[39m
     [90m 334 |[39m         expect[33m.[39mstringContaining([32m`&apos;nonce-${res.locals.nonce}&apos;`[39m)
     [90m 335 |[39m       )[33m;[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/helmet-middleware.test.js:332:29)

FAIL tests/unit/security/cors.test.js
  ‚óè CORSMiddleware ‚Ä∫ handlePreflight ‚Ä∫ should handle wildcard origin without credentials in preflight

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;
    Received
           1: &quot;Access-Control-Allow-Origin&quot;, &quot;https://example.com&quot;
           2: &quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Authorization, X-API-Key&quot;
           3: &quot;Access-Control-Max-Age&quot;, &quot;86400&quot;

    Number of calls: 3

    [0m [90m 276 |[39m       corsMiddleware[33m.[39mhandlePreflight(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 277 |[39m       
    [31m[1m&gt;[22m[39m[90m 278 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;Access-Control-Allow-Origin&apos;[39m[33m,[39m [32m&apos;*&apos;[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 279 |[39m       expect(res[33m.[39msetHeader)[33m.[39mnot[33m.[39mtoHaveBeenCalledWith([32m&apos;Access-Control-Allow-Credentials&apos;[39m[33m,[39m [32m&apos;true&apos;[39m)[33m;[39m
     [90m 280 |[39m     })[33m;[39m
     [90m 281 |[39m[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:278:29)

  ‚óè CORSMiddleware ‚Ä∫ Edge cases ‚Ä∫ should handle malformed request headers gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Authorization, X-API-Key&quot;
    Received
           1: &quot;Access-Control-Allow-Origin&quot;, &quot;https://example.com&quot;
           2: &quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;
           3: &quot;Access-Control-Max-Age&quot;, &quot;86400&quot;

    Number of calls: 3

    [0m [90m 325 |[39m       corsMiddleware[33m.[39mhandlePreflight(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m 326 |[39m       
    [31m[1m&gt;[22m[39m[90m 327 |[39m       expect(res[33m.[39msetHeader)[33m.[39mtoHaveBeenCalledWith([32m&apos;Access-Control-Allow-Headers&apos;[39m[33m,[39m [32m&apos;Content-Type, Authorization, X-API-Key&apos;[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 328 |[39m     })[33m;[39m
     [90m 329 |[39m
     [90m 330 |[39m     it([32m&apos;should handle mixed origin configurations&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toHaveBeenCalledWith (tests/unit/security/cors.test.js:327:29)

FAIL tests/security/auth-bypass.test.js
  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent JWT signature stripping

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent JWT algorithm confusion attacks

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent weak secret key attacks

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent token replay attacks with expired tokens

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ JWT Authentication Bypass Attempts ‚Ä∫ should prevent privilege escalation via token manipulation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ API Key Authentication Bypass Attempts ‚Ä∫ should prevent brute force API key guessing

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ API Key Authentication Bypass Attempts ‚Ä∫ should prevent API key format manipulation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ API Key Authentication Bypass Attempts ‚Ä∫ should prevent permission escalation via API keys

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ API Key Authentication Bypass Attempts ‚Ä∫ should prevent API key reuse after revocation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Token Refresh Authentication Bypass ‚Ä∫ should prevent refresh token reuse after rotation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Token Refresh Authentication Bypass ‚Ä∫ should prevent cross-user token refresh

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Token Refresh Authentication Bypass ‚Ä∫ should prevent infinite token refresh chains

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ OAuth Authentication Bypass ‚Ä∫ should prevent OAuth state parameter bypass

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ OAuth Authentication Bypass ‚Ä∫ should prevent OAuth token injection

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ OAuth Authentication Bypass ‚Ä∫ should prevent OAuth redirect URI manipulation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Session Fixation Prevention ‚Ä∫ should regenerate session ID on authentication

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Authentication Race Conditions ‚Ä∫ should handle concurrent authentication attempts safely

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Authentication Race Conditions ‚Ä∫ should prevent race condition in API key validation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Authentication Downgrade Attacks ‚Ä∫ should prevent downgrade from strong to weak authentication

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

  ‚óè Security Vulnerability Tests - Authentication Bypass ‚Ä∫ Authentication Context Validation ‚Ä∫ should validate authentication context consistency

    TypeError: TokenRefresh is not a constructor

    [0m [90m 22 |[39m     })[33m;[39m
     [90m 23 |[39m
    [31m[1m&gt;[22m[39m[90m 24 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 25 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 26 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 27 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/security/auth-bypass.test.js:24:20)

FAIL tests/integration/monitoring/metrics-collection.test.js
  ‚óè Metrics Collection Integration ‚Ä∫ HTTP Metrics Collection ‚Ä∫ should collect HTTP request metrics

    expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;

    [0m [90m 79 |[39m       
     [90m 80 |[39m       [90m// Make multiple requests[39m
    [31m[1m&gt;[22m[39m[90m 81 |[39m       [36mawait[39m request(app)[33m.[39m[36mget[39m([32m&apos;/test&apos;[39m)[33m.[39mexpect([35m200[39m)[33m;[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m 82 |[39m       [36mawait[39m request(app)[33m.[39m[36mget[39m([32m&apos;/test&apos;[39m)[33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 83 |[39m       [36mawait[39m request(app)[33m.[39mpost([32m&apos;/api/users&apos;[39m)[33m.[39msend({ name[33m:[39m [32m&apos;Test&apos;[39m })[33m.[39mexpect([35m201[39m)[33m;[39m
     [90m 84 |[39m       [36mawait[39m request(app)[33m.[39m[36mget[39m([32m&apos;/error&apos;[39m)[33m.[39mexpect([35m500[39m)[33m;[39m[0m

      at Object.expect (tests/integration/monitoring/metrics-collection.test.js:81:39)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.&lt;anonymous&gt; (node_modules/supertest/lib/test.js:152:11)

  ‚óè Metrics Collection Integration ‚Ä∫ HTTP Metrics Collection ‚Ä∫ should track request sizes

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Business Metrics Collection ‚Ä∫ should collect business events

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Business Metrics Collection ‚Ä∫ should track API usage metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Database Metrics Collection ‚Ä∫ should collect database operation metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Database Metrics Collection ‚Ä∫ should track connection pool metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Cache Metrics Collection ‚Ä∫ should collect cache operation metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Custom Metrics ‚Ä∫ should allow custom metric definitions

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ System Metrics ‚Ä∫ should collect system resource metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Metric Aggregation ‚Ä∫ should aggregate metrics across multiple sources

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Metrics Export Formats ‚Ä∫ should export metrics in Prometheus format

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Metrics Export Formats ‚Ä∫ should export metrics as JSON

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Real-time Monitoring ‚Ä∫ should provide real-time metric updates

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

  ‚óè Metrics Collection Integration ‚Ä∫ Real-time Monitoring ‚Ä∫ should handle metric resets

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/integration/monitoring/metrics-collection.test.js:24:21)

FAIL mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js
  ‚óè IDE Extension and SDK Integration ‚Ä∫ IDE extension initializes with SDK instance

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Code completion suggests available MCP services

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Hover info shows service documentation from SDK

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Diagnostics validate service configurations against SDK

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Service panel shows real-time health from SDK

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Debugging integration uses SDK service endpoints

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

  ‚óè IDE Extension and SDK Integration ‚Ä∫ Code actions can install missing services via SDK

    Not implemented - SDK team will implement

    [0m [90m  5 |[39m [36mclass[39m [33mSDKCoreInterface[39m {
     [90m  6 |[39m   constructor(config) {
    [31m[1m&gt;[22m[39m[90m  7 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Not implemented - SDK team will implement&apos;[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  8 |[39m   }
     [90m  9 |[39m
     [90m 10 |[39m   [90m// Authentication methods[39m[0m

      at new SDKCoreInterface (mcp-local-setup/interfaces/phase5/sdk-core.interface.js:7:11)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/phase5/ide-sdk-integration.test.js:13:11)

FAIL mcp-local-setup/tests/unit/community/features.test.js
  ‚óè CommunityFeatures ‚Ä∫ rateService ‚Ä∫ should track analytics event

    TypeError: Cannot read properties of undefined (reading &apos;events&apos;)

    [0m [90m 170 |[39m       expect(analyticsCall)[33m.[39mtoBeDefined()[33m;[39m
     [90m 171 |[39m       [36mconst[39m analyticsData [33m=[39m [33mJSON[39m[33m.[39mparse(analyticsCall[[35m1[39m])[33m;[39m
    [31m[1m&gt;[22m[39m[90m 172 |[39m       expect(analyticsData[[32m&apos;service-1&apos;[39m][33m.[39mevents)[33m.[39mtoContainEqual(
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 173 |[39m         expect[33m.[39mobjectContaining({
     [90m 174 |[39m           type[33m:[39m [32m&apos;rating&apos;[39m[33m,[39m
     [90m 175 |[39m           userId[33m:[39m [32m&apos;user-5&apos;[39m[33m,[39m[0m

      at Object.events (mcp-local-setup/tests/unit/community/features.test.js:172:41)

  ‚óè CommunityFeatures ‚Ä∫ private methods ‚Ä∫ should calculate week number correctly

    expect(received).toBeGreaterThan(expected)

    Expected: &gt; 50
    Received:   1

    [0m [90m 360 |[39m       
     [90m 361 |[39m       expect(week1)[33m.[39mtoBe([35m1[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 362 |[39m       expect(week2)[33m.[39mtoBeGreaterThan([35m50[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 363 |[39m     })[33m;[39m
     [90m 364 |[39m
     [90m 365 |[39m     it([32m&apos;should calculate engagement score&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toBeGreaterThan (mcp-local-setup/tests/unit/community/features.test.js:362:21)

  ‚óè CommunityFeatures ‚Ä∫ private methods ‚Ä∫ should calculate growth rate

    expect(received).toBe(expected) // Object.is equality

    Expected: 25
    Received: 0

    [0m [90m 386 |[39m
     [90m 387 |[39m       [36mconst[39m growthRate [33m=[39m community[33m.[39m_calculateGrowthRate(analytics)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 388 |[39m       expect(growthRate)[33m.[39mtoBe([35m25[39m)[33m;[39m [90m// 25% growth[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 389 |[39m     })[33m;[39m
     [90m 390 |[39m
     [90m 391 |[39m     it([32m&apos;should handle zero previous downloads in growth rate&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Object.toBe (mcp-local-setup/tests/unit/community/features.test.js:388:26)

FAIL mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js
  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Tenant-based Service Access ‚Ä∫ should restrict marketplace access based on tenant permissions

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 35 |[39m     test([32m&apos;should restrict marketplace access based on tenant permissions&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 36 |[39m       [90m// Create test tenants[39m
    [31m[1m&gt;[22m[39m[90m 37 |[39m       [36mconst[39m enterpriseTenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m    |[39m                                                    [31m[1m^[22m[39m
     [90m 38 |[39m         name[33m:[39m [32m&apos;Enterprise Corp&apos;[39m[33m,[39m
     [90m 39 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 40 |[39m         features[33m:[39m [[32m&apos;unlimited-services&apos;[39m[33m,[39m [32m&apos;private-marketplace&apos;[39m][0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:37:52)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Tenant-based Service Access ‚Ä∫ should enforce tenant quotas on service installation

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 70 |[39m
     [90m 71 |[39m     test([32m&apos;should enforce tenant quotas on service installation&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 72 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m    |[39m                                          [31m[1m^[22m[39m
     [90m 73 |[39m         name[33m:[39m [32m&apos;Limited Corp&apos;[39m[33m,[39m
     [90m 74 |[39m         plan[33m:[39m [32m&apos;basic&apos;[39m[33m,[39m
     [90m 75 |[39m         quotas[33m:[39m {[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:72:42)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Marketplace Publishing with Multi-tenancy ‚Ä∫ should allow tenants to publish private services

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 100 |[39m   describe([32m&apos;Marketplace Publishing with Multi-tenancy&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 101 |[39m     test([32m&apos;should allow tenants to publish private services&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 102 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 103 |[39m         name[33m:[39m [32m&apos;Service Provider Inc&apos;[39m[33m,[39m
     [90m 104 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 105 |[39m         features[33m:[39m [[32m&apos;marketplace-publisher&apos;[39m][0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:102:42)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Marketplace Publishing with Multi-tenancy ‚Ä∫ should track marketplace revenue per tenant

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 137 |[39m
     [90m 138 |[39m     test([32m&apos;should track marketplace revenue per tenant&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 139 |[39m       [36mconst[39m publisherTenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 140 |[39m         name[33m:[39m [32m&apos;SaaS Provider&apos;[39m[33m,[39m
     [90m 141 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m
     [90m 142 |[39m       })[33m;[39m[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:139:51)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ SSO + Marketplace Integration ‚Ä∫ should use SSO for marketplace authentication

    Invalid authentication request

    [0m [90m 213 |[39m   [36masync[39m authenticate(credentials[33m,[39m provider) {
     [90m 214 |[39m     [36mif[39m ([33m![39mcredentials [33m||[39m [33m![39mprovider) {
    [31m[1m&gt;[22m[39m[90m 215 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Invalid authentication request&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 216 |[39m     }
     [90m 217 |[39m
     [90m 218 |[39m     [36mconst[39m providerConfig [33m=[39m [36mthis[39m[33m.[39m_getProvider(provider)[33m;[39m[0m

      at SSOAuthentication.authenticate (mcp-local-setup/enterprise/sso/authentication.js:215:13)
      at Object.authenticate (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:184:40)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ SSO + Marketplace Integration ‚Ä∫ should map SSO roles to marketplace permissions

    TypeError: ssoAuth.configureRoleMapping is not a function

    [0m [90m 205 |[39m       }[33m;[39m
     [90m 206 |[39m
    [31m[1m&gt;[22m[39m[90m 207 |[39m       [36mawait[39m ssoAuth[33m.[39mconfigureRoleMapping(roleMapping)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 208 |[39m
     [90m 209 |[39m       [90m// Test different role access[39m
     [90m 210 |[39m       [36mconst[39m adminUser [33m=[39m [36mawait[39m ssoAuth[33m.[39mauthenticate({[0m

      at Object.configureRoleMapping (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:207:21)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Compliance in Marketplace Operations ‚Ä∫ should audit all marketplace transactions

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 230 |[39m   describe([32m&apos;Compliance in Marketplace Operations&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 231 |[39m     test([32m&apos;should audit all marketplace transactions&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 232 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 233 |[39m         name[33m:[39m [32m&apos;Regulated Corp&apos;[39m[33m,[39m
     [90m 234 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 235 |[39m         compliance[33m:[39m [[32m&apos;SOC2&apos;[39m[33m,[39m [32m&apos;HIPAA&apos;[39m][0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:232:42)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Compliance in Marketplace Operations ‚Ä∫ should enforce data residency for marketplace data

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 296 |[39m
     [90m 297 |[39m     test([32m&apos;should enforce data residency for marketplace data&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 298 |[39m       [36mconst[39m euTenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 299 |[39m         name[33m:[39m [32m&apos;EU Company&apos;[39m[33m,[39m
     [90m 300 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 301 |[39m         dataResidency[33m:[39m [32m&apos;eu-west-1&apos;[39m[33m,[39m[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:298:44)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Community Features with Enterprise Controls ‚Ä∫ should moderate reviews based on tenant policies

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 333 |[39m   describe([32m&apos;Community Features with Enterprise Controls&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 334 |[39m     test([32m&apos;should moderate reviews based on tenant policies&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 335 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 336 |[39m         name[33m:[39m [32m&apos;Strict Corp&apos;[39m[33m,[39m
     [90m 337 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 338 |[39m         policies[33m:[39m {[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:335:42)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Community Features with Enterprise Controls ‚Ä∫ should aggregate analytics per tenant

    TypeError: communityFeatures.trackUsage is not a function

    [0m [90m 374 |[39m       [36mfor[39m ([36mconst[39m tenantId [36mof[39m tenants) {
     [90m 375 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m&lt;[39m [35m10[39m[33m;[39m i[33m++[39m) {
    [31m[1m&gt;[22m[39m[90m 376 |[39m           [36mawait[39m communityFeatures[33m.[39mtrackUsage({
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 377 |[39m             tenantId[33m,[39m
     [90m 378 |[39m             serviceId[33m:[39m [32m&apos;popular-service&apos;[39m[33m,[39m
     [90m 379 |[39m             action[33m:[39m [32m&apos;api_call&apos;[39m[33m,[39m[0m

      at Object.trackUsage (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:376:35)

  ‚óè Marketplace + Enterprise Integration ‚Ä∫ Billing Integration ‚Ä∫ should handle marketplace billing through tenant billing system

    TypeError: tenantManager.createTenant is not a function

    [0m [90m 405 |[39m   describe([32m&apos;Billing Integration&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 406 |[39m     test([32m&apos;should handle marketplace billing through tenant billing system&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 407 |[39m       [36mconst[39m tenant [33m=[39m [36mawait[39m tenantManager[33m.[39mcreateTenant({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 408 |[39m         name[33m:[39m [32m&apos;Paying Customer&apos;[39m[33m,[39m
     [90m 409 |[39m         plan[33m:[39m [32m&apos;enterprise&apos;[39m[33m,[39m
     [90m 410 |[39m         billing[33m:[39m {[0m

      at Object.createTenant (mcp-local-setup/tests/integration/phase4/marketplace-enterprise.integration.test.js:407:42)

FAIL tests/integration/security/auth-flow.test.js
  ‚óè Security Authentication Flow Integration ‚Ä∫ Complete JWT Authentication Flow ‚Ä∫ should handle full JWT login and refresh flow

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Complete JWT Authentication Flow ‚Ä∫ should handle token expiration and renewal

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ OAuth Integration Flow ‚Ä∫ should handle complete OAuth flow with Google

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ OAuth Integration Flow ‚Ä∫ should handle OAuth errors gracefully

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ API Key Authentication Flow ‚Ä∫ should handle API key generation and validation flow

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Multi-Auth Strategy Flow ‚Ä∫ should handle multiple authentication methods in sequence

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Security Token Rotation ‚Ä∫ should handle secure token rotation

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Permission-based Access Control ‚Ä∫ should enforce permission-based access with API keys

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Permission-based Access Control ‚Ä∫ should handle JWT permissions

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Session Management Integration ‚Ä∫ should handle session lifecycle with token refresh

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Error Handling and Recovery ‚Ä∫ should handle authentication failures gracefully

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

  ‚óè Security Authentication Flow Integration ‚Ä∫ Error Handling and Recovery ‚Ä∫ should handle Redis failures in token refresh

    TypeError: TokenRefresh is not a constructor

    [0m [90m 24 |[39m     })[33m;[39m
     [90m 25 |[39m
    [31m[1m&gt;[22m[39m[90m 26 |[39m     tokenRefresh [33m=[39m [36mnew[39m [33mTokenRefresh[39m({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 27 |[39m       redis[33m:[39m mockRedisClient[33m,[39m
     [90m 28 |[39m       accessTokenExpiry[33m:[39m [35m3600[39m[33m,[39m
     [90m 29 |[39m       refreshTokenExpiry[33m:[39m [35m2592000[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/security/auth-flow.test.js:26:20)

FAIL mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js
  ‚óè RegistryManager ‚Ä∫ loadCatalog ‚Ä∫ should load and parse catalog successfully

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 51 |[39m       }[33m;[39m
     [90m 52 |[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m       fs[33m.[39mreadFile[33m.[39mmockResolvedValue([33mJSON[39m[33m.[39mstringify(mockCatalog))[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 54 |[39m       
     [90m 55 |[39m       [36mconst[39m catalog [33m=[39m [36mawait[39m registryManager[33m.[39mloadCatalog()[33m;[39m
     [90m 56 |[39m       [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:53:19)

  ‚óè RegistryManager ‚Ä∫ loadCatalog ‚Ä∫ should handle catalog file not found

    TypeError: fs.readFile.mockRejectedValue is not a function

    [0m [90m 60 |[39m
     [90m 61 |[39m     it([32m&apos;should handle catalog file not found&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 62 |[39m       fs[33m.[39mreadFile[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m&apos;ENOENT: no such file&apos;[39m))[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 63 |[39m       
     [90m 64 |[39m       [36mconst[39m catalog [33m=[39m [36mawait[39m registryManager[33m.[39mloadCatalog()[33m;[39m
     [90m 65 |[39m       [0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:62:19)

  ‚óè RegistryManager ‚Ä∫ loadCatalog ‚Ä∫ should handle invalid JSON in catalog

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 72 |[39m
     [90m 73 |[39m     it([32m&apos;should handle invalid JSON in catalog&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 74 |[39m       fs[33m.[39mreadFile[33m.[39mmockResolvedValue([32m&apos;invalid json{&apos;[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 75 |[39m       
     [90m 76 |[39m       [36mconst[39m catalog [33m=[39m [36mawait[39m registryManager[33m.[39mloadCatalog()[33m;[39m
     [90m 77 |[39m       [0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:74:19)

  ‚óè RegistryManager ‚Ä∫ loadProfile ‚Ä∫ should load default profile

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 91 |[39m       }[33m;[39m
     [90m 92 |[39m
    [31m[1m&gt;[22m[39m[90m 93 |[39m       fs[33m.[39mreadFile[33m.[39mmockResolvedValue([32m&apos;mocked yaml content&apos;[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 94 |[39m       yaml[33m.[39mload[33m.[39mmockReturnValue(mockProfile)[33m;[39m
     [90m 95 |[39m       
     [90m 96 |[39m       [36mconst[39m profile [33m=[39m [36mawait[39m registryManager[33m.[39mloadProfile()[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:93:19)

  ‚óè RegistryManager ‚Ä∫ loadProfile ‚Ä∫ should load specified profile

    TypeError: fs.readFile.mockResolvedValue is not a function

    [0m [90m 109 |[39m       }[33m;[39m
     [90m 110 |[39m
    [31m[1m&gt;[22m[39m[90m 111 |[39m       fs[33m.[39mreadFile[33m.[39mmockResolvedValue([32m&apos;mocked yaml content&apos;[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 112 |[39m       yaml[33m.[39mload[33m.[39mmockReturnValue(mockProfile)[33m;[39m
     [90m 113 |[39m       
     [90m 114 |[39m       [36mconst[39m profile [33m=[39m [36mawait[39m registryManager[33m.[39mloadProfile([32m&apos;development&apos;[39m)[33m;[39m[0m

      at Object.mockResolvedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:111:19)

  ‚óè RegistryManager ‚Ä∫ loadProfile ‚Ä∫ should handle profile not found

    TypeError: fs.readFile.mockRejectedValue is not a function

    [0m [90m 122 |[39m
     [90m 123 |[39m     it([32m&apos;should handle profile not found&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 124 |[39m       fs[33m.[39mreadFile[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m&apos;ENOENT&apos;[39m))[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 125 |[39m       
     [90m 126 |[39m       [36mconst[39m profile [33m=[39m [36mawait[39m registryManager[33m.[39mloadProfile([32m&apos;missing&apos;[39m)[33m;[39m
     [90m 127 |[39m       [0m

      at Object.mockRejectedValue (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:124:19)

  ‚óè RegistryManager ‚Ä∫ generateDockerCompose ‚Ä∫ should generate docker-compose configuration

    TypeError: Cannot read properties of undefined (reading &apos;find&apos;)

    [0m [90m 82 |[39m
     [90m 83 |[39m         [36mfor[39m ([36mconst[39m serviceId [36mof[39m enabledServices) {
    [31m[1m&gt;[22m[39m[90m 84 |[39m             [36mconst[39m server [33m=[39m catalog[33m.[39mservers[33m.[39mfind(s [33m=&gt;[39m s[33m.[39mid [33m===[39m serviceId)[33m;[39m
     [90m    |[39m                                            [31m[1m^[22m[39m
     [90m 85 |[39m             [36mif[39m ([33m![39mserver) {
     [90m 86 |[39m                 console[33m.[39mwarn([32m`Service ${serviceId} not found in catalog`[39m)[33m;[39m
     [90m 87 |[39m                 [36mcontinue[39m[33m;[39m[0m

      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:174:7)

  ‚óè RegistryManager ‚Ä∫ generateDockerCompose ‚Ä∫ should filter services based on profile

    TypeError: Cannot read properties of undefined (reading &apos;find&apos;)

    [0m [90m 82 |[39m
     [90m 83 |[39m         [36mfor[39m ([36mconst[39m serviceId [36mof[39m enabledServices) {
    [31m[1m&gt;[22m[39m[90m 84 |[39m             [36mconst[39m server [33m=[39m catalog[33m.[39mservers[33m.[39mfind(s [33m=&gt;[39m s[33m.[39mid [33m===[39m serviceId)[33m;[39m
     [90m    |[39m                                            [31m[1m^[22m[39m
     [90m 85 |[39m             [36mif[39m ([33m![39mserver) {
     [90m 86 |[39m                 console[33m.[39mwarn([32m`Service ${serviceId} not found in catalog`[39m)[33m;[39m
     [90m 87 |[39m                 [36mcontinue[39m[33m;[39m[0m

      at RegistryManager.find [as generateDockerCompose] (mcp-local-setup/scripts/registry-manager.js:84:44)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:225:7)

  ‚óè RegistryManager ‚Ä∫ updateService ‚Ä∫ should update service in catalog

    TypeError: registryManager.updateService is not a function

    [0m [90m 251 |[39m       }[33m;[39m
     [90m 252 |[39m
    [31m[1m&gt;[22m[39m[90m 253 |[39m       [36mawait[39m registryManager[33m.[39mupdateService(updatedService)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 254 |[39m
     [90m 255 |[39m       expect(fs[33m.[39mwriteFile)[33m.[39mtoHaveBeenCalledWith(
     [90m 256 |[39m         registryManager[33m.[39mcatalogPath[33m,[39m[0m

      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:253:29)

  ‚óè RegistryManager ‚Ä∫ updateService ‚Ä∫ should add new service to catalog

    TypeError: registryManager.updateService is not a function

    [0m [90m 272 |[39m       }[33m;[39m
     [90m 273 |[39m
    [31m[1m&gt;[22m[39m[90m 274 |[39m       [36mawait[39m registryManager[33m.[39mupdateService(newService)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 275 |[39m
     [90m 276 |[39m       [36mconst[39m writtenData [33m=[39m [33mJSON[39m[33m.[39mparse(fs[33m.[39mwriteFile[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m1[39m])[33m;[39m
     [90m 277 |[39m       expect(writtenData[33m.[39mservices[[32m&apos;new-service&apos;[39m])[33m.[39mtoEqual(newService)[33m;[39m[0m

      at Object.updateService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:274:29)

  ‚óè RegistryManager ‚Ä∫ removeService ‚Ä∫ should remove service from catalog

    TypeError: registryManager.removeService is not a function

    [0m [90m 291 |[39m       fs[33m.[39mwriteFile [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 292 |[39m
    [31m[1m&gt;[22m[39m[90m 293 |[39m       [36mawait[39m registryManager[33m.[39mremoveService([32m&apos;service1&apos;[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 294 |[39m
     [90m 295 |[39m       [36mconst[39m writtenData [33m=[39m [33mJSON[39m[33m.[39mparse(fs[33m.[39mwriteFile[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m1[39m])[33m;[39m
     [90m 296 |[39m       expect(writtenData[33m.[39mservices[33m.[39mservice1)[33m.[39mtoBeUndefined()[33m;[39m[0m

      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:293:29)

  ‚óè RegistryManager ‚Ä∫ removeService ‚Ä∫ should handle removing non-existent service

    TypeError: registryManager.removeService is not a function

    [0m [90m 306 |[39m       fs[33m.[39mwriteFile [33m=[39m jest[33m.[39mfn()[33m.[39mmockResolvedValue(undefined)[33m;[39m
     [90m 307 |[39m
    [31m[1m&gt;[22m[39m[90m 308 |[39m       [36mawait[39m registryManager[33m.[39mremoveService([32m&apos;non-existent&apos;[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 309 |[39m
     [90m 310 |[39m       expect(fs[33m.[39mwriteFile)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 311 |[39m     })[33m;[39m[0m

      at Object.removeService (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:308:29)

  ‚óè RegistryManager ‚Ä∫ validateCatalog ‚Ä∫ should validate catalog structure

    TypeError: registryManager.validateCatalog is not a function

    [0m [90m 327 |[39m       }[33m;[39m
     [90m 328 |[39m
    [31m[1m&gt;[22m[39m[90m 329 |[39m       [36mconst[39m result [33m=[39m registryManager[33m.[39mvalidateCatalog(validCatalog)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 330 |[39m       expect(result[33m.[39mvalid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 331 |[39m       expect(result[33m.[39merrors)[33m.[39mtoEqual([])[33m;[39m
     [90m 332 |[39m     })[33m;[39m[0m

      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:329:38)

  ‚óè RegistryManager ‚Ä∫ validateCatalog ‚Ä∫ should detect missing required fields

    TypeError: registryManager.validateCatalog is not a function

    [0m [90m 342 |[39m       }[33m;[39m
     [90m 343 |[39m
    [31m[1m&gt;[22m[39m[90m 344 |[39m       [36mconst[39m result [33m=[39m registryManager[33m.[39mvalidateCatalog(invalidCatalog)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 345 |[39m       expect(result[33m.[39mvalid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 346 |[39m       expect(result[33m.[39merrors)[33m.[39mtoContain([32m&apos;Service service1 missing required field: name&apos;[39m)[33m;[39m
     [90m 347 |[39m       expect(result[33m.[39merrors)[33m.[39mtoContain([32m&apos;Service service1 missing required field: version&apos;[39m)[33m;[39m[0m

      at Object.validateCatalog (mcp-local-setup/tests/unit/scripts-registry-manager.unit.test.js:344:38)

FAIL tests/unit/monitoring/logging/formatters.test.js
  ‚óè LogFormatters ‚Ä∫ jsonFormat ‚Ä∫ should format logs as JSON

    TypeError: LogFormatters.jsonFormat is not a function

    [0m [90m 79 |[39m   describe([32m&apos;jsonFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 80 |[39m     it([32m&apos;should format logs as JSON&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 81 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mjsonFormat()[33m;[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m 82 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 83 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 84 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[33m,[39m[0m

      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:81:39)

  ‚óè LogFormatters ‚Ä∫ jsonFormat ‚Ä∫ should handle errors in JSON format

    TypeError: LogFormatters.jsonFormat is not a function

    [0m [90m  97 |[39m
     [90m  98 |[39m     it([32m&apos;should handle errors in JSON format&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m  99 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mjsonFormat()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 100 |[39m       [36mconst[39m error [33m=[39m [36mnew[39m [33mError[39m([32m&apos;Test error&apos;[39m)[33m;[39m
     [90m 101 |[39m       
     [90m 102 |[39m       [36mconst[39m logInfo [33m=[39m {[0m

      at Object.jsonFormat (tests/unit/monitoring/logging/formatters.test.js:99:39)

  ‚óè LogFormatters ‚Ä∫ prettyFormat ‚Ä∫ should format logs in human-readable format

    TypeError: LogFormatters.prettyFormat is not a function

    [0m [90m 117 |[39m   describe([32m&apos;prettyFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 118 |[39m     it([32m&apos;should format logs in human-readable format&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 119 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mprettyFormat()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 120 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 121 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 122 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[33m,[39m[0m

      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:119:39)

  ‚óè LogFormatters ‚Ä∫ prettyFormat ‚Ä∫ should colorize output when enabled

    TypeError: LogFormatters.prettyFormat is not a function

    [0m [90m 133 |[39m
     [90m 134 |[39m     it([32m&apos;should colorize output when enabled&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 135 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mprettyFormat({ colorize[33m:[39m [36mtrue[39m })[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 136 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 137 |[39m         level[33m:[39m [32m&apos;error&apos;[39m[33m,[39m
     [90m 138 |[39m         message[33m:[39m [32m&apos;Error message&apos;[39m[33m,[39m[0m

      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:135:39)

  ‚óè LogFormatters ‚Ä∫ prettyFormat ‚Ä∫ should include metadata when present

    TypeError: LogFormatters.prettyFormat is not a function

    [0m [90m 150 |[39m
     [90m 151 |[39m     it([32m&apos;should include metadata when present&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 152 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mprettyFormat()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 153 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 154 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 155 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[33m,[39m[0m

      at Object.prettyFormat (tests/unit/monitoring/logging/formatters.test.js:152:39)

  ‚óè LogFormatters ‚Ä∫ compactFormat ‚Ä∫ should format logs in compact single-line format

    TypeError: LogFormatters.compactFormat is not a function

    [0m [90m 169 |[39m   describe([32m&apos;compactFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 170 |[39m     it([32m&apos;should format logs in compact single-line format&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 171 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mcompactFormat()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 172 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 173 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 174 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[33m,[39m[0m

      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:171:39)

  ‚óè LogFormatters ‚Ä∫ compactFormat ‚Ä∫ should truncate long messages

    TypeError: LogFormatters.compactFormat is not a function

    [0m [90m 187 |[39m
     [90m 188 |[39m     it([32m&apos;should truncate long messages&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 189 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mcompactFormat({ maxLength[33m:[39m [35m50[39m })[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 190 |[39m       [36mconst[39m longMessage [33m=[39m [32m&apos;A&apos;[39m[33m.[39mrepeat([35m100[39m)[33m;[39m
     [90m 191 |[39m       
     [90m 192 |[39m       [36mconst[39m logInfo [33m=[39m {[0m

      at Object.compactFormat (tests/unit/monitoring/logging/formatters.test.js:189:39)

  ‚óè LogFormatters ‚Ä∫ logstashFormat ‚Ä∫ should format logs for Logstash ingestion

    expect(received).toBe(expected) // Object.is equality

    Expected: &quot;info&quot;
    Received: undefined

    [0m [90m 221 |[39m       expect(parsed[[32m&apos;@version&apos;[39m])[33m.[39mtoBe([32m&apos;1&apos;[39m)[33m;[39m
     [90m 222 |[39m       expect(parsed[33m.[39mmessage)[33m.[39mtoBe([32m&apos;Test message&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 223 |[39m       expect(parsed[33m.[39mseverity)[33m.[39mtoBe([32m&apos;info&apos;[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 224 |[39m       expect(parsed[33m.[39mhost)[33m.[39mtoBe([32m&apos;test-host&apos;[39m)[33m;[39m
     [90m 225 |[39m       expect(parsed[33m.[39mservice)[33m.[39mtoBe([32m&apos;test-service&apos;[39m)[33m;[39m
     [90m 226 |[39m     })[33m;[39m[0m

      at Object.toBe (tests/unit/monitoring/logging/formatters.test.js:223:31)

  ‚óè LogFormatters ‚Ä∫ logstashFormat ‚Ä∫ should add fields from metadata

    TypeError: Cannot read properties of undefined (reading &apos;userId&apos;)

    [0m [90m 240 |[39m       [36mconst[39m parsed [33m=[39m [33mJSON[39m[33m.[39mparse(formatted[[33mSymbol[39m[33m.[39m[36mfor[39m([32m&apos;message&apos;[39m)])[33m;[39m
     [90m 241 |[39m
    [31m[1m&gt;[22m[39m[90m 242 |[39m       expect(parsed[33m.[39mfields[33m.[39muserId)[33m.[39mtoBe([35m123[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 243 |[39m       expect(parsed[33m.[39mfields[33m.[39mrequestId)[33m.[39mtoBe([32m&apos;req-456&apos;[39m)[33m;[39m
     [90m 244 |[39m       expect(parsed[33m.[39mtags)[33m.[39mtoEqual([[32m&apos;api&apos;[39m[33m,[39m [32m&apos;v2&apos;[39m])[33m;[39m
     [90m 245 |[39m     })[33m;[39m[0m

      at Object.userId (tests/unit/monitoring/logging/formatters.test.js:242:28)

  ‚óè LogFormatters ‚Ä∫ customFormat ‚Ä∫ should allow custom formatting function

    TypeError: LogFormatters.customFormat is not a function

    [0m [90m 252 |[39m       }[33m;[39m
     [90m 253 |[39m
    [31m[1m&gt;[22m[39m[90m 254 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mcustomFormat(customFormatter)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 255 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 256 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m
     [90m 257 |[39m         message[33m:[39m [32m&apos;Test message&apos;[39m[0m

      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:254:39)

  ‚óè LogFormatters ‚Ä∫ customFormat ‚Ä∫ should support template strings

    TypeError: LogFormatters.customFormat is not a function

    [0m [90m 266 |[39m     it([32m&apos;should support template strings&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 267 |[39m       [36mconst[39m template [33m=[39m [32m&apos;{{timestamp}} [{{level}}] {{service}}: {{message}}&apos;[39m[33m;[39m
    [31m[1m&gt;[22m[39m[90m 268 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mcustomFormat(template)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 269 |[39m       
     [90m 270 |[39m       [36mconst[39m logInfo [33m=[39m {
     [90m 271 |[39m         level[33m:[39m [32m&apos;info&apos;[39m[33m,[39m[0m

      at Object.customFormat (tests/unit/monitoring/logging/formatters.test.js:268:39)

  ‚óè LogFormatters ‚Ä∫ multiFormat ‚Ä∫ should combine multiple formatters

    TypeError: LogFormatters.multiFormat is not a function

    [0m [90m 284 |[39m   describe([32m&apos;multiFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 285 |[39m     it([32m&apos;should combine multiple formatters&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 286 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mmultiFormat([
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 287 |[39m         winston[33m.[39mformat[33m.[39mtimestamp()[33m,[39m
     [90m 288 |[39m         winston[33m.[39mformat[33m.[39merrors({ stack[33m:[39m [36mtrue[39m })[33m,[39m
     [90m 289 |[39m         winston[33m.[39mformat[33m.[39mjson()[0m

      at Object.multiFormat (tests/unit/monitoring/logging/formatters.test.js:286:39)

  ‚óè LogFormatters ‚Ä∫ filterFormat ‚Ä∫ should filter logs based on criteria

    TypeError: LogFormatters.filterFormat is not a function

    [0m [90m 304 |[39m   describe([32m&apos;filterFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 305 |[39m     it([32m&apos;should filter logs based on criteria&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 306 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mfilterFormat({
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 307 |[39m         levels[33m:[39m [[32m&apos;error&apos;[39m[33m,[39m [32m&apos;warn&apos;[39m][33m,[39m
     [90m 308 |[39m         excludeMessages[33m:[39m [[35m/debug/i[39m]
     [90m 309 |[39m       })[33m;[39m[0m

      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:306:39)

  ‚óè LogFormatters ‚Ä∫ filterFormat ‚Ä∫ should filter based on metadata fields

    TypeError: LogFormatters.filterFormat is not a function

    [0m [90m 330 |[39m
     [90m 331 |[39m     it([32m&apos;should filter based on metadata fields&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 332 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mfilterFormat({
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 333 |[39m         metadata[33m:[39m {
     [90m 334 |[39m           environment[33m:[39m [32m&apos;production&apos;[39m[33m,[39m
     [90m 335 |[39m           userId[33m:[39m (value) [33m=&gt;[39m value [33m&gt;[39m [35m100[39m[0m

      at Object.filterFormat (tests/unit/monitoring/logging/formatters.test.js:332:39)

  ‚óè LogFormatters ‚Ä∫ maskFormat ‚Ä∫ should mask sensitive fields

    TypeError: LogFormatters.maskFormat is not a function

    [0m [90m 366 |[39m   describe([32m&apos;maskFormat&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 367 |[39m     it([32m&apos;should mask sensitive fields&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 368 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mmaskFormat({
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 369 |[39m         fields[33m:[39m [[32m&apos;password&apos;[39m[33m,[39m [32m&apos;token&apos;[39m[33m,[39m [32m&apos;ssn&apos;[39m][33m,[39m
     [90m 370 |[39m         patterns[33m:[39m [[35m/\b\d{3}-\d{2}-\d{4}\b/g[39m] [90m// SSN pattern[39m
     [90m 371 |[39m       })[33m;[39m[0m

      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:368:39)

  ‚óè LogFormatters ‚Ä∫ maskFormat ‚Ä∫ should handle nested fields

    TypeError: LogFormatters.maskFormat is not a function

    [0m [90m 388 |[39m
     [90m 389 |[39m     it([32m&apos;should handle nested fields&apos;[39m[33m,[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 390 |[39m       [36mconst[39m formatter [33m=[39m [33mLogFormatters[39m[33m.[39mmaskFormat({
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 391 |[39m         fields[33m:[39m [[32m&apos;user.password&apos;[39m[33m,[39m [32m&apos;auth.token&apos;[39m]
     [90m 392 |[39m       })[33m;[39m
     [90m 393 |[39m[0m

      at Object.maskFormat (tests/unit/monitoring/logging/formatters.test.js:390:39)

FAIL mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js
  ‚óè Monitoring + Cloud Integration ‚Ä∫ AWS Monitoring Integration ‚Ä∫ should collect metrics from AWS-deployed services

    Environment must have name and region

    [0m [90m 330 |[39m
     [90m 331 |[39m     [36mif[39m ([33m![39menvironment[33m.[39mname [33m||[39m [33m![39menvironment[33m.[39mregion) {
    [31m[1m&gt;[22m[39m[90m 332 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Environment must have name and region&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 333 |[39m     }
     [90m 334 |[39m
     [90m 335 |[39m     [36mconst[39m deployment [33m=[39m {[0m

      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)
      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:34:46)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ AWS Monitoring Integration ‚Ä∫ should trigger alerts for AWS service anomalies

    TypeError: alertingSystem.addChannel is not a function

    [0m [90m 55 |[39m       }[33m;[39m
     [90m 56 |[39m       
    [31m[1m&gt;[22m[39m[90m 57 |[39m       [36mawait[39m alertingSystem[33m.[39maddChannel([32m&apos;test-channel&apos;[39m[33m,[39m alertChannel)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 58 |[39m       
     [90m 59 |[39m       [90m// Create alert rule for high CPU[39m
     [90m 60 |[39m       [36mawait[39m alertingSystem[33m.[39mcreateRule({[0m

      at Object.addChannel (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:57:28)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ GCP Monitoring Integration ‚Ä∫ should collect metrics from GCP Cloud Run services

    Environment must have name and projectId

    [0m [90m 533 |[39m
     [90m 534 |[39m     [36mif[39m ([33m![39menvironment[33m.[39mname [33m||[39m [33m![39menvironment[33m.[39mprojectId) {
    [31m[1m&gt;[22m[39m[90m 535 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Environment must have name and projectId&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 536 |[39m     }
     [90m 537 |[39m
     [90m 538 |[39m     [36mconst[39m deployment [33m=[39m {[0m

      at GCPDeployment.deploy (mcp-local-setup/deploy/gcp/deployment.js:535:13)
      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:89:46)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ GCP Monitoring Integration ‚Ä∫ should integrate with GCP monitoring APIs

    TypeError: gcpDeployment.getMetrics is not a function

    [0m [90m 105 |[39m
     [90m 106 |[39m     test([32m&apos;should integrate with GCP monitoring APIs&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
    [31m[1m&gt;[22m[39m[90m 107 |[39m       [36mconst[39m gcpMetrics [33m=[39m [36mawait[39m gcpDeployment[33m.[39mgetMetrics([32m&apos;test-service&apos;[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 108 |[39m       
     [90m 109 |[39m       [90m// Export to Prometheus format[39m
     [90m 110 |[39m       [36mconst[39m prometheusMetrics [33m=[39m [36mawait[39m metricsCollector[33m.[39mexportMetrics(gcpMetrics)[33m;[39m[0m

      at Object.getMetrics (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:107:46)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Azure Monitoring Integration ‚Ä∫ should collect metrics from Azure Container Instances

    Environment must have name, subscriptionId, and resourceGroup

    [0m [90m 483 |[39m
     [90m 484 |[39m     [36mif[39m ([33m![39menvironment[33m.[39mname [33m||[39m [33m![39menvironment[33m.[39msubscriptionId [33m||[39m [33m![39menvironment[33m.[39mresourceGroup) {
    [31m[1m&gt;[22m[39m[90m 485 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Environment must have name, subscriptionId, and resourceGroup&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 486 |[39m     }
     [90m 487 |[39m
     [90m 488 |[39m     [36mconst[39m deployment [33m=[39m {[0m

      at AzureDeployment.deploy (mcp-local-setup/deploy/azure/deployment.js:485:13)
      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:120:48)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Cross-Cloud Monitoring ‚Ä∫ should aggregate metrics across multiple cloud providers

    Environment must have name and region

    [0m [90m 330 |[39m
     [90m 331 |[39m     [36mif[39m ([33m![39menvironment[33m.[39mname [33m||[39m [33m![39menvironment[33m.[39mregion) {
    [31m[1m&gt;[22m[39m[90m 332 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;Environment must have name and region&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 333 |[39m     }
     [90m 334 |[39m
     [90m 335 |[39m     [36mconst[39m deployment [33m=[39m {[0m

      at AWSDeployment.deploy (mcp-local-setup/deploy/aws/deployment.js:332:13)
      at Object.deploy (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:141:46)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Cross-Cloud Monitoring ‚Ä∫ should create unified dashboards for multi-cloud deployments

    TypeError: metricsCollector.createDashboard is not a function

    [0m [90m 179 |[39m       }[33m;[39m
     [90m 180 |[39m
    [31m[1m&gt;[22m[39m[90m 181 |[39m       [36mconst[39m dashboard [33m=[39m [36mawait[39m metricsCollector[33m.[39mcreateDashboard(dashboardConfig)[33m;[39m
     [90m     |[39m                                                [31m[1m^[22m[39m
     [90m 182 |[39m       
     [90m 183 |[39m       expect(dashboard)[33m.[39mtoHaveProperty([32m&apos;url&apos;[39m)[33m;[39m
     [90m 184 |[39m       expect(dashboard[33m.[39mpanels)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m[0m

      at Object.createDashboard (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:181:48)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Alert Integration Across Clouds ‚Ä∫ should correlate alerts from different cloud providers

    TypeError: alertingSystem.on is not a function

    [0m [90m 192 |[39m       
     [90m 193 |[39m       [90m// Setup alert collection[39m
    [31m[1m&gt;[22m[39m[90m 194 |[39m       alertingSystem[33m.[39mon([32m&apos;alert&apos;[39m[33m,[39m (alert) [33m=&gt;[39m alerts[33m.[39mpush(alert))[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 195 |[39m
     [90m 196 |[39m       [90m// Simulate alerts from different clouds[39m
     [90m 197 |[39m       [36mawait[39m alertingSystem[33m.[39mprocessCloudAlert({[0m

      at Object.on (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:194:22)

  ‚óè Monitoring + Cloud Integration ‚Ä∫ Performance Monitoring ‚Ä∫ should track deployment performance metrics

    TypeError: metricsCollector.trackDeployment is not a function

    [0m [90m 229 |[39m       [90m// Track deployment performance[39m
     [90m 230 |[39m       [36mfor[39m ([36mconst[39m [cloud[33m,[39m metrics] [36mof[39m [33mObject[39m[33m.[39mentries(deploymentMetrics)) {
    [31m[1m&gt;[22m[39m[90m 231 |[39m         [36mawait[39m metricsCollector[33m.[39mtrackDeployment(cloud[33m,[39m metrics)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 232 |[39m       }
     [90m 233 |[39m
     [90m 234 |[39m       [36mconst[39m performanceReport [33m=[39m [36mawait[39m metricsCollector[33m.[39mgetPerformanceReport()[33m;[39m[0m

      at Object.trackDeployment (mcp-local-setup/tests/integration/phase4/monitoring-cloud.integration.test.js:231:32)

FAIL tests/performance/monitoring/metrics-load.test.js
  ‚óè Metrics Performance Under Load ‚Ä∫ High-Frequency Metric Updates ‚Ä∫ should handle 10k metrics/second

    Added label &quot;status&quot; is not included in initial labelset: [ &apos;method&apos;, &apos;route&apos;, &apos;status_code&apos;, &apos;status_class&apos; ]

    [0m [90m 40 |[39m       [90m// Generate metrics at high frequency[39m
     [90m 41 |[39m       [36mwhile[39m ([33mDate[39m[33m.[39mnow() [33m-[39m startTime [33m&lt;[39m duration [33m&amp;&amp;[39m operations [33m&lt;[39m targetOps) {
    [31m[1m&gt;[22m[39m[90m 42 |[39m         httpExporter[33m.[39mmetrics[33m.[39mhttpRequestsTotal[33m.[39minc({
     [90m    |[39m                                                [31m[1m^[22m[39m
     [90m 43 |[39m           method[33m:[39m [[32m&apos;GET&apos;[39m[33m,[39m [32m&apos;POST&apos;[39m[33m,[39m [32m&apos;PUT&apos;[39m[33m,[39m [32m&apos;DELETE&apos;[39m][operations [33m%[39m [35m4[39m][33m,[39m
     [90m 44 |[39m           status[33m:[39m [[32m&apos;200&apos;[39m[33m,[39m [32m&apos;201&apos;[39m[33m,[39m [32m&apos;400&apos;[39m[33m,[39m [32m&apos;500&apos;[39m][operations [33m%[39m [35m4[39m]
     [90m 45 |[39m         })[33m;[39m[0m

      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)
      at Counter.incWithoutExemplar (node_modules/prom-client/lib/counter.js:44:4)
      at Object.inc (tests/performance/monitoring/metrics-load.test.js:42:48)

  ‚óè Metrics Performance Under Load ‚Ä∫ High-Frequency Metric Updates ‚Ä∫ should handle concurrent metric updates

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Memory Efficiency ‚Ä∫ should maintain stable memory usage with high cardinality

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Memory Efficiency ‚Ä∫ should handle metric lifecycle efficiently

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Metric Collection Performance ‚Ä∫ should efficiently serialize large numbers of metrics

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Metric Collection Performance ‚Ä∫ should handle metric endpoint under load

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Histogram Performance ‚Ä∫ should efficiently calculate percentiles

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Histogram Performance ‚Ä∫ should handle multiple histogram updates concurrently

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Label Cardinality Performance ‚Ä∫ should handle high label cardinality efficiently

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Real-world Load Simulation ‚Ä∫ should handle realistic mixed workload

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

  ‚óè Metrics Performance Under Load ‚Ä∫ Stress Testing ‚Ä∫ should remain stable under extreme load

    A metric with the name mcp_mcp_active_connections has already been registered.

    [0m [90m 51 |[39m   _initializeMCPMetrics() {
     [90m 52 |[39m     [90m// Active MCP connections[39m
    [31m[1m&gt;[22m[39m[90m 53 |[39m     [36mthis[39m[33m.[39mmetrics[33m.[39mmcpActiveConnections [33m=[39m [36mnew[39m client[33m.[39m[33mGauge[39m({
     [90m    |[39m                                         [31m[1m^[22m[39m
     [90m 54 |[39m       name[33m:[39m [32m`${this.options.prefix}mcp_active_connections`[39m[33m,[39m
     [90m 55 |[39m       help[33m:[39m [32m&apos;Number of active MCP connections&apos;[39m[33m,[39m
     [90m 56 |[39m       labelNames[33m:[39m [[32m&apos;transport&apos;[39m[33m,[39m [32m&apos;client_type&apos;[39m[33m,[39m [32m&apos;version&apos;[39m][33m,[39m[0m

      at Registry.registerMetric (node_modules/prom-client/lib/registry.js:103:10)
      at new Metric (node_modules/prom-client/lib/metric.js:64:13)
      at new Gauge (node_modules/prom-client/lib/gauge.js:21:3)
      at CustomMetrics._initializeMCPMetrics (monitoring/metrics/custom-metrics.js:53:41)
      at CustomMetrics._initializeMCPMetrics [as _initializeMetrics] (monitoring/metrics/custom-metrics.js:24:10)
      at new _initializeMetrics (monitoring/metrics/custom-metrics.js:16:10)
      at Object.&lt;anonymous&gt; (tests/performance/monitoring/metrics-load.test.js:21:21)

FAIL mcp-local-setup/tests/integration/profile-switching.integration.test.js
  ‚óè Profile Switching Integration Tests ‚Ä∫ Profile Creation ‚Ä∫ should handle profile name conflicts

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: &quot;/home/jenner/.mcp-platform/profiles/duplicate-profile.yml&quot;

    [0m [90m 84 |[39m
     [90m 85 |[39m       [90m// Try to create duplicate[39m
    [31m[1m&gt;[22m[39m[90m 86 |[39m       [36mawait[39m expect(createTestProfile([[32m&apos;service2&apos;[39m][33m,[39m { name[33m:[39m profileName }))
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 87 |[39m         [33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 88 |[39m     })[33m;[39m
     [90m 89 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (mcp-local-setup/tests/integration/profile-switching.integration.test.js:86:13)

  ‚óè Profile Switching Integration Tests ‚Ä∫ Profile Creation ‚Ä∫ should validate profile yaml structure

    YAMLException: bad indentation of a mapping entry (1:14)

     1 | invalid: yaml: structure:
    ------------------^

    [0m [90m  97 |[39m
     [90m  98 |[39m       [90m// Try to load the profile[39m
    [31m[1m&gt;[22m[39m[90m  99 |[39m       [36mawait[39m expect(yaml[33m.[39mload([36mawait[39m fs[33m.[39mreadFile(profilePath[33m,[39m [32m&apos;utf8&apos;[39m)))
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 100 |[39m         [33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 101 |[39m     })[33m;[39m
     [90m 102 |[39m   })[33m;[39m[0m

      at generateError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:183:10)
      at throwError (mcp-local-setup/node_modules/js-yaml/lib/loader.js:187:9)
      at readBlockMapping (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1182:7)
      at composeNode (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1441:12)
      at readDocument (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1625:3)
      at loadDocuments (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1688:5)
      at Object.load (mcp-local-setup/node_modules/js-yaml/lib/loader.js:1714:19)
      at Object.load (mcp-local-setup/tests/integration/profile-switching.integration.test.js:99:25)

  ‚óè Profile Switching Integration Tests ‚Ä∫ Profile Switching ‚Ä∫ should update docker-compose when switching profiles

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 159 |[39m
     [90m 160 |[39m       [36mconst[39m generated [33m=[39m [36mawait[39m generateCompose()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 161 |[39m       expect(generated)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 162 |[39m
     [90m 163 |[39m       [90m// Docker compose should now contain services from profile1[39m
     [90m 164 |[39m       [36mconst[39m composePath [33m=[39m path[33m.[39mjoin([33mMCP_HOME[39m[33m,[39m [32m&apos;docker-compose.yml&apos;[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/profile-switching.integration.test.js:161:25)

FAIL mcp-local-setup/tests/integration/backup.integration.test.js
  ‚óè Backup &amp; Restore Integration Tests ‚Ä∫ Selective Service Backup ‚Ä∫ should handle incremental backups

    expect(received).toBeLessThan(expected)

    Expected: &lt; 993
    Received:   993

    [0m [90m 155 |[39m             [36mconst[39m metadata [33m=[39m [36mawait[39m backup[33m.[39mgetBackupMetadata(incrementalId)[33m;[39m
     [90m 156 |[39m             expect(metadata[33m.[39mtype)[33m.[39mtoBe([32m&apos;incremental&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 157 |[39m             expect(metadata[33m.[39msize)[33m.[39mtoBeLessThan(metadata[33m.[39msize)[33m;[39m [90m// Should be smaller than full[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 158 |[39m         })[33m;[39m
     [90m 159 |[39m     })[33m;[39m
     [90m 160 |[39m[0m

      at Object.toBeLessThan (mcp-local-setup/tests/integration/backup.integration.test.js:157:35)

  ‚óè Backup &amp; Restore Integration Tests ‚Ä∫ Scheduled Backups ‚Ä∫ should list backup schedules

    expect(received).toBeInstanceOf(expected)

    Expected constructor: Date

    Received value has no prototype
    Received value: null

    [0m [90m 182 |[39m             expect(testSchedule[33m.[39mcronExpression)[33m.[39mtoBe([32m&apos;0 2 * * *&apos;[39m)[33m;[39m
     [90m 183 |[39m             expect(testSchedule[33m.[39menabled)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 184 |[39m             expect(testSchedule[33m.[39mnextRun)[33m.[39mtoBeInstanceOf([33mDate[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 185 |[39m         })[33m;[39m
     [90m 186 |[39m
     [90m 187 |[39m         it([32m&apos;should update backup schedule&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBeInstanceOf (mcp-local-setup/tests/integration/backup.integration.test.js:184:42)

  ‚óè Backup &amp; Restore Integration Tests ‚Ä∫ Backup Storage Management ‚Ä∫ should delete specific backup

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 296 |[39m         it([32m&apos;should delete specific backup&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m 297 |[39m             [36mconst[39m deleted [33m=[39m [36mawait[39m backup[33m.[39mdeleteBackup(testBackupId)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 298 |[39m             expect(deleted)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 299 |[39m
     [90m 300 |[39m             [36mawait[39m expect(backup[33m.[39mgetBackupMetadata(testBackupId))
     [90m 301 |[39m                 [33m.[39mrejects[33m.[39mtoThrow([32m&apos;Backup not found&apos;[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/backup.integration.test.js:298:29)

  ‚óè Backup &amp; Restore Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should validate backup options

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: &quot;backup-2025-07-24T22-52-02-438Z-7bfbf9bc&quot;

    [0m [90m 321 |[39m             }[33m;[39m
     [90m 322 |[39m
    [31m[1m&gt;[22m[39m[90m 323 |[39m             [36mawait[39m expect(backup[33m.[39mcreateBackup(invalidOptions))
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 324 |[39m                 [33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 325 |[39m         })[33m;[39m
     [90m 326 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (mcp-local-setup/tests/integration/backup.integration.test.js:323:19)

FAIL tests/integration/phase6/production-deployment.test.js
  ‚óè Production Deployment Integration ‚Ä∫ Production request flow with all components

    Added label &quot;status&quot; is not included in initial labelset: []

    [0m [90m 149 |[39m
     [90m 150 |[39m       requestLogger[33m.[39merror([32m&apos;Request failed&apos;[39m[33m,[39m error)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 151 |[39m       requestTimer({ status[33m:[39m [35m500[39m })[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 152 |[39m     } [36mfinally[39m {
     [90m 153 |[39m       transaction[33m.[39mfinish()[33m;[39m
     [90m 154 |[39m     }[0m

      at validateLabel (node_modules/prom-client/lib/validation.js:20:10)
      at node_modules/prom-client/lib/histogram.js:235:3
      at Histogram.observeWithoutExemplar (node_modules/prom-client/lib/histogram.js:74:54)
      at node_modules/prom-client/lib/histogram.js:185:9
      at Object.requestTimer (tests/integration/phase6/production-deployment.test.js:151:7)

  ‚óè Production Deployment Integration ‚Ä∫ Production monitoring and alerting

    ReferenceError: Cannot access &apos;health&apos; before initialization

    [0m [90m 181 |[39m
     [90m 182 |[39m     [90m// Check health degradation[39m
    [31m[1m&gt;[22m[39m[90m 183 |[39m     [36mconst[39m health [33m=[39m [36mawait[39m health[33m.[39mcheckHealth()[33m;[39m
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 184 |[39m     expect(health[33m.[39mstatus)[33m.[39mtoBe([32m&apos;degraded&apos;[39m)[33m;[39m
     [90m 185 |[39m
     [90m 186 |[39m     [90m// Verify metrics[39m[0m

      at Object.&lt;anonymous&gt; (tests/integration/phase6/production-deployment.test.js:183:20)

FAIL mcp-local-setup/tests/unit/cli-mcp-cli.unit.test.js
  ‚óè MCP CLI Command Parsing ‚Ä∫ CLI Initialization ‚Ä∫ should set up correct environment variables

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ CLI Initialization ‚Ä∫ should define all required command paths

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Utility Functions ‚Ä∫ fileExists should check file accessibility

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Utility Functions ‚Ä∫ runCommand should spawn process with correct arguments

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Utility Functions ‚Ä∫ runCommand should handle process errors

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Command Structure ‚Ä∫ should parse version command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Command Structure ‚Ä∫ should parse help command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Service Commands ‚Ä∫ should validate service start command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Service Commands ‚Ä∫ should validate service stop command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Service Commands ‚Ä∫ should validate service restart command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Profile Commands ‚Ä∫ should handle profile list command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Profile Commands ‚Ä∫ should handle profile switch command

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Profile Commands ‚Ä∫ should validate profile creation

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Error Handling ‚Ä∫ should handle missing docker-compose file

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Error Handling ‚Ä∫ should handle invalid profile names

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

  ‚óè MCP CLI Command Parsing ‚Ä∫ Error Handling ‚Ä∫ should handle service command failures gracefully

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/cli/mcp-cli.js: Expecting Unicode escape sequence \uXXXX. (603:26)

    [0m [90m 601 |[39m             console[33m.[39mlog([32m`\nMCP_HOME: ${MCP_HOME}`[39m)[33m;[39m
     [90m 602 |[39m             console[33m.[39mlog([32m`Config file: ${path.join(MCP_HOME, &apos;.env&apos;)`);[39m
    [31m[1m&gt;[22m[39m[90m 603 |[39m [32m            console.log(`\nAvailable clients for config generation:`);[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 604 |[39m [32m            console.log(`  - claude-code`);[39m
     [90m 605 |[39m [32m            console.log(`  - vscode`);[39m
     [90m 606 |[39m [32m            console.log(`  - cursor`);[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as readWord1] (node_modules/@babel/parser/src/tokenizer/index.ts:1439:16)
      at Parser.readWord1 [as readWord] (node_modules/@babel/parser/src/tokenizer/index.ts:1465:23)
      at Parser.readWord [as getTokenFromCode] (node_modules/@babel/parser/src/tokenizer/index.ts:1048:14)
      at Parser.getTokenFromCode [as nextToken] (node_modules/@babel/parser/src/tokenizer/index.ts:278:10)
      at Parser.nextToken [as next] (node_modules/@babel/parser/src/tokenizer/index.ts:121:10)
      at Parser.next [as parseTemplateElement] (node_modules/@babel/parser/src/parser/expression.ts:1997:10)
      at Parser.parseTemplateElement [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2009:23)
      at Parser.parseTemplate [as parseTaggedTemplateExpression] (node_modules/@babel/parser/src/parser/expression.ts:968:23)
      at Parser.parseTaggedTemplateExpression [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:778:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseTemplateSubstitution] (node_modules/@babel/parser/src/parser/expression.ts:2026:17)
      at Parser.parseTemplateSubstitution [as parseTemplate] (node_modules/@babel/parser/src/parser/expression.ts:2013:31)
      at Parser.parseTemplate (node_modules/@babel/parser/src/parser/expression.ts:1201:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1091:14)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1059:10)
      at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:934:27)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)

FAIL tests/unit/security/xss-protection.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;isomorphic-dompurify&apos; from &apos;tests/unit/security/xss-protection.test.js&apos;

    [0m [90m 2 |[39m
     [90m 3 |[39m [90m// Mock isomorphic-dompurify[39m
    [31m[1m&gt;[22m[39m[90m 4 |[39m jest[33m.[39mmock([32m&apos;isomorphic-dompurify&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 5 |[39m   [36mreturn[39m () [33m=&gt;[39m ({
     [90m 6 |[39m     sanitize[33m:[39m jest[33m.[39mfn((dirty[33m,[39m config) [33m=&gt;[39m {
     [90m 7 |[39m       [90m// Simple mock sanitization[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (tests/unit/security/xss-protection.test.js:4:6)

FAIL mcp-local-setup/tests/unit/update/update-manager.unit.test.js
  ‚óè Test suite failed to run

    TypeError: Cannot destructure property &apos;O_CREAT&apos; of &apos;fs.constants&apos; as it is undefined.

    [0m [90m 11 |[39m [36mconst[39m { pipeline } [33m=[39m require([32m&apos;stream/promises&apos;[39m)[33m;[39m
     [90m 12 |[39m [36mconst[39m { createWriteStream[33m,[39m createReadStream } [33m=[39m require([32m&apos;fs&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 13 |[39m [36mconst[39m tar [33m=[39m require([32m&apos;tar&apos;[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 14 |[39m [36mconst[39m semver [33m=[39m require([32m&apos;semver&apos;[39m)[33m;[39m
     [90m 15 |[39m [36mconst[39m cron [33m=[39m require([32m&apos;node-cron&apos;[39m)[33m;[39m
     [90m 16 |[39m[0m

      at Object.&lt;anonymous&gt; (mcp-local-setup/node_modules/tar/lib/get-write-flag.js:14:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/node_modules/tar/lib/unpack.js:48:17)
      at Object.&lt;anonymous&gt; (mcp-local-setup/node_modules/tar/lib/extract.js:5:16)
      at Object.&lt;anonymous&gt; (mcp-local-setup/node_modules/tar/index.js:8:31)
      at Object.require (mcp-local-setup/scripts/update-manager.js:13:13)
      at Object.require (mcp-local-setup/tests/unit/update/update-manager.unit.test.js:5:23)

FAIL mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;../../../monitoring/logging/service&apos; from &apos;mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js&apos;

    [0m [90m  7 |[39m [36mconst[39m [33mComplianceTools[39m [33m=[39m require([32m&apos;../../../enterprise/compliance/tools&apos;[39m)[33m;[39m
     [90m  8 |[39m [36mconst[39m [33mTenantManager[39m [33m=[39m require([32m&apos;../../../enterprise/multi-tenant/tenancy&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  9 |[39m [36mconst[39m [33mLoggingService[39m [33m=[39m require([32m&apos;../../../monitoring/logging/service&apos;[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 10 |[39m [36mconst[39m [33mAlertingSystem[39m [33m=[39m require([32m&apos;../../../monitoring/alerts/alerting&apos;[39m)[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m&apos;SSO + Compliance Integration&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (mcp-local-setup/tests/integration/phase4/sso-compliance.integration.test.js:9:24)

FAIL tests/unit/security/input-validator.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;validator&apos; from &apos;security/validation/input-validator.js&apos;

    Require stack:
      security/validation/input-validator.js
      tests/unit/security/input-validator.test.js

    [0m [90m  6 |[39m [90m */[39m
     [90m  7 |[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m [36mconst[39m validator [33m=[39m require([32m&apos;validator&apos;[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m  9 |[39m [36mconst[39m createDOMPurify [33m=[39m require([32m&apos;isomorphic-dompurify&apos;[39m)[33m;[39m
     [90m 10 |[39m
     [90m 11 |[39m [36mclass[39m [33mInputValidator[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (security/validation/input-validator.js:8:19)
      at Object.&lt;anonymous&gt; (tests/unit/security/input-validator.test.js:1:79)

FAIL tests/security/injection-prevention.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;validator&apos; from &apos;security/validation/input-validator.js&apos;

    Require stack:
      security/validation/input-validator.js
      tests/security/injection-prevention.test.js

    [0m [90m  6 |[39m [90m */[39m
     [90m  7 |[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m [36mconst[39m validator [33m=[39m require([32m&apos;validator&apos;[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m  9 |[39m [36mconst[39m createDOMPurify [33m=[39m require([32m&apos;isomorphic-dompurify&apos;[39m)[33m;[39m
     [90m 10 |[39m
     [90m 11 |[39m [36mclass[39m [33mInputValidator[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (security/validation/input-validator.js:8:19)
      at Object.&lt;anonymous&gt; (tests/security/injection-prevention.test.js:1:76)

FAIL tests/unit/security/oauth.test.js
  ‚óè OAuth2Provider ‚Ä∫ getUserInfo ‚Ä∫ should return user info

    User info URL not configured

    [0m [90m 211 |[39m   [36masync[39m getUserInfo(accessToken) {
     [90m 212 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mconfig[33m.[39muserInfoURL) {
    [31m[1m&gt;[22m[39m[90m 213 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m&apos;User info URL not configured&apos;[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 214 |[39m     }
     [90m 215 |[39m
     [90m 216 |[39m     [36mtry[39m {[0m

      at OAuth2Provider.getUserInfo (security/api-auth/oauth.js:213:13)
      at Object.getUserInfo (tests/unit/security/oauth.test.js:161:39)

FAIL mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;../../../monitoring/logging/service&apos; from &apos;mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js&apos;

    [0m [90m 15 |[39m [36mconst[39m [33mAzureDeployment[39m [33m=[39m require([32m&apos;../../../deploy/azure/deployment&apos;[39m)[33m;[39m
     [90m 16 |[39m [36mconst[39m [33mMetricsCollector[39m [33m=[39m require([32m&apos;../../../monitoring/metrics/collector&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 17 |[39m [36mconst[39m [33mLoggingService[39m [33m=[39m require([32m&apos;../../../monitoring/logging/service&apos;[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 18 |[39m [36mconst[39m [33mAlertingSystem[39m [33m=[39m require([32m&apos;../../../monitoring/alerts/alerting&apos;[39m)[33m;[39m
     [90m 19 |[39m
     [90m 20 |[39m describe([32m&apos;Phase 4 Full Workflow Integration&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (mcp-local-setup/tests/integration/phase4/full-workflow.integration.test.js:17:24)

FAIL mcp-local-setup/monitoring/tests/logging-service.test.js
  ‚óè Test suite failed to run

    ReferenceError: Cannot access &apos;mockWinston&apos; before initialization

    [0m [90m 29 |[39m }[33m;[39m
     [90m 30 |[39m
    [31m[1m&gt;[22m[39m[90m 31 |[39m jest[33m.[39mmock([32m&apos;winston&apos;[39m[33m,[39m () [33m=&gt;[39m mockWinston)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 32 |[39m
     [90m 33 |[39m jest[33m.[39mmock([32m&apos;winston-daily-rotate-file&apos;[39m[33m,[39m () [33m=&gt;[39m {
     [90m 34 |[39m   [36mreturn[39m jest[33m.[39mfn()[33m.[39mmockImplementation(() [33m=&gt;[39m ({}))[33m;[39m[0m

      at mockWinston (mcp-local-setup/monitoring/tests/logging-service.test.js:31:28)
      at Object.require (mcp-local-setup/monitoring/logging/logger.js:6:17)
      at Object.require (mcp-local-setup/monitoring/tests/logging-service.test.js:5:24)

FAIL tests/sdk-core.test.js
  ‚óè Test suite failed to run

    Cannot find module &apos;../../../../mcp-local-setup/enterprise/sso/authentication&apos; from &apos;sdk/core/index.js&apos;

    Require stack:
      sdk/core/index.js
      tests/sdk-core.test.js

    [0m [90m  5 |[39m [36mconst[39m [33mEventEmitter[39m [33m=[39m require([32m&apos;events&apos;[39m)[33m;[39m
     [90m  6 |[39m [36mconst[39m crypto [33m=[39m require([32m&apos;crypto&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  7 |[39m [36mconst[39m [33mSSOAuthentication[39m [33m=[39m require([32m&apos;../../../../mcp-local-setup/enterprise/sso/authentication&apos;[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m  8 |[39m [36mconst[39m [33mMarketplaceDiscovery[39m [33m=[39m require([32m&apos;../../../../mcp-local-setup/api/marketplace/discovery&apos;[39m)[33m;[39m
     [90m  9 |[39m
     [90m 10 |[39m [36mclass[39m [33mSDKCoreInterface[39m [36mextends[39m [33mEventEmitter[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (sdk/core/index.js:7:27)
      at Object.require (tests/sdk-core.test.js:6:17)

FAIL tests/unit/monitoring/logging/rotation.test.js
  ‚óè Test suite failed to run

    TypeError: Cannot assign to read only property &apos;createGzip&apos; of object &apos;#&lt;Object&gt;&apos;

      at node_modules/jest-mock/build/index.js:784:33
          at Set.forEach (&lt;anonymous&gt;)

FAIL mcp-local-setup/tests/unit/security/network-manager.test.js
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word &apos;public&apos;. (240:14)

    [0m [90m 238 |[39m         [90m// Group services by isolation requirements[39m
     [90m 239 |[39m         [36mconst[39m isolated [33m=[39m [36mnew[39m [33mSet[39m()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 240 |[39m         [36mconst[39m [36mpublic[39m [33m=[39m [36mnew[39m [33mSet[39m()[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 241 |[39m
     [90m 242 |[39m         [36mfor[39m ([36mconst[39m rule [36mof[39m [36mthis[39m[33m.[39mrules[33m.[39mvalues()) {
     [90m 243 |[39m             [36mif[39m (rule[33m.[39mallowed) {[0m

    [0m [90m  6 |[39m [36mconst[39m [33mRateLimiter[39m [33m=[39m require([32m&apos;./rate-limiter&apos;[39m)[33m;[39m
     [90m  7 |[39m [36mconst[39m [33mCORSManager[39m [33m=[39m require([32m&apos;./cors-manager&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m [36mconst[39m [33mServiceIsolation[39m [33m=[39m require([32m&apos;./service-isolation&apos;[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m  9 |[39m
     [90m 10 |[39m [36mclass[39m [33mNetworkManager[39m {
     [90m 11 |[39m     constructor() {[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)
      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)
      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)
      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)
      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)
      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)
      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)
      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)
      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)
      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)
      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)
      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)
      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)
      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)
      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)
      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (&lt;anonymous&gt;)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (&lt;anonymous&gt;)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (&lt;anonymous&gt;)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (&lt;anonymous&gt;)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)
      at Object.require (mcp-local-setup/tests/unit/security/network-manager.test.js:5:24)

FAIL tests/unit/monitoring/errors/error-boundaries.test.js
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax &apos;jsx&apos; isn&apos;t currently enabled (96:11):

    [0m [90m 94 |[39m       [36mif[39m ([33mFallbackComponent[39m) {
     [90m 95 |[39m         [36mreturn[39m (
    [31m[1m&gt;[22m[39m[90m 96 |[39m           [33m&lt;[39m[33mFallbackComponent[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 97 |[39m             error[33m=[39m{error}
     [90m 98 |[39m             errorInfo[33m=[39m{errorInfo}
     [90m 99 |[39m             resetErrorBoundary[33m=[39m{[36mthis[39m[33m.[39mresetErrorBoundary}[0m

    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the &apos;presets&apos; section of your Babel config to enable transformation.
    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the &apos;plugins&apos; section to enable parsing.

    If you already added the plugin for this syntax to your config, it&apos;s possible that your config isn&apos;t being loaded.
    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:
    	npx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js &lt;your build command&gt;
    See https://babeljs.io/docs/configuration#print-effective-configs for more info.

    [0m[31m[1m&gt;[22m[39m[90m 1 |[39m [36mconst[39m [33mErrorBoundaries[39m [33m=[39m require([32m&apos;../../../../monitoring/errors/error-boundaries&apos;[39m)[33m;[39m
     [90m   |[39m                                                                                  [31m[1m^[22m[39m
     [90m 2 |[39m [36mconst[39m [33mEventEmitter[39m [33m=[39m require([32m&apos;events&apos;[39m)[33m;[39m
     [90m 3 |[39m
     [90m 4 |[39m describe([32m&apos;ErrorBoundaries&apos;[39m[33m,[39m () [33m=&gt;[39m {[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)
      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)
      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)
      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)
      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)
      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)
      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)
      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)
      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)
      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)
      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)
      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (&lt;anonymous&gt;)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (&lt;anonymous&gt;)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (&lt;anonymous&gt;)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (&lt;anonymous&gt;)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.&lt;anonymous&gt; (tests/unit/monitoring/errors/error-boundaries.test.js:1:82)

FAIL mcp-local-setup/tests/e2e/installation-flow.e2e.test.js
  ‚óè Installation Flow E2E Tests ‚Ä∫ Initial Installation ‚Ä∫ should set correct file permissions

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 123 |[39m         [36mconst[39m stats [33m=[39m [36mawait[39m fs[33m.[39mstat(filePath)[33m;[39m
     [90m 124 |[39m         [36mconst[39m isExecutable [33m=[39m (stats[33m.[39mmode [33m&amp;[39m [35m0o111[39m) [33m!==[39m [35m0[39m[33m;[39m
    [31m[1m&gt;[22m[39m[90m 125 |[39m         expect(isExecutable)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 126 |[39m       }
     [90m 127 |[39m     })[33m;[39m
     [90m 128 |[39m[0m

      at Object.toBe (mcp-local-setup/tests/e2e/installation-flow.e2e.test.js:125:30)

FAIL mcp-local-setup/tests/integration/security.integration.test.js
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/mcp-local-setup/security/network/service-isolation.js: Unexpected reserved word &apos;public&apos;. (240:14)

    [0m [90m 238 |[39m         [90m// Group services by isolation requirements[39m
     [90m 239 |[39m         [36mconst[39m isolated [33m=[39m [36mnew[39m [33mSet[39m()[33m;[39m
    [31m[1m&gt;[22m[39m[90m 240 |[39m         [36mconst[39m [36mpublic[39m [33m=[39m [36mnew[39m [33mSet[39m()[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 241 |[39m
     [90m 242 |[39m         [36mfor[39m ([36mconst[39m rule [36mof[39m [36mthis[39m[33m.[39mrules[33m.[39mvalues()) {
     [90m 243 |[39m             [36mif[39m (rule[33m.[39mallowed) {[0m

    [0m [90m  6 |[39m [36mconst[39m [33mRateLimiter[39m [33m=[39m require([32m&apos;./rate-limiter&apos;[39m)[33m;[39m
     [90m  7 |[39m [36mconst[39m [33mCORSManager[39m [33m=[39m require([32m&apos;./cors-manager&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  8 |[39m [36mconst[39m [33mServiceIsolation[39m [33m=[39m require([32m&apos;./service-isolation&apos;[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m  9 |[39m
     [90m 10 |[39m [36mclass[39m [33mNetworkManager[39m {
     [90m 11 |[39m     constructor() {[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as checkReservedWord] (node_modules/@babel/parser/src/parser/expression.ts:2886:12)
      at Parser.checkReservedWord [as parseIdentifierName] (node_modules/@babel/parser/src/parser/expression.ts:2848:12)
      at Parser.parseIdentifierName [as parseIdentifier] (node_modules/@babel/parser/src/parser/expression.ts:2805:23)
      at Parser.parseIdentifier [as parseBindingAtom] (node_modules/@babel/parser/src/parser/lval.ts:427:17)
      at Parser.parseBindingAtom [as parseVarId] (node_modules/@babel/parser/src/parser/statement.ts:1618:21)
      at Parser.parseVarId [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1577:12)
      at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)
      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)
      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)
      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2060:14)
      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)
      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)
      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)
      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)
      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)
      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (&lt;anonymous&gt;)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (&lt;anonymous&gt;)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (&lt;anonymous&gt;)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (&lt;anonymous&gt;)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (mcp-local-setup/security/network/network-manager.js:8:26)
      at Object.require (mcp-local-setup/security/index.js:8:24)
      at Object.require (mcp-local-setup/tests/integration/security.integration.test.js:6:32)

FAIL tests/integration/monitoring/error-tracking.test.js
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here&apos;s what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     ‚Ä¢ If you need a custom transformation specify a &quot;transform&quot; option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You&apos;ll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /home/jenner/code/mcps/monitoring/errors/error-boundaries.js: Support for the experimental syntax &apos;jsx&apos; isn&apos;t currently enabled (96:11):

    [0m [90m 94 |[39m       [36mif[39m ([33mFallbackComponent[39m) {
     [90m 95 |[39m         [36mreturn[39m (
    [31m[1m&gt;[22m[39m[90m 96 |[39m           [33m&lt;[39m[33mFallbackComponent[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 97 |[39m             error[33m=[39m{error}
     [90m 98 |[39m             errorInfo[33m=[39m{errorInfo}
     [90m 99 |[39m             resetErrorBoundary[33m=[39m{[36mthis[39m[33m.[39mresetErrorBoundary}[0m

    Add @babel/preset-react (https://github.com/babel/babel/tree/main/packages/babel-preset-react) to the &apos;presets&apos; section of your Babel config to enable transformation.
    If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://github.com/babel/babel/tree/main/packages/babel-plugin-syntax-jsx) to the &apos;plugins&apos; section to enable parsing.

    If you already added the plugin for this syntax to your config, it&apos;s possible that your config isn&apos;t being loaded.
    You can re-run Babel with the BABEL_SHOW_CONFIG_FOR environment variable to show the loaded configuration:
    	npx cross-env BABEL_SHOW_CONFIG_FOR=/home/jenner/code/mcps/monitoring/errors/error-boundaries.js &lt;your build command&gt;
    See https://babeljs.io/docs/configuration#print-effective-configs for more info.

    [0m [90m 1 |[39m [36mconst[39m [33mSentryIntegration[39m [33m=[39m require([32m&apos;../../../monitoring/errors/sentry-integration&apos;[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 2 |[39m [36mconst[39m [33mErrorBoundaries[39m [33m=[39m require([32m&apos;../../../monitoring/errors/error-boundaries&apos;[39m)[33m;[39m
     [90m   |[39m                         [31m[1m^[22m[39m
     [90m 3 |[39m [36mconst[39m [33mAlertRouter[39m [33m=[39m require([32m&apos;../../../monitoring/errors/alert-router&apos;[39m)[33m;[39m
     [90m 4 |[39m [36mconst[39m [33mErrorTracker[39m [33m=[39m require([32m&apos;../../../monitoring/errors/error-tracker&apos;[39m)[33m;[39m
     [90m 5 |[39m [36mconst[39m [33mLogger[39m [33m=[39m require([32m&apos;../../../monitoring/logging/logger&apos;[39m)[33m;[39m[0m

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at Parser.raise [as expectOnePlugin] (node_modules/@babel/parser/src/tokenizer/index.ts:1568:18)
      at Parser.expectOnePlugin [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1264:16)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at Parser.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at Parser.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at Parser.parseExpression [as parseReturnStatement] (node_modules/@babel/parser/src/parser/statement.ts:1110:28)
      at Parser.parseReturnStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:538:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:617:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementOrSloppyAnnexBFunctionDeclaration] (node_modules/@babel/parser/src/parser/statement.ts:446:17)
      at Parser.parseStatementOrSloppyAnnexBFunctionDeclaration [as parseIfStatement] (node_modules/@babel/parser/src/parser/statement.ts:1089:28)
      at Parser.parseIfStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:536:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at Parser.parseFunctionBody [as parseFunctionBodyAndFinish] (node_modules/@babel/parser/src/parser/expression.ts:2585:10)
      at Parser.parseFunctionBodyAndFinish [as parseMethod] (node_modules/@babel/parser/src/parser/expression.ts:2482:31)
      at Parser.parseMethod [as pushClassMethod] (node_modules/@babel/parser/src/parser/statement.ts:2239:12)
      at Parser.pushClassMethod [as parseClassMemberWithIsStatic] (node_modules/@babel/parser/src/parser/statement.ts:2018:12)
      at Parser.parseClassMemberWithIsStatic [as parseClassMember] (node_modules/@babel/parser/src/parser/statement.ts:1933:10)
      at parseClassMember (node_modules/@babel/parser/src/parser/statement.ts:1846:14)
      at Parser.callback [as withSmartMixTopicForbiddingContext] (node_modules/@babel/parser/src/parser/expression.ts:3166:14)
      at Parser.withSmartMixTopicForbiddingContext [as parseClassBody] (node_modules/@babel/parser/src/parser/statement.ts:1818:10)
      at Parser.parseClassBody [as parseClass] (node_modules/@babel/parser/src/parser/statement.ts:1769:22)
      at Parser.parseClass [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:527:21)
      at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (&lt;anonymous&gt;)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (&lt;anonymous&gt;)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (&lt;anonymous&gt;)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (&lt;anonymous&gt;)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (tests/integration/monitoring/error-tracking.test.js:2:25)

FAIL mcp-local-setup/tests/integration/update.integration.test.js
  ‚óè Update Mechanism Integration Tests ‚Ä∫ Platform Self-Update ‚Ä∫ should check for platform updates

    Failed to check for updates: Invalid version. Must be a string. Got type &quot;object&quot;.

    [0m [90m 101 |[39m             [36mreturn[39m applicableUpdates[33m;[39m
     [90m 102 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 103 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check for updates: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m         }
     [90m 105 |[39m     }
     [90m 106 |[39m[0m

      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:38:29)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Platform Self-Update ‚Ä∫ should check beta channel updates

    Failed to check for updates: Invalid version. Must be a string. Got type &quot;object&quot;.

    [0m [90m 101 |[39m             [36mreturn[39m applicableUpdates[33m;[39m
     [90m 102 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 103 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check for updates: ${error.message}`[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m         }
     [90m 105 |[39m     }
     [90m 106 |[39m[0m

      at UpdateManager.checkForUpdates (mcp-local-setup/scripts/update-manager.js:103:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:57:29)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Service Updates ‚Ä∫ should check for service updates

    Failed to check service updates: Cannot read properties of undefined (reading &apos;echo&apos;)

    [0m [90m 64 |[39m             [36mreturn[39m updates[33m;[39m
     [90m 65 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 66 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check service updates: ${error.message}`[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 67 |[39m         }
     [90m 68 |[39m     }
     [90m 69 |[39m[0m

      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:137:36)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Service Updates ‚Ä∫ should handle dependency resolution

    Failed to check service updates: Cannot read properties of undefined (reading &apos;echo&apos;)

    [0m [90m 64 |[39m             [36mreturn[39m updates[33m;[39m
     [90m 65 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 66 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check service updates: ${error.message}`[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 67 |[39m         }
     [90m 68 |[39m     }
     [90m 69 |[39m[0m

      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:161:29)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Service Updates ‚Ä∫ should detect breaking changes

    Failed to check service updates: Cannot read properties of undefined (reading &apos;echo&apos;)

    [0m [90m 64 |[39m             [36mreturn[39m updates[33m;[39m
     [90m 65 |[39m         } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 66 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to check service updates: ${error.message}`[39m)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 67 |[39m         }
     [90m 68 |[39m     }
     [90m 69 |[39m[0m

      at ServiceUpdater.checkServiceUpdates (mcp-local-setup/scripts/service-updater.js:66:19)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:172:29)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Rollback Functionality ‚Ä∫ should fail rollback to incompatible version

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;Incompatible version&quot;
    Received message:   &quot;No backup found for version 0.1.0&quot;

        [0m [90m 266 |[39m             [36mconst[39m backupPath [33m=[39m path[33m.[39mjoin([36mthis[39m[33m.[39mupdateDir[33m,[39m [32m&apos;backups&apos;[39m[33m,[39m [32m`backup-${version}.tar.gz`[39m)[33m;[39m
         [90m 267 |[39m             [36mif[39m ([33m![39m[36mawait[39m [36mthis[39m[33m.[39mfileExists(backupPath)) {
        [31m[1m&gt;[22m[39m[90m 268 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`No backup found for version ${version}`[39m)[33m;[39m
         [90m     |[39m                       [31m[1m^[22m[39m
         [90m 269 |[39m             }
         [90m 270 |[39m
         [90m 271 |[39m             [90m// Check compatibility unless forced[39m[0m

      at UpdateManager.rollback (mcp-local-setup/scripts/update-manager.js:268:23)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:241:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:242:26)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Update Notifications ‚Ä∫ should get current update status

    expect(received).toBeTruthy()

    Received: undefined

    [0m [90m 249 |[39m             
     [90m 250 |[39m             [36mif[39m (status) {
    [31m[1m&gt;[22m[39m[90m 251 |[39m                 expect(status[33m.[39mupdateId)[33m.[39mtoBeTruthy()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 252 |[39m                 expect(status[33m.[39mstatus)[33m.[39mtoMatch([35m/downloading|ready|applying|complete|failed/[39m)[33m;[39m
     [90m 253 |[39m                 expect(status[33m.[39mprogress)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m 254 |[39m                 expect(status[33m.[39mprogress)[33m.[39mtoBeLessThanOrEqual([35m100[39m)[33m;[39m[0m

      at Object.toBeTruthy (mcp-local-setup/tests/integration/update.integration.test.js:251:41)

  ‚óè Update Mechanism Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should prevent downgrade without force flag

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;Downgrade not allowed&quot;
    Received message:   &quot;metadata is not defined&quot;

        [0m [90m 244 |[39m                 installedAt[33m:[39m [36mnew[39m [33mDate[39m()[33m,[39m
         [90m 245 |[39m                 installedBy[33m:[39m [32m&apos;system&apos;[39m[33m,[39m
        [31m[1m&gt;[22m[39m[90m 246 |[39m                 previousVersion[33m:[39m metadata[33m.[39mcurrentVersion[33m,[39m
         [90m     |[39m                                  [31m[1m^[22m[39m
         [90m 247 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m
         [90m 248 |[39m                 notes[33m:[39m error[33m.[39mmessage
         [90m 249 |[39m             })[33m;[39m[0m

      at UpdateManager.metadata [as applyUpdate] (mcp-local-setup/scripts/update-manager.js:246:34)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/integration/update.integration.test.js:336:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/integration/update.integration.test.js:337:26)

FAIL mcp-local-setup/tests/unit/cli-commands-health.unit.test.js
  ‚óè Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)

FAIL mcp-local-setup/tests/unit/security/auth-manager.test.js
  ‚óè AuthManager ‚Ä∫ rotateToken ‚Ä∫ should rotate valid token

    Bad &quot;options.expiresIn&quot; option the payload already has an &quot;exp&quot; property.

    [0m [90m 218 |[39m [90m     */[39m
     [90m 219 |[39m     generateJWT(payload) {
    [31m[1m&gt;[22m[39m[90m 220 |[39m         [36mreturn[39m jwt[33m.[39msign(payload[33m,[39m [36mthis[39m[33m.[39mjwtSecret[33m,[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 221 |[39m             expiresIn[33m:[39m [32m&apos;1h&apos;[39m
     [90m 222 |[39m         })[33m;[39m
     [90m 223 |[39m     }[0m

      at Object.&lt;anonymous&gt;.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)
      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)
      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/security/auth-manager.test.js:122:29)

  ‚óè AuthManager ‚Ä∫ rotateToken ‚Ä∫ should keep old token valid during grace period

    Bad &quot;options.expiresIn&quot; option the payload already has an &quot;exp&quot; property.

    [0m [90m 218 |[39m [90m     */[39m
     [90m 219 |[39m     generateJWT(payload) {
    [31m[1m&gt;[22m[39m[90m 220 |[39m         [36mreturn[39m jwt[33m.[39msign(payload[33m,[39m [36mthis[39m[33m.[39mjwtSecret[33m,[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 221 |[39m             expiresIn[33m:[39m [32m&apos;1h&apos;[39m
     [90m 222 |[39m         })[33m;[39m
     [90m 223 |[39m     }[0m

      at Object.&lt;anonymous&gt;.module.exports [as sign] (mcp-local-setup/node_modules/jsonwebtoken/sign.js:163:20)
      at AuthManager.sign [as generateJWT] (mcp-local-setup/security/auth/auth-manager.js:220:20)
      at AuthManager.generateJWT (mcp-local-setup/security/auth/auth-manager.js:156:31)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/security/auth-manager.test.js:131:29)

FAIL tests/integration/docker/build-validation.test.js (5.181 s)
  ‚óè Docker Build Validation ‚Ä∫ Dockerfile Syntax Validation ‚Ä∫ should validate Python Dockerfile

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m  98 |[39m       }
     [90m  99 |[39m       
    [31m[1m&gt;[22m[39m[90m 100 |[39m       expect(result[33m.[39mvalid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 101 |[39m     })[33m;[39m
     [90m 102 |[39m
     [90m 103 |[39m     it([32m&apos;should validate Go Dockerfile&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBe (tests/integration/docker/build-validation.test.js:100:28)

  ‚óè Docker Build Validation ‚Ä∫ Build Configuration ‚Ä∫ should use build arguments for flexibility

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 206 |[39m         [36mconst[39m hasArgs [33m=[39m content[33m.[39mincludes([32m&apos;ARG&apos;[39m)[33m;[39m
     [90m 207 |[39m         
    [31m[1m&gt;[22m[39m[90m 208 |[39m         expect(hasArgs)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 209 |[39m       }
     [90m 210 |[39m     })[33m;[39m
     [90m 211 |[39m[0m

      at Object.toBe (tests/integration/docker/build-validation.test.js:208:25)

  ‚óè Docker Build Validation ‚Ä∫ Build Configuration ‚Ä∫ should have proper labels

    expect(received).not.toBeNull()

    Received: null

    [0m [90m 228 |[39m         [90m// Check for any LABEL instruction (more flexible)[39m
     [90m 229 |[39m         [36mconst[39m hasLabels [33m=[39m content[33m.[39mmatch([35m/LABEL\s+\w+=/[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 230 |[39m         expect(hasLabels)[33m.[39mnot[33m.[39mtoBeNull()[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 231 |[39m       }
     [90m 232 |[39m     })[33m;[39m
     [90m 233 |[39m   })[33m;[39m[0m

      at Object.toBeNull (tests/integration/docker/build-validation.test.js:230:31)

  ‚óè Docker Build Validation ‚Ä∫ Docker Build Tests (requires Docker) ‚Ä∫ should build Node.js image successfully

    expect(received).not.toThrow()

    Error name:    &quot;Error&quot;
    Error message: &quot;Command failed: docker build -f /home/jenner/code/mcps/docker/production/node.Dockerfile --label test=true -t test-node:latest /home/jenner/code/mcps/docker/production&quot;

        [0m [90m 253 |[39m       
         [90m 254 |[39m       expect(() [33m=&gt;[39m {
        [31m[1m&gt;[22m[39m[90m 255 |[39m         execSync(buildCommand[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
         [90m     |[39m         [31m[1m^[22m[39m
         [90m 256 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 257 |[39m     })[33m;[39m
         [90m 258 |[39m[0m

      at execSync (tests/integration/docker/build-validation.test.js:255:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:256:14)

  ‚óè Docker Build Validation ‚Ä∫ Docker Build Tests (requires Docker) ‚Ä∫ should build Python image successfully

    expect(received).not.toThrow()

    Error name:    &quot;Error&quot;
    Error message: &quot;Command failed: docker build -f /home/jenner/code/mcps/docker/production/python.Dockerfile --label test=true -t test-python:latest /home/jenner/code/mcps/docker/production&quot;

        [0m [90m 261 |[39m       
         [90m 262 |[39m       expect(() [33m=&gt;[39m {
        [31m[1m&gt;[22m[39m[90m 263 |[39m         execSync(buildCommand[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
         [90m     |[39m         [31m[1m^[22m[39m
         [90m 264 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 265 |[39m     })[33m;[39m
         [90m 266 |[39m[0m

      at execSync (tests/integration/docker/build-validation.test.js:263:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:264:14)

  ‚óè Docker Build Validation ‚Ä∫ Docker Build Tests (requires Docker) ‚Ä∫ should build Go image successfully

    expect(received).not.toThrow()

    Error name:    &quot;Error&quot;
    Error message: &quot;Command failed: docker build -f /home/jenner/code/mcps/docker/production/go.Dockerfile --label test=true -t test-go:latest /home/jenner/code/mcps/docker/production&quot;

        [0m [90m 269 |[39m       
         [90m 270 |[39m       expect(() [33m=&gt;[39m {
        [31m[1m&gt;[22m[39m[90m 271 |[39m         execSync(buildCommand[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
         [90m     |[39m         [31m[1m^[22m[39m
         [90m 272 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 273 |[39m     })[33m;[39m
         [90m 274 |[39m[0m

      at execSync (tests/integration/docker/build-validation.test.js:271:9)
      at Object.&lt;anonymous&gt; (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)
      at Object.toThrow (tests/integration/docker/build-validation.test.js:272:14)

FAIL tests/unit/monitoring/alert-router.test.js (11.546 s)
  ‚óè AlertRouter ‚Ä∫ alert actions ‚Ä∫ should handle action errors gracefully

    thrown: &quot;Exceeded timeout of 10000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;

    [0m [90m 290 |[39m     })[33m;[39m
     [90m 291 |[39m
    [31m[1m&gt;[22m[39m[90m 292 |[39m     it([32m&apos;should handle action errors gracefully&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 293 |[39m       [36mconst[39m mockSend [33m=[39m jest[33m.[39mfn()[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m&apos;Send failed&apos;[39m))[33m;[39m
     [90m 294 |[39m       
     [90m 295 |[39m       alertRouter[33m.[39maddChannel([32m&apos;failing&apos;[39m[33m,[39m { send[33m:[39m mockSend })[33m;[39m[0m

      at it (tests/unit/monitoring/alert-router.test.js:292:5)
      at describe (tests/unit/monitoring/alert-router.test.js:224:3)
      at Object.describe (tests/unit/monitoring/alert-router.test.js:3:1)

FAIL mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js (15.451 s)
  ‚óè CI/CD and Orchestration Integration ‚Ä∫ Rollback works across CI/CD and orchestration

    expect(received).toBe(expected) // Object.is equality

    Expected: &quot;rolled-back&quot;
    Received: &quot;Running&quot;

    [0m [90m  97 |[39m     [90m// Then orchestration should also rollback[39m
     [90m  98 |[39m     [36mconst[39m k8sStatus [33m=[39m [36mawait[39m k8s[33m.[39mgetDeploymentStatus(deployment[33m.[39mdeploymentId)[33m;[39m
    [31m[1m&gt;[22m[39m[90m  99 |[39m     expect(k8sStatus[33m.[39mstatus)[33m.[39mtoBe([32m&apos;rolled-back&apos;[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 100 |[39m     expect(rollbackResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 101 |[39m   })[33m;[39m
     [90m 102 |[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:99:30)

  ‚óè CI/CD and Orchestration Integration ‚Ä∫ CI/CD test results influence orchestration deployment

    expect(received).toContain(expected) // indexOf

    Expected substring: &quot;Tests must pass before deployment&quot;
    Received string:    &quot;fail is not defined&quot;

    [0m [90m 115 |[39m         fail([32m&apos;Deployment should have been prevented&apos;[39m)[33m;[39m
     [90m 116 |[39m       } [36mcatch[39m (error) {
    [31m[1m&gt;[22m[39m[90m 117 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m&apos;Tests must pass before deployment&apos;[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 118 |[39m       }
     [90m 119 |[39m     }
     [90m 120 |[39m   })[33m;[39m[0m

      at Object.toContain (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:117:31)

  ‚óè CI/CD and Orchestration Integration ‚Ä∫ Orchestration scaling triggers CI/CD metrics update

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 3

    [0m [90m 132 |[39m     [90m// Then CI/CD should reflect the scaling[39m
     [90m 133 |[39m     [36mconst[39m metrics [33m=[39m [36mawait[39m cicd[33m.[39mgetDeploymentStatus(deployment[33m.[39mdeploymentId)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 134 |[39m     expect(metrics[33m.[39mdetails[33m.[39mreplicas)[33m.[39mtoBe([35m5[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 135 |[39m     expect(metrics[33m.[39mdetails[33m.[39mscalingEvents)[33m.[39mtoContainEqual(
     [90m 136 |[39m       expect[33m.[39mobjectContaining({
     [90m 137 |[39m         type[33m:[39m [32m&apos;manual-scale&apos;[39m[33m,[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/phase5/cicd-orchestration-integration.test.js:134:38)

FAIL mcp-local-setup/tests/unit/cli/publish.test.js
  ‚óè Test suite failed to run

    A jest worker process (pid=3738405) was terminated by another process: signal=SIGTERM, exitCode=null. Operating system logs may contain more information on why this occurred.

      at ChildProcessWorker._onExit (node_modules/jest-worker/build/workers/ChildProcessWorker.js:370:23)

FAIL mcp-local-setup/tests/unit/update/service-updater.unit.test.js (30.539 s)
  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should update service successfully

    Service filesystem failed to start

    [0m [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
     [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {
    [31m[1m&gt;[22m[39m[90m 571 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} failed to start`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 572 |[39m             }
     [90m 573 |[39m         }
     [90m 574 |[39m         [0m

      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:151:28)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should allow incompatible update with force flag

    Service filesystem failed to start

    [0m [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
     [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {
    [31m[1m&gt;[22m[39m[90m 571 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} failed to start`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 572 |[39m             }
     [90m 573 |[39m         }
     [90m 574 |[39m         [0m

      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:189:28)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should update dependencies first

    Service dependency1 is not installed

    [0m [90m 76 |[39m             [36mconst[39m installed [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mgetInstalledServices()[33m;[39m
     [90m 77 |[39m             [36mif[39m ([33m![39minstalled[service]) {
    [31m[1m&gt;[22m[39m[90m 78 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} is not installed`[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 79 |[39m             }
     [90m 80 |[39m
     [90m 81 |[39m             [90m// Get update info[39m[0m

      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:78:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:109:17)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:201:13)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should backup service before update

    Service filesystem failed to start

    [0m [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
     [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {
    [31m[1m&gt;[22m[39m[90m 571 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} failed to start`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 572 |[39m             }
     [90m 573 |[39m         }
     [90m 574 |[39m         [0m

      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:207:13)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should run migrations after update

    Service filesystem failed to start

    [0m [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
     [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {
    [31m[1m&gt;[22m[39m[90m 571 |[39m                 [36mthrow[39m [36mnew[39m [33mError[39m([32m`Service ${service} failed to start`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 572 |[39m             }
     [90m 573 |[39m         }
     [90m 574 |[39m         [0m

      at ServiceUpdater.verifyService (mcp-local-setup/scripts/service-updater.js:571:23)
      at ServiceUpdater.updateService (mcp-local-setup/scripts/service-updater.js:128:13)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:226:13)

  ‚óè ServiceUpdater ‚Ä∫ updateService ‚Ä∫ should rollback on failure

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: &quot;filesystem&quot;, &quot;1.0.0&quot;

    Number of calls: 0

    [0m [90m 249 |[39m             )[33m.[39mrejects[33m.[39mtoThrow([32m&apos;Start failed&apos;[39m)[33m;[39m
     [90m 250 |[39m
    [31m[1m&gt;[22m[39m[90m 251 |[39m             expect(rollbackSpy)[33m.[39mtoHaveBeenCalledWith([32m&apos;filesystem&apos;[39m[33m,[39m [32m&apos;1.0.0&apos;[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 252 |[39m         })[33m;[39m
     [90m 253 |[39m     })[33m;[39m
     [90m 254 |[39m[0m

      at Object.toHaveBeenCalledWith (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:251:33)

  ‚óè ServiceUpdater ‚Ä∫ verifyService ‚Ä∫ should verify Docker service is running

    expect(received).resolves.not.toThrow()

    Received promise rejected instead of resolved
    Rejected to value: [TypeError: Cannot read properties of undefined (reading &apos;type&apos;)]

    [0m [90m 344 |[39m             execSync[33m.[39mmockReturnValue([32m&apos;Up 5 seconds\n&apos;[39m)[33m;[39m
     [90m 345 |[39m
    [31m[1m&gt;[22m[39m[90m 346 |[39m             [36mawait[39m expect(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 347 |[39m                 serviceUpdater[33m.[39mverifyService([32m&apos;filesystem&apos;[39m[33m,[39m [32m&apos;1.1.0&apos;[39m)
     [90m 348 |[39m             )[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 349 |[39m         })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:346:19)

  ‚óè ServiceUpdater ‚Ä∫ verifyService ‚Ä∫ should throw if Docker service not running

    expect(received).rejects.toThrow(expected)

    Expected substring: &quot;Service filesystem failed to start&quot;
    Received message:   &quot;Cannot read properties of undefined (reading &apos;type&apos;)&quot;

        [0m [90m 565 |[39m         [36mconst[39m installed [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mgetInstalledServices()[33m;[39m
         [90m 566 |[39m         
        [31m[1m&gt;[22m[39m[90m 567 |[39m         [36mif[39m (installed[service][33m.[39mtype [33m===[39m [32m&apos;docker&apos;[39m) {
         [90m     |[39m                                [31m[1m^[22m[39m
         [90m 568 |[39m             [90m// Check Docker container is running[39m
         [90m 569 |[39m             [36mconst[39m output [33m=[39m execSync([32m`docker ps --filter name=mcp-${service} --format &quot;{{.Status}}&quot;`[39m[33m,[39m { encoding[33m:[39m [32m&apos;utf8&apos;[39m })[33m;[39m
         [90m 570 |[39m             [36mif[39m ([33m![39moutput[33m.[39mincludes([32m&apos;Up&apos;[39m)) {[0m

      at ServiceUpdater.type [as verifyService] (mcp-local-setup/scripts/service-updater.js:567:32)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:354:13)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:356:23)

  ‚óè ServiceUpdater ‚Ä∫ rollbackService ‚Ä∫ should rollback to previous version

    TypeError: Cannot read properties of undefined (reading &apos;type&apos;)

    [0m [90m 431 |[39m         [36mconst[39m installed [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mgetInstalledServices()[33m;[39m
     [90m 432 |[39m         
    [31m[1m&gt;[22m[39m[90m 433 |[39m         [36mif[39m (installed[service][33m.[39mtype [33m===[39m [32m&apos;docker&apos;[39m) {
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 434 |[39m             execSync([32m`docker stop mcp-${service}`[39m[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
     [90m 435 |[39m         } [36melse[39m {
     [90m 436 |[39m             [90m// Stop local service (would need process management)[39m[0m

      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)
      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:366:13)

  ‚óè ServiceUpdater ‚Ä∫ rollbackService ‚Ä∫ should use most recent backup

    TypeError: Cannot read properties of undefined (reading &apos;type&apos;)

    [0m [90m 431 |[39m         [36mconst[39m installed [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mgetInstalledServices()[33m;[39m
     [90m 432 |[39m         
    [31m[1m&gt;[22m[39m[90m 433 |[39m         [36mif[39m (installed[service][33m.[39mtype [33m===[39m [32m&apos;docker&apos;[39m) {
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 434 |[39m             execSync([32m`docker stop mcp-${service}`[39m[33m,[39m { stdio[33m:[39m [32m&apos;ignore&apos;[39m })[33m;[39m
     [90m 435 |[39m         } [36melse[39m {
     [90m 436 |[39m             [90m// Stop local service (would need process management)[39m[0m

      at ServiceUpdater.type [as stopService] (mcp-local-setup/scripts/service-updater.js:433:32)
      at ServiceUpdater.rollbackService (mcp-local-setup/scripts/service-updater.js:598:9)
      at Object.&lt;anonymous&gt; (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:374:13)

  ‚óè ServiceUpdater ‚Ä∫ runMigrations ‚Ä∫ should run applicable migrations in order

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: &gt;= 1
    Received number of calls:    0

    [0m [90m 435 |[39m             [36mawait[39m serviceUpdater[33m.[39mrunMigrations([32m&apos;filesystem&apos;[39m[33m,[39m [32m&apos;1.0.0&apos;[39m[33m,[39m [32m&apos;1.2.0&apos;[39m)[33m;[39m
     [90m 436 |[39m
    [31m[1m&gt;[22m[39m[90m 437 |[39m             expect(migration1[33m.[39mup)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 438 |[39m             expect(migration2[33m.[39mup)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 439 |[39m         })[33m;[39m
     [90m 440 |[39m[0m

      at Object.toHaveBeenCalled (mcp-local-setup/tests/unit/update/service-updater.unit.test.js:437:35)

FAIL mcp-local-setup/tests/integration/service-lifecycle.integration.test.js (67.222 s)
  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Start ‚Ä∫ should start a service successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 44 |[39m       [90m// Start the service[39m
     [90m 45 |[39m       [36mconst[39m started [33m=[39m [36mawait[39m startService(testServiceName[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 46 |[39m       expect(started)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 47 |[39m
     [90m 48 |[39m       [90m// Mark for cleanup[39m
     [90m 49 |[39m       testResources[33m.[39mpush([32m`service:${testServiceName}`[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:46:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Start ‚Ä∫ should handle starting already running service

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 61 |[39m       [90m// Try to start again[39m
     [90m 62 |[39m       [36mconst[39m startedAgain [33m=[39m [36mawait[39m startService(testServiceName[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 63 |[39m       expect(startedAgain)[33m.[39mtoBe([36mtrue[39m)[33m;[39m [90m// Docker compose should handle this gracefully[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 64 |[39m     })[33m;[39m
     [90m 65 |[39m
     [90m 66 |[39m     it([32m&apos;should start multiple services in order&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:63:28)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Start ‚Ä∫ should start multiple services in order

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 71 |[39m         [36mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m
     [90m 72 |[39m         [36mconst[39m started [33m=[39m [36mawait[39m startService(service[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 73 |[39m         expect(started)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 74 |[39m         
     [90m 75 |[39m         startTimes[33m.[39mpush({ service[33m,[39m time[33m:[39m startTime })[33m;[39m
     [90m 76 |[39m         testResources[33m.[39mpush([32m`service:${service}`[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:73:25)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Start ‚Ä∫ should respect environment variables when starting

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 91 |[39m       })[33m;[39m
     [90m 92 |[39m       
    [31m[1m&gt;[22m[39m[90m 93 |[39m       expect(started)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 94 |[39m       testResources[33m.[39mpush([32m`service:${testServiceName}`[39m)[33m;[39m
     [90m 95 |[39m       
     [90m 96 |[39m       [36mdelete[39m process[33m.[39menv[33m.[39m[33mTEST_SERVICE_PORT[39m[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:93:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Stop ‚Ä∫ should stop a running service successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 106 |[39m       [90m// Stop the service[39m
     [90m 107 |[39m       [36mconst[39m stopped [33m=[39m [36mawait[39m stopService(testServiceName[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 108 |[39m       expect(stopped)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 109 |[39m
     [90m 110 |[39m       [90m// Verify service is stopped[39m
     [90m 111 |[39m       [36mawait[39m expect(waitForHealthy(testServiceName[33m,[39m [35m5000[39m))[33m.[39mresolves[33m.[39mtoBe([36mfalse[39m)[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:108:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Stop ‚Ä∫ should handle stopping already stopped service

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 115 |[39m       [90m// Try to stop a service that&apos;s not running[39m
     [90m 116 |[39m       [36mconst[39m stopped [33m=[39m [36mawait[39m stopService([32m&apos;non-existent-service&apos;[39m[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 117 |[39m       expect(stopped)[33m.[39mtoBe([36mtrue[39m)[33m;[39m [90m// Docker compose returns 0 even for non-existent services[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 118 |[39m     })[33m;[39m
     [90m 119 |[39m
     [90m 120 |[39m     it([32m&apos;should stop dependent services in correct order&apos;[39m[33m,[39m [36masync[39m () [33m=&gt;[39m {[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:117:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Stop ‚Ä∫ should stop dependent services in correct order

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 126 |[39m       [90m// Stop API first (which depends on database)[39m
     [90m 127 |[39m       [36mconst[39m apiStopped [33m=[39m [36mawait[39m stopService([32m&apos;api&apos;[39m[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 128 |[39m       expect(apiStopped)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 129 |[39m
     [90m 130 |[39m       [90m// Then stop database[39m
     [90m 131 |[39m       [36mconst[39m dbStopped [33m=[39m [36mawait[39m stopService([32m&apos;database&apos;[39m[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:128:26)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Restart ‚Ä∫ should restart a service successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 141 |[39m       
     [90m 142 |[39m       [36mconst[39m healthyBefore [33m=[39m [36mawait[39m waitForHealthy(testServiceName[33m,[39m [35m10000[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 143 |[39m       expect(healthyBefore)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 144 |[39m
     [90m 145 |[39m       [90m// Restart service[39m
     [90m 146 |[39m       [36mconst[39m restarted [33m=[39m [36mawait[39m [36mnew[39m [33mPromise[39m((resolve) [33m=&gt;[39m {[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:143:29)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Dependencies ‚Ä∫ should start dependencies automatically

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 195 |[39m       [90m// Start only the API service[39m
     [90m 196 |[39m       [36mconst[39m started [33m=[39m [36mawait[39m startService(apiService[33m.[39mname[33m,[39m { silent[33m:[39m [36mtrue[39m })[33m;[39m
    [31m[1m&gt;[22m[39m[90m 197 |[39m       expect(started)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 198 |[39m       
     [90m 199 |[39m       testResources[33m.[39mpush([32m&apos;service:api-with-deps&apos;[39m[33m,[39m [32m&apos;service:database&apos;[39m[33m,[39m [32m&apos;service:cache&apos;[39m)[33m;[39m
     [90m 200 |[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:197:23)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Health Monitoring ‚Ä∫ should detect when service becomes unhealthy

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 228 |[39m       
     [90m 229 |[39m       [36mconst[39m initialHealth [33m=[39m [36mawait[39m waitForHealthy(testServiceName[33m,[39m [35m10000[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 230 |[39m       expect(initialHealth)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 231 |[39m
     [90m 232 |[39m       [90m// Simulate service becoming unhealthy[39m
     [90m 233 |[39m       [90m// (In a real scenario, you might trigger an error condition)[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:230:29)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Service Health Monitoring ‚Ä∫ should recover from temporary failures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 265 |[39m       [90m// Service should recover and become healthy again[39m
     [90m 266 |[39m       [36mconst[39m recovered [33m=[39m [36mawait[39m waitForHealthy(testServiceName[33m,[39m [35m30000[39m)[33m;[39m
    [31m[1m&gt;[22m[39m[90m 267 |[39m       expect(recovered)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 268 |[39m     })[33m;[39m
     [90m 269 |[39m   })[33m;[39m
     [90m 270 |[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:267:25)

  ‚óè Service Lifecycle Integration Tests ‚Ä∫ Resource Cleanup ‚Ä∫ should remove orphaned containers

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 297 |[39m       })[33m;[39m
     [90m 298 |[39m       
    [31m[1m&gt;[22m[39m[90m 299 |[39m       expect(cleaned)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 300 |[39m     })[33m;[39m
     [90m 301 |[39m   })[33m;[39m
     [90m 302 |[39m })[33m;[39m[0m

      at Object.toBe (mcp-local-setup/tests/integration/service-lifecycle.integration.test.js:299:23)


Test Suites: 57 failed, 38 passed, 95 total
Tests:       286 failed, 9 skipped, 1390 passed, 1685 total
Snapshots:   0 total
Time:        68.078 s, estimated 71 s
Ran all test suites.
Test results written to: test-results/unit-results.json
</system-err>
  </testsuite>
</testsuites>
